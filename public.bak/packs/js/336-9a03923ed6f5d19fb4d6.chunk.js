(window.webpackJsonp=window.webpackJsonp||[]).push([[336],{125:function(e,t,n){"use strict";n.d(t,"m",(function(){return f})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return v})),n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return S})),n.d(t,"i",(function(){return y})),n.d(t,"f",(function(){return C})),n.d(t,"h",(function(){return E})),n.d(t,"l",(function(){return T})),n.d(t,"g",(function(){return I})),n.d(t,"k",(function(){return k})),n.d(t,"j",(function(){return L})),n.d(t,"p",(function(){return N})),n.d(t,"x",(function(){return w})),n.d(t,"o",(function(){return R})),n.d(t,"n",(function(){return U})),n.d(t,"t",(function(){return F})),n.d(t,"u",(function(){return D})),n.d(t,"r",(function(){return P})),n.d(t,"w",(function(){return H})),n.d(t,"q",(function(){return q})),n.d(t,"v",(function(){return K})),n.d(t,"s",(function(){return $}));var s=n(7),a=n(13),o=n.n(a),i=n(22),r=n(17),c=n(215),u=n(164),d=n(6),l=n(4),p=n(271),h=n(18),g=n(58);const m=(e,t)=>{"permission"in Notification||(Notification.permission=e),t(Notification.permission)},b=e=>{(()=>{try{Notification.requestPermission().then()}catch(e){return!1}return!0})()?Notification.requestPermission().then((t=>m(t,e))).catch(console.warn):Notification.requestPermission((t=>m(t,e)))},f="NOTIFICATIONS_UPDATE",_="NOTIFICATIONS_EXPAND_REQUEST",O="NOTIFICATIONS_EXPAND_SUCCESS",v="NOTIFICATIONS_EXPAND_FAIL",j="NOTIFICATIONS_FILTER_SET",S="NOTIFICATIONS_CLEAR",y="NOTIFICATIONS_SCROLL_TOP",C="NOTIFICATIONS_LOAD_PENDING",E="NOTIFICATIONS_MOUNT",T="NOTIFICATIONS_UNMOUNT",I="NOTIFICATIONS_MARK_AS_READ",k="NOTIFICATIONS_SET_BROWSER_SUPPORT",L="NOTIFICATIONS_SET_BROWSER_PERMISSION";Object(d.f)({mention:{id:"notification.mention",defaultMessage:"{name} mentioned you"},group:{id:"notifications.group",defaultMessage:"{count} notifications"}});const M=(e,t)=>{const n=t.filter((e=>-1!==["follow","follow_request","admin.sign_up"].indexOf(e.type))).map((e=>e.account.id));n.length>0&&e(Object(i.S)(n))},N=()=>({type:C});function w(e,t,n){return(s,a)=>{const u=a().getIn(["settings","notifications","quickFilter","active"]),d="all"===u?a().getIn(["settings","notifications","shows",e.type],!0):u===e.type,l=a().getIn(["settings","notifications","alerts",e.type],!0),g=a().getIn(["settings","notifications","sounds",e.type],!0);let m=!1;if(["mention","status"].includes(e.type)&&e.status.filtered){const t=e.status.filtered.filter((e=>e.filter.context.includes("notifications")));if(t.some((e=>"hide"===e.filter.filter_action)))return;m=t.length>0}if(["follow_request"].includes(e.type)&&s(Object(i.P)()),s(Object(c.d)()),d?(s(Object(r.g)(e.account)),e.status&&s(Object(r.j)(e.status)),e.report&&s(Object(r.g)(e.report.target_account)),s({type:f,notification:e,usePendingItems:h.F,meta:g&&!m?{sound:"boop"}:void 0}),M(s,[e])):g&&!m&&s({type:"NOTIFICATIONS_UPDATE_NOOP",meta:{sound:"boop"}}),void 0!==window.Notification&&l&&!m){const s=new o.a(t[`notification.${e.type}`],n).format({name:e.account.display_name.length>0?e.account.display_name:e.account.username}),a=e.status&&e.status.spoiler_text.length>0?e.status.spoiler_text:Object(p.a)(e.status?e.status.content:""),i=new Notification(s,{body:a,icon:e.account.avatar,tag:e.id});i.addEventListener("click",(()=>{window.focus(),i.close()}))}}}const x=()=>{};let A=new AbortController;function R(e,t){let{maxId:n,forceLoad:a}=void 0===e?{}:e;return void 0===t&&(t=x),(e,o)=>{const i=o().getIn(["settings","notifications","quickFilter","active"]),u=o().get("notifications"),d=!!n;if(u.get("isLoading")){if(!a)return void t();A.abort(),A=new AbortController}const p={max_id:n,exclude_types:"all"===i?(b=o(),b.getIn(["settings","notifications","shows"]).filter((e=>!e)).keySeq().toJS()):(m=i,Object(l.List)(["follow","follow_request","favourite","reaction","reblog","mention","poll","status","update","admin.sign_up","admin.report"]).filterNot((e=>e===m)).toJS())};var m,b;if(!p.max_id&&u.get("items",Object(l.List)()).size+u.get("pendingItems",Object(l.List)()).size>0){const e=u.getIn(["pendingItems",0,"id"]),t=u.getIn(["items",0,"id"]);e&&t&&Object(g.a)(e,t)>0?p.since_id=e:p.since_id=t||e}const f=!!p.since_id;e(function(e){return{type:_,skipLoading:!e}}(d)),Object(s.a)(o).get("/api/v1/notifications",{params:p,signal:A.signal}).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(r.h)(t.data.map((e=>e.account)))),e(Object(r.k)(t.data.map((e=>e.status)).filter((e=>!!e)))),e(Object(r.h)(t.data.filter((e=>e.report)).map((e=>e.report.target_account)))),e(function(e,t,n,s,a){return{type:O,notifications:e,next:t,isLoadingRecent:s,usePendingItems:a,skipLoading:!n}}(t.data,n?n.uri:null,d,f,f&&h.F)),M(e,t.data),e(Object(c.d)())})).catch((t=>{e(function(e,t){return{type:v,error:e,skipLoading:!t,skipAlert:!t||"AbortError"===e.name}}(t,d))})).finally((()=>{t()}))}}function U(){return(e,t)=>{e({type:S}),Object(s.a)(t).post("/api/v1/notifications/clear")}}function F(e){return{type:y,top:e}}function D(e){return t=>{t({type:j,path:["notifications","quickFilter","active"],value:e}),t(R({forceLoad:!0})),t(Object(u.d)())}}const P=()=>({type:E}),H=()=>({type:T}),q=()=>({type:I});function K(){return e=>{var t;e((t="Notification"in window,{type:k,value:t})),"Notification"in window&&e(B(Notification.permission)),"Notification"in window&&"permissions"in navigator&&navigator.permissions.query({name:"notifications"}).then((t=>{t.onchange=()=>e(B(Notification.permission))})).catch(console.warn)}}function $(e){return void 0===e&&(e=x),t=>{b((n=>{t(B(n)),e(n)}))}}function B(e){return{type:L,value:e}}},1299:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),o=n(40),i=n.n(o),r=n(125),c=n(0),u=n(2),d=n.n(u),l=n(298),p=n(6),h=n(12),g=n(1648),m=n(1605),b=n(1365),f=n(725),_=n(62),O=n.n(_),v=n(10),j=n.n(v),S=n(1307),y=n(1647),C=n(1649),E=n(722),T=n(723),I=n(727),k=n(285),L=n(15),M=n(47),N=n(217),w=n(657),x=n(241),A=n(215),R=n(9),U=n(1650),F=n(1366),D=n.n(F),P=n(1304),H=n(1302),q=n(20);class K extends q.a{render(){let{title:e,icon:t,multiColumn:n}=this.props;return Object(c.a)(P.a,{},void 0,Object(c.a)(H.a,{icon:t,title:e,multiColumn:n,focusable:!1,placeholder:!0}),Object(c.a)("div",{className:"scrollable"}))}}K.propTypes={title:d.a.oneOfType([d.a.node,d.a.string]),icon:d.a.string,multiColumn:d.a.bool},K.defaultProps={title:"",icon:""};var $,B,W=n(201),Q=n(1203),z=n(18);class G extends a.a.PureComponent{constructor(){super(...arguments),this.state={hovering:!1},this.handleMouseEnter=()=>{const{animate:e}=this.props;e||this.setState({hovering:!0})},this.handleMouseLeave=()=>{const{animate:e}=this.props;e||this.setState({hovering:!1})}}render(){const{src:e,staticSrc:t,className:n,animate:s}=this.props,{hovering:a}=this.state;return Object(c.a)("img",{className:n,src:a||s?e:t,alt:"",role:"presentation",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave})}}G.defaultProps={animate:z.a};class X extends a.a.PureComponent{constructor(){super(...arguments),this.state={copied:!1},this.handleClick=()=>{const{value:e}=this.props;navigator.clipboard.writeText(e),this.setState({copied:!0}),this.timeout=setTimeout((()=>this.setState({copied:!1})),700)}}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}render(){const{children:e}=this.props,{copied:t}=this.state;return Object(c.a)(W.a,{onClick:this.handleClick,className:t?"copied":"copyable"},void 0,t?Object(c.a)(p.b,{id:"copypaste.copied",defaultMessage:"Copied"}):e)}}let V=Object(p.g)((B=class extends a.a.PureComponent{constructor(){super(...arguments),this.handleRetry=()=>{const{onRetry:e}=this.props;e&&e()}}render(){const{errorType:e,multiColumn:t,stacktrace:n}=this.props;let s,a;switch(e){case"routing":s=Object(c.a)(p.b,{id:"bundle_column_error.routing.title",defaultMessage:"404"}),a=Object(c.a)(p.b,{id:"bundle_column_error.routing.body",defaultMessage:"The requested page could not be found. Are you sure the URL in the address bar is correct?"});break;case"network":s=Object(c.a)(p.b,{id:"bundle_column_error.network.title",defaultMessage:"Network error"}),a=Object(c.a)(p.b,{id:"bundle_column_error.network.body",defaultMessage:"There was an error when trying to load this page. This could be due to a temporary problem with your internet connection or this server."});break;case"error":s=Object(c.a)(p.b,{id:"bundle_column_error.error.title",defaultMessage:"Oh, no!"}),a=Object(c.a)(p.b,{id:"bundle_column_error.error.body",defaultMessage:"The requested page could not be rendered. It could be due to a bug in our code, or a browser compatibility issue."})}return Object(c.a)(P.a,{bindToDocument:!t},void 0,Object(c.a)("div",{className:"error-column"},void 0,Object(c.a)(G,{src:"/oops.gif",staticSrc:"/oops.png",className:"error-column__image"}),Object(c.a)("div",{className:"error-column__message"},void 0,Object(c.a)("h1",{},void 0,s),Object(c.a)("p",{},void 0,a),Object(c.a)("div",{className:"error-column__message__actions"},void 0,"network"===e&&Object(c.a)(W.a,{onClick:this.handleRetry},void 0,Object(c.a)(p.b,{id:"bundle_column_error.retry",defaultMessage:"Try again"})),"error"===e&&Object(c.a)(X,{value:n},void 0,Object(c.a)(p.b,{id:"bundle_column_error.copy_stacktrace",defaultMessage:"Copy error report"})),Object(c.a)(Q.a,{to:"/",className:j()("button",{"button-tertiary":"routing"!==e})},void 0,Object(c.a)(p.b,{id:"bundle_column_error.return",defaultMessage:"Go back home"}))))),Object(c.a)(l.a,{},void 0,Object(c.a)("meta",{name:"robots",content:"noindex"})))}},B.defaultProps={errorType:"routing"},$=B))||$;var J=n(699);class Y extends a.a.PureComponent{render(){const{multiColumn:e,children:t}=this.props;return Object(c.a)(U.a,{},void 0,a.a.Children.map(t,(t=>a.a.cloneElement(t,{multiColumn:e}))))}}class Z extends a.a.Component{constructor(){super(...arguments),this.state={hasError:!1,stacktrace:""},this.renderComponent=e=>{let{match:t}=e;const{component:n,content:s,multiColumn:o,componentParams:i}=this.props,{hasError:r,stacktrace:u}=this.state;return r?Object(c.a)(V,{stacktrace:u,multiColumn:o,errorType:"error"}):Object(c.a)(J.a,{fetchComponent:n,loading:this.renderLoading,error:this.renderError},void 0,(e=>a.a.createElement(e,Object(R.a)({params:t.params,multiColumn:o},i),s)))},this.renderLoading=()=>{const{multiColumn:e}=this.props;return Object(c.a)(K,{multiColumn:e})},this.renderError=e=>a.a.createElement(V,Object(R.a)({},e,{errorType:"network"}))}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){D.a.fromError(e).then((t=>{this.setState({stacktrace:e.toString()+"\n"+t.map((e=>e.toString())).join("\n")})})).catch((e=>{console.error(e)}))}render(){const{component:e,content:t,...n}=this.props;return a.a.createElement(m.a,Object(R.a)({},n,{render:this.renderComponent}))}}Z.defaultProps={componentParams:{}};var ee=n(240),te=n(54),ne=n.n(te);class se extends a.a.PureComponent{constructor(){super(...arguments),this.handleKeyUp=e=>{const t=e.keyCode;if(this.props.active&&27===t)e.preventDefault(),e.stopPropagation(),this.props.onClose()}}componentDidMount(){window.addEventListener("keyup",this.handleKeyUp,!1)}componentWillUnmount(){window.removeEventListener("keyup",this.handleKeyUp)}render(){const{active:e}=this.props;return Object(c.a)(ee.a,{defaultStyle:{backgroundOpacity:0,backgroundScale:.95},style:{backgroundOpacity:ne()(e?1:0,{stiffness:150,damping:15}),backgroundScale:ne()(e?1:.95,{stiffness:200,damping:3})}},void 0,(t=>{let{backgroundOpacity:n,backgroundScale:s}=t;return Object(c.a)("div",{className:"upload-area",style:{visibility:e?"visible":"hidden",opacity:n}},void 0,Object(c.a)("div",{className:"upload-area__drop"},void 0,Object(c.a)("div",{className:"upload-area__background",style:{transform:`scale(${s})`}}),Object(c.a)("div",{className:"upload-area__content"},void 0,Object(c.a)(p.b,{id:"upload_area.title",defaultMessage:"Drag & drop to upload"}))))}))}}var ae=n(21),oe=n.n(ae);var ie,re=()=>Object(c.a)("div",{className:"drawer"},void 0,Object(c.a)("div",{className:"drawer__pager"},void 0,Object(c.a)("div",{className:"drawer__inner"}))),ce=n(166),ue=n(1420),de=n(716),le=n(1416),pe=n(1409),he=n(225),ge=n(571),me=n(1315),be=n(1499);const fe=Object(p.f)({aboutActiveUsers:{id:"server_banner.about_active_users",defaultMessage:"People using this server during the last 30 days (Monthly Active Users)"}});let _e=Object(h.connect)((e=>({server:e.getIn(["server","server"])})))(ie=Object(p.g)(ie=class extends a.a.PureComponent{componentDidMount(){const{dispatch:e}=this.props;e(Object(N.l)())}render(){const{server:e,intl:t}=this.props,n=e.get("isLoading");return Object(c.a)("div",{className:"server-banner"},void 0,Object(c.a)("div",{className:"server-banner__introduction"},void 0,Object(c.a)(p.b,{id:"server_banner.introduction",defaultMessage:"{domain} is part of the decentralized social network powered by {mastodon}.",values:{domain:Object(c.a)("strong",{},void 0,z.i),mastodon:Object(c.a)("a",{href:"https://joinmastodon.org",target:"_blank"},void 0,"Mastodon")}})),Object(c.a)(be.a,{blurhash:e.getIn(["thumbnail","blurhash"]),src:e.getIn(["thumbnail","url"]),className:"server-banner__hero"}),Object(c.a)("div",{className:"server-banner__description"},void 0,n?a.a.createElement(a.a.Fragment,null,Object(c.a)(ge.a,{width:"100%"}),Object(c.a)("br",{}),Object(c.a)(ge.a,{width:"100%"}),Object(c.a)("br",{}),Object(c.a)(ge.a,{width:"70%"})):e.get("description")),Object(c.a)("div",{className:"server-banner__meta"},void 0,Object(c.a)("div",{className:"server-banner__meta__column"},void 0,Object(c.a)("h4",{},void 0,Object(c.a)(p.b,{id:"server_banner.administered_by",defaultMessage:"Administered by:"})),Object(c.a)(me.a,{id:e.getIn(["contact","account","id"]),size:36})),Object(c.a)("div",{className:"server-banner__meta__column"},void 0,Object(c.a)("h4",{},void 0,Object(c.a)(p.b,{id:"server_banner.server_stats",defaultMessage:"Server stats:"})),n?a.a.createElement(a.a.Fragment,null,Object(c.a)("strong",{className:"server-banner__number"},void 0,Object(c.a)(ge.a,{width:"10ch"})),Object(c.a)("br",{}),Object(c.a)("span",{className:"server-banner__number-label"},void 0,Object(c.a)(ge.a,{width:"5ch"}))):a.a.createElement(a.a.Fragment,null,Object(c.a)("strong",{className:"server-banner__number"},void 0,Object(c.a)(he.a,{value:e.getIn(["usage","users","active_month"])})),Object(c.a)("br",{}),Object(c.a)("span",{className:"server-banner__number-label",title:t.formatMessage(fe.aboutActiveUsers)},void 0,Object(c.a)(p.b,{id:"server_banner.active_users",defaultMessage:"active users"}))))),Object(c.a)("hr",{className:"spacer"}),Object(c.a)(Q.a,{className:"button button--block button-secondary",to:"/about"},void 0,Object(c.a)(p.b,{id:"server_banner.learn_more",defaultMessage:"Learn more"})))}})||ie)||ie;var Oe,ve;let je=Object(h.connect)()((ve=class extends a.a.PureComponent{constructor(){super(...arguments),this.onFocus=()=>{const{dispatch:e}=this.props;e(Object(L.eb)(!0))},this.onBlur=()=>{const{dispatch:e}=this.props;e(Object(L.eb)(!1))}}componentDidMount(){const{dispatch:e}=this.props;e(Object(L.qb)())}componentWillUnmount(){const{dispatch:e}=this.props;e(Object(L.Bb)())}render(){const{signedIn:e}=this.context.identity;return Object(c.a)("div",{className:"compose-panel",onFocus:this.onFocus},void 0,Object(c.a)(ue.a,{openInRoute:!0}),!e&&Object(c.a)(a.a.Fragment,{},void 0,Object(c.a)(_e,{}),Object(c.a)("div",{className:"flex-spacer"})),e&&Object(c.a)(a.a.Fragment,{},void 0,Object(c.a)(le.a,{onClose:this.onBlur}),Object(c.a)(de.a,{singleColumn:!0})),Object(c.a)(pe.a,{}))}},ve.contextTypes={identity:d.a.object.isRequired},Oe=ve))||Oe;var Se,ye,Ce=()=>Object(c.a)("svg",{viewBox:"0 0 261 66",className:"logo",role:"img"},void 0,Object(c.a)("title",{},void 0,"Mastodon"),Object(c.a)("use",{xlinkHref:"#logo-symbol-wordmark"})),Ee=n(1350),Te=n(60),Ie=n(1378);const ke=Object(p.f)({logoutMessage:{id:"confirmations.logout.message",defaultMessage:"Are you sure you want to log out?"},logoutConfirm:{id:"confirmations.logout.confirm",defaultMessage:"Log out"}});let Le=(Se=Object(h.connect)((e=>({disabledAcct:e.getIn(["accounts",z.g,"acct"]),movedToAcct:z.q?e.getIn(["accounts",z.q,"acct"]):void 0})),((e,t)=>{let{intl:n}=t;return{onLogout(){e(Object(Te.d)("CONFIRM",{message:n.formatMessage(ke.logoutMessage),confirm:n.formatMessage(ke.logoutConfirm),closeWhenConfirm:!1,onConfirm:()=>Object(Ie.a)()}))}}})),Object(p.g)(ye=Se(ye=class extends a.a.PureComponent{constructor(){super(...arguments),this.handleLogOutClick=e=>(e.preventDefault(),e.stopPropagation(),this.props.onLogout(),!1)}render(){const{disabledAcct:e,movedToAcct:t}=this.props,n=Object(c.a)(Q.a,{to:`/@${e}`},void 0,e,"@",z.i);return Object(c.a)("div",{className:"sign-in-banner"},void 0,Object(c.a)("p",{},void 0,t?Object(c.a)(p.b,{id:"moved_to_account_banner.text",defaultMessage:"Your account {disabledAccount} is currently disabled because you moved to {movedToAccount}.",values:{disabledAccount:n,movedToAccount:Object(c.a)(Q.a,{to:`/@${t}`},void 0,t.includes("@")?t:`${t}@${z.i}`)}}):Object(c.a)(p.b,{id:"disabled_account_banner.text",defaultMessage:"Your account {disabledAccount} is currently disabled.",values:{disabledAccount:n}})),Object(c.a)("a",{href:"/auth/edit",className:"button button--block"},void 0,Object(c.a)(p.b,{id:"disabled_account_banner.account_settings",defaultMessage:"Account settings"})),Object(c.a)("button",{type:"button",className:"button button--block button-tertiary",onClick:this.handleLogOutClick},void 0,Object(c.a)(p.b,{id:"confirmations.logout.confirm",defaultMessage:"Log out"})))}})||ye)||ye);var Me,Ne,we=n(22),xe=n(1410),Ae=n(4);const Re=Object(p.f)({text:{id:"navigation_bar.follow_requests",defaultMessage:"Follow requests"}});let Ue=(Me=Object(h.connect)((e=>({count:e.getIn(["user_lists","follow_requests","items"],Object(Ae.List)()).size}))),Object(p.g)(Ne=Me(Ne=class extends a.a.Component{componentDidMount(){const{dispatch:e}=this.props;e(Object(we.P)())}render(){const{count:e,intl:t}=this.props;return 0===e?null:Object(c.a)(Ee.a,{transparent:!0,to:"/follow_requests",icon:Object(c.a)(xe.a,{className:"column-link__icon",id:"user-plus",count:e}),text:t.formatMessage(Re.text)})}})||Ne)||Ne);var Fe,De,Pe,He=n(48),qe=n(39);const Ke=Object(He.a)([e=>e.get("lists")],(e=>e?e.toList().filter((e=>!!e)).sort(((e,t)=>e.get("title").localeCompare(t.get("title")))).take(4):e));let $e=(Fe=Object(h.connect)((e=>({lists:Ke(e)}))),Object(C.a)(De=Fe(((Pe=class extends q.a{componentDidMount(){const{dispatch:e}=this.props;e(Object(qe.I)())}render(){const{lists:e}=this.props;return!e||e.isEmpty()?null:Object(c.a)("div",{className:"list-panel"},void 0,Object(c.a)("hr",{}),e.map((e=>Object(c.a)(Ee.a,{icon:"list-ul",strict:!0,text:e.get("title"),to:`/lists/${e.get("id")}`,transparent:!0},e.get("id")))))}}).propTypes={dispatch:d.a.func.isRequired,lists:oe.a.list},De=Pe))||De)||De);var Be=Object(h.connect)((e=>({count:e.getIn(["notifications","unread"]),id:"bell"})))(xe.a);var We,Qe,ze=()=>{const e=Object(h.useDispatch)(),t=Object(s.useCallback)((()=>e(Object(Te.d)("CLOSED_REGISTRATIONS"))),[e]);let n;return n=z.u?Object(c.a)("a",{href:"/auth/sign_up",className:"button button--block button-tertiary"},void 0,Object(c.a)(p.b,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})):Object(c.a)("button",{className:"button button--block button-tertiary",onClick:t},void 0,Object(c.a)(p.b,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})),Object(c.a)("div",{className:"sign-in-banner"},void 0,Object(c.a)("p",{},void 0,Object(c.a)(p.b,{id:"sign_in_banner.text",defaultMessage:"Sign in to follow profiles or hashtags, favourite, share and reply to posts. You can also interact from your account on a different server."})),Object(c.a)("a",{href:"/auth/sign_in",className:"button button--block"},void 0,Object(c.a)(p.b,{id:"sign_in_banner.sign_in",defaultMessage:"Sign in"})),n)},Ge=n(1514),Xe=n(1319);const Ve=Object(p.f)({lastStatusAt:{id:"account.featured_tags.last_status_at",defaultMessage:"Last post on {date}"},empty:{id:"account.featured_tags.last_status_never",defaultMessage:"No posts"}});let Je=Object(p.g)(((Qe=class extends q.a{render(){const{account:e,featuredTags:t,intl:n}=this.props;return!e||e.get("suspended")||t.isEmpty()?null:Object(c.a)("div",{className:"getting-started__trends"},void 0,Object(c.a)("h4",{},void 0,Object(c.a)(p.b,{id:"account.featured_tags.title",defaultMessage:"{name}'s featured hashtags",values:{name:Object(c.a)("bdi",{dangerouslySetInnerHTML:{__html:e.get("display_name_html")}})}})),t.take(3).map((t=>Object(c.a)(Xe.c,{name:t.get("name"),to:`/@${e.get("acct")}/tagged/${t.get("name")}`,uses:1*t.get("statuses_count"),withGraph:!1,description:1*t.get("statuses_count")>0?n.formatMessage(Ve.lastStatusAt,{date:n.formatDate(t.get("last_status_at"),{month:"short",day:"2-digit"})}):n.formatMessage(Ve.empty)},t.get("name")))))}}).contextTypes={router:d.a.object},Qe.propTypes={account:oe.a.map,featuredTags:oe.a.list,tagged:d.a.string,intl:d.a.object.isRequired},We=Qe))||We;var Ye=n(237);var Ze,et=Object(h.connect)((()=>{const e=Object(Ye.e)();return(t,n)=>{let{accountId:s}=n;return{account:e(t,s),featuredTags:t.getIn(["user_lists","featured_tags",s,"items"],Object(Ae.List)())}}}))(Je),tt=n(671);let nt=Object(h.connect)(((e,t)=>{let{match:{params:{acct:n}}}=t;const s=e.getIn(["accounts_map",Object(tt.b)(n)]);return s?{accountId:s,isLoading:!1}:{isLoading:!0}}))(Ze=class extends a.a.PureComponent{render(){const{accountId:e,isLoading:t,match:{params:{tagged:n}}}=this.props;return t?null:a.a.createElement(a.a.Fragment,null,Object(c.a)("div",{className:"flex-spacer"}),Object(c.a)(et,{accountId:e,tagged:n}))}})||Ze;var st;const at=()=>a.a.createElement(a.a.Fragment,null,z.w&&a.a.createElement(a.a.Fragment,null,Object(c.a)("div",{className:"flex-spacer"}),Object(c.a)(Ge.a,{})));let ot=Object(C.a)(st=class extends a.a.PureComponent{render(){return Object(c.a)(U.a,{},void 0,Object(c.a)(m.a,{path:"/@:acct",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/tagged/:tagged?",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/with_replies",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/followers",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/following",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/media",exact:!0,component:nt}),Object(c.a)(m.a,{component:at}))}})||st;var it,rt;const ct=Object(p.f)({home:{id:"tabs_bar.home",defaultMessage:"Home"},notifications:{id:"tabs_bar.notifications",defaultMessage:"Notifications"},explore:{id:"explore.title",defaultMessage:"Explore"},local:{id:"tabs_bar.local_timeline",defaultMessage:"Local"},federated:{id:"tabs_bar.federated_timeline",defaultMessage:"Federated"},direct:{id:"navigation_bar.direct",defaultMessage:"Direct messages"},favourites:{id:"navigation_bar.favourites",defaultMessage:"Favourites"},bookmarks:{id:"navigation_bar.bookmarks",defaultMessage:"Bookmarks"},lists:{id:"navigation_bar.lists",defaultMessage:"Lists"},preferences:{id:"navigation_bar.preferences",defaultMessage:"Preferences"},followsAndFollowers:{id:"navigation_bar.follows_and_followers",defaultMessage:"Follows and followers"},about:{id:"navigation_bar.about",defaultMessage:"About"},search:{id:"navigation_bar.search",defaultMessage:"Search"}});let ut=Object(p.g)(((rt=class extends a.a.Component{render(){const{intl:e}=this.props,{signedIn:t,disabledAccountId:n}=this.context.identity;return Object(c.a)("div",{className:"navigation-panel"},void 0,Object(c.a)("div",{className:"navigation-panel__logo"},void 0,Object(c.a)(Q.a,{to:"/",className:"column-link column-link--logo"},void 0,Object(c.a)(Ce,{})),Object(c.a)("hr",{})),t&&Object(c.a)(a.a.Fragment,{},void 0,Object(c.a)(Ee.a,{transparent:!0,to:"/home",icon:"home",text:e.formatMessage(ct.home)}),Object(c.a)(Ee.a,{transparent:!0,to:"/notifications",icon:Object(c.a)(Be,{className:"column-link__icon"}),text:e.formatMessage(ct.notifications)}),Object(c.a)(Ue,{})),z.w?Object(c.a)(Ee.a,{transparent:!0,to:"/explore",icon:"hashtag",text:e.formatMessage(ct.explore)}):Object(c.a)(Ee.a,{transparent:!0,to:"/search",icon:"search",text:e.formatMessage(ct.search)}),(t||z.A)&&a.a.createElement(a.a.Fragment,null,Object(c.a)(Ee.a,{transparent:!0,to:"/public/local",icon:"users",text:e.formatMessage(ct.local)}),Object(c.a)(Ee.a,{transparent:!0,exact:!0,to:"/public",icon:"globe",text:e.formatMessage(ct.federated)})),!t&&Object(c.a)("div",{className:"navigation-panel__sign-in-banner"},void 0,Object(c.a)("hr",{}),n?Object(c.a)(Le,{}):Object(c.a)(ze,{})),t&&Object(c.a)(a.a.Fragment,{},void 0,Object(c.a)(Ee.a,{transparent:!0,to:"/conversations",icon:"at",text:e.formatMessage(ct.direct)}),Object(c.a)(Ee.a,{transparent:!0,to:"/bookmarks",icon:"bookmark",text:e.formatMessage(ct.bookmarks)}),Object(c.a)(Ee.a,{transparent:!0,to:"/favourites",icon:"star",text:e.formatMessage(ct.favourites)}),Object(c.a)(Ee.a,{transparent:!0,to:"/lists",icon:"list-ul",text:e.formatMessage(ct.lists)}),Object(c.a)($e,{}),Object(c.a)("hr",{}),Object(c.a)(Ee.a,{transparent:!0,href:"/settings/preferences",icon:"cog",text:e.formatMessage(ct.preferences)})),Object(c.a)("div",{className:"navigation-panel__legal"},void 0,Object(c.a)("hr",{}),Object(c.a)(Ee.a,{transparent:!0,to:"/about",icon:"ellipsis-h",text:e.formatMessage(ct.about)})),Object(c.a)(ot,{}))}}).contextTypes={router:d.a.object.isRequired,identity:d.a.object.isRequired},it=rt))||it;var dt=n(531),lt=n(1408);const pt={COMPOSE:ce.k,HOME:ce.B,NOTIFICATIONS:ce.L,PUBLIC:ce.O,REMOTE:ce.O,COMMUNITY:ce.i,HASHTAG:ce.A,DIRECT:ce.l,FAVOURITES:ce.r,BOOKMARKS:ce.g,LIST:ce.G,DIRECTORY:ce.m};class ht extends q.a{constructor(){super(...arguments),this.mediaQuery="matchMedia"in window&&window.matchMedia("(max-width: 1174px)"),this.state={renderComposePanel:!(this.mediaQuery&&this.mediaQuery.matches)},this.handleLayoutChange=e=>{this.setState({renderComposePanel:!e.matches})},this.handleWheel=()=>{"function"==typeof this._interruptScrollAnimation&&this._interruptScrollAnimation()},this.setRef=e=>{this.node=e},this.renderLoading=e=>()=>"COMPOSE"===e?Object(c.a)(re,{}):Object(c.a)(K,{multiColumn:!0}),this.renderError=e=>a.a.createElement(V,Object(R.a)({multiColumn:!0,errorType:"network"},e))}componentDidMount(){this.props.singleColumn||this.node.addEventListener("wheel",this.handleWheel,!!dt.a&&{passive:!0}),this.mediaQuery&&(this.mediaQuery.addEventListener?this.mediaQuery.addEventListener("change",this.handleLayoutChange):this.mediaQuery.addListener(this.handleLayoutChange),this.setState({renderComposePanel:!this.mediaQuery.matches})),this.isRtlLayout=document.getElementsByTagName("body")[0].classList.contains("rtl")}componentWillUpdate(e){this.props.singleColumn!==e.singleColumn&&e.singleColumn&&this.node.removeEventListener("wheel",this.handleWheel)}componentDidUpdate(e){this.props.singleColumn===e.singleColumn||this.props.singleColumn||this.node.addEventListener("wheel",this.handleWheel,!!dt.a&&{passive:!0})}componentWillUnmount(){this.props.singleColumn||this.node.removeEventListener("wheel",this.handleWheel),this.mediaQuery&&(this.mediaQuery.removeEventListener?this.mediaQuery.removeEventListener("change",this.handleLayoutChange):this.mediaQuery.removeListener(this.handleLayoutChange))}handleChildrenContentChange(){if(!this.props.singleColumn){const e=this.isRtlLayout?-1:1;this._interruptScrollAnimation=Object(lt.a)(this.node,(this.node.scrollWidth-window.innerWidth)*e)}}render(){const{columns:e,children:t,singleColumn:n,isModalOpen:s}=this.props,{renderComposePanel:o}=this.state;return n?Object(c.a)("div",{className:"columns-area__panels"},void 0,Object(c.a)("div",{className:"columns-area__panels__pane columns-area__panels__pane--compositional"},void 0,Object(c.a)("div",{className:"columns-area__panels__pane__inner"},void 0,o&&Object(c.a)(je,{}))),Object(c.a)("div",{className:"columns-area__panels__main"},void 0,Object(c.a)("div",{className:"tabs-bar__wrapper"},void 0,Object(c.a)("div",{id:"tabs-bar__portal"})),Object(c.a)("div",{className:"columns-area columns-area--mobile"},void 0,t)),Object(c.a)("div",{className:"columns-area__panels__pane columns-area__panels__pane--start columns-area__panels__pane--navigational"},void 0,Object(c.a)("div",{className:"columns-area__panels__pane__inner"},void 0,Object(c.a)(ut,{})))):a.a.createElement("div",{className:"columns-area "+(s?"unscrollable":""),ref:this.setRef},e.map((e=>{const t=null===e.get("params",null)?null:e.get("params").toJS(),n=t&&t.other?t.other:{};return Object(c.a)(J.a,{fetchComponent:pt[e.get("id")],loading:this.renderLoading(e.get("id")),error:this.renderError},e.get("uuid"),(s=>a.a.createElement(s,Object(R.a)({columnId:e.get("uuid"),params:t,multiColumn:!0},n))))})),a.a.Children.map(t,(e=>a.a.cloneElement(e,{multiColumn:!0}))))}}ht.contextTypes={router:d.a.object.isRequired},ht.propTypes={columns:oe.a.list.isRequired,isModalOpen:d.a.bool.isRequired,singleColumn:d.a.bool,children:d.a.node};var gt,mt,bt=Object(h.connect)((e=>({columns:e.getIn(["settings","columns"]),isModalOpen:!!e.get("modal").modalType})),null,null,{forwardRef:!0})(ht),ft=n(171),_t=n(306),Ot=n(580),vt=n(52),jt=n(280),St=n(282);const yt=Object(p.f)({close:{id:"lightbox.close",defaultMessage:"Close"}});let Ct=Object(h.connect)(((e,t)=>{let{accountId:n}=t;return{account:e.getIn(["accounts",n])}}))(gt=Object(p.g)(((mt=class extends q.a{render(){const{account:e,statusId:t,onClose:n,intl:s}=this.props;return Object(c.a)("div",{className:"picture-in-picture__header"},void 0,Object(c.a)(Q.a,{to:`/@${e.get("acct")}/${t}`,className:"picture-in-picture__header__account"},void 0,Object(c.a)(jt.a,{account:e,size:36}),Object(c.a)(St.a,{account:e})),Object(c.a)(vt.a,{icon:"times",onClick:n,title:s.formatMessage(yt.close)}))}}).propTypes={accountId:d.a.string.isRequired,statusId:d.a.string.isRequired,account:oe.a.map.isRequired,onClose:d.a.func.isRequired,intl:d.a.object.isRequired},gt=mt))||gt)||gt;var Et,Tt=n(288);let It=Object(h.connect)((e=>({...e.get("picture_in_picture")})))(Et=class extends a.a.Component{constructor(){super(...arguments),this.handleClose=()=>{const{dispatch:e}=this.props;e(Object(Ot.d)())}}render(){const{type:e,src:t,currentTime:n,accountId:s,statusId:a}=this.props;if(!n)return null;let o;return"video"===e?o=Object(c.a)(ft.default,{src:t,currentTime:this.props.currentTime,volume:this.props.volume,muted:this.props.muted,autoPlay:!0,inline:!0,alwaysVisible:!0}):"audio"===e&&(o=Object(c.a)(_t.default,{src:t,currentTime:this.props.currentTime,volume:this.props.volume,muted:this.props.muted,poster:this.props.poster,backgroundColor:this.props.backgroundColor,foregroundColor:this.props.foregroundColor,accentColor:this.props.accentColor,autoPlay:!0})),Object(c.a)("div",{className:"picture-in-picture"},void 0,Object(c.a)(Ct,{accountId:s,statusId:a,onClose:this.handleClose}),o,Object(c.a)(Tt.a,{statusId:a}))}})||Et;var kt=n(164);const Lt=20181216044202;var Mt,Nt,wt;const xt=Object(h.connect)((e=>({account:e.getIn(["accounts",z.p])})))((e=>{let{account:t}=e;return Object(c.a)(Q.a,{to:`/@${t.get("acct")}`,title:t.get("acct")},void 0,Object(c.a)(jt.a,{account:t,size:35}))}));let At=(Mt=Object(h.connect)(null,(e=>({openClosedRegistrationsModal(){e(Object(Te.d)("CLOSED_REGISTRATIONS"))}}))),Object(C.a)(Nt=Mt(((wt=class extends a.a.PureComponent{render(){const{signedIn:e}=this.context.identity,{location:t,openClosedRegistrationsModal:n}=this.props;let s;if(e)s=a.a.createElement(a.a.Fragment,null,"/publish"!==t.pathname&&Object(c.a)(Q.a,{to:"/publish",className:"button"},void 0,Object(c.a)(p.b,{id:"compose_form.publish_form",defaultMessage:"Publish"})),Object(c.a)(xt,{}));else{let e;e=z.u?Object(c.a)("a",{href:"/auth/sign_up",className:"button button-tertiary"},void 0,Object(c.a)(p.b,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})):Object(c.a)("button",{className:"button button-tertiary",onClick:n},void 0,Object(c.a)(p.b,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})),s=a.a.createElement(a.a.Fragment,null,Object(c.a)("a",{href:"/auth/sign_in",className:"button"},void 0,Object(c.a)(p.b,{id:"sign_in_banner.sign_in",defaultMessage:"Sign in"})),e)}return Object(c.a)("div",{className:"ui__header"},void 0,Object(c.a)(Q.a,{to:"/",className:"ui__header__logo"},void 0,Object(c.a)(Ce,{})),Object(c.a)("div",{className:"ui__header__links"},void 0,s))}}).contextTypes={identity:d.a.object},Nt=wt))||Nt)||Nt);var Rt,Ut;n(1418);const Ft=Object(p.f)({beforeUnload:{id:"ui.beforeunload",defaultMessage:"Your draft will be lost if you leave Mastodon."}}),Dt={help:"?",new:"n",search:"s",forceNew:"option+n",toggleComposeSpoilers:"option+x",focusColumn:["1","2","3","4","5","6","7","8","9"],reply:"r",favourite:"f",boost:"b",mention:"m",open:["enter","o"],openProfile:"p",moveDown:["down","j"],moveUp:["up","k"],back:"backspace",goToHome:"g h",goToNotifications:"g n",goToLocal:"g l",goToFederated:"g t",goToDirect:"g d",goToStart:"g s",goToFavourites:"g f",goToPinned:"g p",goToProfile:"g u",goToBlocked:"g b",goToMuted:"g m",goToRequests:"g r",toggleHidden:"x",toggleSensitive:"h",openMedia:"e"};class Pt extends a.a.PureComponent{constructor(){super(...arguments),this.setRef=e=>{e&&(this.node=e)}}componentWillMount(){this.props.mobile?(document.body.classList.toggle("layout-single-column",!0),document.body.classList.toggle("layout-multiple-columns",!1)):(document.body.classList.toggle("layout-single-column",!1),document.body.classList.toggle("layout-multiple-columns",!0))}componentDidUpdate(e){[this.props.location.pathname,"/"].includes(e.location.pathname)||this.node.handleChildrenContentChange(),e.mobile!==this.props.mobile&&(document.body.classList.toggle("layout-single-column",this.props.mobile),document.body.classList.toggle("layout-multiple-columns",!this.props.mobile))}render(){const{children:e,mobile:t}=this.props,{signedIn:n}=this.context.identity;let s;return s=n?t?Object(c.a)(y.a,{from:"/",to:"/home",exact:!0}):Object(c.a)(y.a,{from:"/",to:"/getting-started",exact:!0}):z.x&&z.r&&null!=z.d&&z.d.accounts[z.r]?Object(c.a)(y.a,{from:"/",to:`/@${z.d.accounts[z.r].username}`,exact:!0}):z.w&&z.C?Object(c.a)(y.a,{from:"/",to:"/explore",exact:!0}):Object(c.a)(y.a,{from:"/",to:"/about",exact:!0}),a.a.createElement(bt,{ref:this.setRef,singleColumn:t},Object(c.a)(Y,{},void 0,s,Object(c.a)(Z,{path:"/getting-started",component:ce.z,content:e}),Object(c.a)(Z,{path:"/keyboard-shortcuts",component:ce.D,content:e}),Object(c.a)(Z,{path:"/about",component:ce.a,content:e}),Object(c.a)(Z,{path:"/privacy-policy",component:ce.N,content:e}),Object(c.a)(Z,{path:["/home","/timelines/home"],component:ce.B,content:e}),Object(c.a)(Z,{path:["/public","/timelines/public"],exact:!0,component:ce.O,content:e}),Object(c.a)(Z,{path:["/public/local","/timelines/public/local"],exact:!0,component:ce.i,content:e}),Object(c.a)(Z,{path:["/conversations","/timelines/direct"],component:ce.l,content:e}),Object(c.a)(Z,{path:"/tags/:id",component:ce.A,content:e}),Object(c.a)(Z,{path:"/lists/:id",component:ce.G,content:e}),Object(c.a)(Z,{path:"/notifications",component:ce.L,content:e}),Object(c.a)(Z,{path:"/favourites",component:ce.r,content:e}),Object(c.a)(Z,{path:"/bookmarks",component:ce.g,content:e}),Object(c.a)(Z,{path:"/pinned",component:ce.M,content:e}),Object(c.a)(Z,{path:"/start",component:ce.u,content:e}),Object(c.a)(Z,{path:"/directory",component:ce.m,content:e}),Object(c.a)(Z,{path:["/explore","/search"],component:ce.q,content:e}),Object(c.a)(Z,{path:["/publish","/statuses/new"],component:ce.k,content:e}),Object(c.a)(Z,{path:["/@:acct","/accounts/:id"],exact:!0,component:ce.c,content:e}),Object(c.a)(Z,{path:"/@:acct/tagged/:tagged?",exact:!0,component:ce.c,content:e}),Object(c.a)(Z,{path:["/@:acct/with_replies","/accounts/:id/with_replies"],component:ce.c,content:e,componentParams:{withReplies:!0}}),Object(c.a)(Z,{path:["/accounts/:id/followers","/users/:acct/followers","/@:acct/followers"],component:ce.x,content:e}),Object(c.a)(Z,{path:["/accounts/:id/following","/users/:acct/following","/@:acct/following"],component:ce.y,content:e}),Object(c.a)(Z,{path:["/@:acct/media","/accounts/:id/media"],component:ce.b,content:e}),Object(c.a)(Z,{path:"/@:acct/:statusId",exact:!0,component:ce.R,content:e}),Object(c.a)(Z,{path:"/@:acct/:statusId/reblogs",component:ce.P,content:e}),Object(c.a)(Z,{path:"/@:acct/:statusId/favourites",component:ce.s,content:e}),Object(c.a)(Z,{path:"/timelines/tag/:id",component:ce.A,content:e}),Object(c.a)(Z,{path:"/timelines/list/:id",component:ce.G,content:e}),Object(c.a)(Z,{path:"/statuses/:statusId",exact:!0,component:ce.R,content:e}),Object(c.a)(Z,{path:"/statuses/:statusId/reblogs",component:ce.P,content:e}),Object(c.a)(Z,{path:"/statuses/:statusId/favourites",component:ce.s,content:e}),Object(c.a)(Z,{path:"/follow_requests",component:ce.v,content:e}),Object(c.a)(Z,{path:"/blocks",component:ce.f,content:e}),Object(c.a)(Z,{path:"/domain_blocks",component:ce.n,content:e}),Object(c.a)(Z,{path:"/followed_tags",component:ce.w,content:e}),Object(c.a)(Z,{path:"/mutes",component:ce.K,content:e}),Object(c.a)(Z,{path:"/lists",component:ce.H,content:e}),Object(c.a)(m.a,{component:V})))}}Pt.contextTypes={identity:d.a.object};let Ht=Object(h.connect)((e=>({layout:e.getIn(["meta","layout"]),isComposing:e.getIn(["compose","is_composing"]),hasComposingText:0!==e.getIn(["compose","text"]).trim().length,hasMediaAttachments:e.getIn(["compose","media_attachments"]).size>0,canUploadMore:!e.getIn(["compose","media_attachments"]).some((e=>["audio","video"].includes(e.get("type"))))&&e.getIn(["compose","media_attachments"]).size<4,dropdownMenuIsOpen:null!==e.getIn(["dropdown_menu","openId"]),firstLaunch:e.getIn(["settings","introductionVersion"],0)<Lt,username:e.getIn(["accounts",z.p,"username"])})))(Rt=Object(p.g)(Rt=Object(C.a)((Ut=class extends a.a.PureComponent{constructor(){super(...arguments),this.state={draggingOver:!1},this.handleBeforeUnload=e=>{const{intl:t,dispatch:n,isComposing:s,hasComposingText:a,hasMediaAttachments:o}=this.props;n(Object(A.e)()),s&&(a||o)&&(e.preventDefault(),e.returnValue=t.formatMessage(Ft.beforeUnload))},this.handleWindowFocus=()=>{this.props.dispatch(Object(x.e)()),this.props.dispatch(Object(A.d)({immediate:!0}))},this.handleWindowBlur=()=>{this.props.dispatch(Object(x.f)())},this.handleDragEnter=e=>{e.preventDefault(),this.dragTargets||(this.dragTargets=[]),-1===this.dragTargets.indexOf(e.target)&&this.dragTargets.push(e.target),e.dataTransfer&&Array.from(e.dataTransfer.types).includes("Files")&&this.props.canUploadMore&&this.context.identity.signedIn&&this.setState({draggingOver:!0})},this.handleDragOver=e=>{if(this.dataTransferIsText(e.dataTransfer))return!1;e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect="copy"}catch(e){}return!1},this.handleDrop=e=>{this.dataTransferIsText(e.dataTransfer)||(e.preventDefault(),this.setState({draggingOver:!1}),this.dragTargets=[],e.dataTransfer&&e.dataTransfer.files.length>=1&&this.props.canUploadMore&&this.context.identity.signedIn&&this.props.dispatch(Object(L.Cb)(e.dataTransfer.files)))},this.handleDragLeave=e=>{e.preventDefault(),e.stopPropagation(),this.dragTargets=this.dragTargets.filter((t=>t!==e.target&&this.node.contains(t))),this.dragTargets.length>0||this.setState({draggingOver:!1})},this.dataTransferIsText=e=>e&&1===Array.from(e.types).filter((e=>"text/plain"===e)).length,this.closeUploadModal=()=>{this.setState({draggingOver:!1})},this.handleServiceWorkerPostMessage=e=>{let{data:t}=e;"navigate"===t.type?this.context.router.history.push(t.path):console.warn("Unknown message type:",t.type)},this.handleLayoutChange=O()((()=>{this.props.dispatch(Object(w.c)())}),500,{trailing:!0}),this.handleResize=()=>{const e=Object(k.c)();e!==this.props.layout?(this.handleLayoutChange.cancel(),this.props.dispatch(Object(x.d)(e))):this.handleLayoutChange()},this.setRef=e=>{this.node=e},this.handleHotkeyNew=e=>{e.preventDefault();const t=this.node.querySelector(".compose-form__autosuggest-wrapper textarea");t&&t.focus()},this.handleHotkeySearch=e=>{e.preventDefault();const t=this.node.querySelector(".search__input");t&&t.focus()},this.handleHotkeyForceNew=e=>{this.handleHotkeyNew(e),this.props.dispatch(Object(L.wb)())},this.handleHotkeyToggleComposeSpoilers=e=>{e.preventDefault(),this.props.dispatch(Object(L.cb)())},this.handleHotkeyFocusColumn=e=>{const t=1*e.key+1,n=this.node.querySelector(`.column:nth-child(${t})`);if(!n)return;const s=n.querySelector(".scrollable");if(s){const e=s.querySelector(".focusable");e&&(s.scrollTop>e.offsetTop&&e.scrollIntoView(!0),e.focus())}},this.handleHotkeyBack=()=>{window.history&&window.history.state?this.context.router.history.goBack():this.context.router.history.push("/")},this.setHotkeysRef=e=>{this.hotkeys=e},this.handleHotkeyToggleHelp=()=>{"/keyboard-shortcuts"===this.props.location.pathname?this.context.router.history.goBack():this.context.router.history.push("/keyboard-shortcuts")},this.handleHotkeyGoToHome=()=>{this.context.router.history.push("/home")},this.handleHotkeyGoToNotifications=()=>{this.context.router.history.push("/notifications")},this.handleHotkeyGoToLocal=()=>{this.context.router.history.push("/public/local")},this.handleHotkeyGoToFederated=()=>{this.context.router.history.push("/public")},this.handleHotkeyGoToDirect=()=>{this.context.router.history.push("/conversations")},this.handleHotkeyGoToStart=()=>{this.context.router.history.push("/getting-started")},this.handleHotkeyGoToFavourites=()=>{this.context.router.history.push("/favourites")},this.handleHotkeyGoToPinned=()=>{this.context.router.history.push("/pinned")},this.handleHotkeyGoToProfile=()=>{this.context.router.history.push(`/@${this.props.username}`)},this.handleHotkeyGoToBlocked=()=>{this.context.router.history.push("/blocks")},this.handleHotkeyGoToMuted=()=>{this.context.router.history.push("/mutes")},this.handleHotkeyGoToRequests=()=>{this.context.router.history.push("/follow_requests")}}componentDidMount(){const{signedIn:e}=this.context.identity;window.addEventListener("focus",this.handleWindowFocus,!1),window.addEventListener("blur",this.handleWindowBlur,!1),window.addEventListener("beforeunload",this.handleBeforeUnload,!1),window.addEventListener("resize",this.handleResize,{passive:!0}),document.addEventListener("dragenter",this.handleDragEnter,!1),document.addEventListener("dragover",this.handleDragOver,!1),document.addEventListener("drop",this.handleDrop,!1),document.addEventListener("dragleave",this.handleDragLeave,!1),document.addEventListener("dragend",this.handleDragEnd,!1),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerPostMessage),e&&this.props.firstLaunch&&(this.context.router.history.replace("/start"),this.props.dispatch((e=>{e(Object(kt.c)(["introductionVersion"],Lt)),e(Object(kt.d)())}))),e&&(this.props.dispatch(Object(A.c)()),this.props.dispatch(Object(M.u)()),this.props.dispatch(Object(r.o)()),setTimeout((()=>this.props.dispatch(Object(N.l)())),3e3)),this.hotkeys.__mousetrap__.stopCallback=(e,t)=>["TEXTAREA","SELECT","INPUT"].includes(t.tagName)}componentWillUnmount(){window.removeEventListener("focus",this.handleWindowFocus),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("beforeunload",this.handleBeforeUnload),window.removeEventListener("resize",this.handleResize),document.removeEventListener("dragenter",this.handleDragEnter),document.removeEventListener("dragover",this.handleDragOver),document.removeEventListener("drop",this.handleDrop),document.removeEventListener("dragleave",this.handleDragLeave),document.removeEventListener("dragend",this.handleDragEnd)}render(){const{draggingOver:e}=this.state,{children:t,isComposing:n,location:s,dropdownMenuIsOpen:o,layout:i}=this.props,r={help:this.handleHotkeyToggleHelp,new:this.handleHotkeyNew,search:this.handleHotkeySearch,forceNew:this.handleHotkeyForceNew,toggleComposeSpoilers:this.handleHotkeyToggleComposeSpoilers,focusColumn:this.handleHotkeyFocusColumn,back:this.handleHotkeyBack,goToHome:this.handleHotkeyGoToHome,goToNotifications:this.handleHotkeyGoToNotifications,goToLocal:this.handleHotkeyGoToLocal,goToFederated:this.handleHotkeyGoToFederated,goToDirect:this.handleHotkeyGoToDirect,goToStart:this.handleHotkeyGoToStart,goToFavourites:this.handleHotkeyGoToFavourites,goToPinned:this.handleHotkeyGoToPinned,goToProfile:this.handleHotkeyGoToProfile,goToBlocked:this.handleHotkeyGoToBlocked,goToMuted:this.handleHotkeyGoToMuted,goToRequests:this.handleHotkeyGoToRequests};return a.a.createElement(S.HotKeys,{keyMap:Dt,handlers:r,ref:this.setHotkeysRef,attach:window,focused:!0},a.a.createElement("div",{className:j()("ui",{"is-composing":n}),ref:this.setRef,style:{pointerEvents:o?"none":null}},Object(c.a)(At,{}),Object(c.a)(Pt,{location:s,mobile:"mobile"===i||"single-column"===i},void 0,t),"mobile"!==i&&Object(c.a)(It,{}),Object(c.a)(E.a,{}),Object(c.a)(T.a,{className:"loading-bar"}),Object(c.a)(I.a,{}),Object(c.a)(se,{active:e,onClose:this.closeUploadModal})))}},Ut.contextTypes={router:d.a.object.isRequired,identity:d.a.object.isRequired},Rt=Ut))||Rt)||Rt)||Rt;var qt=n(554),Kt=n(199),$t=n(1336);class Bt extends a.a.PureComponent{constructor(){super(...arguments),this.state={hasError:!1,errorMessage:void 0,stackTrace:void 0,mappedStackTrace:void 0,componentStack:void 0},this.handleCopyStackTrace=()=>{const{errorMessage:e,stackTrace:t,mappedStackTrace:n}=this.state,s=document.createElement("textarea");let a=[e,t];n&&a.push(n),s.textContent=a.join("\n\n\n"),s.style.position="fixed",document.body.appendChild(s);try{s.select(),document.execCommand("copy")}catch(e){}finally{document.body.removeChild(s)}this.setState({copied:!0}),setTimeout((()=>this.setState({copied:!1})),700)}}componentDidCatch(e,t){this.setState({hasError:!0,errorMessage:e.toString(),stackTrace:e.stack,componentStack:t&&t.componentStack,mappedStackTrace:void 0}),D.a.fromError(e).then((e=>{this.setState({mappedStackTrace:e.map((e=>e.toString())).join("\n")})})).catch((()=>{this.setState({mappedStackTrace:void 0})}))}render(){const{hasError:e,copied:t,errorMessage:n}=this.state;if(!e)return this.props.children;const s=n&&n.includes("NotFoundError");return Object(c.a)("div",{className:"error-boundary"},void 0,Object(c.a)("div",{},void 0,Object(c.a)("p",{className:"error-boundary__error"},void 0,s?Object(c.a)(p.b,{id:"error.unexpected_crash.explanation_addons",defaultMessage:"This page could not be displayed correctly. This error is likely caused by a browser add-on or automatic translation tools."}):Object(c.a)(p.b,{id:"error.unexpected_crash.explanation",defaultMessage:"Due to a bug in our code or a browser compatibility issue, this page could not be displayed correctly."})),Object(c.a)("p",{},void 0,s?Object(c.a)(p.b,{id:"error.unexpected_crash.next_steps_addons",defaultMessage:"Try disabling them and refreshing the page. If that does not help, you may still be able to use Mastodon through a different browser or native app."}):Object(c.a)(p.b,{id:"error.unexpected_crash.next_steps",defaultMessage:"Try refreshing the page. If that does not help, you may still be able to use Mastodon through a different browser or native app."})),Object(c.a)("p",{className:"error-boundary__footer"},void 0,"Mastodon v",z.G," · ",Object(c.a)("a",{href:z.y,rel:"noopener noreferrer",target:"_blank"},void 0,Object(c.a)(p.b,{id:"errors.unexpected_crash.report_issue",defaultMessage:"Report issue"}))," · ",Object(c.a)("button",{onClick:this.handleCopyStackTrace,className:t?"copied":""},void 0,Object(c.a)(p.b,{id:"errors.unexpected_crash.copy_stacktrace",defaultMessage:"Copy stacktrace to clipboard"})))),Object(c.a)(l.a,{},void 0,Object(c.a)("meta",{name:"robots",content:"noindex"})))}}var Wt=n(169);const{localeData:Qt,messages:zt}=Object(Wt.getLocale)();Object(p.e)(Qt);const Gt=z.B,Xt=Object(f.a)(),Vt=Object(Kt.b)(z.d);Xt.dispatch(Vt),z.d.meta.me&&Xt.dispatch(Object(qt.b)());class Jt extends a.a.PureComponent{constructor(){var e;super(...arguments),this.identity={signedIn:!!(e=z.d).meta.me,accountId:e.meta.me,disabledAccountId:e.meta.disabled_account_id,accessToken:e.meta.access_token,permissions:e.role?e.role.permissions:0}}getChildContext(){return{identity:this.identity}}componentDidMount(){this.identity.signedIn&&(this.disconnect=Xt.dispatch(Object($t.f)()))}componentWillUnmount(){this.disconnect&&(this.disconnect(),this.disconnect=null)}shouldUpdateScroll(e,t){var n,s,a,o;let{location:i}=t;return!(null!=(n=i.state)&&n.mastodonModalKey&&(null==(s=i.state)?void 0:s.mastodonModalKey)!==(null==e||null==(a=e.location)||null==(o=a.state)?void 0:o.mastodonModalKey))}render(){const{locale:e}=this.props;return Object(c.a)(p.d,{locale:e,messages:zt},void 0,Object(c.a)(h.Provider,{store:Xt},void 0,Object(c.a)(Bt,{},void 0,Object(c.a)(g.a,{},void 0,Object(c.a)(b.b,{shouldUpdateScroll:this.shouldUpdateScroll},void 0,Object(c.a)(m.a,{path:"/",component:Ht}))),Object(c.a)(l.a,{defaultTitle:Gt,titleTemplate:`%s - ${Gt}`}))))}}Jt.childContextTypes={identity:d.a.shape({signedIn:d.a.bool.isRequired,accountId:d.a.string,disabledAccountId:d.a.string,accessToken:d.a.string}).isRequired};var Yt=n(28);const Zt=n(1643);t.default=function(){return Zt.start("main()"),Object(Yt.default)((async()=>{const e=document.getElementById("mastodon"),t=JSON.parse(e.getAttribute("data-props"));if(i.a.render(a.a.createElement(Jt,t),e),Xt.dispatch(Object(r.v)()),z.p&&"serviceWorker"in navigator){const{Workbox:e}=await n.e(2).then(n.bind(null,1646)),t=new e("/sw.js");let s;try{s=await t.register()}catch(e){console.error(e)}if(s){const e=await Promise.resolve().then(n.bind(null,361));Xt.dispatch(e.register())}}Zt.stop("main()")}))}},1643:function(e,t,n){"use strict";function s(e){0}function a(e){0}n.r(t),n.d(t,"start",(function(){return s})),n.d(t,"stop",(function(){return a}))},166:function(e,t,n){"use strict";function s(){return Promise.all([n.e(1),n.e(24)]).then(n.bind(null,1233))}function a(){return Promise.all([n.e(1),n.e(32)]).then(n.bind(null,1284))}function o(){return Promise.all([n.e(1),n.e(59)]).then(n.bind(null,1261))}function i(){return Promise.all([n.e(1),n.e(52)]).then(n.bind(null,1272))}function r(){return Promise.all([n.e(1),n.e(62)]).then(n.bind(null,1285))}function c(){return Promise.all([n.e(1),n.e(31)]).then(n.bind(null,1286))}function u(){return Promise.all([n.e(1),n.e(51)]).then(n.bind(null,1287))}function d(){return Promise.all([n.e(1),n.e(33)]).then(n.bind(null,1268))}function l(){return Promise.all([n.e(1),n.e(56)]).then(n.bind(null,1234))}function p(){return Promise.all([n.e(1),n.e(57)]).then(n.bind(null,1235))}function h(){return Promise.all([n.e(1),n.e(64)]).then(n.bind(null,1273))}function g(){return Promise.all([n.e(1),n.e(45)]).then(n.bind(null,1236))}function m(){return Promise.all([n.e(1),n.e(53)]).then(n.bind(null,1237))}function b(){return Promise.all([n.e(1),n.e(60)]).then(n.bind(null,1238))}function f(){return Promise.all([n.e(1),n.e(28)]).then(n.bind(null,1239))}function _(){return Promise.all([n.e(1),n.e(27)]).then(n.bind(null,1294))}function O(){return Promise.all([n.e(1),n.e(42)]).then(n.bind(null,1240))}function v(){return Promise.all([n.e(1),n.e(43)]).then(n.bind(null,1241))}function j(){return Promise.all([n.e(1),n.e(63)]).then(n.bind(null,1242))}function S(){return Promise.all([n.e(1),n.e(38)]).then(n.bind(null,1243))}function y(){return Promise.all([n.e(1),n.e(40)]).then(n.bind(null,1288))}function C(){return Promise.all([n.e(1),n.e(37)]).then(n.bind(null,1245))}function E(){return Promise.all([n.e(1),n.e(41)]).then(n.bind(null,1246))}function T(){return Promise.all([n.e(1),n.e(30)]).then(n.bind(null,1247))}function I(){return Promise.all([n.e(1),n.e(29)]).then(n.bind(null,1248))}function k(){return Promise.all([n.e(1),n.e(35)]).then(n.bind(null,1289))}function L(){return Promise.all([n.e(1),n.e(58)]).then(n.bind(null,1249))}function M(){return Promise.all([n.e(1),n.e(324)]).then(n.bind(null,1250))}function N(){return Promise.all([n.e(1),n.e(318)]).then(n.bind(null,1251))}function w(){return Promise.all([n.e(1),n.e(325)]).then(n.bind(null,1264))}function x(){return n.e(1).then(n.bind(null,1202))}function A(){return Promise.resolve().then(n.bind(null,171))}function R(){return n.e(321).then(n.bind(null,1252))}function U(){return n.e(55).then(n.bind(null,1275))}function F(){return Promise.all([n.e(1),n.e(54)]).then(n.bind(null,1290))}function D(){return n.e(334).then(n.t.bind(null,856,7))}function P(){return Promise.resolve().then(n.bind(null,306))}function H(){return Promise.all([n.e(1),n.e(34)]).then(n.bind(null,1253))}function q(){return Promise.all([n.e(1),n.e(39)]).then(n.bind(null,1295))}function K(){return Promise.all([n.e(1),n.e(320)]).then(n.bind(null,1254))}function $(){return Promise.all([n.e(1),n.e(36)]).then(n.bind(null,1266))}function B(){return n.e(322).then(n.bind(null,1291))}function W(){return n.e(323).then(n.bind(null,1255))}function Q(){return Promise.all([n.e(1),n.e(326)]).then(n.bind(null,1256))}function z(){return n.e(319).then(n.bind(null,1257))}function G(){return Promise.all([n.e(1),n.e(26)]).then(n.bind(null,1258))}function X(){return Promise.all([n.e(1),n.e(61)]).then(n.bind(null,1259))}n.d(t,"p",(function(){return s})),n.d(t,"k",(function(){return a})),n.d(t,"L",(function(){return o})),n.d(t,"B",(function(){return i})),n.d(t,"O",(function(){return r})),n.d(t,"i",(function(){return c})),n.d(t,"A",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"G",(function(){return l})),n.d(t,"H",(function(){return p})),n.d(t,"R",(function(){return h})),n.d(t,"z",(function(){return g})),n.d(t,"D",(function(){return m})),n.d(t,"M",(function(){return b})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return _})),n.d(t,"x",(function(){return O})),n.d(t,"y",(function(){return v})),n.d(t,"P",(function(){return j})),n.d(t,"s",(function(){return S})),n.d(t,"v",(function(){return y})),n.d(t,"r",(function(){return C})),n.d(t,"w",(function(){return E})),n.d(t,"g",(function(){return T})),n.d(t,"f",(function(){return I})),n.d(t,"n",(function(){return k})),n.d(t,"K",(function(){return L})),n.d(t,"J",(function(){return M})),n.d(t,"e",(function(){return N})),n.d(t,"Q",(function(){return w})),n.d(t,"I",(function(){return x})),n.d(t,"U",(function(){return A})),n.d(t,"o",(function(){return R})),n.d(t,"F",(function(){return U})),n.d(t,"E",(function(){return F})),n.d(t,"T",(function(){return D})),n.d(t,"d",(function(){return P})),n.d(t,"m",(function(){return H})),n.d(t,"u",(function(){return q})),n.d(t,"j",(function(){return K})),n.d(t,"q",(function(){return $})),n.d(t,"t",(function(){return B})),n.d(t,"C",(function(){return W})),n.d(t,"S",(function(){return Q})),n.d(t,"h",(function(){return z})),n.d(t,"a",(function(){return G})),n.d(t,"N",(function(){return X}))},180:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return f})),n.d(t,"k",(function(){return v})),n.d(t,"h",(function(){return S})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return E})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return I})),n.d(t,"n",(function(){return k})),n.d(t,"m",(function(){return L})),n.d(t,"l",(function(){return x})),n.d(t,"v",(function(){return A})),n.d(t,"p",(function(){return R})),n.d(t,"u",(function(){return U})),n.d(t,"o",(function(){return F})),n.d(t,"q",(function(){return D})),n.d(t,"r",(function(){return P})),n.d(t,"s",(function(){return H})),n.d(t,"t",(function(){return B}));var s=n(7),a=n(47),o=n(17),i=n(15);const r="STATUS_FETCH_REQUEST",c="STATUS_FETCH_SUCCESS",u="STATUS_FETCH_FAIL",d="STATUS_DELETE_REQUEST",l="STATUS_DELETE_SUCCESS",p="STATUS_DELETE_FAIL",h="CONTEXT_FETCH_REQUEST",g="CONTEXT_FETCH_SUCCESS",m="CONTEXT_FETCH_FAIL",b="STATUS_MUTE_REQUEST",f="STATUS_MUTE_SUCCESS",_="STATUS_MUTE_FAIL",O="STATUS_UNMUTE_REQUEST",v="STATUS_UNMUTE_SUCCESS",j="STATUS_UNMUTE_FAIL",S="STATUS_REVEAL",y="STATUS_HIDE",C="STATUS_COLLAPSE",E="REDRAFT",T="STATUS_TRANSLATE_SUCCESS",I="STATUS_TRANSLATE_UNDO";function k(e,t){return void 0===t&&(t=!1),(n,i)=>{const d=!t&&null!==i().getIn(["statuses",e],null);n(function(e){return(t,n)=>{t(function(e){return{type:h,id:e}}(e)),Object(s.a)(n).get(`/api/v1/statuses/${e}/context`).then((n=>{t(Object(o.k)(n.data.ancestors.concat(n.data.descendants))),t(function(e,t,n){return{type:g,id:e,ancestors:t,descendants:n,statuses:t.concat(n)}}(e,n.data.ancestors,n.data.descendants))})).catch((n=>{n.response&&404===n.response.status&&t(Object(a.n)(e)),t(function(e,t){return{type:m,id:e,error:t,skipAlert:!0}}(e,n))}))}}(e)),d||(n(function(e,t){return{type:r,id:e,skipLoading:t}}(e,d)),Object(s.a)(i).get(`/api/v1/statuses/${e}`).then((e=>{n(Object(o.j)(e.data)),n(function(e){return{type:c,skipLoading:e}}(d))})).catch((t=>{n(function(e,t,n){return{type:u,id:e,error:t,skipLoading:n,skipAlert:!0}}(e,t,d))})))}}const L=(e,t)=>(n,a)=>{let o=a().getIn(["statuses",e]);o.get("poll")&&(o=o.set("poll",a().getIn(["polls",o.get("poll")]))),n(M()),Object(s.a)(a).get(`/api/v1/statuses/${e}/source`).then((e=>{n(N()),Object(i.kb)(a,t),n(Object(i.yb)(o,e.data.text,e.data.spoiler_text))})).catch((e=>{n(w(e))}))},M=()=>({type:"STATUS_FETCH_SOURCE_REQUEST"}),N=()=>({type:"STATUS_FETCH_SOURCE_SUCCESS"}),w=e=>({type:"STATUS_FETCH_SOURCE_FAIL",error:e});function x(e,t,n){return void 0===n&&(n=!1),(r,c)=>{let u=c().getIn(["statuses",e]);u.get("poll")&&(u=u.set("poll",c().getIn(["polls",u.get("poll")]))),r(function(e){return{type:d,id:e}}(e)),Object(s.a)(c).delete(`/api/v1/statuses/${e}`).then((s=>{r(function(e){return{type:l,id:e}}(e)),r(Object(a.n)(e)),r(Object(o.g)(s.data.account)),n&&(r(function(e,t){return{type:E,status:e,raw_text:t}}(u,s.data.text)),Object(i.kb)(c,t))})).catch((t=>{r(function(e,t){return{type:p,id:e,error:t}}(e,t))}))}}const A=e=>t=>t(Object(o.j)(e));function R(e){return(t,n)=>{t(function(e){return{type:b,id:e}}(e)),Object(s.a)(n).post(`/api/v1/statuses/${e}/mute`).then((()=>{t(function(e){return{type:f,id:e}}(e))})).catch((n=>{t(function(e,t){return{type:_,id:e,error:t}}(e,n))}))}}function U(e){return(t,n)=>{t(function(e){return{type:O,id:e}}(e)),Object(s.a)(n).post(`/api/v1/statuses/${e}/unmute`).then((()=>{t(function(e){return{type:v,id:e}}(e))})).catch((n=>{t(function(e,t){return{type:j,id:e,error:t}}(e,n))}))}}function F(e){return Array.isArray(e)||(e=[e]),{type:y,ids:e}}function D(e){return Array.isArray(e)||(e=[e]),{type:S,ids:e}}function P(e,t){return{type:C,id:e,isCollapsed:t}}const H=e=>(t,n)=>{t(q(e)),Object(s.a)(n).post(`/api/v1/statuses/${e}/translate`).then((n=>{t(K(e,n.data))})).catch((n=>{t($(e,n))}))},q=e=>({type:"STATUS_TRANSLATE_REQUEST",id:e}),K=(e,t)=>({type:T,id:e,translation:t}),$=(e,t)=>({type:"STATUS_TRANSLATE_FAIL",id:e,error:t}),B=e=>({type:I,id:e})},185:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"j",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return m})),n.d(t,"d",(function(){return b})),n.d(t,"n",(function(){return f})),n.d(t,"o",(function(){return j})),n.d(t,"p",(function(){return E})),n.d(t,"m",(function(){return L}));var s=n(7),a=n(17);const o="TRENDS_TAGS_FETCH_REQUEST",i="TRENDS_TAGS_FETCH_SUCCESS",r="TRENDS_TAGS_FETCH_FAIL",c="TRENDS_LINKS_FETCH_REQUEST",u="TRENDS_LINKS_FETCH_SUCCESS",d="TRENDS_LINKS_FETCH_FAIL",l="TRENDS_STATUSES_FETCH_REQUEST",p="TRENDS_STATUSES_FETCH_SUCCESS",h="TRENDS_STATUSES_FETCH_FAIL",g="TRENDS_STATUSES_EXPAND_REQUEST",m="TRENDS_STATUSES_EXPAND_SUCCESS",b="TRENDS_STATUSES_EXPAND_FAIL",f=()=>(e,t)=>{e(_()),Object(s.a)(t).get("/api/v1/trends/tags").then((t=>{let{data:n}=t;return e(O(n))})).catch((t=>e(v(t))))},_=()=>({type:o,skipLoading:!0}),O=e=>({type:i,trends:e,skipLoading:!0}),v=e=>({type:r,error:e,skipLoading:!0,skipAlert:!0}),j=()=>(e,t)=>{e(S()),Object(s.a)(t).get("/api/v1/trends/links").then((t=>{let{data:n}=t;return e(y(n))})).catch((t=>e(C(t))))},S=()=>({type:c,skipLoading:!0}),y=e=>({type:u,trends:e,skipLoading:!0}),C=e=>({type:d,error:e,skipLoading:!0,skipAlert:!0}),E=()=>(e,t)=>{t().getIn(["status_lists","trending","isLoading"])||(e(T()),Object(s.a)(t).get("/api/v1/trends/statuses").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(I(t.data,n?n.uri:null))})).catch((t=>e(k(t)))))},T=()=>({type:l,skipLoading:!0}),I=(e,t)=>({type:p,statuses:e,next:t,skipLoading:!0}),k=e=>({type:h,error:e,skipLoading:!0,skipAlert:!0}),L=()=>(e,t)=>{const n=t().getIn(["status_lists","trending","next"],null);null===n||t().getIn(["status_lists","trending","isLoading"])||(e(M()),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(N(t.data,n?n.uri:null))})).catch((t=>{e(w(t))})))},M=()=>({type:g}),N=(e,t)=>({type:m,statuses:e,next:t}),w=e=>({type:b,error:e})},189:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return _})),n.d(t,"f",(function(){return O}));var s=n(7);const a="DOMAIN_BLOCK_REQUEST",o="DOMAIN_BLOCK_SUCCESS",i="DOMAIN_BLOCK_FAIL",r="DOMAIN_UNBLOCK_REQUEST",c="DOMAIN_UNBLOCK_SUCCESS",u="DOMAIN_UNBLOCK_FAIL",d="DOMAIN_BLOCKS_FETCH_REQUEST",l="DOMAIN_BLOCKS_FETCH_SUCCESS",p="DOMAIN_BLOCKS_FETCH_FAIL",h="DOMAIN_BLOCKS_EXPAND_REQUEST",g="DOMAIN_BLOCKS_EXPAND_SUCCESS",m="DOMAIN_BLOCKS_EXPAND_FAIL";function b(e){return(t,n)=>{t(function(e){return{type:a,domain:e}}(e)),Object(s.a)(n).post("/api/v1/domain_blocks",{domain:e}).then((()=>{const s="@"+e,a=n().get("accounts").filter((e=>e.get("acct").endsWith(s))).valueSeq().map((e=>e.get("id")));t(function(e,t){return{type:o,domain:e,accounts:t}}(e,a))})).catch((n=>{t(function(e,t){return{type:i,domain:e,error:t}}(e,n))}))}}function f(e){return(t,n)=>{t(function(e){return{type:r,domain:e}}(e)),Object(s.a)(n).delete("/api/v1/domain_blocks",{params:{domain:e}}).then((()=>{const s="@"+e,a=n().get("accounts").filter((e=>e.get("acct").endsWith(s))).valueSeq().map((e=>e.get("id")));t(function(e,t){return{type:c,domain:e,accounts:t}}(e,a))})).catch((n=>{t(function(e,t){return{type:u,domain:e,error:t}}(e,n))}))}}function _(){return(e,t)=>{e({type:d}),Object(s.a)(t).get("/api/v1/domain_blocks").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(function(e,t){return{type:l,domains:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e({type:p,error:t})}))}}function O(){return(e,t)=>{const n=t().getIn(["domain_lists","blocks","next"]);n&&(e({type:h}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(function(e,t){return{type:g,domains:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e({type:m,error:t})})))}}},194:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"n",(function(){return m})),n.d(t,"m",(function(){return O})),n.d(t,"l",(function(){return v})),n.d(t,"o",(function(){return j})),n.d(t,"p",(function(){return E}));var s=n(7);const a="HASHTAG_FETCH_SUCCESS",o="FOLLOWED_HASHTAGS_FETCH_REQUEST",i="FOLLOWED_HASHTAGS_FETCH_SUCCESS",r="FOLLOWED_HASHTAGS_FETCH_FAIL",c="FOLLOWED_HASHTAGS_EXPAND_REQUEST",u="FOLLOWED_HASHTAGS_EXPAND_SUCCESS",d="FOLLOWED_HASHTAGS_EXPAND_FAIL",l="HASHTAG_FOLLOW_REQUEST",p="HASHTAG_FOLLOW_FAIL",h="HASHTAG_UNFOLLOW_REQUEST",g="HASHTAG_UNFOLLOW_FAIL",m=e=>(t,n)=>{t(b()),Object(s.a)(n).get(`/api/v1/tags/${e}`).then((n=>{let{data:s}=n;t(f(e,s))})).catch((e=>{t(_(e))}))},b=()=>({type:"HASHTAG_FETCH_REQUEST"}),f=(e,t)=>({type:a,name:e,tag:t}),_=e=>({type:"HASHTAG_FETCH_FAIL",error:e}),O=()=>(e,t)=>{e({type:o}),Object(s.a)(t).get("/api/v1/followed_tags").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(function(e,t){return{type:i,followed_tags:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e({type:r,error:t})}))};function v(){return(e,t)=>{const n=t().getIn(["followed_tags","next"]);null!==n&&(e({type:c}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(function(e,t){return{type:u,followed_tags:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:d,error:e}}(t))})))}}const j=e=>(t,n)=>{t(S(e)),Object(s.a)(n).post(`/api/v1/tags/${e}/follow`).then((n=>{let{data:s}=n;t(y(e,s))})).catch((n=>{t(C(e,n))}))},S=e=>({type:l,name:e}),y=(e,t)=>({type:"HASHTAG_FOLLOW_SUCCESS",name:e,tag:t}),C=(e,t)=>({type:p,name:e,error:t}),E=e=>(t,n)=>{t(T(e)),Object(s.a)(n).post(`/api/v1/tags/${e}/unfollow`).then((n=>{let{data:s}=n;t(I(e,s))})).catch((n=>{t(k(e,n))}))},T=e=>({type:h,name:e}),I=(e,t)=>({type:"HASHTAG_UNFOLLOW_SUCCESS",name:e,tag:t}),k=(e,t)=>({type:g,name:e,error:t})},196:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"l",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return b})),n.d(t,"p",(function(){return _})),n.d(t,"s",(function(){return S})),n.d(t,"o",(function(){return y})),n.d(t,"m",(function(){return I})),n.d(t,"q",(function(){return N})),n.d(t,"t",(function(){return R})),n.d(t,"r",(function(){return U})),n.d(t,"n",(function(){return F}));var s=n(7),a=n(248);const o="ANNOUNCEMENTS_FETCH_REQUEST",i="ANNOUNCEMENTS_FETCH_SUCCESS",r="ANNOUNCEMENTS_FETCH_FAIL",c="ANNOUNCEMENTS_UPDATE",u="ANNOUNCEMENTS_DELETE",d="ANNOUNCEMENTS_DISMISS_SUCCESS",l="ANNOUNCEMENTS_REACTION_ADD_REQUEST",p="ANNOUNCEMENTS_REACTION_ADD_FAIL",h="ANNOUNCEMENTS_REACTION_REMOVE_REQUEST",g="ANNOUNCEMENTS_REACTION_REMOVE_FAIL",m="ANNOUNCEMENTS_REACTION_UPDATE",b="ANNOUNCEMENTS_TOGGLE_SHOW",f=()=>{},_=function(e){return void 0===e&&(e=f),(t,n)=>{t(O()),Object(s.a)(n).get("/api/v1/announcements").then((e=>{t(v(e.data.map((e=>Object(a.b)(e)))))})).catch((e=>{t(j(e))})).finally((()=>{e()}))}},O=()=>({type:o,skipLoading:!0}),v=e=>({type:i,announcements:e,skipLoading:!0}),j=e=>({type:r,error:e,skipLoading:!0,skipAlert:!0}),S=e=>({type:c,announcement:Object(a.b)(e)}),y=e=>(t,n)=>{t(C(e)),Object(s.a)(n).post(`/api/v1/announcements/${e}/dismiss`).then((()=>{t(E(e))})).catch((n=>{t(T(e,n))}))},C=e=>({type:"ANNOUNCEMENTS_DISMISS_REQUEST",id:e}),E=e=>({type:d,id:e}),T=(e,t)=>({type:"ANNOUNCEMENTS_DISMISS_FAIL",id:e,error:t}),I=(e,t)=>(n,a)=>{const o=a().getIn(["announcements","items"]).find((t=>t.get("id")===e));let i=!1;if(o){const e=o.get("reactions").find((e=>e.get("name")===t));e&&e.get("me")&&(i=!0)}i||n(k(e,t,i)),Object(s.a)(a).put(`/api/v1/announcements/${e}/reactions/${encodeURIComponent(t)}`).then((()=>{n(L(e,t,i))})).catch((s=>{i||n(M(e,t,s))}))},k=(e,t)=>({type:l,id:e,name:t,skipLoading:!0}),L=(e,t)=>({type:"ANNOUNCEMENTS_REACTION_ADD_SUCCESS",id:e,name:t,skipLoading:!0}),M=(e,t,n)=>({type:p,id:e,name:t,error:n,skipLoading:!0}),N=(e,t)=>(n,a)=>{n(w(e,t)),Object(s.a)(a).delete(`/api/v1/announcements/${e}/reactions/${encodeURIComponent(t)}`).then((()=>{n(x(e,t))})).catch((s=>{n(A(e,t,s))}))},w=(e,t)=>({type:h,id:e,name:t,skipLoading:!0}),x=(e,t)=>({type:"ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS",id:e,name:t,skipLoading:!0}),A=(e,t,n)=>({type:g,id:e,name:t,error:n,skipLoading:!0}),R=e=>({type:m,reaction:e}),U=()=>({type:b}),F=e=>({type:u,id:e})},199:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var s=n(4),a=n(15),o=n(17);const i="STORE_HYDRATE";function r(e){return t=>{const n=(e=>Object(s.fromJS)(e,((e,t)=>s.Iterable.isIndexed(t)?t.toList():t.toMap())))(e);t({type:i,state:n}),t(Object(a.mb)()),t(Object(o.h)(Object.values(e.accounts)))}}},201:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(1),a=n.n(s),o=n(10),i=n.n(o);class r extends a.a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{!this.props.disabled&&this.props.onClick&&this.props.onClick(e)},this.setRef=e=>{this.node=e}}focus(){this.node.focus()}render(){const e=i()("button",this.props.className,{"button-secondary":this.props.secondary,"button--block":this.props.block});return a.a.createElement("button",{className:e,disabled:this.props.disabled,onClick:this.handleClick,ref:this.setRef,title:this.props.title,type:this.props.type},this.props.text||this.props.children)}}r.defaultProps={type:"button"}},205:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"a",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"k",(function(){return f})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return O})),n.d(t,"j",(function(){return v}));var s=n(7),a=n(22),o=n(17),i=n(60);const r="MUTES_FETCH_REQUEST",c="MUTES_FETCH_SUCCESS",u="MUTES_FETCH_FAIL",d="MUTES_EXPAND_REQUEST",l="MUTES_EXPAND_SUCCESS",p="MUTES_EXPAND_FAIL",h="MUTES_INIT_MODAL",g="MUTES_TOGGLE_HIDE_NOTIFICATIONS",m="MUTES_CHANGE_DURATION";function b(){return(e,t)=>{e({type:r}),Object(s.a)(t).get("/api/v1/mutes").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(o.h)(t.data)),e(function(e,t){return{type:c,accounts:e,next:t}}(t.data,n?n.uri:null)),e(Object(a.S)(t.data.map((e=>e.id))))})).catch((t=>e(function(e){return{type:u,error:e}}(t))))}}function f(){return(e,t)=>{const n=t().getIn(["user_lists","mutes","next"]);null!==n&&(e({type:d}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(o.h)(t.data)),e(function(e,t){return{type:l,accounts:e,next:t}}(t.data,n?n.uri:null)),e(Object(a.S)(t.data.map((e=>e.id))))})).catch((t=>e(function(e){return{type:p,error:e}}(t)))))}}function _(e){return t=>{t({type:h,account:e}),t(Object(i.d)("MUTE"))}}function O(){return e=>{e({type:g})}}function v(e){return t=>{t({type:m,duration:e})}}},217:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"g",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return _})),n.d(t,"j",(function(){return S}));var s=n(7),a=n(17);const o="Server_FETCH_REQUEST",i="Server_FETCH_SUCCESS",r="Server_FETCH_FAIL",c="EXTENDED_DESCRIPTION_REQUEST",u="EXTENDED_DESCRIPTION_SUCCESS",d="EXTENDED_DESCRIPTION_FAIL",l="SERVER_DOMAIN_BLOCKS_FETCH_REQUEST",p="SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS",h="SERVER_DOMAIN_BLOCKS_FETCH_FAIL",g=()=>(e,t)=>{e(m()),Object(s.a)(t).get("/api/v2/instance").then((t=>{let{data:n}=t;n.contact.account&&e(Object(a.g)(n.contact.account)),e(b(n))})).catch((t=>e(f(t))))},m=()=>({type:o}),b=e=>({type:i,server:e}),f=e=>({type:r,error:e}),_=()=>(e,t)=>{e(O()),Object(s.a)(t).get("/api/v1/instance/extended_description").then((t=>{let{data:n}=t;return e(v(n))})).catch((t=>e(j(t))))},O=()=>({type:c}),v=e=>({type:u,description:e}),j=e=>({type:d,error:e}),S=()=>(e,t)=>{e(y()),Object(s.a)(t).get("/api/v1/instance/domain_blocks").then((t=>{let{data:n}=t;return e(C(!0,n))})).catch((t=>{404===t.response.status?e(C(!1,[])):e(E(t))}))},y=()=>({type:l}),C=(e,t)=>({type:p,isAvailable:e,blocks:t}),E=e=>({type:h,error:e})},22:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"a",(function(){return b})),n.d(t,"i",(function(){return O})),n.d(t,"f",(function(){return S})),n.d(t,"m",(function(){return E})),n.d(t,"g",(function(){return k})),n.d(t,"n",(function(){return N})),n.d(t,"s",(function(){return x})),n.d(t,"t",(function(){return A})),n.d(t,"r",(function(){return R})),n.d(t,"p",(function(){return U})),n.d(t,"q",(function(){return F})),n.d(t,"o",(function(){return D})),n.d(t,"y",(function(){return P})),n.d(t,"z",(function(){return H})),n.d(t,"x",(function(){return q})),n.d(t,"v",(function(){return K})),n.d(t,"w",(function(){return $})),n.d(t,"u",(function(){return B})),n.d(t,"I",(function(){return Q})),n.d(t,"E",(function(){return G})),n.d(t,"F",(function(){return X})),n.d(t,"D",(function(){return V})),n.d(t,"B",(function(){return J})),n.d(t,"C",(function(){return Y})),n.d(t,"A",(function(){return Z})),n.d(t,"G",(function(){return te})),n.d(t,"H",(function(){return ae})),n.d(t,"h",(function(){return ie})),n.d(t,"O",(function(){return re})),n.d(t,"U",(function(){return ce})),n.d(t,"T",(function(){return pe})),n.d(t,"ab",(function(){return he})),n.d(t,"K",(function(){return ge})),n.d(t,"Z",(function(){return me})),n.d(t,"V",(function(){return be})),n.d(t,"bb",(function(){return fe})),n.d(t,"Q",(function(){return _e})),n.d(t,"M",(function(){return Oe})),n.d(t,"R",(function(){return ve})),n.d(t,"N",(function(){return je})),n.d(t,"S",(function(){return Se})),n.d(t,"P",(function(){return ye})),n.d(t,"L",(function(){return Ce})),n.d(t,"J",(function(){return Ee})),n.d(t,"X",(function(){return Te})),n.d(t,"W",(function(){return Ie})),n.d(t,"cb",(function(){return ke})),n.d(t,"Y",(function(){return Le}));var s=n(7),a=n(17);const o="ACCOUNT_FETCH_REQUEST",i="ACCOUNT_FETCH_SUCCESS",r="ACCOUNT_FETCH_FAIL",c="ACCOUNT_LOOKUP_FAIL",u="ACCOUNT_FOLLOW_REQUEST",d="ACCOUNT_FOLLOW_SUCCESS",l="ACCOUNT_FOLLOW_FAIL",p="ACCOUNT_UNFOLLOW_REQUEST",h="ACCOUNT_UNFOLLOW_SUCCESS",g="ACCOUNT_UNFOLLOW_FAIL",m="ACCOUNT_BLOCK_REQUEST",b="ACCOUNT_BLOCK_SUCCESS",f="ACCOUNT_BLOCK_FAIL",_="ACCOUNT_UNBLOCK_REQUEST",O="ACCOUNT_UNBLOCK_SUCCESS",v="ACCOUNT_UNBLOCK_FAIL",j="ACCOUNT_MUTE_REQUEST",S="ACCOUNT_MUTE_SUCCESS",y="ACCOUNT_MUTE_FAIL",C="ACCOUNT_UNMUTE_REQUEST",E="ACCOUNT_UNMUTE_SUCCESS",T="ACCOUNT_UNMUTE_FAIL",I="ACCOUNT_PIN_REQUEST",k="ACCOUNT_PIN_SUCCESS",L="ACCOUNT_PIN_FAIL",M="ACCOUNT_UNPIN_REQUEST",N="ACCOUNT_UNPIN_SUCCESS",w="ACCOUNT_UNPIN_FAIL",x="FOLLOWERS_FETCH_REQUEST",A="FOLLOWERS_FETCH_SUCCESS",R="FOLLOWERS_FETCH_FAIL",U="FOLLOWERS_EXPAND_REQUEST",F="FOLLOWERS_EXPAND_SUCCESS",D="FOLLOWERS_EXPAND_FAIL",P="FOLLOWING_FETCH_REQUEST",H="FOLLOWING_FETCH_SUCCESS",q="FOLLOWING_FETCH_FAIL",K="FOLLOWING_EXPAND_REQUEST",$="FOLLOWING_EXPAND_SUCCESS",B="FOLLOWING_EXPAND_FAIL",W="RELATIONSHIPS_FETCH_REQUEST",Q="RELATIONSHIPS_FETCH_SUCCESS",z="RELATIONSHIPS_FETCH_FAIL",G="FOLLOW_REQUESTS_FETCH_REQUEST",X="FOLLOW_REQUESTS_FETCH_SUCCESS",V="FOLLOW_REQUESTS_FETCH_FAIL",J="FOLLOW_REQUESTS_EXPAND_REQUEST",Y="FOLLOW_REQUESTS_EXPAND_SUCCESS",Z="FOLLOW_REQUESTS_EXPAND_FAIL",ee="FOLLOW_REQUEST_AUTHORIZE_REQUEST",te="FOLLOW_REQUEST_AUTHORIZE_SUCCESS",ne="FOLLOW_REQUEST_AUTHORIZE_FAIL",se="FOLLOW_REQUEST_REJECT_REQUEST",ae="FOLLOW_REQUEST_REJECT_SUCCESS",oe="FOLLOW_REQUEST_REJECT_FAIL",ie="ACCOUNT_REVEAL";function re(e){return(t,n)=>{t(Se([e])),t(function(e){return{type:o,id:e}}(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}`).then((e=>{t(Object(a.g)(e.data)),t({type:i})})).catch((n=>{t(function(e,t){return{type:r,id:e,error:t,skipAlert:!0}}(e,n))}))}}const ce=e=>(t,n)=>{t(ue(e)),Object(s.a)(n).get("/api/v1/accounts/lookup",{params:{acct:e}}).then((e=>{t(Se([e.data.id])),t(Object(a.g)(e.data)),t(de())})).catch((n=>{t(le(e,n))}))},ue=e=>({type:"ACCOUNT_LOOKUP_REQUEST",acct:e}),de=()=>({type:"ACCOUNT_LOOKUP_SUCCESS"}),le=(e,t)=>({type:c,acct:e,error:t,skipAlert:!0});function pe(e,t){return void 0===t&&(t={reblogs:!0}),(n,a)=>{const o=a().getIn(["relationships",e,"following"]),i=a().getIn(["accounts",e,"locked"],!1);n(function(e,t){return{type:u,id:e,locked:t,skipLoading:!0}}(e,i)),Object(s.a)(a).post(`/api/v1/accounts/${e}/follow`,t).then((e=>{n(function(e,t){return{type:d,relationship:e,alreadyFollowing:t,skipLoading:!0}}(e.data,o))})).catch((e=>{n(function(e,t){return{type:l,error:e,locked:t,skipLoading:!0}}(e,i))}))}}function he(e){return(t,n)=>{t(function(e){return{type:p,id:e,skipLoading:!0}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/unfollow`).then((e=>{var s,a;t((s=e.data,a=n().get("statuses"),{type:h,relationship:s,statuses:a,skipLoading:!0}))})).catch((e=>{t(function(e){return{type:g,error:e,skipLoading:!0}}(e))}))}}function ge(e){return(t,n)=>{t(function(e){return{type:m,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/block`).then((e=>{var s,a;t((s=e.data,a=n().get("statuses"),{type:b,relationship:s,statuses:a}))})).catch((n=>{t(function(e){return{type:f,error:e}}(e))}))}}function me(e){return(t,n)=>{t(function(e){return{type:_,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/unblock`).then((e=>{var n;t((n=e.data,{type:O,relationship:n}))})).catch((n=>{t(function(e){return{type:v,error:e}}(e))}))}}function be(e,t,n){return void 0===n&&(n=0),(a,o)=>{a(function(e){return{type:j,id:e}}(e)),Object(s.a)(o).post(`/api/v1/accounts/${e}/mute`,{notifications:t,duration:n}).then((e=>{var t,n;a((t=e.data,n=o().get("statuses"),{type:S,relationship:t,statuses:n}))})).catch((t=>{a(function(e){return{type:y,error:e}}(e))}))}}function fe(e){return(t,n)=>{t(function(e){return{type:C,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/unmute`).then((e=>{var n;t((n=e.data,{type:E,relationship:n}))})).catch((n=>{t(function(e){return{type:T,error:e}}(e))}))}}function _e(e){return(t,n)=>{t(function(e){return{type:x,id:e}}(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}/followers`).then((n=>{const o=Object(s.b)(n).refs.find((e=>"next"===e.rel));t(Object(a.h)(n.data)),t(function(e,t,n){return{type:A,id:e,accounts:t,next:n}}(e,n.data,o?o.uri:null)),t(Se(n.data.map((e=>e.id))))})).catch((n=>{t(function(e,t){return{type:R,id:e,error:t,skipNotFound:!0}}(e,n))}))}}function Oe(e){return(t,n)=>{const o=n().getIn(["user_lists","followers",e,"next"]);null!==o&&(t(function(e){return{type:U,id:e}}(e)),Object(s.a)(n).get(o).then((n=>{const o=Object(s.b)(n).refs.find((e=>"next"===e.rel));t(Object(a.h)(n.data)),t(function(e,t,n){return{type:F,id:e,accounts:t,next:n}}(e,n.data,o?o.uri:null)),t(Se(n.data.map((e=>e.id))))})).catch((n=>{t(function(e,t){return{type:D,id:e,error:t}}(e,n))})))}}function ve(e){return(t,n)=>{t(function(e){return{type:P,id:e}}(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}/following`).then((n=>{const o=Object(s.b)(n).refs.find((e=>"next"===e.rel));t(Object(a.h)(n.data)),t(function(e,t,n){return{type:H,id:e,accounts:t,next:n}}(e,n.data,o?o.uri:null)),t(Se(n.data.map((e=>e.id))))})).catch((n=>{t(function(e,t){return{type:q,id:e,error:t,skipNotFound:!0}}(e,n))}))}}function je(e){return(t,n)=>{const o=n().getIn(["user_lists","following",e,"next"]);null!==o&&(t(function(e){return{type:K,id:e}}(e)),Object(s.a)(n).get(o).then((n=>{const o=Object(s.b)(n).refs.find((e=>"next"===e.rel));t(Object(a.h)(n.data)),t(function(e,t,n){return{type:$,id:e,accounts:t,next:n}}(e,n.data,o?o.uri:null)),t(Se(n.data.map((e=>e.id))))})).catch((n=>{t(function(e,t){return{type:B,id:e,error:t}}(e,n))})))}}function Se(e){return(t,n)=>{const a=n(),o=a.get("relationships"),i=e.filter((e=>null===o.get(e,null)));!a.getIn(["meta","me"])||0===i.length||(t({type:W,ids:i,skipLoading:!0}),Object(s.a)(n).get(`/api/v1/accounts/relationships?${i.map((e=>`id[]=${e}`)).join("&")}`).then((e=>{var n;t((n=e.data,{type:Q,relationships:n,skipLoading:!0}))})).catch((e=>{t(function(e){return{type:z,error:e,skipLoading:!0,skipNotFound:!0}}(e))})))}}function ye(){return(e,t)=>{e({type:G}),Object(s.a)(t).get("/api/v1/follow_requests").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.h)(t.data)),e(function(e,t){return{type:X,accounts:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>e(function(e){return{type:V,error:e}}(t))))}}function Ce(){return(e,t)=>{const n=t().getIn(["user_lists","follow_requests","next"]);null!==n&&(e({type:J}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.h)(t.data)),e(function(e,t){return{type:Y,accounts:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>e(function(e){return{type:Z,error:e}}(t)))))}}function Ee(e){return(t,n)=>{t(function(e){return{type:ee,id:e}}(e)),Object(s.a)(n).post(`/api/v1/follow_requests/${e}/authorize`).then((()=>t(function(e){return{type:te,id:e}}(e)))).catch((n=>t(function(e,t){return{type:ne,id:e,error:t}}(e,n))))}}function Te(e){return(t,n)=>{t(function(e){return{type:se,id:e}}(e)),Object(s.a)(n).post(`/api/v1/follow_requests/${e}/reject`).then((()=>t(function(e){return{type:ae,id:e}}(e)))).catch((n=>t(function(e,t){return{type:oe,id:e,error:t}}(e,n))))}}function Ie(e){return(t,n)=>{t(function(e){return{type:I,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/pin`).then((e=>{var n;t((n=e.data,{type:k,relationship:n}))})).catch((e=>{t(function(e){return{type:L,error:e}}(e))}))}}function ke(e){return(t,n)=>{t(function(e){return{type:M,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/unpin`).then((e=>{var n;t((n=e.data,{type:N,relationship:n}))})).catch((e=>{t(function(e){return{type:w,error:e}}(e))}))}}const Le=e=>({type:ie,id:e})},230:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return m})),n.d(t,"j",(function(){return b}));var s=n(7),a=n(22),o=n(17),i=n(60);const r="BLOCKS_FETCH_REQUEST",c="BLOCKS_FETCH_SUCCESS",u="BLOCKS_FETCH_FAIL",d="BLOCKS_EXPAND_REQUEST",l="BLOCKS_EXPAND_SUCCESS",p="BLOCKS_EXPAND_FAIL",h="BLOCKS_INIT_MODAL";function g(){return(e,t)=>{e({type:r}),Object(s.a)(t).get("/api/v1/blocks").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(o.h)(t.data)),e(function(e,t){return{type:c,accounts:e,next:t}}(t.data,n?n.uri:null)),e(Object(a.S)(t.data.map((e=>e.id))))})).catch((t=>e(function(e){return{type:u,error:e}}(t))))}}function m(){return(e,t)=>{const n=t().getIn(["user_lists","blocks","next"]);null!==n&&(e({type:d}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(o.h)(t.data)),e(function(e,t){return{type:l,accounts:e,next:t}}(t.data,n?n.uri:null)),e(Object(a.S)(t.data.map((e=>e.id))))})).catch((t=>e(function(e){return{type:p,error:e}}(t)))))}}function b(e){return t=>{t({type:h,account:e}),t(Object(i.d)("BLOCK"))}}},234:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return g})),n.d(t,"k",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"n",(function(){return v})),n.d(t,"i",(function(){return j}));var s=n(7),a=n(17);const o="CONVERSATIONS_MOUNT",i="CONVERSATIONS_UNMOUNT",r="CONVERSATIONS_FETCH_REQUEST",c="CONVERSATIONS_FETCH_SUCCESS",u="CONVERSATIONS_FETCH_FAIL",d="CONVERSATIONS_UPDATE",l="CONVERSATIONS_READ",p="CONVERSATIONS_DELETE_SUCCESS",h=()=>({type:o}),g=()=>({type:i}),m=e=>(t,n)=>{t({type:l,id:e}),Object(s.a)(n).post(`/api/v1/conversations/${e}/read`)},b=function(e){let{maxId:t}=void 0===e?{}:e;return(e,n)=>{e(f());const o={max_id:t};t||(o.since_id=n().getIn(["conversations","items",0,"last_status"]));const i=!!o.since_id;Object(s.a)(n).get("/api/v1/conversations",{params:o}).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.h)(t.data.reduce(((e,t)=>e.concat(t.accounts)),[]))),e(Object(a.k)(t.data.map((e=>e.last_status)).filter((e=>!!e)))),e(_(t.data,n?n.uri:null,i))})).catch((t=>e(O(t))))}},f=()=>({type:r}),_=(e,t,n)=>({type:c,conversations:e,next:t,isLoadingRecent:n}),O=e=>({type:u,error:e}),v=e=>t=>{t(Object(a.h)(e.accounts)),e.last_status&&t(Object(a.j)(e.last_status)),t({type:d,conversation:e})},j=e=>(t,n)=>{t(S(e)),Object(s.a)(n).delete(`/api/v1/conversations/${e}`).then((()=>t(y(e)))).catch((n=>t(C(e,n))))},S=e=>({type:"CONVERSATIONS_DELETE_REQUEST",id:e}),y=e=>({type:p,id:e}),C=(e,t)=>({type:"CONVERSATIONS_DELETE_FAIL",id:e,error:t})},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return c}));const s="APP_FOCUS",a="APP_UNFOCUS",o=()=>({type:s}),i=()=>({type:a}),r="APP_LAYOUT_CHANGE",c=e=>({type:r,layout:e})},246:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"l",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return j}));var s=n(7),a=n(22),o=n(17);const i="SEARCH_CHANGE",r="SEARCH_CLEAR",c="SEARCH_SHOW",u="SEARCH_FETCH_REQUEST",d="SEARCH_FETCH_SUCCESS",l="SEARCH_FETCH_FAIL",p="SEARCH_EXPAND_SUCCESS";function h(e){return{type:i,value:e}}function g(){return{type:r}}function m(){return(e,t)=>{const n=t().getIn(["search","value"]),i=!!t().getIn(["meta","me"]);0!==n.length?(e({type:u}),Object(s.a)(t).get("/api/v2/search",{params:{q:n,resolve:i,limit:5}}).then((t=>{t.data.accounts&&e(Object(o.h)(t.data.accounts)),t.data.statuses&&e(Object(o.k)(t.data.statuses)),e(b(t.data,n)),e(Object(a.S)(t.data.accounts.map((e=>e.id))))})).catch((t=>{e(function(e){return{type:l,error:e}}(t))}))):e(b({accounts:[],statuses:[],hashtags:[]},""))}}function b(e,t){return{type:d,results:e,searchTerm:t}}const f=e=>(t,n)=>{const i=n().getIn(["search","value"]),r=n().getIn(["search","results",e]).size;t(_()),Object(s.a)(n).get("/api/v2/search",{params:{q:i,type:e,offset:r}}).then((n=>{let{data:s}=n;s.accounts&&t(Object(o.h)(s.accounts)),s.statuses&&t(Object(o.k)(s.statuses)),t(O(s,i,e)),t(Object(a.S)(s.accounts.map((e=>e.id))))})).catch((e=>{t(v(e))}))},_=()=>({type:"SEARCH_EXPAND_REQUEST"}),O=(e,t,n)=>({type:p,results:e,searchTerm:t,searchType:n}),v=e=>({type:"SEARCH_EXPAND_FAIL",error:e}),j=()=>({type:c})},277:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return b}));var s=n(7),a=n(17),o=n(22);const i="DIRECTORY_FETCH_REQUEST",r="DIRECTORY_FETCH_SUCCESS",c="DIRECTORY_FETCH_FAIL",u="DIRECTORY_EXPAND_REQUEST",d="DIRECTORY_EXPAND_SUCCESS",l="DIRECTORY_EXPAND_FAIL",p=e=>(t,n)=>{t(h()),Object(s.a)(n).get("/api/v1/directory",{params:{...e,limit:20}}).then((e=>{let{data:n}=e;t(Object(a.h)(n)),t(g(n)),t(Object(o.S)(n.map((e=>e.id))))})).catch((e=>t(m(e))))},h=()=>({type:i}),g=e=>({type:r,accounts:e}),m=e=>({type:c,error:e}),b=e=>(t,n)=>{t(f());const i=n().getIn(["user_lists","directory","items"]).size;Object(s.a)(n).get("/api/v1/directory",{params:{...e,offset:i,limit:20}}).then((e=>{let{data:n}=e;t(Object(a.h)(n)),t(_(n)),t(Object(o.S)(n.map((e=>e.id))))})).catch((e=>t(O(e))))},f=()=>({type:u}),_=e=>({type:d,accounts:e}),O=e=>({type:l,error:e})},278:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return p}));var s=n(7),a=n(17);const o="FAVOURITED_STATUSES_FETCH_REQUEST",i="FAVOURITED_STATUSES_FETCH_SUCCESS",r="FAVOURITED_STATUSES_FETCH_FAIL",c="FAVOURITED_STATUSES_EXPAND_REQUEST",u="FAVOURITED_STATUSES_EXPAND_SUCCESS",d="FAVOURITED_STATUSES_EXPAND_FAIL";function l(){return(e,t)=>{t().getIn(["status_lists","favourites","isLoading"])||(e({type:o,skipLoading:!0}),Object(s.a)(t).get("/api/v1/favourites").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(function(e,t){return{type:i,statuses:e,next:t,skipLoading:!0}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:r,error:e,skipLoading:!0}}(t))})))}}function p(){return(e,t)=>{const n=t().getIn(["status_lists","favourites","next"],null);null===n||t().getIn(["status_lists","favourites","isLoading"])||(e({type:c}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(function(e,t){return{type:u,statuses:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:d,error:e}}(t))})))}}},279:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return p}));var s=n(7),a=n(17);const o="BOOKMARKED_STATUSES_FETCH_REQUEST",i="BOOKMARKED_STATUSES_FETCH_SUCCESS",r="BOOKMARKED_STATUSES_FETCH_FAIL",c="BOOKMARKED_STATUSES_EXPAND_REQUEST",u="BOOKMARKED_STATUSES_EXPAND_SUCCESS",d="BOOKMARKED_STATUSES_EXPAND_FAIL";function l(){return(e,t)=>{t().getIn(["status_lists","bookmarks","isLoading"])||(e({type:o}),Object(s.a)(t).get("/api/v1/bookmarks").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(function(e,t){return{type:i,statuses:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:r,error:e}}(t))})))}}function p(){return(e,t)=>{const n=t().getIn(["status_lists","bookmarks","next"],null);null===n||t().getIn(["status_lists","bookmarks","isLoading"])||(e({type:c}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(function(e,t){return{type:u,statuses:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:d,error:e}}(t))})))}}},280:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var s=n(0),a=n(1),o=n.n(a),i=n(18),r=n(10),c=n.n(r);class u extends o.a.PureComponent{constructor(){super(...arguments),this.state={hovering:!1},this.handleMouseEnter=()=>{this.props.animate||this.setState({hovering:!0})},this.handleMouseLeave=()=>{this.props.animate||this.setState({hovering:!1})}}render(){const{account:e,size:t,animate:n,inline:a}=this.props,{hovering:o}=this.state,i={...this.props.style,width:`${t}px`,height:`${t}px`};let r;return r=o||n?null==e?void 0:e.get("avatar"):null==e?void 0:e.get("avatar_static"),Object(s.a)("div",{className:c()("account__avatar",{"account__avatar-inline":a}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:i},void 0,r&&Object(s.a)("img",{src:r,alt:null==e?void 0:e.get("acct")}))}}u.defaultProps={animate:i.a,size:20,inline:!1}},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n(0),a=n(1),o=n.n(a),i=n(18),r=n(571);class c extends o.a.PureComponent{constructor(){super(...arguments),this.handleMouseEnter=e=>{let{currentTarget:t}=e;if(i.a)return;const n=t.querySelectorAll(".custom-emoji");for(var s=0;s<n.length;s++){let e=n[s];e.src=e.getAttribute("data-original")}},this.handleMouseLeave=e=>{let{currentTarget:t}=e;if(i.a)return;const n=t.querySelectorAll(".custom-emoji");for(var s=0;s<n.length;s++){let e=n[s];e.src=e.getAttribute("data-static")}}}render(){const{others:e,localDomain:t}=this.props;let n,a,o;if(e&&e.size>1)n=e.take(2).map((e=>Object(s.a)("bdi",{},e.get("id"),Object(s.a)("strong",{className:"display-name__html",dangerouslySetInnerHTML:{__html:e.get("display_name_html")}})))).reduce(((e,t)=>[e,", ",t])),e.size-2>0&&(a="+"+(e.size-2));else if(e&&e.size>0||this.props.account){o=e&&e.size>0?e.first():this.props.account;let i=o.get("acct");-1===i.indexOf("@")&&t&&(i=`${i}@${t}`),n=Object(s.a)("bdi",{},void 0,Object(s.a)("strong",{className:"display-name__html",dangerouslySetInnerHTML:{__html:o.get("display_name_html")}})),a=Object(s.a)("span",{className:"display-name__account"},void 0,"@",i)}else n=Object(s.a)("bdi",{},void 0,Object(s.a)("strong",{className:"display-name__html"},void 0,Object(s.a)(r.a,{width:"10ch"}))),a=Object(s.a)("span",{className:"display-name__account"},void 0,Object(s.a)(r.a,{width:"7ch"}));return Object(s.a)("span",{className:"display-name",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,n," ",a)}}},301:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return l}));var s=n(164);const a="COLUMN_ADD",o="COLUMN_REMOVE",i="COLUMN_MOVE",r="COLUMN_PARAMS_CHANGE";function c(e,t){return n=>{n({type:a,id:e,params:t}),n(Object(s.d)())}}function u(e){return t=>{t({type:o,uuid:e}),t(Object(s.d)())}}function d(e,t){return n=>{n({type:i,uuid:e,direction:t}),n(Object(s.d)())}}function l(e,t,n){return a=>{a({type:r,uuid:e,path:t,value:n}),a(Object(s.d)())}}},354:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return g}));var s=n(7),a=n(17),o=n(22);const i="SUGGESTIONS_FETCH_REQUEST",r="SUGGESTIONS_FETCH_SUCCESS",c="SUGGESTIONS_FETCH_FAIL",u="SUGGESTIONS_DISMISS";function d(e){return void 0===e&&(e=!1),(t,n)=>{t(l()),Object(s.a)(n).get("/api/v2/suggestions",{params:{limit:20}}).then((n=>{t(Object(a.h)(n.data.map((e=>e.account)))),t(p(n.data)),e&&t(Object(o.S)(n.data.map((e=>e.account.id))))})).catch((e=>t(h(e))))}}function l(){return{type:i,skipLoading:!0}}function p(e){return{type:r,suggestions:e,skipLoading:!0}}function h(e){return{type:c,error:e,skipLoading:!0,skipAlert:!0}}const g=e=>(t,n)=>{t({type:u,id:e}),Object(s.a)(n).delete(`/api/v1/suggestions/${e}`).then((()=>{t(l()),Object(s.a)(n).get("/api/v2/suggestions").then((e=>{t(Object(a.h)(e.data.map((e=>e.account)))),t(p(e.data))})).catch((e=>t(h(e))))})).catch((()=>{}))}},361:function(e,t,n){"use strict";n.r(t),n.d(t,"changeAlerts",(function(){return v})),n.d(t,"CLEAR_SUBSCRIPTION",(function(){return o})),n.d(t,"SET_BROWSER_SUPPORT",(function(){return s})),n.d(t,"SET_SUBSCRIPTION",(function(){return a})),n.d(t,"SET_ALERTS",(function(){return i})),n.d(t,"register",(function(){return O}));const s="PUSH_NOTIFICATIONS_SET_BROWSER_SUPPORT",a="PUSH_NOTIFICATIONS_SET_SUBSCRIPTION",o="PUSH_NOTIFICATIONS_CLEAR_SUBSCRIPTION",i="PUSH_NOTIFICATIONS_SET_ALERTS";var r=n(7),c=n(710),u=n(245),d=n(18);const l=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/");return Object(c.a)(t)},p=()=>document.querySelector('[name="applicationServerKey"]').getAttribute("content"),h=()=>navigator.serviceWorker.ready,g=e=>e.pushManager.getSubscription().then((t=>({registration:e,subscription:t}))),m=e=>e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l(p())}),b=e=>{let{registration:t,subscription:n}=e;return n?n.unsubscribe().then((()=>t)):t},f=e=>{const t={subscription:e};if(d.p){const e=u.b.get(d.p);e&&(t.data=e)}return Object(r.a)().post("/api/web/push_subscriptions",t).then((e=>e.data))},_="serviceWorker"in navigator&&"PushManager"in window&&"getKey"in PushSubscription.prototype;function O(){return(e,t)=>{if(e({type:s,value:_}),_){if(!p())return void console.error("The VAPID public key is not set. You will not be able to receive Web Push Notifications.");h().then(g).then((e=>{let{registration:n,subscription:s}=e;if(null!==s){const e=new Uint8Array(s.options.applicationServerKey).toString(),a=l(p()).toString(),o=t().getIn(["push_notifications","subscription","endpoint"]);return a===e&&s.endpoint===o?s:b({registration:n,subscription:s}).then(m).then((e=>f(e)))}return m(n).then((e=>f(e)))})).then((t=>{t instanceof PushSubscription||(e(function(e){return{type:a,subscription:e}}(t)),d.p&&u.b.set(d.p,{alerts:t.alerts}))})).catch((t=>(20===t.code&&"AbortError"===t.name?console.warn("Your browser supports Web Push Notifications, but does not seem to implement the VAPID protocol."):5===t.code&&"InvalidCharacterError"===t.name&&console.error("The VAPID public key seems to be invalid:",p()),e({type:o}),d.p&&u.b.remove(d.p),h().then(g).then(b)))).catch(console.warn)}else console.warn("Your browser does not support Web Push Notifications.")}}function v(e,t){return n=>{n(function(e,t){return n=>{n({type:i,path:e,value:t})}}(e,t)),n(((e,t)=>{const n=t().get("push_notifications"),s=n.get("subscription"),a={alerts:n.get("alerts")};Object(r.a)().put(`/api/web/push_subscriptions/${s.get("id")}`,{data:a}).then((()=>{d.p&&u.b.set(d.p,a)})).catch(console.warn)}))}}},39:function(e,t,n){"use strict";n.d(t,"w",(function(){return i})),n.d(t,"v",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"u",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"q",(function(){return l})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"y",(function(){return m})),n.d(t,"z",(function(){return b})),n.d(t,"x",(function(){return f})),n.d(t,"m",(function(){return _})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return j})),n.d(t,"r",(function(){return S})),n.d(t,"t",(function(){return y})),n.d(t,"s",(function(){return C})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return T})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return k})),n.d(t,"f",(function(){return L})),n.d(t,"g",(function(){return M})),n.d(t,"e",(function(){return N})),n.d(t,"G",(function(){return w})),n.d(t,"I",(function(){return U})),n.d(t,"P",(function(){return H})),n.d(t,"O",(function(){return q})),n.d(t,"C",(function(){return K})),n.d(t,"Q",(function(){return z})),n.d(t,"M",(function(){return J})),n.d(t,"F",(function(){return Y})),n.d(t,"H",(function(){return ie})),n.d(t,"E",(function(){return ce})),n.d(t,"D",(function(){return ue})),n.d(t,"B",(function(){return de})),n.d(t,"K",(function(){return me})),n.d(t,"L",(function(){return ve})),n.d(t,"N",(function(){return je})),n.d(t,"A",(function(){return Te})),n.d(t,"J",(function(){return Ie}));var s=n(7),a=n(17),o=n(160);const i="LIST_FETCH_SUCCESS",r="LIST_FETCH_FAIL",c="LISTS_FETCH_SUCCESS",u="LIST_EDITOR_TITLE_CHANGE",d="LIST_EDITOR_RESET",l="LIST_EDITOR_SETUP",p="LIST_CREATE_REQUEST",h="LIST_CREATE_SUCCESS",g="LIST_CREATE_FAIL",m="LIST_UPDATE_REQUEST",b="LIST_UPDATE_SUCCESS",f="LIST_UPDATE_FAIL",_="LIST_DELETE_SUCCESS",O="LIST_ACCOUNTS_FETCH_REQUEST",v="LIST_ACCOUNTS_FETCH_SUCCESS",j="LIST_ACCOUNTS_FETCH_FAIL",S="LIST_EDITOR_SUGGESTIONS_CHANGE",y="LIST_EDITOR_SUGGESTIONS_READY",C="LIST_EDITOR_SUGGESTIONS_CLEAR",E="LIST_EDITOR_ADD_SUCCESS",T="LIST_EDITOR_REMOVE_SUCCESS",I="LIST_ADDER_RESET",k="LIST_ADDER_SETUP",L="LIST_ADDER_LISTS_FETCH_REQUEST",M="LIST_ADDER_LISTS_FETCH_SUCCESS",N="LIST_ADDER_LISTS_FETCH_FAIL",w=e=>(t,n)=>{n().getIn(["lists",e])||(t(x(e)),Object(s.a)(n).get(`/api/v1/lists/${e}`).then((e=>{let{data:n}=e;return t(A(n))})).catch((n=>t(R(e,n)))))},x=e=>({type:"LIST_FETCH_REQUEST",id:e}),A=e=>({type:i,list:e}),R=(e,t)=>({type:r,id:e,error:t}),U=()=>(e,t)=>{e(F()),Object(s.a)(t).get("/api/v1/lists").then((t=>{let{data:n}=t;return e(D(n))})).catch((t=>e(P(t))))},F=()=>({type:"LISTS_FETCH_REQUEST"}),D=e=>({type:c,lists:e}),P=e=>({type:"LISTS_FETCH_FAIL",error:e}),H=e=>(t,n)=>{const s=n().getIn(["listEditor","listId"]),a=n().getIn(["listEditor","title"]);t(null===s?$(a,e):z(s,a,e))},q=e=>(t,n)=>{t({type:l,list:n().getIn(["lists",e])}),t(ne(e))},K=e=>({type:u,value:e}),$=(e,t)=>(n,a)=>{n(B()),Object(s.a)(a).post("/api/v1/lists",{title:e}).then((e=>{let{data:s}=e;n(W(s)),t&&n(J())})).catch((e=>n(Q(e))))},B=()=>({type:p}),W=e=>({type:h,list:e}),Q=e=>({type:g,error:e}),z=(e,t,n,a)=>(o,i)=>{o(G(e)),Object(s.a)(i).put(`/api/v1/lists/${e}`,{title:t,replies_policy:a}).then((e=>{let{data:t}=e;o(X(t)),n&&o(J())})).catch((t=>o(V(e,t))))},G=e=>({type:m,id:e}),X=e=>({type:b,list:e}),V=(e,t)=>({type:f,id:e,error:t}),J=()=>({type:d}),Y=e=>(t,n)=>{t(Z(e)),Object(s.a)(n).delete(`/api/v1/lists/${e}`).then((()=>t(ee(e)))).catch((n=>t(te(e,n))))},Z=e=>({type:"LIST_DELETE_REQUEST",id:e}),ee=e=>({type:_,id:e}),te=(e,t)=>({type:"LIST_DELETE_FAIL",id:e,error:t}),ne=e=>(t,n)=>{t(se(e)),Object(s.a)(n).get(`/api/v1/lists/${e}/accounts`,{params:{limit:0}}).then((n=>{let{data:s}=n;t(Object(a.h)(s)),t(ae(e,s))})).catch((n=>t(oe(e,n))))},se=e=>({type:O,id:e}),ae=(e,t,n)=>({type:v,id:e,accounts:t,next:n}),oe=(e,t)=>({type:j,id:e,error:t}),ie=e=>(t,n)=>{const i={q:e,resolve:!1,limit:4,following:!0};Object(s.a)(n).get("/api/v1/accounts/search",{params:i}).then((n=>{let{data:s}=n;t(Object(a.h)(s)),t(re(e,s))})).catch((e=>t(Object(o.f)(e))))},re=(e,t)=>({type:y,query:e,accounts:t}),ce=()=>({type:C}),ue=e=>({type:S,value:e}),de=e=>(t,n)=>{t(le(n().getIn(["listEditor","listId"]),e))},le=(e,t)=>(n,a)=>{n(pe(e,t)),Object(s.a)(a).post(`/api/v1/lists/${e}/accounts`,{account_ids:[t]}).then((()=>n(he(e,t)))).catch((s=>n(ge(e,t,s))))},pe=(e,t)=>({type:"LIST_EDITOR_ADD_REQUEST",listId:e,accountId:t}),he=(e,t)=>({type:E,listId:e,accountId:t}),ge=(e,t,n)=>({type:"LIST_EDITOR_ADD_FAIL",listId:e,accountId:t,error:n}),me=e=>(t,n)=>{t(be(n().getIn(["listEditor","listId"]),e))},be=(e,t)=>(n,a)=>{n(fe(e,t)),Object(s.a)(a).delete(`/api/v1/lists/${e}/accounts`,{params:{account_ids:[t]}}).then((()=>n(_e(e,t)))).catch((s=>n(Oe(e,t,s))))},fe=(e,t)=>({type:"LIST_EDITOR_REMOVE_REQUEST",listId:e,accountId:t}),_e=(e,t)=>({type:T,listId:e,accountId:t}),Oe=(e,t,n)=>({type:"LIST_EDITOR_REMOVE_FAIL",listId:e,accountId:t,error:n}),ve=()=>({type:I}),je=e=>(t,n)=>{t({type:k,account:n().getIn(["accounts",e])}),t(U()),t(Se(e))},Se=e=>(t,n)=>{t(ye(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}/lists`).then((n=>{let{data:s}=n;return t(Ce(e,s))})).catch((n=>t(Ee(e,n))))},ye=e=>({type:L,id:e}),Ce=(e,t)=>({type:M,id:e,lists:t}),Ee=(e,t)=>({type:N,id:e,err:t}),Te=e=>(t,n)=>{t(le(e,n().getIn(["listAdder","accountId"])))},Ie=e=>(t,n)=>{t(be(e,n().getIn(["listAdder","accountId"])))}},543:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n(0),a=(n(1),n(21)),o=n.n(a),i=n(2),r=n.n(i),c=n(20),u=n(6),d=n(10),l=n.n(d),p=n(33);class h extends c.a{render(){const{media:e,compact:t}=this.props;return Object(s.a)("div",{className:l()("attachment-list",{compact:t})},void 0,!t&&Object(s.a)("div",{className:"attachment-list__icon"},void 0,Object(s.a)(p.a,{id:"link"})),Object(s.a)("ul",{className:"attachment-list__list"},void 0,e.map((e=>{const n=e.get("remote_url")||e.get("url");return Object(s.a)("li",{},e.get("id"),Object(s.a)("a",{href:n,target:"_blank",rel:"noopener noreferrer"},void 0,t&&Object(s.a)(p.a,{id:"link"}),t&&" ",n?n.split("/").pop().split("#")[0].split("?")[0]:Object(s.a)(u.b,{id:"attachments_list.unprocessed",defaultMessage:"(unprocessed)"})))}))))}}h.propTypes={media:o.a.list.isRequired,compact:r.a.bool}},553:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var s=n(164);const a="LANGUAGE_USE",o=e=>t=>{t({type:a,language:e}),t(Object(s.d)())}},554:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var s=n(7);const a="CUSTOM_EMOJIS_FETCH_REQUEST",o="CUSTOM_EMOJIS_FETCH_SUCCESS",i="CUSTOM_EMOJIS_FETCH_FAIL";function r(){return(e,t)=>{e({type:a,skipLoading:!0}),Object(s.a)(t).get("/api/v1/custom_emojis").then((t=>{var n;e((n=t.data,{type:o,custom_emojis:n,skipLoading:!0}))})).catch((t=>{e(function(e){return{type:i,error:e,skipLoading:!0}}(t))}))}}},555:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(0),a=n(1),o=n.n(a),i=n(155);class r extends o.a.PureComponent{checkRemainingText(e){return e<0?Object(s.a)("span",{className:"character-counter character-counter--over"},void 0,e):Object(s.a)("span",{className:"character-counter"},void 0,e)}render(){const e=this.props.max-Object(i.length)(this.props.text);return this.checkRemainingText(e)}}},556:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var s,a=n(0),o=n(1),i=n.n(o),r=n(6),c=n(52),u=n(188),d=n(531),l=n(10),p=n.n(l),h=n(33);const g=Object(r.f)({public_short:{id:"privacy.public.short",defaultMessage:"Public"},public_long:{id:"privacy.public.long",defaultMessage:"Visible for all"},unlisted_short:{id:"privacy.unlisted.short",defaultMessage:"Unlisted"},unlisted_long:{id:"privacy.unlisted.long",defaultMessage:"Visible for all, but opted-out of discovery features"},private_short:{id:"privacy.private.short",defaultMessage:"Followers only"},private_long:{id:"privacy.private.long",defaultMessage:"Visible for followers only"},direct_short:{id:"privacy.direct.short",defaultMessage:"Mentioned people only"},direct_long:{id:"privacy.direct.long",defaultMessage:"Visible for mentioned users only"},change_privacy:{id:"privacy.change",defaultMessage:"Adjust status privacy"}}),m=!!d.a&&{passive:!0};class b extends i.a.PureComponent{constructor(){super(...arguments),this.handleDocumentClick=e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()},this.handleKeyDown=e=>{const{items:t}=this.props,n=e.currentTarget.getAttribute("data-index"),s=t.findIndex((e=>e.value===n));let a=null;switch(e.key){case"Escape":this.props.onClose();break;case"Enter":this.handleClick(e);break;case"ArrowDown":a=this.node.childNodes[s+1]||this.node.firstChild;break;case"ArrowUp":a=this.node.childNodes[s-1]||this.node.lastChild;break;case"Tab":a=e.shiftKey?this.node.childNodes[s-1]||this.node.lastChild:this.node.childNodes[s+1]||this.node.firstChild;break;case"Home":a=this.node.firstChild;break;case"End":a=this.node.lastChild}a&&(a.focus(),this.props.onChange(a.getAttribute("data-index")),e.preventDefault(),e.stopPropagation())},this.handleClick=e=>{const t=e.currentTarget.getAttribute("data-index");e.preventDefault(),this.props.onClose(),this.props.onChange(t)},this.setRef=e=>{this.node=e},this.setFocusRef=e=>{this.focusedItem=e}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,m),this.focusedItem&&this.focusedItem.focus({preventScroll:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,m)}render(){const{style:e,items:t,value:n}=this.props;return i.a.createElement("div",{style:{...e},role:"listbox",ref:this.setRef},t.map((e=>i.a.createElement("div",{role:"option",tabIndex:"0",key:e.value,"data-index":e.value,onKeyDown:this.handleKeyDown,onClick:this.handleClick,className:p()("privacy-dropdown__option",{active:e.value===n}),"aria-selected":e.value===n,ref:e.value===n?this.setFocusRef:null},Object(a.a)("div",{className:"privacy-dropdown__option__icon"},void 0,Object(a.a)(h.a,{id:e.icon,fixedWidth:!0})),Object(a.a)("div",{className:"privacy-dropdown__option__content"},void 0,Object(a.a)("strong",{},void 0,e.text),e.meta)))))}}let f=Object(r.g)(s=class extends i.a.PureComponent{constructor(){super(...arguments),this.state={open:!1,placement:"bottom"},this.handleToggle=()=>{this.props.isUserTouching&&this.props.isUserTouching()?this.state.open?this.props.onModalClose():this.props.onModalOpen({actions:this.options.map((e=>({...e,active:e.value===this.props.value}))),onClick:this.handleModalActionClick}):(this.state.open&&this.activeElement&&this.activeElement.focus({preventScroll:!0}),this.setState({open:!this.state.open}))},this.handleModalActionClick=e=>{e.preventDefault();const{value:t}=this.options[e.currentTarget.getAttribute("data-index")];this.props.onModalClose(),this.props.onChange(t)},this.handleKeyDown=e=>{if("Escape"===e.key)this.handleClose()},this.handleMouseDown=()=>{this.state.open||(this.activeElement=document.activeElement)},this.handleButtonKeyDown=e=>{switch(e.key){case" ":case"Enter":this.handleMouseDown()}},this.handleClose=()=>{this.state.open&&this.activeElement&&this.activeElement.focus({preventScroll:!0}),this.setState({open:!1})},this.handleChange=e=>{this.props.onChange(e)},this.setTargetRef=e=>{this.target=e},this.findTarget=()=>this.target,this.handleOverlayEnter=e=>{this.setState({placement:e.placement})}}componentWillMount(){const{intl:{formatMessage:e}}=this.props;this.options=[{icon:"globe",value:"public",text:e(g.public_short),meta:e(g.public_long)},{icon:"unlock",value:"unlisted",text:e(g.unlisted_short),meta:e(g.unlisted_long)},{icon:"lock",value:"private",text:e(g.private_short),meta:e(g.private_long)}],this.props.noDirect||this.options.push({icon:"at",value:"direct",text:e(g.direct_short),meta:e(g.direct_long)})}render(){const{value:e,container:t,disabled:n,intl:s}=this.props,{open:o,placement:r}=this.state,d=this.options.find((t=>t.value===e));return Object(a.a)("div",{className:p()("privacy-dropdown",r,{active:o}),onKeyDown:this.handleKeyDown},void 0,i.a.createElement("div",{className:p()("privacy-dropdown__value",{active:this.options.indexOf(d)===("bottom"===r?0:this.options.length-1)}),ref:this.setTargetRef},Object(a.a)(c.a,{className:"privacy-dropdown__value-icon",icon:d.icon,title:s.formatMessage(g.change_privacy),size:18,expanded:o,active:o,inverted:!0,onClick:this.handleToggle,onMouseDown:this.handleMouseDown,onKeyDown:this.handleButtonKeyDown,style:{height:null,lineHeight:"27px"},disabled:n})),Object(a.a)(u.a,{show:o,placement:"bottom",flip:!0,target:this.findTarget,container:t,popperConfig:{strategy:"fixed",onFirstUpdate:this.handleOverlayEnter}},void 0,(t=>{let{props:n,placement:s}=t;return i.a.createElement("div",n,Object(a.a)("div",{className:`dropdown-animation privacy-dropdown__dropdown ${s}`},void 0,Object(a.a)(b,{items:this.options,value:e,onClose:this.handleClose,onChange:this.handleChange})))})))}})||s},557:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(0),a=n(1),o=n.n(a),i=n(240),r=n(54),c=n.n(r),u=n(33),d=n(6);class l extends o.a.PureComponent{render(){const{active:e,progress:t,isProcessing:n}=this.props;if(!e)return null;let a;return a=n?Object(s.a)(d.b,{id:"upload_progress.processing",defaultMessage:"Processing…"}):Object(s.a)(d.b,{id:"upload_progress.label",defaultMessage:"Uploading…"}),Object(s.a)("div",{className:"upload-progress"},void 0,Object(s.a)("div",{className:"upload-progress__icon"},void 0,Object(s.a)(u.a,{id:"upload"})),Object(s.a)("div",{className:"upload-progress__message"},void 0,a,Object(s.a)("div",{className:"upload-progress__backdrop"},void 0,Object(s.a)(i.a,{defaultStyle:{width:0},style:{width:c()(t)}},void 0,(e=>{let{width:t}=e;return Object(s.a)("div",{className:"upload-progress__tracker",style:{width:`${t}%`}})})))))}}},568:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return r}));var s=n(7);const a="FEATURED_TAGS_FETCH_REQUEST",o="FEATURED_TAGS_FETCH_SUCCESS",i="FEATURED_TAGS_FETCH_FAIL",r=e=>(t,n)=>{n().getIn(["user_lists","featured_tags",e,"items"])||(t(c(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}/featured_tags`).then((n=>{let{data:s}=n;return t(u(e,s))})).catch((n=>t(d(e,n)))))},c=e=>({type:a,id:e}),u=(e,t)=>({type:o,id:e,tags:t}),d=(e,t)=>({type:i,id:e,error:t})},569:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c}));var s=n(7),a=n(17);const o="HISTORY_FETCH_REQUEST",i="HISTORY_FETCH_SUCCESS",r="HISTORY_FETCH_FAIL",c=e=>(t,n)=>{n().getIn(["history",e,"loading"])||(t(u(e)),Object(s.a)(n).get(`/api/v1/statuses/${e}/history`).then((n=>{let{data:s}=n;t(Object(a.h)(s.map((e=>e.account)))),t(d(e,s))})).catch((e=>t(l(e)))))},u=e=>({type:o,statusId:e}),d=(e,t)=>({type:i,statusId:e,history:t}),l=e=>({type:r,error:e})},580:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i}));const s="PICTURE_IN_PICTURE_DEPLOY",a="PICTURE_IN_PICTURE_REMOVE",o=(e,t,n,a)=>(o,i)=>{i().hasIn(["statuses",e])&&o({type:s,statusId:e,accountId:t,playerType:n,props:a})},i=()=>({type:a})},656:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}));const s="DROPDOWN_MENU_OPEN",a="DROPDOWN_MENU_CLOSE";function o(e,t,n){return{type:s,id:e,keyboard:t,scroll_key:n}}function i(e){return{type:a,id:e}}},657:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}));const s="HEIGHT_CACHE_SET",a="HEIGHT_CACHE_CLEAR";function o(e,t,n){return{type:s,key:e,id:t,height:n}}function i(){return{type:a}}},658:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return h}));var s=n(7),a=n(60);const o="FILTERS_FETCH_SUCCESS",i="FILTERS_CREATE_SUCCESS",r=(e,t)=>{let{contextType:n}=t;return t=>t(Object(a.d)("FILTER",{statusId:null==e?void 0:e.get("id"),contextType:n}))},c=()=>(e,t)=>{e({type:"FILTERS_FETCH_REQUEST",skipLoading:!0}),Object(s.a)(t).get("/api/v2/filters").then((t=>{let{data:n}=t;return e({type:o,filters:n,skipLoading:!0})})).catch((t=>e({type:"FILTERS_FETCH_FAIL",err:t,skipLoading:!0,skipAlert:!0})))},u=(e,t,n)=>(a,o)=>{a(d()),Object(s.a)(o).post(`/api/v2/filters/${e.filter_id}/statuses`,e).then((e=>{a(l(e.data)),t&&t()})).catch((e=>{a(p(e)),n&&n()}))},d=()=>({type:"FILTERS_STATUS_CREATE_REQUEST"}),l=e=>({type:"FILTERS_STATUS_CREATE_SUCCESS",filter_status:e}),p=e=>({type:"FILTERS_STATUS_CREATE_FAIL",error:e}),h=(e,t,n)=>(a,o)=>{a(g()),Object(s.a)(o).post("/api/v2/filters",e).then((e=>{a(m(e.data)),t&&t(e.data)})).catch((e=>{a(b(e)),n&&n()}))},g=()=>({type:"FILTERS_CREATE_REQUEST"}),m=e=>({type:i,filter:e}),b=e=>({type:"FILTERS_CREATE_FAIL",error:e})},661:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var s=n(0);n(1);const a=Object(s.a)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"13",height:"13"},void 0,Object(s.a)("path",{d:"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"})),o=Object(s.a)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"13",height:"13"},void 0,Object(s.a)("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"}))},667:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(0);n(1);const a=e=>{let{size:t,strokeWidth:n}=e;const a=`0 0 ${t} ${t}`,o=(t-n)/2;return Object(s.a)("svg",{width:t,height:t,viewBox:a,className:"circular-progress",role:"progressbar"},void 0,Object(s.a)("circle",{fill:"none",cx:t/2,cy:t/2,r:o,strokeWidth:`${n}px`}))};t.b=()=>Object(s.a)("div",{className:"loading-indicator"},void 0,Object(s.a)(a,{size:50,strokeWidth:6}))},671:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var s=n(17),a=n(22),o=n(4);const i=e=>e.toLowerCase(),r=Object(o.Map)();function c(e,t){var n,o;switch(void 0===e&&(e=r),t.type){case a.e:return 404===(null==(n=t.error)||null==(o=n.response)?void 0:o.status)?e.set(i(t.acct),null):e;case s.b:return e.set(i(t.account.acct),t.account.id);case s.a:return e.withMutations((e=>t.accounts.forEach((t=>e.set(i(t.acct),t.id)))));default:return e}}},673:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var s=n(0),a=n(1),o=n.n(a),i=n(2),r=n.n(i),c=n(6),u=n(1203),d=n(10),l=n.n(d),p=n(62),h=n.n(p),g=n(12),m=n(715),b=n(7),f=n(17);const _=()=>({type:"POLL_VOTE_REQUEST"}),O=e=>({type:"POLL_VOTE_SUCCESS",poll:e}),v=e=>({type:"POLL_VOTE_FAIL",error:e}),j=()=>({type:"POLL_FETCH_REQUEST"}),S=e=>({type:"POLL_FETCH_SUCCESS",poll:e}),y=e=>({type:"POLL_FETCH_FAIL",error:e});var C,E,T=Object(g.connect)(((e,t)=>{let{pollId:n}=t;return{poll:e.getIn(["polls",n])}}),((e,t)=>{let{pollId:n}=t;return{refresh:h()((()=>{e((e=>(t,n)=>{t(j()),Object(b.a)(n).get(`/api/v1/polls/${e}`).then((e=>{let{data:n}=e;t(Object(f.i)(n)),t(S(n))})).catch((e=>t(y(e))))})(n))}),1e3,{leading:!0}),onVote(t){e(((e,t)=>(n,s)=>{n(_()),Object(b.a)(s).post(`/api/v1/polls/${e}/votes`,{choices:t}).then((e=>{let{data:t}=e;n(Object(f.i)(t)),n(O(t))})).catch((e=>n(v(e))))})(n,t))}}}))(m.a),I=n(33),k=n(18);class L extends o.a.PureComponent{render(){const{translation:e,onClick:t}=this.props;if(e){const n=k.l.find((t=>t[0]===e.get("detected_source_language"))),a=n?n[2]:e.get("detected_source_language"),o=e.get("provider");return Object(s.a)("div",{className:"translate-button"},void 0,Object(s.a)("div",{className:"translate-button__meta"},void 0,Object(s.a)(c.b,{id:"status.translated_from_with",defaultMessage:"Translated from {lang} using {provider}",values:{lang:a,provider:o}})),Object(s.a)("button",{className:"link-button",onClick:t},void 0,Object(s.a)(c.b,{id:"status.show_original",defaultMessage:"Show original"})))}return Object(s.a)("button",{className:"status__content__read-more-button",onClick:t},void 0,Object(s.a)(c.b,{id:"status.translate",defaultMessage:"Translate"}))}}let M=Object(c.g)((E=class extends o.a.PureComponent{constructor(){super(...arguments),this.state={hidden:!0},this.handleMouseEnter=e=>{let{currentTarget:t}=e;if(k.a)return;const n=t.querySelectorAll(".custom-emoji");for(var s=0;s<n.length;s++){let e=n[s];e.src=e.getAttribute("data-original")}},this.handleMouseLeave=e=>{let{currentTarget:t}=e;if(k.a)return;const n=t.querySelectorAll(".custom-emoji");for(var s=0;s<n.length;s++){let e=n[s];e.src=e.getAttribute("data-static")}},this.onMentionClick=(e,t)=>{!this.context.router||0!==t.button||t.ctrlKey||t.metaKey||(t.preventDefault(),this.context.router.history.push(`/@${e.get("acct")}`))},this.onHashtagClick=(e,t)=>{e=e.replace(/^#/,""),!this.context.router||0!==t.button||t.ctrlKey||t.metaKey||(t.preventDefault(),this.context.router.history.push(`/tags/${e}`))},this.handleMouseDown=e=>{this.startXY=[e.clientX,e.clientY]},this.handleMouseUp=e=>{if(!this.startXY)return;const[t,n]=this.startXY,[s,a]=[Math.abs(e.clientX-t),Math.abs(e.clientY-n)];let o=e.target;for(;o;){if("button"===o.localName||"a"===o.localName||"label"===o.localName)return;o=o.parentNode}s+a<5&&0===e.button&&this.props.onClick&&this.props.onClick(),this.startXY=null},this.handleSpoilerClick=e=>{e.preventDefault(),this.props.onExpandedToggle?this.props.onExpandedToggle():this.setState({hidden:!this.state.hidden})},this.handleTranslate=()=>{this.props.onTranslate()},this.setRef=e=>{this.node=e}}_updateStatusLinks(){const e=this.node;if(!e)return;const{status:t,onCollapsedToggle:n}=this.props,s=e.querySelectorAll("a");let a,o;for(var i=0;i<s.length;++i)a=s[i],a.classList.contains("status-link")||(a.classList.add("status-link"),o=this.props.status.get("mentions").find((e=>a.href===e.get("url"))),o?(a.addEventListener("click",this.onMentionClick.bind(this,o),!1),a.setAttribute("title",o.get("acct")),a.setAttribute("href",`/@${o.get("acct")}`)):"#"===a.textContent[0]||a.previousSibling&&a.previousSibling.textContent&&"#"===a.previousSibling.textContent[a.previousSibling.textContent.length-1]?(a.addEventListener("click",this.onHashtagClick.bind(this,a.text),!1),a.setAttribute("href",`/tags/${a.text.slice(1)}`)):(a.setAttribute("title",a.href),a.classList.add("unhandled-link")));if(null===t.get("collapsed",null)&&n){const{collapsable:s,onClick:a}=this.props;n(s&&a&&e.clientHeight>706&&0===t.get("spoiler_text").length)}}componentDidMount(){this._updateStatusLinks()}componentDidUpdate(){this._updateStatusLinks()}render(){const{status:e,intl:t}=this.props,n=this.props.onExpandedToggle?!this.props.expanded:this.state.hidden,a=this.props.onClick&&e.get("collapsed"),i=this.props.onTranslate&&e.get("translatable"),r={__html:e.get("translation")?e.getIn(["translation","content"]):e.get("contentHtml")},d={__html:e.get("spoilerHtml")},p=e.get("translation")?t.locale:e.get("language"),h=l()("status__content",{"status__content--with-action":this.props.onClick&&this.context.router,"status__content--with-spoiler":e.get("spoiler_text").length>0,"status__content--collapsed":a}),g=a&&Object(s.a)("button",{className:"status__content__read-more-button",onClick:this.props.onClick},"read-more",Object(s.a)(c.b,{id:"status.read_more",defaultMessage:"Read more"}),Object(s.a)(I.a,{id:"angle-right",fixedWidth:!0})),m=i&&Object(s.a)(L,{onClick:this.handleTranslate,translation:e.get("translation")}),b=!!e.get("poll")&&Object(s.a)(T,{pollId:e.get("poll"),lang:e.get("language")});if(e.get("spoiler_text").length>0){let t="";const a=e.get("mentions").map((e=>Object(s.a)(u.a,{to:`/@${e.get("acct")}`,className:"status-link mention"},e.get("id"),"@",Object(s.a)("span",{},void 0,e.get("username"))))).reduce(((e,t)=>[...e,t," "]),[]),i=n?Object(s.a)(c.b,{id:"status.show_more",defaultMessage:"Show more"}):Object(s.a)(c.b,{id:"status.show_less",defaultMessage:"Show less"});return n&&(t=Object(s.a)("div",{},void 0,a)),o.a.createElement("div",{className:h,ref:this.setRef,tabIndex:"0",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},Object(s.a)("p",{style:{marginBottom:n&&e.get("mentions").isEmpty()?"0px":null}},void 0,Object(s.a)("span",{dangerouslySetInnerHTML:d,className:"translate",lang:p})," ",Object(s.a)("button",{type:"button",className:"status__content__spoiler-link "+(n?"status__content__spoiler-link--show-more":"status__content__spoiler-link--show-less"),onClick:this.handleSpoilerClick,"aria-expanded":!n},void 0,i)),t,Object(s.a)("div",{tabIndex:n?null:0,className:`status__content__text ${n?"":"status__content__text--visible"} translate`,lang:p,dangerouslySetInnerHTML:r}),!n&&b,!n&&m)}return this.props.onClick?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:h,ref:this.setRef,tabIndex:"0",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,key:"status-content",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},Object(s.a)("div",{className:"status__content__text status__content__text--visible translate",lang:p,dangerouslySetInnerHTML:r}),b,m),g):o.a.createElement("div",{className:h,ref:this.setRef,tabIndex:"0",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},Object(s.a)("div",{className:"status__content__text status__content__text--visible translate",lang:p,dangerouslySetInnerHTML:r}),b,m)}},E.contextTypes={router:r.a.object,identity:r.a.object},C=E))||C},679:function(e,t,n){"use strict";var s,a,o,i=n(12),r=n(9),c=n(0),u=n(1),d=n.n(u),l=n(6),p=n(166),h=n(188),g=n(10),m=n.n(g),b=n(531),f=n(42),_=n(49);const O=Object(l.f)({emoji:{id:"emoji_button.label",defaultMessage:"Insert emoji"},emoji_search:{id:"emoji_button.search",defaultMessage:"Search..."},custom:{id:"emoji_button.custom",defaultMessage:"Custom"},recent:{id:"emoji_button.recent",defaultMessage:"Frequently used"},search_results:{id:"emoji_button.search_results",defaultMessage:"Search results"},people:{id:"emoji_button.people",defaultMessage:"People"},nature:{id:"emoji_button.nature",defaultMessage:"Nature"},food:{id:"emoji_button.food",defaultMessage:"Food & Drink"},activity:{id:"emoji_button.activity",defaultMessage:"Activity"},travel:{id:"emoji_button.travel",defaultMessage:"Travel & Places"},objects:{id:"emoji_button.objects",defaultMessage:"Objects"},symbols:{id:"emoji_button.symbols",defaultMessage:"Symbols"},flags:{id:"emoji_button.flags",defaultMessage:"Flags"}});let v,j;const S=!!b.a&&{passive:!0},y=()=>`${_.a}/emoji/sheet_13.png`,C=()=>Object(c.a)("div",{className:"emoji-mart-no-results"},void 0,Object(c.a)(j,{emoji:"sleuth_or_spy",set:"twitter",size:32,sheetSize:32,backgroundImageFn:y}),Object(c.a)("div",{className:"emoji-mart-no-results-label"},void 0,Object(c.a)(l.b,{id:"emoji_button.not_found",defaultMessage:"No matching emojis found"})));class E extends d.a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{this.props.onSelect(1*e.currentTarget.getAttribute("data-index"))},this.handleDocumentClick=e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()},this.setRef=e=>{this.node=e}}componentWillReceiveProps(e){e.active?this.attachListeners():this.removeListeners()}componentWillUnmount(){this.removeListeners()}attachListeners(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,S)}removeListeners(){document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,S)}render(){const{active:e}=this.props;return d.a.createElement("div",{className:"emoji-picker-dropdown__modifiers__menu",style:{display:e?"block":"none"},ref:this.setRef},Object(c.a)("button",{type:"button",onClick:this.handleClick,"data-index":1},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:1,backgroundImageFn:y})),Object(c.a)("button",{type:"button",onClick:this.handleClick,"data-index":2},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:2,backgroundImageFn:y})),Object(c.a)("button",{type:"button",onClick:this.handleClick,"data-index":3},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:3,backgroundImageFn:y})),Object(c.a)("button",{type:"button",onClick:this.handleClick,"data-index":4},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:4,backgroundImageFn:y})),Object(c.a)("button",{type:"button",onClick:this.handleClick,"data-index":5},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:5,backgroundImageFn:y})),Object(c.a)("button",{type:"button",onClick:this.handleClick,"data-index":6},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:6,backgroundImageFn:y})))}}class T extends d.a.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.active?this.props.onClose():this.props.onOpen()},this.handleSelect=e=>{this.props.onChange(e),this.props.onClose()}}render(){const{active:e,modifier:t}=this.props;return Object(c.a)("div",{className:"emoji-picker-dropdown__modifiers"},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:t,onClick:this.handleClick,backgroundImageFn:y}),Object(c.a)(E,{active:e,onSelect:this.handleSelect,onClose:this.props.onClose}))}}let I=Object(l.g)((a=class extends d.a.PureComponent{constructor(){super(...arguments),this.state={modifierOpen:!1,readyToFocus:!1},this.handleDocumentClick=e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()},this.setRef=e=>{this.node=e},this.getI18n=()=>{const{intl:e}=this.props;return{search:e.formatMessage(O.emoji_search),categories:{search:e.formatMessage(O.search_results),recent:e.formatMessage(O.recent),people:e.formatMessage(O.people),nature:e.formatMessage(O.nature),foods:e.formatMessage(O.food),activity:e.formatMessage(O.activity),places:e.formatMessage(O.travel),objects:e.formatMessage(O.objects),symbols:e.formatMessage(O.symbols),flags:e.formatMessage(O.flags),custom:e.formatMessage(O.custom)}}},this.handleClick=(e,t)=>{e.native||(e.native=e.colons),t.ctrlKey||t.metaKey||this.props.onClose(),this.props.onPick(e)},this.handleModifierOpen=()=>{this.setState({modifierOpen:!0})},this.handleModifierClose=()=>{this.setState({modifierOpen:!1})},this.handleModifierChange=e=>{this.props.onSkinTone(e)}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,S),requestAnimationFrame((()=>{if(this.setState({readyToFocus:!0}),this.node){const e=this.node.querySelector('input[type="search"]');e&&e.focus()}}))}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,S)}render(){const{loading:e,style:t,intl:n,custom_emojis:s,skinTone:a,frequentlyUsedEmojis:o}=this.props;if(e)return Object(c.a)("div",{style:{width:299}});const i=n.formatMessage(O.emoji),{modifierOpen:r}=this.state,u=["recent","people","nature","foods","activity","places","objects","symbols","flags"];return u.splice(1,0,...Array.from(Object(f.categoriesFromEmojis)(s)).sort()),d.a.createElement("div",{className:m()("emoji-picker-dropdown__menu",{selecting:r}),style:t,ref:this.setRef},Object(c.a)(v,{perLine:8,emojiSize:22,sheetSize:32,custom:Object(f.buildCustomEmojis)(s),color:"",emoji:"",set:"twitter",title:i,i18n:this.getI18n(),onClick:this.handleClick,include:u,recent:o,skin:a,showPreview:!1,showSkinTones:!1,backgroundImageFn:y,notFound:C,autoFocus:this.state.readyToFocus,emojiTooltip:!0}),Object(c.a)(T,{active:r,modifier:a,onOpen:this.handleModifierOpen,onClose:this.handleModifierClose,onChange:this.handleModifierChange}))}},a.defaultProps={style:{},loading:!0,frequentlyUsedEmojis:[]},s=a))||s,k=Object(l.g)(o=class extends d.a.PureComponent{constructor(){super(...arguments),this.state={active:!1,loading:!1},this.setRef=e=>{this.dropdown=e},this.onShowDropdown=()=>{this.setState({active:!0}),v||(this.setState({loading:!0}),Object(p.p)().then((e=>{v=e.Picker,j=e.Emoji,this.setState({loading:!1})})).catch((()=>{this.setState({loading:!1,active:!1})})))},this.onHideDropdown=()=>{this.setState({active:!1})},this.onToggle=e=>{this.state.disabled||this.state.loading||e.key&&"Enter"!==e.key||(this.state.active?this.onHideDropdown():this.onShowDropdown(e))},this.handleKeyDown=e=>{"Escape"===e.key&&this.onHideDropdown()},this.setTargetRef=e=>{this.target=e},this.findTarget=()=>this.target}render(){const{intl:e,onPickEmoji:t,onSkinTone:n,skinTone:s,frequentlyUsedEmojis:a,button:o}=this.props,i=e.formatMessage(O.emoji),{active:u,loading:l}=this.state;return Object(c.a)("div",{className:"emoji-picker-dropdown",onKeyDown:this.handleKeyDown},void 0,d.a.createElement("div",{ref:this.setTargetRef,className:"emoji-button",title:i,"aria-label":i,"aria-expanded":u,role:"button",onClick:this.onToggle,onKeyDown:this.onToggle,tabIndex:0},o||Object(c.a)("img",{className:m()("emojione",{"pulse-loading":u&&l}),alt:"🙂",src:`${_.a}/emoji/1f602.svg`})),Object(c.a)(h.a,{show:u,placement:"bottom",target:this.findTarget,popperConfig:{strategy:"fixed"}},void 0,(e=>{let{props:o,placement:i}=e;return d.a.createElement("div",Object(r.a)({},o,{style:{...o.style,width:299}}),Object(c.a)("div",{className:`dropdown-animation ${i}`},void 0,Object(c.a)(I,{custom_emojis:this.props.custom_emojis,loading:l,onClose:this.onHideDropdown,onPick:t,onSkinTone:n,skinTone:s,frequentlyUsedEmojis:a})))})))}})||o;var L=n(164),M=n(48),N=n(4),w=n(290);const x=["+1","grinning","kissing_heart","heart_eyes","laughing","stuck_out_tongue_winking_eye","sweat_smile","joy","yum","disappointed","thinking_face","weary","sob","sunglasses","heart","ok_hand"],A=Object(M.a)([e=>e.getIn(["settings","frequentlyUsedEmojis"],Object(N.Map)())],(e=>{let t=e.keySeq().sort(((t,n)=>e.get(t)-e.get(n))).reverse().slice(0,16).toArray();if(t.length<x.length){let e=x.filter((e=>!t.includes(e)));t=t.concat(e.slice(0,x.length-t.length))}return t})),R=Object(M.a)([e=>e.get("custom_emojis")],(e=>e.filter((e=>e.get("visible_in_picker"))).sort(((e,t)=>{const n=e.get("shortcode").toLowerCase(),s=t.get("shortcode").toLowerCase();return n<s?-1:n>s?1:0}))));t.a=Object(i.connect)((e=>({custom_emojis:R(e),skinTone:e.getIn(["settings","skinTone"]),frequentlyUsedEmojis:A(e)})),((e,t)=>{let{onPickEmoji:n}=t;return{onSkinTone:t=>{e(Object(L.c)(["skinTone"],t))},onPickEmoji:t=>{e(Object(w.b)(t)),n&&n(t)}}}))(k)},697:function(e,t,n){"use strict";var s=n(0),a=n(1),o=n.n(a);const i=()=>null,r=()=>{};class c extends o.a.PureComponent{constructor(){super(...arguments),this.state={mod:void 0,forceRender:!1},this.load=e=>{const{fetchComponent:t,onFetch:n,onFetchSuccess:s,onFetchFail:a,renderDelay:o}=e||this.props,i=c.cache.get(t);return void 0===t?(this.setState({mod:null}),Promise.resolve()):(n(),i?(this.setState({mod:i.default}),s(),Promise.resolve()):(this.setState({mod:void 0}),0!==o&&(this.timestamp=new Date,this.timeout=setTimeout((()=>this.setState({forceRender:!0})),o)),t().then((e=>{c.cache.set(t,e),this.setState({mod:e.default}),s()})).catch((e=>{this.setState({mod:null}),a(e)}))))}}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){e.fetchComponent!==this.props.fetchComponent&&this.load(e)}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}render(){const{loading:e,error:t,children:n,renderDelay:a}=this.props,{mod:o,forceRender:i}=this.state,r=this.timestamp?new Date-this.timestamp:a;return void 0===o?r>=a||i?Object(s.a)(e,{}):null:null===o?Object(s.a)(t,{onRetry:this.load}):n(o)}}c.defaultProps={loading:i,error:i,renderDelay:0,onFetch:r,onFetchSuccess:r,onFetchFail:r},c.cache=new Map,t.a=c},699:function(e,t,n){"use strict";var s=n(12),a=n(697);t.a=Object(s.connect)(null,(e=>({onFetch(){var t;e({type:"BUNDLE_FETCH_REQUEST",skipLoading:t})},onFetchSuccess(){var t;e({type:"BUNDLE_FETCH_SUCCESS",skipLoading:t})},onFetchFail(t){e(function(e,t){return{type:"BUNDLE_FETCH_FAIL",error:e,skipLoading:t}}(t))}})))(a.a)},709:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var s=n(7);const a="ACCOUNT_NOTE_SUBMIT_REQUEST",o="ACCOUNT_NOTE_SUBMIT_SUCCESS",i="ACCOUNT_NOTE_SUBMIT_FAIL";function r(e,t){return(n,r)=>{n({type:a}),Object(s.a)(r).post(`/api/v1/accounts/${e}/note`,{comment:t}).then((e=>{var t;n((t=e.data,{type:o,relationship:t}))})).catch((e=>n(function(e){return{type:i,error:e}}(e))))}}},711:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u}));var s=n(7),a=n(17),o=n(18);const i="PINNED_STATUSES_FETCH_REQUEST",r="PINNED_STATUSES_FETCH_SUCCESS",c="PINNED_STATUSES_FETCH_FAIL";function u(){return(e,t)=>{e({type:i}),Object(s.a)(t).get(`/api/v1/accounts/${o.p}/statuses`,{params:{pinned:!0}}).then((t=>{var n;e(Object(a.k)(t.data)),e((n=t.data,{type:r,statuses:n,next:null}))})).catch((t=>{e(function(e){return{type:c,error:e}}(t))}))}}},716:function(e,t,n){"use strict";var s,a,o=n(12),i=n(0),r=n(1),c=n.n(r),u=n(555),d=n(201),l=n(21),p=n.n(l),h=n(2),g=n.n(h),m=n(15),b=n(237),f=n(280),_=n(52),O=n(282),v=n(6),j=n(20),S=n(543);const y=Object(v.f)({cancel:{id:"reply_indicator.cancel",defaultMessage:"Cancel"}});let C=Object(v.g)((a=class extends j.a{constructor(){super(...arguments),this.handleClick=()=>{this.props.onCancel()},this.handleAccountClick=e=>{0!==e.button||e.ctrlKey||e.metaKey||(e.preventDefault(),this.context.router.history.push(`/@${this.props.status.getIn(["account","acct"])}`))}}render(){const{status:e,intl:t}=this.props;if(!e)return null;const n={__html:e.get("contentHtml")};return Object(i.a)("div",{className:"reply-indicator"},void 0,Object(i.a)("div",{className:"reply-indicator__header"},void 0,Object(i.a)("div",{className:"reply-indicator__cancel"},void 0,Object(i.a)(_.a,{title:t.formatMessage(y.cancel),icon:"times",onClick:this.handleClick,inverted:!0})),Object(i.a)("a",{href:`/@${e.getIn(["account","acct"])}`,onClick:this.handleAccountClick,className:"reply-indicator__display-name"},void 0,Object(i.a)("div",{className:"reply-indicator__display-avatar"},void 0,Object(i.a)(f.a,{account:e.get("account"),size:24})),Object(i.a)(O.a,{account:e.get("account")}))),Object(i.a)("div",{className:"reply-indicator__content translate",dangerouslySetInnerHTML:n}),e.get("media_attachments").size>0&&Object(i.a)(S.a,{compact:!0,media:e.get("media_attachments")}))}},a.contextTypes={router:g.a.object},a.propTypes={status:p.a.map,onCancel:g.a.func.isRequired,intl:g.a.object.isRequired},s=a))||s;var E=Object(o.connect)((()=>{const e=Object(b.i)();return t=>{let n=t.getIn(["compose","id"],null),s=!0;return null===n&&(n=t.getIn(["compose","in_reply_to"]),s=!1),{status:e(t,{id:n}),editing:s}}}),(e=>({onCancel(){e(Object(m.X)())}})))(C);class T extends j.a{render(){const{account:e}=this.props;return Object(i.a)("div",{className:"autosuggest-account",title:e.get("acct")},void 0,Object(i.a)("div",{className:"autosuggest-account-icon"},void 0,Object(i.a)(f.a,{account:e,size:18})),Object(i.a)(O.a,{account:e}))}}T.propTypes={account:p.a.map.isRequired};var I=Object(o.connect)((()=>{const e=Object(b.e)();return(t,n)=>{let{id:s}=n;return{account:e(t,s)}}}))(T),k=n(31),L=n.n(k),M=n(49);class N extends c.a.PureComponent{render(){const{emoji:e}=this.props;let t;if(e.custom)t=e.imageUrl;else{const n=L.a[e.native]||L.a[e.native.replace(/\uFE0F$/,"")];if(!n)return null;t=`${M.a}/emoji/${n.filename}.svg`}return Object(i.a)("div",{className:"autosuggest-emoji"},void 0,Object(i.a)("img",{className:"emojione",src:t,alt:e.native||e.colons}),e.colons)}}var w=n(225);class x extends c.a.PureComponent{render(){const{tag:e}=this.props,t=e.history&&Object(i.a)(w.a,{value:e.history.reduce(((e,t)=>e+1*t.uses),0)});return Object(i.a)("div",{className:"autosuggest-hashtag"},void 0,Object(i.a)("div",{className:"autosuggest-hashtag__name"},void 0,"#",Object(i.a)("strong",{},void 0,e.name)),void 0!==e.history&&Object(i.a)("div",{className:"autosuggest-hashtag__uses"},void 0,Object(i.a)(v.b,{id:"autosuggest_hashtag.per_week",defaultMessage:"{count} per week",values:{count:t}})))}}var A=n(226),R=n(10),U=n.n(R);class F extends j.a{constructor(){super(...arguments),this.state={suggestionsHidden:!0,focused:!1,selectedSuggestion:0,lastToken:null,tokenStart:0},this.onChange=e=>{const[t,n]=((e,t)=>{let n,s=e.slice(0,t).search(/\S+$/),a=e.slice(t).search(/\s/);return n=a<0?e.slice(s):e.slice(s,a+t),!n||n.trim().length<3||-1===["@",":","#"].indexOf(n[0])?[null,null]:(n=n.trim().toLowerCase(),n.length>0?[s+1,n]:[null,null])})(e.target.value,e.target.selectionStart);null!==n&&this.state.lastToken!==n?(this.setState({lastToken:n,selectedSuggestion:0,tokenStart:t}),this.props.onSuggestionsFetchRequested(n)):null===n&&(this.setState({lastToken:null}),this.props.onSuggestionsClearRequested()),this.props.onChange(e)},this.onKeyDown=e=>{const{suggestions:t,disabled:n}=this.props,{selectedSuggestion:s,suggestionsHidden:a}=this.state;if(n)e.preventDefault();else if(229!==e.which&&!e.isComposing){switch(e.key){case"Escape":0===t.size||a?document.querySelector(".ui").parentElement.focus():(e.preventDefault(),this.setState({suggestionsHidden:!0}));break;case"ArrowDown":t.size>0&&!a&&(e.preventDefault(),this.setState({selectedSuggestion:Math.min(s+1,t.size-1)}));break;case"ArrowUp":t.size>0&&!a&&(e.preventDefault(),this.setState({selectedSuggestion:Math.max(s-1,0)}));break;case"Enter":case"Tab":null!==this.state.lastToken&&t.size>0&&!a&&(e.preventDefault(),e.stopPropagation(),this.props.onSuggestionSelected(this.state.tokenStart,this.state.lastToken,t.get(s)))}!e.defaultPrevented&&this.props.onKeyDown&&this.props.onKeyDown(e)}},this.onBlur=()=>{this.setState({suggestionsHidden:!0,focused:!1})},this.onFocus=e=>{this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus(e)},this.onSuggestionClick=e=>{const t=this.props.suggestions.get(e.currentTarget.getAttribute("data-index"));e.preventDefault(),this.props.onSuggestionSelected(this.state.tokenStart,this.state.lastToken,t),this.textarea.focus()},this.setTextarea=e=>{this.textarea=e},this.onPaste=e=>{e.clipboardData&&1===e.clipboardData.files.length&&(this.props.onPaste(e.clipboardData.files),e.preventDefault())},this.renderSuggestion=(e,t)=>{const{selectedSuggestion:n}=this.state;let s,a;return"emoji"===e.type?(s=Object(i.a)(N,{emoji:e}),a=e.id):"hashtag"===e.type?(s=Object(i.a)(x,{tag:e}),a=e.name):"account"===e.type&&(s=Object(i.a)(I,{id:e.id}),a=e.id),Object(i.a)("div",{role:"button",tabIndex:"0","data-index":t,className:U()("autosuggest-textarea__suggestions__item",{selected:t===n}),onMouseDown:this.onSuggestionClick},a,s)}}componentWillReceiveProps(e){e.suggestions!==this.props.suggestions&&e.suggestions.size>0&&this.state.suggestionsHidden&&this.state.focused&&this.setState({suggestionsHidden:!1})}render(){const{value:e,suggestions:t,disabled:n,placeholder:s,onKeyUp:a,autoFocus:o,lang:r,children:u}=this.props,{suggestionsHidden:d}=this.state;return[Object(i.a)("div",{className:"compose-form__autosuggest-wrapper"},"autosuggest-wrapper",Object(i.a)("div",{className:"autosuggest-textarea"},void 0,Object(i.a)("label",{},void 0,Object(i.a)("span",{style:{display:"none"}},void 0,s),c.a.createElement(A.a,{ref:this.setTextarea,className:"autosuggest-textarea__textarea",disabled:n,placeholder:s,autoFocus:o,value:e,onChange:this.onChange,onKeyDown:this.onKeyDown,onKeyUp:a,onFocus:this.onFocus,onBlur:this.onBlur,onPaste:this.onPaste,dir:"auto","aria-autocomplete":"list",lang:r}))),u),Object(i.a)("div",{className:"autosuggest-textarea__suggestions-wrapper"},"suggestions-wrapper",Object(i.a)("div",{className:"autosuggest-textarea__suggestions "+(d||t.isEmpty()?"":"autosuggest-textarea__suggestions--visible")},void 0,t.map(this.renderSuggestion)))]}}F.propTypes={value:g.a.string,suggestions:p.a.list,disabled:g.a.bool,placeholder:g.a.string,onSuggestionSelected:g.a.func.isRequired,onSuggestionsClearRequested:g.a.func.isRequired,onSuggestionsFetchRequested:g.a.func.isRequired,onChange:g.a.func.isRequired,onKeyUp:g.a.func,onKeyDown:g.a.func,onPaste:g.a.func.isRequired,autoFocus:g.a.bool,lang:g.a.string},F.defaultProps={autoFocus:!0};class D extends j.a{constructor(){super(...arguments),this.state={suggestionsHidden:!0,focused:!1,selectedSuggestion:0,lastToken:null,tokenStart:0},this.onChange=e=>{const[t,n]=((e,t,n)=>{let s,a=e.slice(0,t).search(/\S+$/),o=e.slice(t).search(/\s/);return s=o<0?e.slice(a):e.slice(a,o+t),!s||s.trim().length<3||-1===n.indexOf(s[0])?[null,null]:(s=s.trim().toLowerCase(),s.length>0?[a+1,s]:[null,null])})(e.target.value,e.target.selectionStart,this.props.searchTokens);null!==n&&this.state.lastToken!==n?(this.setState({lastToken:n,selectedSuggestion:0,tokenStart:t}),this.props.onSuggestionsFetchRequested(n)):null===n&&(this.setState({lastToken:null}),this.props.onSuggestionsClearRequested()),this.props.onChange(e)},this.onKeyDown=e=>{const{suggestions:t,disabled:n}=this.props,{selectedSuggestion:s,suggestionsHidden:a}=this.state;if(n)e.preventDefault();else if(229!==e.which&&!e.isComposing){switch(e.key){case"Escape":0===t.size||a?document.querySelector(".ui").parentElement.focus():(e.preventDefault(),this.setState({suggestionsHidden:!0}));break;case"ArrowDown":t.size>0&&!a&&(e.preventDefault(),this.setState({selectedSuggestion:Math.min(s+1,t.size-1)}));break;case"ArrowUp":t.size>0&&!a&&(e.preventDefault(),this.setState({selectedSuggestion:Math.max(s-1,0)}));break;case"Enter":case"Tab":null!==this.state.lastToken&&t.size>0&&!a&&(e.preventDefault(),e.stopPropagation(),this.props.onSuggestionSelected(this.state.tokenStart,this.state.lastToken,t.get(s)))}!e.defaultPrevented&&this.props.onKeyDown&&this.props.onKeyDown(e)}},this.onBlur=()=>{this.setState({suggestionsHidden:!0,focused:!1})},this.onFocus=()=>{this.setState({focused:!0})},this.onSuggestionClick=e=>{const t=this.props.suggestions.get(e.currentTarget.getAttribute("data-index"));e.preventDefault(),this.props.onSuggestionSelected(this.state.tokenStart,this.state.lastToken,t),this.input.focus()},this.setInput=e=>{this.input=e},this.renderSuggestion=(e,t)=>{const{selectedSuggestion:n}=this.state;let s,a;return"emoji"===e.type?(s=Object(i.a)(N,{emoji:e}),a=e.id):"hashtag"===e.type?(s=Object(i.a)(x,{tag:e}),a=e.name):"account"===e.type&&(s=Object(i.a)(I,{id:e.id}),a=e.id),Object(i.a)("div",{role:"button",tabIndex:"0","data-index":t,className:U()("autosuggest-textarea__suggestions__item",{selected:t===n}),onMouseDown:this.onSuggestionClick},a,s)}}componentWillReceiveProps(e){e.suggestions!==this.props.suggestions&&e.suggestions.size>0&&this.state.suggestionsHidden&&this.state.focused&&this.setState({suggestionsHidden:!1})}render(){const{value:e,suggestions:t,disabled:n,placeholder:s,onKeyUp:a,autoFocus:o,className:r,id:u,maxLength:d,lang:l,spellCheck:p}=this.props,{suggestionsHidden:h}=this.state;return Object(i.a)("div",{className:"autosuggest-input"},void 0,Object(i.a)("label",{},void 0,Object(i.a)("span",{style:{display:"none"}},void 0,s),c.a.createElement("input",{type:"text",ref:this.setInput,disabled:n,placeholder:s,autoFocus:o,value:e,onChange:this.onChange,onKeyDown:this.onKeyDown,onKeyUp:a,onFocus:this.onFocus,onBlur:this.onBlur,dir:"auto","aria-autocomplete":"list",id:u,className:r,maxLength:d,lang:l,spellCheck:p})),Object(i.a)("div",{className:"autosuggest-textarea__suggestions "+(h||t.isEmpty()?"":"autosuggest-textarea__suggestions--visible")},void 0,t.map(this.renderSuggestion)))}}var P;D.propTypes={value:g.a.string,suggestions:p.a.list,disabled:g.a.bool,placeholder:g.a.string,onSuggestionSelected:g.a.func.isRequired,onSuggestionsClearRequested:g.a.func.isRequired,onSuggestionsFetchRequested:g.a.func.isRequired,onChange:g.a.func.isRequired,onKeyUp:g.a.func,onKeyDown:g.a.func,autoFocus:g.a.bool,className:g.a.string,id:g.a.string,searchTokens:g.a.arrayOf(g.a.string),maxLength:g.a.number,lang:g.a.string,spellCheck:g.a.bool},D.defaultProps={autoFocus:!0,searchTokens:["@",":","#"]};const H=Object(v.f)({add_poll:{id:"poll_button.add_poll",defaultMessage:"Add a poll"},remove_poll:{id:"poll_button.remove_poll",defaultMessage:"Remove poll"}}),q={height:null,lineHeight:"27px"};let K=Object(v.g)(P=class extends c.a.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.onClick()}}render(){const{intl:e,active:t,unavailable:n,disabled:s}=this.props;return n?null:Object(i.a)("div",{className:"compose-form__poll-button"},void 0,Object(i.a)(_.a,{icon:"tasks",title:e.formatMessage(t?H.remove_poll:H.add_poll),disabled:s,onClick:this.handleClick,className:"compose-form__poll-button-icon "+(t?"active":""),size:18,inverted:!0,style:q}))}})||P;var $,B,W=Object(o.connect)((e=>({unavailable:e.getIn(["compose","is_uploading"])||e.getIn(["compose","media_attachments"]).size>0,active:null!==e.getIn(["compose","poll"])})),(e=>({onClick(){e(((t,n)=>{n().getIn(["compose","poll"])?e(Object(m.tb)()):e(Object(m.V)())}))}})))(K);const Q=Object(v.f)({upload:{id:"upload_button.label",defaultMessage:"Add images, a video or an audio file"}}),z={height:null,lineHeight:"27px"};let G=Object(o.connect)((()=>e=>({acceptContentTypes:e.getIn(["media_attachments","accept_content_types"])})))($=Object(v.g)((B=class extends j.a{constructor(){super(...arguments),this.handleChange=e=>{e.target.files.length>0&&this.props.onSelectFile(e.target.files)},this.handleClick=()=>{this.fileElement.click()},this.setRef=e=>{this.fileElement=e}}render(){const{intl:e,resetFileKey:t,unavailable:n,disabled:s,acceptContentTypes:a}=this.props;if(n)return null;const o=e.formatMessage(Q.upload);return Object(i.a)("div",{className:"compose-form__upload-button"},void 0,Object(i.a)(_.a,{icon:"paperclip",title:o,disabled:s,onClick:this.handleClick,className:"compose-form__upload-button-icon",size:18,inverted:!0,style:z}),Object(i.a)("label",{},void 0,Object(i.a)("span",{style:{display:"none"}},void 0,o),c.a.createElement("input",{key:t,ref:this.setRef,type:"file",multiple:!0,accept:a.toArray().join(","),onChange:this.handleChange,disabled:s,style:{display:"none"}})))}},B.propTypes={disabled:g.a.bool,unavailable:g.a.bool,onSelectFile:g.a.func.isRequired,style:g.a.object,resetFileKey:g.a.number,acceptContentTypes:p.a.listOf(g.a.string).isRequired,intl:g.a.object.isRequired},$=B))||$)||$;var X=Object(o.connect)((e=>({disabled:e.getIn(["compose","is_uploading"])||e.getIn(["compose","media_attachments"]).size+e.getIn(["compose","pending_media_attachments"])>3||e.getIn(["compose","media_attachments"]).some((e=>["video","audio"].includes(e.get("type")))),unavailable:null!==e.getIn(["compose","poll"]),resetFileKey:e.getIn(["compose","resetFileKey"])})),(e=>({onSelectFile(t){e(Object(m.Cb)(t))}})))(G);const V={height:null,lineHeight:"27px",width:"23.14285722px"};class J extends c.a.PureComponent{render(){const{label:e,title:t,active:n,ariaControls:s}=this.props;return Object(i.a)("button",{type:"button",title:t,"aria-label":t,className:"text-icon-button "+(n?"active":""),"aria-expanded":n,onClick:this.props.onClick,"aria-controls":s,style:V},void 0,e)}}const Y=Object(v.f)({marked:{id:"compose_form.spoiler.marked",defaultMessage:"Text is hidden behind warning"},unmarked:{id:"compose_form.spoiler.unmarked",defaultMessage:"Text is not hidden"}});var Z=Object(v.g)(Object(o.connect)(((e,t)=>{let{intl:n}=t;return{label:"CW",title:n.formatMessage(e.getIn(["compose","spoiler"])?Y.marked:Y.unmarked),active:e.getIn(["compose","spoiler"]),ariaControls:"cw-spoiler-input"}}),(e=>({onClick(){e(Object(m.cb)())}})))(J)),ee=n(556),te=n(60),ne=n(285);var se,ae,oe,ie=Object(o.connect)((e=>({value:e.getIn(["compose","privacy"])})),(e=>({onChange(t){e(Object(m.db)(t))},isUserTouching:ne.b,onModalOpen:t=>e(Object(te.d)("ACTIONS",t)),onModalClose:()=>e(Object(te.c)())})))(ee.a),re=n(679),ce=n(9),ue=n(33);const de=Object(v.f)({option_placeholder:{id:"compose_form.poll.option_placeholder",defaultMessage:"Choice {number}"},add_option:{id:"compose_form.poll.add_option",defaultMessage:"Add a choice"},remove_option:{id:"compose_form.poll.remove_option",defaultMessage:"Remove this choice"},poll_duration:{id:"compose_form.poll.duration",defaultMessage:"Poll duration"},switchToMultiple:{id:"compose_form.poll.switch_to_multiple",defaultMessage:"Change poll to allow multiple choices"},switchToSingle:{id:"compose_form.poll.switch_to_single",defaultMessage:"Change poll to allow for a single choice"},minutes:{id:"intervals.full.minutes",defaultMessage:"{number, plural, one {# minute} other {# minutes}}"},hours:{id:"intervals.full.hours",defaultMessage:"{number, plural, one {# hour} other {# hours}}"},days:{id:"intervals.full.days",defaultMessage:"{number, plural, one {# day} other {# days}}"}});let le=Object(v.g)(se=class extends c.a.PureComponent{constructor(){super(...arguments),this.handleOptionTitleChange=e=>{this.props.onChange(this.props.index,e.target.value)},this.handleOptionRemove=()=>{this.props.onRemove(this.props.index)},this.handleToggleMultiple=e=>{this.props.onToggleMultiple(),e.preventDefault(),e.stopPropagation()},this.handleCheckboxKeypress=e=>{"Enter"!==e.key&&" "!==e.key||this.handleToggleMultiple(e)},this.onSuggestionsClearRequested=()=>{this.props.onClearSuggestions()},this.onSuggestionsFetchRequested=e=>{this.props.onFetchSuggestions(e)},this.onSuggestionSelected=(e,t,n)=>{this.props.onSuggestionSelected(e,t,n,["poll","options",this.props.index])}}render(){const{isPollMultiple:e,title:t,lang:n,index:s,autoFocus:a,intl:o}=this.props;return Object(i.a)("li",{},void 0,Object(i.a)("label",{className:"poll__option editable"},void 0,Object(i.a)("span",{className:U()("poll__input",{checkbox:e}),onClick:this.handleToggleMultiple,onKeyPress:this.handleCheckboxKeypress,role:"button",tabIndex:"0",title:o.formatMessage(e?de.switchToSingle:de.switchToMultiple),"aria-label":o.formatMessage(e?de.switchToSingle:de.switchToMultiple)}),Object(i.a)(D,{placeholder:o.formatMessage(de.option_placeholder,{number:s+1}),maxLength:100,value:t,lang:n,spellCheck:!0,onChange:this.handleOptionTitleChange,suggestions:this.props.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,searchTokens:[":"],autoFocus:a})),Object(i.a)("div",{className:"poll__cancel"},void 0,Object(i.a)(_.a,{disabled:s<=1,title:o.formatMessage(de.remove_option),icon:"times",onClick:this.handleOptionRemove})))}})||se,pe=Object(v.g)((oe=class extends j.a{constructor(){super(...arguments),this.handleAddOption=()=>{this.props.onAddOption("")},this.handleSelectDuration=e=>{this.props.onChangeSettings(e.target.value,this.props.isMultiple)},this.handleToggleMultiple=()=>{this.props.onChangeSettings(this.props.expiresIn,!this.props.isMultiple)}}render(){const{options:e,lang:t,expiresIn:n,isMultiple:s,onChangeOption:a,onRemoveOption:o,intl:r,...u}=this.props;if(!e)return null;const d=e.indexOf("");return Object(i.a)("div",{className:"compose-form__poll-wrapper"},void 0,Object(i.a)("ul",{},void 0,e.map(((e,n)=>c.a.createElement(le,Object(ce.a)({title:e,lang:t,key:n,index:n,onChange:a,onRemove:o,isPollMultiple:s,onToggleMultiple:this.handleToggleMultiple,autoFocus:n===d},u))))),Object(i.a)("div",{className:"poll__footer"},void 0,Object(i.a)("button",{type:"button",disabled:e.size>=5,className:"button button-secondary",onClick:this.handleAddOption},void 0,Object(i.a)(ue.a,{id:"plus"})," ",c.a.createElement(v.b,de.add_option)),Object(i.a)("select",{value:n,onChange:this.handleSelectDuration},void 0,Object(i.a)("option",{value:300},void 0,r.formatMessage(de.minutes,{number:5})),Object(i.a)("option",{value:1800},void 0,r.formatMessage(de.minutes,{number:30})),Object(i.a)("option",{value:3600},void 0,r.formatMessage(de.hours,{number:1})),Object(i.a)("option",{value:21600},void 0,r.formatMessage(de.hours,{number:6})),Object(i.a)("option",{value:43200},void 0,r.formatMessage(de.hours,{number:12})),Object(i.a)("option",{value:86400},void 0,r.formatMessage(de.days,{number:1})),Object(i.a)("option",{value:259200},void 0,r.formatMessage(de.days,{number:3})),Object(i.a)("option",{value:604800},void 0,r.formatMessage(de.days,{number:7})))))}},oe.propTypes={options:p.a.list,lang:g.a.string,expiresIn:g.a.number,isMultiple:g.a.bool,onChangeOption:g.a.func.isRequired,onAddOption:g.a.func.isRequired,onRemoveOption:g.a.func.isRequired,onChangeSettings:g.a.func.isRequired,suggestions:p.a.list,onClearSuggestions:g.a.func.isRequired,onFetchSuggestions:g.a.func.isRequired,onSuggestionSelected:g.a.func.isRequired,intl:g.a.object.isRequired},ae=oe))||ae;var he=Object(o.connect)((e=>({suggestions:e.getIn(["compose","suggestions"]),options:e.getIn(["compose","poll","options"]),lang:e.getIn(["compose","language"]),expiresIn:e.getIn(["compose","poll","expires_in"]),isMultiple:e.getIn(["compose","poll","multiple"])})),(e=>({onAddOption(t){e(Object(m.W)(t))},onRemoveOption(t){e(Object(m.ub)(t))},onChangeOption(t,n){e(Object(m.fb)(t,n))},onChangeSettings(t,n){e(Object(m.gb)(t,n))},onClearSuggestions(){e(Object(m.ib)())},onFetchSuggestions(t){e(Object(m.lb)(t))},onSuggestionSelected(t,n,s,a){e(Object(m.xb)(t,n,s,a))}})))(pe),ge=n(557);var me=Object(o.connect)((e=>({active:e.getIn(["compose","is_uploading"]),progress:e.getIn(["compose","progress"]),isProcessing:e.getIn(["compose","is_processing"])})))(ge.a),be=n(240),fe=n(54),_e=n.n(fe);class Oe extends j.a{constructor(){super(...arguments),this.handleUndoClick=e=>{e.stopPropagation(),this.props.onUndo(this.props.media.get("id"))},this.handleFocalPointClick=e=>{e.stopPropagation(),this.props.onOpenFocalPoint(this.props.media.get("id"))}}render(){const{media:e}=this.props;if(!e)return null;const t=e.getIn(["meta","focus","x"]),n=e.getIn(["meta","focus","y"]),s=100*(t/2+.5),a=100*(n/-2+.5);return Object(i.a)("div",{className:"compose-form__upload",tabIndex:"0",role:"button"},void 0,Object(i.a)(be.a,{defaultStyle:{scale:.8},style:{scale:_e()(1,{stiffness:180,damping:12})}},void 0,(t=>{let{scale:n}=t;return Object(i.a)("div",{className:"compose-form__upload-thumbnail",style:{transform:`scale(${n})`,backgroundImage:`url(${e.get("preview_url")})`,backgroundPosition:`${s}% ${a}%`}},void 0,Object(i.a)("div",{className:"compose-form__upload__actions"},void 0,Object(i.a)("button",{type:"button",className:"icon-button",onClick:this.handleUndoClick},void 0,Object(i.a)(ue.a,{id:"times"})," ",Object(i.a)(v.b,{id:"upload_form.undo",defaultMessage:"Delete"})),Object(i.a)("button",{type:"button",className:"icon-button",onClick:this.handleFocalPointClick},void 0,Object(i.a)(ue.a,{id:"pencil"})," ",Object(i.a)(v.b,{id:"upload_form.edit",defaultMessage:"Edit"}))),0===(e.get("description")||"").length&&Object(i.a)("div",{className:"compose-form__upload__warning"},void 0,Object(i.a)("button",{type:"button",className:"icon-button",onClick:this.handleFocalPointClick},void 0,Object(i.a)(ue.a,{id:"info-circle"})," ",Object(i.a)(v.b,{id:"upload_form.description_missing",defaultMessage:"No description added"}))))})))}}Oe.contextTypes={router:g.a.object},Oe.propTypes={media:p.a.map.isRequired,onUndo:g.a.func.isRequired,onOpenFocalPoint:g.a.func.isRequired};var ve=Object(o.connect)(((e,t)=>{let{id:n}=t;return{media:e.getIn(["compose","media_attachments"]).find((e=>e.get("id")===n))}}),(e=>({onUndo:t=>{e(Object(m.Ab)(t))},onOpenFocalPoint:t=>{e(Object(m.nb)(t))},onSubmit(t){e(Object(m.zb)(t))}})))(Oe);const je=Object(v.f)({marked:{id:"compose_form.sensitive.marked",defaultMessage:"{count, plural, one {Media is marked as sensitive} other {Media is marked as sensitive}}"},unmarked:{id:"compose_form.sensitive.unmarked",defaultMessage:"{count, plural, one {Media is not marked as sensitive} other {Media is not marked as sensitive}}"}});class Se extends c.a.PureComponent{render(){const{active:e,disabled:t,mediaCount:n,onClick:s,intl:a}=this.props;return Object(i.a)("div",{className:"compose-form__sensitive-button"},void 0,Object(i.a)("label",{className:U()("icon-button",{active:e}),title:a.formatMessage(e?je.marked:je.unmarked,{count:n})},void 0,Object(i.a)("input",{name:"mark-sensitive",type:"checkbox",checked:e,onChange:s,disabled:t}),Object(i.a)(v.b,{id:"compose_form.sensitive.hide",defaultMessage:"{count, plural, one {Mark media as sensitive} other {Mark media as sensitive}}",values:{count:n}})))}}var ye=Object(o.connect)((e=>({active:e.getIn(["compose","sensitive"]),disabled:e.getIn(["compose","spoiler"]),mediaCount:e.getIn(["compose","media_attachments"]).size})),(e=>({onClick(){e(Object(m.ab)())}})))(Object(v.g)(Se));class Ce extends j.a{render(){const{mediaIds:e}=this.props;return Object(i.a)("div",{className:"compose-form__upload-wrapper"},void 0,Object(i.a)(me,{}),Object(i.a)("div",{className:"compose-form__uploads-wrapper"},void 0,e.map((e=>Object(i.a)(ve,{id:e},e)))),!e.isEmpty()&&Object(i.a)(ye,{}))}}Ce.propTypes={mediaIds:p.a.list.isRequired};var Ee=Object(o.connect)((e=>({mediaIds:e.getIn(["compose","media_attachments"]).map((e=>e.get("id")))})))(Ce);class Te extends c.a.PureComponent{render(){const{message:e}=this.props;return Object(i.a)(be.a,{defaultStyle:{opacity:0,scaleX:.85,scaleY:.75},style:{opacity:_e()(1,{damping:35,stiffness:400}),scaleX:_e()(1,{damping:35,stiffness:400}),scaleY:_e()(1,{damping:35,stiffness:400})}},void 0,(t=>{let{opacity:n,scaleX:s,scaleY:a}=t;return Object(i.a)("div",{className:"compose-form__warning",style:{opacity:n,transform:`scale(${s}, ${a})`}},void 0,e)}))}}var Ie=n(18);const ke=(()=>{try{const e="_\\u00b7\\u200c",t="\\p{L}\\p{M}",n="\\p{L}\\p{M}\\p{N}\\p{Pc}";return new RegExp("(?:^|[^\\/\\)\\w])#((["+n+"_]["+n+e+"]*["+t+e+"]["+n+e+"]*["+n+"_])|(["+n+"_]*["+t+"]["+n+"_]*))","iu")}catch{return/(?:^|[^/)\w])#(\w*[a-zA-Z·]\w*)/i}})();var Le,Me=Object(o.connect)((e=>({needsLockWarning:"private"===e.getIn(["compose","privacy"])&&!e.getIn(["accounts",Ie.p,"locked"]),hashtagWarning:"public"!==e.getIn(["compose","privacy"])&&ke.test(e.getIn(["compose","text"])),directMessageWarning:"direct"===e.getIn(["compose","privacy"])})))((e=>{let{needsLockWarning:t,hashtagWarning:n,directMessageWarning:s}=e;if(t)return Object(i.a)(Te,{message:Object(i.a)(v.b,{id:"compose_form.lock_disclaimer",defaultMessage:"Your account is not {locked}. Anyone can follow you to view your follower-only posts.",values:{locked:Object(i.a)("a",{href:"/settings/profile"},void 0,Object(i.a)(v.b,{id:"compose_form.lock_disclaimer.lock",defaultMessage:"locked"}))}})});if(n)return Object(i.a)(Te,{message:Object(i.a)(v.b,{id:"compose_form.hashtag_warning",defaultMessage:"This post won't be listed under any hashtag as it is unlisted. Only public posts can be searched by hashtag."})});if(s){const e=Object(i.a)("span",{},void 0,Object(i.a)(v.b,{id:"compose_form.encryption_warning",defaultMessage:"Posts on Mastodon are not end-to-end encrypted. Do not share any dangerous information over Mastodon."})," ",Object(i.a)("a",{href:"/terms",target:"_blank"},void 0,Object(i.a)(v.b,{id:"compose_form.direct_message_warning_learn_more",defaultMessage:"Learn more"})));return Object(i.a)(Te,{message:e})}return null})),Ne=n(188),we=n(531),xe=n(661),Ae=n(334),Re=n.n(Ae);const Ue=Object(v.f)({changeLanguage:{id:"compose.language.change",defaultMessage:"Change language"},search:{id:"compose.language.search",defaultMessage:"Search languages..."},clear:{id:"emoji_button.clear",defaultMessage:"Clear"}}),Fe=!!we.a&&{passive:!0};class De extends c.a.PureComponent{constructor(){super(...arguments),this.state={searchValue:""},this.handleDocumentClick=e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()},this.setRef=e=>{this.node=e},this.setListRef=e=>{this.listNode=e},this.handleSearchChange=e=>{let{target:t}=e;this.setState({searchValue:t.value})},this.handleClick=e=>{const t=e.currentTarget.getAttribute("data-index");e.preventDefault(),this.props.onClose(),this.props.onChange(t)},this.handleKeyDown=e=>{const{onClose:t}=this.props,n=Array.from(this.listNode.childNodes).findIndex((t=>t===e.currentTarget));let s=null;switch(e.key){case"Escape":t();break;case"Enter":this.handleClick(e);break;case"ArrowDown":s=this.listNode.childNodes[n+1]||this.listNode.firstChild;break;case"ArrowUp":s=this.listNode.childNodes[n-1]||this.listNode.lastChild;break;case"Tab":s=e.shiftKey?this.listNode.childNodes[n-1]||this.listNode.lastChild:this.listNode.childNodes[n+1]||this.listNode.firstChild;break;case"Home":s=this.listNode.firstChild;break;case"End":s=this.listNode.lastChild}s&&(s.focus(),e.preventDefault(),e.stopPropagation())},this.handleSearchKeyDown=e=>{const{onChange:t,onClose:n}=this.props,{searchValue:s}=this.state;let a=null;switch(e.key){case"Tab":case"ArrowDown":a=this.listNode.firstChild,a&&(a.focus(),e.preventDefault(),e.stopPropagation());break;case"Enter":a=this.listNode.firstChild,a&&(t(a.getAttribute("data-index")),n());break;case"Escape":""!==s&&(e.preventDefault(),this.handleClear())}},this.handleClear=()=>{this.setState({searchValue:""})},this.renderItem=e=>{const{value:t}=this.props;return Object(i.a)("div",{role:"option",tabIndex:"0","data-index":e[0],className:U()("language-dropdown__dropdown__results__item",{active:e[0]===t}),"aria-selected":e[0]===t,onClick:this.handleClick,onKeyDown:this.handleKeyDown},e[0],Object(i.a)("span",{className:"language-dropdown__dropdown__results__item__native-name",lang:e[0]},void 0,e[2])," ",Object(i.a)("span",{className:"language-dropdown__dropdown__results__item__common-name"},void 0,"(",e[1],")"))}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,Fe),requestAnimationFrame((()=>{if(this.node){const e=this.node.querySelector('input[type="search"]');e&&e.focus()}}))}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,Fe)}search(){const{languages:e,value:t,frequentlyUsedLanguages:n}=this.props,{searchValue:s}=this.state;return""===s?[...e].sort(((e,s)=>{if(e[0]===t)return-1;if(s[0]===t)return 1;{const t=n.indexOf(e[0]),a=n.indexOf(s[0]);return(t>-1?t:1/0)-(a>-1?a:1/0)}})):Re.a.go(s,e,{keys:["0","1","2"],limit:5,threshold:-1e4}).map((e=>e.obj))}frequentlyUsed(){const{languages:e,value:t}=this.props,n=e.find((e=>e[0]===t)),s=[];return n&&s.push(n),s}render(){const{intl:e}=this.props,{searchValue:t}=this.state,n=""!==t,s=this.search();return c.a.createElement("div",{ref:this.setRef},Object(i.a)("div",{className:"emoji-mart-search"},void 0,Object(i.a)("input",{type:"search",value:t,onChange:this.handleSearchChange,onKeyDown:this.handleSearchKeyDown,placeholder:e.formatMessage(Ue.search)}),Object(i.a)("button",{type:"button",className:"emoji-mart-search-icon",disabled:!n,"aria-label":e.formatMessage(Ue.clear),onClick:this.handleClear},void 0,n?xe.a:xe.b)),c.a.createElement("div",{className:"language-dropdown__dropdown__results emoji-mart-scroll",role:"listbox",ref:this.setListRef},s.map(this.renderItem)))}}De.defaultProps={languages:Ie.l};let Pe=Object(v.g)(Le=class extends c.a.PureComponent{constructor(){super(...arguments),this.state={open:!1,placement:"bottom"},this.handleToggle=()=>{this.state.open&&this.activeElement&&this.activeElement.focus({preventScroll:!0}),this.setState({open:!this.state.open})},this.handleClose=()=>{const{value:e,onClose:t}=this.props;this.state.open&&this.activeElement&&this.activeElement.focus({preventScroll:!0}),this.setState({open:!1}),t(e)},this.handleChange=e=>{const{onChange:t}=this.props;t(e)},this.setTargetRef=e=>{this.target=e},this.findTarget=()=>this.target,this.handleOverlayEnter=e=>{this.setState({placement:e.placement})}}render(){const{value:e,intl:t,frequentlyUsedLanguages:n}=this.props,{open:s,placement:a}=this.state;return Object(i.a)("div",{className:U()("privacy-dropdown",a,{active:s})},void 0,c.a.createElement("div",{className:"privacy-dropdown__value",ref:this.setTargetRef},Object(i.a)(J,{className:"privacy-dropdown__value-icon",label:e&&e.toUpperCase(),title:t.formatMessage(Ue.changeLanguage),active:s,onClick:this.handleToggle})),Object(i.a)(Ne.a,{show:s,placement:"bottom",flip:!0,target:this.findTarget,popperConfig:{strategy:"fixed",onFirstUpdate:this.handleOverlayEnter}},void 0,(s=>{let{props:a,placement:o}=s;return c.a.createElement("div",a,Object(i.a)("div",{className:`dropdown-animation language-dropdown__dropdown ${o}`},void 0,Object(i.a)(De,{value:e,frequentlyUsedLanguages:n,onClose:this.handleClose,onChange:this.handleChange,intl:t})))})))}})||Le;var He=n(553),qe=n(48),Ke=n(4);const $e=Object(qe.a)([e=>e.getIn(["settings","frequentlyUsedLanguages"],Object(Ke.Map)())],(e=>e.keySeq().sort(((t,n)=>e.get(t)-e.get(n))).reverse().toArray()));var Be=Object(o.connect)((e=>({frequentlyUsedLanguages:$e(e),value:e.getIn(["compose","language"])})),(e=>({onChange(t){e(Object(m.Z)(t))},onClose(t){e(Object(He.b)(t))}})))(Pe),We=n(155),Qe=n(53),ze=n.n(Qe),Ge=n(343),Xe=n.n(Ge),Ve=n(344),Je=n.n(Ve),Ye=n(345),Ze=n.n(Ye),et=n(346),tt=n.n(et),nt=n(347),st=n.n(nt),at=n(348),ot=n.n(at);const it=ze()("((#{validUrlPrecedingChars})(https?:\\/\\/)(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?)",{validUrlPrecedingChars:Xe.a,validDomain:Je.a,validPortNumber:Ze.a,validUrlPath:tt.a,validUrlQueryChars:st.a,validUrlQueryEndingChars:ot.a},"gi");var rt,ct;const ut=Object(v.f)({placeholder:{id:"compose_form.placeholder",defaultMessage:"What is on your mind?"},spoiler_placeholder:{id:"compose_form.spoiler_placeholder",defaultMessage:"Write your warning here"},publish:{id:"compose_form.publish",defaultMessage:"Publish"},publishLoud:{id:"compose_form.publish_loud",defaultMessage:"{publish}!"},saveChanges:{id:"compose_form.save_changes",defaultMessage:"Save changes"}});let dt=Object(v.g)((ct=class extends j.a{constructor(){super(...arguments),this.handleChange=e=>{this.props.onChange(e.target.value)},this.handleKeyDown=e=>{13===e.keyCode&&(e.ctrlKey||e.metaKey)&&this.handleSubmit()},this.getFulltextForCharacterCounting=()=>{return[this.props.spoiler?this.props.spoilerText:"",(e=this.props.text,e.replace(it,"$2xxxxxxxxxxxxxxxxxxxxxxx").replace(/(^|[^/\w])@(([a-z0-9_]+)@[a-z0-9.-]+[a-z0-9]+)/gi,"$1@$3"))].join("");var e},this.canSubmit=()=>{const{isSubmitting:e,isChangingUpload:t,isUploading:n,anyMedia:s}=this.props,a=this.getFulltextForCharacterCounting(),o=0!==a.length&&0===a.trim().length;return!(e||n||t||Object(We.length)(a)>Ie.n||o&&!s)},this.handleSubmit=e=>{this.props.text!==this.autosuggestTextarea.textarea.value&&this.props.onChange(this.autosuggestTextarea.textarea.value),this.canSubmit()&&(this.props.onSubmit(this.context.router?this.context.router.history:null),e&&e.preventDefault())},this.onSuggestionsClearRequested=()=>{this.props.onClearSuggestions()},this.onSuggestionsFetchRequested=e=>{this.props.onFetchSuggestions(e)},this.onSuggestionSelected=(e,t,n)=>{this.props.onSuggestionSelected(e,t,n,["text"])},this.onSpoilerSuggestionSelected=(e,t,n)=>{this.props.onSuggestionSelected(e,t,n,["spoiler_text"])},this.handleChangeSpoilerText=e=>{this.props.onChangeSpoilerText(e.target.value)},this.handleFocus=()=>{if(this.composeForm&&!this.props.singleColumn){const{left:e,right:t}=this.composeForm.getBoundingClientRect();(e<0||t>(window.innerWidth||document.documentElement.clientWidth))&&this.composeForm.scrollIntoView()}},this._updateFocusAndSelection=e=>{if(this.props.focusDate&&this.props.focusDate!==e.focusDate){let t,n;this.props.preselectDate!==e.preselectDate&&this.props.isInReply?(t=this.props.text.length,n=this.props.text.search(/\s/)+1):"number"==typeof this.props.caretPosition?(n=this.props.caretPosition,t=this.props.caretPosition):(t=this.props.text.length,n=t),Promise.resolve().then((()=>{this.autosuggestTextarea.textarea.setSelectionRange(n,t),this.autosuggestTextarea.textarea.focus()})).catch(console.error)}else e.isSubmitting&&!this.props.isSubmitting?this.autosuggestTextarea.textarea.focus():this.props.spoiler!==e.spoiler&&(this.props.spoiler?this.spoilerText.input.focus():e.spoiler&&this.autosuggestTextarea.textarea.focus())},this.setAutosuggestTextarea=e=>{this.autosuggestTextarea=e},this.setSpoilerText=e=>{this.spoilerText=e},this.setRef=e=>{this.composeForm=e},this.handleEmojiPick=e=>{const{text:t}=this.props,n=this.autosuggestTextarea.textarea.selectionStart,s=e.custom&&n>0&&!"><                　\u2028\u2029\t\n\v\f\r".includes(t[n-1]);this.props.onPickEmoji(n,e,s)}}componentDidMount(){this._updateFocusAndSelection({})}componentDidUpdate(e){this._updateFocusAndSelection(e)}render(){const{intl:e,onPaste:t,autoFocus:n}=this.props,s=this.props.isSubmitting;let a="";return a=this.props.isEditing?e.formatMessage(ut.saveChanges):"private"===this.props.privacy||"direct"===this.props.privacy?Object(i.a)("span",{className:"compose-form__publish-private"},void 0,Object(i.a)(ue.a,{id:"lock"})," ",e.formatMessage(ut.publish)):"unlisted"!==this.props.privacy?e.formatMessage(ut.publishLoud,{publish:e.formatMessage(ut.publish)}):e.formatMessage(ut.publish),Object(i.a)("form",{className:"compose-form",onSubmit:this.handleSubmit},void 0,Object(i.a)(Me,{}),Object(i.a)(E,{}),c.a.createElement("div",{className:"spoiler-input "+(this.props.spoiler?"spoiler-input--visible":""),ref:this.setRef,"aria-hidden":!this.props.spoiler},c.a.createElement(D,{placeholder:e.formatMessage(ut.spoiler_placeholder),value:this.props.spoilerText,onChange:this.handleChangeSpoilerText,onKeyDown:this.handleKeyDown,disabled:!this.props.spoiler,ref:this.setSpoilerText,suggestions:this.props.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSpoilerSuggestionSelected,searchTokens:[":"],id:"cw-spoiler-input",className:"spoiler-input__input",lang:this.props.lang,spellCheck:!0})),c.a.createElement(F,{ref:this.setAutosuggestTextarea,placeholder:e.formatMessage(ut.placeholder),disabled:s,value:this.props.text,onChange:this.handleChange,suggestions:this.props.suggestions,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,onPaste:t,autoFocus:n,lang:this.props.lang},Object(i.a)(re.a,{onPickEmoji:this.handleEmojiPick}),Object(i.a)("div",{className:"compose-form__modifiers"},void 0,Object(i.a)(Ee,{}),Object(i.a)(he,{}))),Object(i.a)("div",{className:"compose-form__buttons-wrapper"},void 0,Object(i.a)("div",{className:"compose-form__buttons"},void 0,Object(i.a)(X,{}),Object(i.a)(W,{}),Object(i.a)(ie,{disabled:this.props.isEditing}),Object(i.a)(Z,{}),Object(i.a)(Be,{})),Object(i.a)("div",{className:"character-counter__wrapper"},void 0,Object(i.a)(u.a,{max:Ie.n,text:this.getFulltextForCharacterCounting()}))),Object(i.a)("div",{className:"compose-form__publish"},void 0,Object(i.a)("div",{className:"compose-form__publish-button-wrapper"},void 0,Object(i.a)(d.a,{type:"submit",text:a,disabled:!this.canSubmit(),block:!0}))))}},ct.contextTypes={router:g.a.object},ct.propTypes={intl:g.a.object.isRequired,text:g.a.string.isRequired,suggestions:p.a.list,spoiler:g.a.bool,privacy:g.a.string,spoilerText:g.a.string,focusDate:g.a.instanceOf(Date),caretPosition:g.a.number,preselectDate:g.a.instanceOf(Date),isSubmitting:g.a.bool,isChangingUpload:g.a.bool,isEditing:g.a.bool,isUploading:g.a.bool,onChange:g.a.func.isRequired,onSubmit:g.a.func.isRequired,onClearSuggestions:g.a.func.isRequired,onFetchSuggestions:g.a.func.isRequired,onSuggestionSelected:g.a.func.isRequired,onChangeSpoilerText:g.a.func.isRequired,onPaste:g.a.func.isRequired,onPickEmoji:g.a.func.isRequired,autoFocus:g.a.bool,anyMedia:g.a.bool,isInReply:g.a.bool,singleColumn:g.a.bool,lang:g.a.string},ct.defaultProps={autoFocus:!1},rt=ct))||rt;t.a=Object(o.connect)((e=>({text:e.getIn(["compose","text"]),suggestions:e.getIn(["compose","suggestions"]),spoiler:e.getIn(["compose","spoiler"]),spoilerText:e.getIn(["compose","spoiler_text"]),privacy:e.getIn(["compose","privacy"]),focusDate:e.getIn(["compose","focusDate"]),caretPosition:e.getIn(["compose","caretPosition"]),preselectDate:e.getIn(["compose","preselectDate"]),isSubmitting:e.getIn(["compose","is_submitting"]),isEditing:null!==e.getIn(["compose","id"]),isChangingUpload:e.getIn(["compose","is_changing_upload"]),isUploading:e.getIn(["compose","is_uploading"]),anyMedia:e.getIn(["compose","media_attachments"]).size>0,isInReply:null!==e.getIn(["compose","in_reply_to"]),lang:e.getIn(["compose","language"])})),(e=>({onChange(t){e(Object(m.Y)(t))},onSubmit(t){e(Object(m.zb)(t))},onClearSuggestions(){e(Object(m.ib)())},onFetchSuggestions(t){e(Object(m.lb)(t))},onSuggestionSelected(t,n,s,a){e(Object(m.xb)(t,n,s,a))},onChangeSpoilerText(t){e(Object(m.bb)(t))},onPaste(t){e(Object(m.Cb)(t))},onPickEmoji(t,n,s){e(Object(m.ob)(t,n,s))}})))(dt)},722:function(e,t,n){"use strict";var s=n(6),a=n(12),o=n(349),i=n(160),r=n(237);t.a=Object(s.g)(Object(a.connect)(((e,t)=>{let{intl:n}=t;const s=Object(r.c)(e);return s.forEach((e=>["title","message"].forEach((t=>{const s=e[t];"object"==typeof s&&(e[t]=n.formatMessage(s,e[`${t}_values`]))})))),{notifications:s}}),(e=>({onDismiss:t=>{e(Object(i.d)(t))}})))(o.NotificationStack))},723:function(e,t,n){"use strict";var s=n(12),a=n(156),o=n.n(a);t.a=Object(s.connect)(((e,t)=>({loading:e.get("loadingBar")[t.scope||"default"]})))(o.a.WrappedComponent)},725:function(e,t,n){"use strict";n.d(t,"a",(function(){return xt}));var s=n(235),a=n(342),o=n(340),i=n(4),r=n(656);const c=i.default.Map({openId:null,keyboard:!1,scroll_key:null});var u=n(47),d=n(22),l=n(58);const p=Object(i.Map)(),h=Object(i.Map)({unread:0,online:!1,top:!0,isLoading:!1,hasMore:!0,pendingItems:Object(i.List)(),items:Object(i.List)()}),g=function(e,t,n,s){return void 0===s&&(s=null),e.keySeq().forEach((n=>{if(null===s||n!==`account:${s}`&&!n.startsWith(`account:${s}:`)){const s=e=>e.filterNot((e=>e===t));e=e.updateIn([n,"items"],s).updateIn([n,"pendingItems"],s)}})),n.forEach((t=>{e=g(e,t,[],s)})),e};var m=n(199),b=n(241),f=n(285);const _=Object(i.Map)({streaming_api_base_url:null,access_token:null,layout:Object(f.c)(),permissions:"0"});var O=n(160);const v=Object(i.List)([]);var j=n(156),S=n(60),y=n(15);const C=Object(i.Map)({ignoreFocus:!1,stack:Object(i.Stack)()}),E=(e,t)=>{let{modalType:n,ignoreFocus:s}=t;return void 0===n||n===e.getIn(["stack",0,"modalType"])?e.set("ignoreFocus",!!s).update("stack",(e=>e.shift())):e};var T=n(125),I=n(50),k=n(230),L=n(205),M=n(277),N=n(568);const w=Object(i.Map)({next:null,isLoading:!1,items:Object(i.List)()}),x=Object(i.Map)({followers:w,following:w,reblogged_by:w,favourited_by:w,follow_requests:w,blocks:w,mutes:w,featured_tags:w}),A=(e,t,n,s)=>e.setIn(t,Object(i.Map)({next:s,items:Object(i.List)(n.map((e=>e.id))),isLoading:!1})),R=(e,t,n,s)=>e.updateIn(t,(e=>e.set("next",s).set("isLoading",!1).update("items",(e=>e.concat(n.map((e=>e.id))))))),U=(e,t,n,s)=>e.setIn(t,Object(i.Map)({items:Object(i.List)(n.map((e=>((e,t)=>{const n={...e,accountId:t};return Object(i.fromJS)(n)})(e,s))).sort(((e,t)=>t.get("statuses_count")-e.get("statuses_count")))),isLoading:!1}));var F=n(189);const D=Object(i.Map)({blocks:Object(i.Map)({items:Object(i.OrderedSet)()})});var P=n(17);const H=Object(i.Map)(),q=(e,t)=>(delete(t={...t}).followers_count,delete t.following_count,delete t.statuses_count,t.hidden=!1!==e.getIn([t.id,"hidden"])&&t.limited,e.set(t.id,Object(i.fromJS)(t)));const K=(e,t)=>e.set(t.id,Object(i.fromJS)({followers_count:t.followers_count,following_count:t.following_count,statuses_count:t.statuses_count})),$=Object(i.Map)();var B=n(180);const W=(e,t)=>e.set(t.id,Object(i.fromJS)(t)),Q=(e,t,n)=>(n.forEach((t=>{e=Q(e,t,[])})),e.delete(t)),z=(e,t,n,s)=>e.update(t,(e=>e.update("reactions",(e=>{const t=e.findIndex((e=>e.get("name")===n));return t>-1?e.update(t,(e=>s(e))):e.push(s(Object(i.fromJS)({name:n,count:0})))})))),G=Object(i.Map)();var X=n(709);const V=(e,t)=>e.set(t.id,Object(i.fromJS)(t)),J=(e,t,n)=>e.withMutations((e=>{t.forEach((t=>{e.setIn([t,"domain_blocking"],n)}))})),Y=Object(i.Map)();var Z=n(164),ee=n(301),te=n(290),ne=n(553),se=n(39);function ae(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ae)}const oe=Object(i.Map)({saved:!0,skinTone:1,trends:Object(i.Map)({show:!0}),home:Object(i.Map)({shows:Object(i.Map)({reblog:!0,reply:!0}),regex:Object(i.Map)({body:""})}),notifications:Object(i.Map)({alerts:Object(i.Map)({follow:!1,follow_request:!1,favourite:!1,reaction:!1,reblog:!1,mention:!1,poll:!1,status:!1,update:!1,"admin.sign_up":!1,"admin.report":!1}),quickFilter:Object(i.Map)({active:"all",show:!0,advanced:!1}),dismissPermissionBanner:!1,showUnread:!0,shows:Object(i.Map)({follow:!0,follow_request:!1,favourite:!0,reblog:!0,reaction:!0,mention:!0,poll:!0,status:!0,update:!0,"admin.sign_up":!0,"admin.report":!0}),sounds:Object(i.Map)({follow:!0,follow_request:!1,favourite:!0,reblog:!0,reaction:!0,mention:!0,poll:!0,status:!0,update:!0,"admin.sign_up":!0,"admin.report":!0})}),community:Object(i.Map)({regex:Object(i.Map)({body:""})}),public:Object(i.Map)({regex:Object(i.Map)({body:""})}),direct:Object(i.Map)({regex:Object(i.Map)({body:""})})}),ie=Object(i.fromJS)([{id:"COMPOSE",uuid:ae(),params:{}},{id:"HOME",uuid:ae(),params:{}},{id:"NOTIFICATIONS",uuid:ae(),params:{}}]),re=(e,t)=>e.update("columns",(e=>e.filterNot((e=>"LIST"===e.get("id")&&e.get("params").get("id")===t))));var ce=n(361);const ue=i.default.Map({subscription:null,alerts:new i.default.Map({follow:!1,follow_request:!1,favourite:!1,reblog:!1,mention:!1,poll:!1}),isSubscribed:!1,browserSupport:!1});var de=n(278),le=n(279),pe=n(711),he=n(185);const ge=Object(i.Map)({favourites:Object(i.Map)({next:null,loaded:!1,items:Object(i.OrderedSet)()}),bookmarks:Object(i.Map)({next:null,loaded:!1,items:Object(i.OrderedSet)()}),pins:Object(i.Map)({next:null,loaded:!1,items:Object(i.OrderedSet)()}),trending:Object(i.Map)({next:null,loaded:!1,items:Object(i.OrderedSet)()})}),me=(e,t,n,s)=>e.update(t,(e=>e.withMutations((e=>{e.set("next",s),e.set("loaded",!0),e.set("isLoading",!1),e.set("items",Object(i.OrderedSet)(n.map((e=>e.id))))})))),be=(e,t,n,s)=>e.update(t,(e=>e.withMutations((e=>{e.set("next",s),e.set("isLoading",!1),e.set("items",e.get("items").union(n.map((e=>e.id))))})))),fe=(e,t,n)=>e.updateIn([t,"items"],(e=>e.includes(n.get("id"))?e:Object(i.OrderedSet)([n.get("id")]).union(e))),_e=(e,t,n)=>e.updateIn([t,"items"],(e=>e.delete(n.get("id"))));const Oe=i.default.Map({new:i.default.Map({account:null,notifications:!0,duration:0})});const ve=i.default.Map({new:i.default.Map({account_id:null})});var je=n(265);const Se=i.default.Map({new:i.default.Map({privacy:"public"})});var ye=n(217);const Ce=Object(i.Map)({server:Object(i.Map)({isLoading:!0}),extendedDescription:Object(i.Map)({isLoading:!0}),domainBlocks:Object(i.Map)({isLoading:!0,isAvailable:!0,items:Object(i.List)()})});const Ee=Object(i.Map)({inReplyTos:Object(i.Map)(),replies:Object(i.Map)()}),Te=(e,t)=>e.withMutations((e=>{e.update("inReplyTos",(n=>n.withMutations((n=>{e.update("replies",(e=>e.withMutations((e=>{t.forEach((t=>{const s=n.get(t),a=e.get(t),o=e.get(s);o&&e.set(s,o.filterNot((e=>e===t))),a&&a.forEach((e=>n.delete(e))),n.delete(t),e.delete(t)}))}))))}))))}));var Ie=n(18),ke=n(271);const Le=Object(i.Map)({mounted:0,sensitive:!1,spoiler:!1,spoiler_text:"",privacy:null,id:null,text:"",focusDate:null,caretPosition:null,preselectDate:null,in_reply_to:null,is_composing:!1,is_submitting:!1,is_changing_upload:!1,is_uploading:!1,progress:0,isUploadingThumbnail:!1,thumbnailProgress:0,media_attachments:Object(i.List)(),pending_media_attachments:0,poll:null,suggestion_token:null,suggestions:Object(i.List)(),default_privacy:"public",default_sensitive:!1,default_language:"en",resetFileKey:Math.floor(65536*Math.random()),idempotencyKey:null,tagHistory:Object(i.List)(),media_modal:Object(i.Map)({id:null,description:"",focusX:0,focusY:0,dirty:!1})}),Me=Object(i.Map)({options:Object(i.List)(["",""]),expires_in:86400,multiple:!1});function Ne(e){return e.withMutations((t=>{t.set("id",null),t.set("text",""),t.set("spoiler",!1),t.set("spoiler_text",""),t.set("is_submitting",!1),t.set("is_changing_upload",!1),t.set("in_reply_to",null),t.set("privacy",e.get("default_privacy")),t.set("sensitive",e.get("default_sensitive")),t.set("language",e.get("default_language")),t.update("media_attachments",(e=>e.clear())),t.set("poll",null),t.set("idempotencyKey",ae())}))}const we=new DOMParser,xe=e=>{if(!e)return 86400;const t=(new Date(e).getTime()-Date.now())/1e3;return[300,1800,3600,21600,86400,259200,604800].find((e=>e>=t))||86400},Ae=(e,t,n)=>{if(t=t.toLowerCase(),e.length<4){const s=n.filter((n=>n.toLowerCase().startsWith(t)&&!e.some((e=>"hashtag"===e.type&&e.name.toLowerCase()===n.toLowerCase()))));return e.concat(s.slice(0,4-e.length).toJS().map((e=>({type:"hashtag",name:e}))))}return e};var Re=n(246);const Ue=Object(i.Map)({value:"",submitted:!1,hidden:!1,results:Object(i.Map)(),isLoading:!1,searchTerm:""});const Fe=Object(i.Map)({accept_content_types:[]});var De=n(215);const Pe=Object(i.Map)({pendingItems:Object(i.List)(),items:Object(i.List)(),hasMore:!0,top:!1,mounted:0,unread:0,lastReadId:"0",readMarkerId:"0",isTabVisible:!0,isLoading:0,browserSupport:!1,browserPermission:"default"}),He=e=>Object(i.Map)({id:e.id,type:e.type,account:e.account.id,created_at:e.created_at,status:e.status?e.status.id:null,report:e.report?Object(i.fromJS)(e.report):null}),qe=(e,t,n)=>{const s=e=>e.filterNot((e=>null!==e&&t.includes(e.get("account"))&&(void 0===n||n===e.get("type"))));return e.update("items",s).update("pendingItems",s)},Ke=e=>{const t=(e=e.set("unread",e.get("pendingItems").size)).get("items").find((e=>null!==e));return e.set("lastReadId",t?t.get("id"):"0")},$e=(e,t)=>(e=e.set("isTabVisible",t),Be(e)||(e=e.set("readMarkerId",e.get("lastReadId")),e=Ke(e)),e),Be=function(e,t){void 0===t&&(t=!1);const n=e.get("isTabVisible"),s=e.get("top"),a=e.get("mounted")>0,o=e.get("lastReadId"),i=e.get("items").findLast((e=>null!==e)),r=!e.get("hasMore")||"0"===o||i&&Object(l.a)(i.get("id"),o)<=0;return!(n&&(t||s)&&a&&r)},We=(e,t)=>e.withMutations((n=>{Object(l.a)(t,n.get("lastReadId"))>0&&n.set("lastReadId",t),Object(l.a)(t,n.get("readMarkerId"))>0&&n.set("readMarkerId",t),(e.get("unread")>0||Be(e))&&n.set("unread",n.get("pendingItems").count((e=>null!==e))+n.get("items").count((e=>e&&Object(l.a)(e.get("id"),t)>0)))}));var Qe=n(657);const ze=Object(i.Map)();var Ge=n(554),Xe=n(564),Ve=n(42);const Je=Object(i.List)([]);const Ye=Object(i.Map)(),Ze=(e,t)=>e.set(t.id,Object(i.fromJS)(t));const et=Object(i.Map)({listId:null,isSubmitting:!1,isChanged:!1,title:"",accounts:Object(i.Map)({items:Object(i.List)(),loaded:!1,isLoading:!1}),suggestions:Object(i.Map)({value:"",items:Object(i.List)()})});const tt=Object(i.Map)({accountId:null,lists:Object(i.Map)({items:Object(i.List)(),loaded:!1,isLoading:!1})});var nt=n(658);const st=(e,t)=>{const n=Object(i.fromJS)({id:t.id,title:t.title,context:t.context,filter_action:t.filter_action,keywords:t.keywords,expires_at:t.expires_at?Date.parse(t.expires_at):null});return Object(i.is)(e.get(t.id),n)?e:e.update(t.id,Object(i.Map)(),(e=>e.mergeWith(((e,t)=>void 0===t?e:t),n)))},at=(e,t)=>(t.forEach((t=>{e=st(e,t)})),e);var ot=n(234);const it=Object(i.Map)({items:Object(i.List)(),isLoading:!1,hasMore:!0,mounted:!1}),rt=e=>Object(i.Map)({id:e.id,unread:e.unread,accounts:Object(i.List)(e.accounts.map((e=>e.id))),last_status:e.last_status?e.last_status.id:null}),ct=(e,t)=>e.update("items",(e=>e.filterNot((e=>e.get("accounts").some((e=>t.includes(e)))))));var ut=n(354);const dt=Object(i.Map)({items:Object(i.List)(),isLoading:!1});const lt=Object(i.Map)();const pt=Object(i.Map)({tags:Object(i.Map)({items:Object(i.List)(),isLoading:!1}),links:Object(i.Map)({items:Object(i.List)(),isLoading:!1})});const ht=Object(i.Map)({focused:!0,unread:0});var gt=n(196);const mt=Object(i.Map)({items:Object(i.List)(),isLoading:!1,show:!1}),bt=(e,t,n,s)=>e.update("items",(e=>e.map((e=>e.get("id")===t?e.update("reactions",(e=>{const t=e.findIndex((e=>e.get("name")===n));return t>-1?e.update(t,(e=>s(e))):e.push(s(Object(i.fromJS)({name:n,count:0})))})):e)))),ft=e=>e.sortBy((e=>e.get("starts_at")||e.get("published_at"))),_t=(e,t)=>{const n=e.get("items").findIndex((e=>e.get("id")===t.get("id")));return n>-1?e.update("items",(e=>ft(e.update(n,(e=>e.mergeDeep(t)))))):e.update("items",(e=>ft(e.unshift(t))))};const Ot=Object(i.Map)({home:"0",notifications:"0"});var vt=n(580);const jt={statusId:null,accountId:null,type:null,src:null,muted:!1,volume:0,currentTime:0};var St=n(671),yt=n(569);const Ct=Object(i.Map)({loading:!1,items:Object(i.List)()}),Et=Object(i.Map)();var Tt=n(194);const It=Object(i.Map)();const kt=Object(i.Map)({items:Object(i.List)(),isLoading:!1,next:null});const Lt={announcements:function(e,t){switch(void 0===e&&(e=mt),t.type){case gt.k:return e.withMutations((e=>{e.set("show",!e.get("show"))}));case gt.d:return e.set("isLoading",!0);case gt.e:return e.withMutations((e=>{const n=Object(i.fromJS)(t.announcements);e.set("items",n),e.set("isLoading",!1)}));case gt.c:return e.set("isLoading",!1);case gt.l:return _t(e,Object(i.fromJS)(t.announcement));case gt.j:return((e,t)=>bt(e,t.announcement_id,t.name,(e=>e.set("count",t.count))))(e,t.reaction);case gt.g:case gt.h:return((e,t,n)=>bt(e,t,n,(e=>e.set("me",!0).update("count",(e=>e+1)))))(e,t.id,t.name);case gt.i:case gt.f:return((e,t,n)=>bt(e,t,n,(e=>e.set("me",!1).update("count",(e=>e-1)))))(e,t.id,t.name);case gt.b:return _t(e,Object(i.fromJS)({id:t.id,read:!0}));case gt.a:return e.update("items",(e=>{const n=e.findIndex((e=>e.get("id")===t.id));return n>-1?e.delete(n):e}));default:return e}},dropdown_menu:function(e,t){switch(void 0===e&&(e=c),t.type){case r.b:return e.merge({openId:t.id,keyboard:t.keyboard,scroll_key:t.scroll_key});case r.a:return e.get("openId")===t.id?e.set("openId",null).set("scroll_key",null):e;default:return e}},timelines:function(e,t){switch(void 0===e&&(e=p),t.type){case u.h:return e.update(t.timeline,h,(e=>e.update("items",(t=>e.get("pendingItems").concat(t.take(40)))).set("pendingItems",Object(i.List)()).set("unread",0)));case u.f:return e.update(t.timeline,h,(e=>e.set("isLoading",!0)));case u.e:return e.update(t.timeline,h,(e=>e.set("isLoading",!1)));case u.g:return((e,t,n,s,a,o,r)=>e.update(t,h,(e=>e.withMutations((e=>{e.set("isLoading",!1),e.set("isPartial",a),s||o||e.set("hasMore",!1),t.endsWith(":pinned")?e.set("items",n.map((e=>e.get("id")))):n.isEmpty()||(r=o&&(r||!e.get("pendingItems").isEmpty()),e.update(r?"pendingItems":"items",Object(i.List)(),(e=>{const t=n.map((e=>e.get("id"))),s=e.findLastIndex((e=>null!==e&&Object(l.a)(e,t.last())>=0))+1,o=e.take(s).findLastIndex((e=>null!==e&&Object(l.a)(e,t.first())>0))+1;let r=Object(i.OrderedSet)(t).withMutations((n=>{const a=e.slice(o,s).filter((e=>null!==e&&Object(l.a)(e,t.last())<0));n.union(a),n.subtract(e.take(o),e.skip(s))})).toList();return!a||0!==o&&null===e.get(o-1)||(r=r.unshift(null)),e.take(o).concat(r,e.skip(s))})))})))))(e,t.timeline,Object(i.fromJS)(t.statuses),t.next,t.partial,t.isLoadingRecent,t.usePendingItems);case u.k:return((e,t,n,s)=>{const a=e.getIn([t,"top"]);if(s||!e.getIn([t,"pendingItems"]).isEmpty())return e.getIn([t,"pendingItems"],Object(i.List)()).includes(n.get("id"))||e.getIn([t,"items"],Object(i.List)()).includes(n.get("id"))?e:e.update(t,h,(e=>e.update("pendingItems",(e=>e.unshift(n.get("id")))).update("unread",(e=>e+1))));const o=e.getIn([t,"items"],Object(i.List)()),r=o.includes(n.get("id")),c=e.getIn([t,"unread"],0);if(r)return e;let u=o;return e.update(t,h,(e=>e.withMutations((e=>{a||e.set("unread",c+1),a&&o.size>40&&(u=u.take(20)),e.set("items",u.unshift(n.get("id")))}))))})(e,t.timeline,Object(i.fromJS)(t.status),t.usePendingItems);case u.c:return g(e,t.id,t.references,t.reblogOf);case u.a:return((e,t)=>e.set(t,h))(e,t.timeline);case d.a:case d.f:return((e,t,n)=>{let s;return n.forEach((a=>{a.get("account")===t.id&&(s=n.filter((e=>e.get("reblog")===a.get("id"))).map((e=>e.get("id"))),e=g(e,a.get("id"),s,t.id))})),e})(e,t.relationship,t.statuses);case d.l:return((e,t,n,s)=>{const a=e=>e.filterNot((e=>s.getIn([e,"account"])===n.id));return t.updateIn([e,"items"],Object(i.List)(),a).updateIn([e,"pendingItems"],Object(i.List)(),a)})("home",e,t.relationship,t.statuses);case u.j:return((e,t,n)=>e.update(t,h,(e=>e.withMutations((e=>{n&&e.set("unread",e.get("pendingItems").size),e.set("top",n)})))))(e,t.timeline,t.top);case u.b:return e.update(t.timeline,h,(e=>((e,t)=>e.get("online")?e:e.withMutations((e=>{e.update(t?"pendingItems":"items",(e=>e.first()?e.unshift(null):e)),e.set("online",!0)})))(e,t.usePendingItems)));case u.d:return e.update(t.timeline,h,(e=>e.set("online",!1).update(t.usePendingItems?"pendingItems":"items",(e=>e.first()?e.unshift(null):e))));case u.i:return e.update(t.timeline,h,(e=>e.set("isPartial",!0).set("items",Object(i.List)()).set("pendingItems",Object(i.List)()).set("unread",0)));default:return e}},meta:function(e,t){switch(void 0===e&&(e=_),t.type){case m.a:return e.merge(t.state.get("meta")).set("permissions",t.state.getIn(["role","permissions"]));case b.b:return e.set("layout",t.layout);default:return e}},alerts:function(e,t){switch(void 0===e&&(e=v),t.type){case O.c:return e.push(Object(i.Map)({key:e.size>0?e.last().get("key")+1:0,title:t.title,message:t.message,message_values:t.message_values}));case O.b:return e.filterNot((e=>e.get("key")===t.alert.key));case O.a:return e.clear();default:return e}},loadingBar:j.loadingBarReducer,modal:function(e,t){switch(void 0===e&&(e=C),t.type){case S.b:return((e,t,n)=>e.withMutations((e=>{e.set("ignoreFocus",!1),e.update("stack",(e=>e.unshift(Object(i.Map)({modalType:t,modalProps:n}))))})))(e,t.modalType,t.modalProps);case S.a:return E(e,t);case y.I:return E(e,{modalType:"FOCAL_POINT",ignoreFocus:!1});case u.c:return e.update("stack",(e=>e.filterNot((e=>e.get("modalProps").statusId===t.id))));default:return e}},user_lists:function(e,t){switch(void 0===e&&(e=x),t.type){case d.t:return A(e,["followers",t.id],t.accounts,t.next);case d.q:return R(e,["followers",t.id],t.accounts,t.next);case d.s:case d.p:return e.setIn(["followers",t.id,"isLoading"],!0);case d.r:case d.o:return e.setIn(["followers",t.id,"isLoading"],!1);case d.z:return A(e,["following",t.id],t.accounts,t.next);case d.w:return R(e,["following",t.id],t.accounts,t.next);case d.y:case d.v:return e.setIn(["following",t.id,"isLoading"],!0);case d.x:case d.u:return e.setIn(["following",t.id,"isLoading"],!1);case I.n:return e.setIn(["reblogged_by",t.id],Object(i.List)(t.accounts.map((e=>e.id))));case I.d:return e.setIn(["favourited_by",t.id],Object(i.List)(t.accounts.map((e=>e.id))));case T.m:return"follow_request"===t.notification.type?((e,t)=>e.updateIn(["follow_requests","items"],(e=>e.filterNot((e=>e===t.account.id)).unshift(t.account.id))))(e,t.notification):e;case d.F:return A(e,["follow_requests"],t.accounts,t.next);case d.C:return R(e,["follow_requests"],t.accounts,t.next);case d.E:case d.B:return e.setIn(["follow_requests","isLoading"],!0);case d.D:case d.A:return e.setIn(["follow_requests","isLoading"],!1);case d.G:case d.H:return e.updateIn(["follow_requests","items"],(e=>e.filterNot((e=>e===t.id))));case k.f:return A(e,["blocks"],t.accounts,t.next);case k.c:return R(e,["blocks"],t.accounts,t.next);case k.e:case k.b:return e.setIn(["blocks","isLoading"],!0);case k.d:case k.a:return e.setIn(["blocks","isLoading"],!1);case L.g:return A(e,["mutes"],t.accounts,t.next);case L.d:return R(e,["mutes"],t.accounts,t.next);case L.f:case L.c:return e.setIn(["mutes","isLoading"],!0);case L.e:case L.b:return e.setIn(["mutes","isLoading"],!1);case M.f:return A(e,["directory"],t.accounts,t.next);case M.c:return R(e,["directory"],t.accounts,t.next);case M.e:case M.b:return e.setIn(["directory","isLoading"],!0);case M.d:case M.a:return e.setIn(["directory","isLoading"],!1);case N.c:return U(e,["featured_tags",t.id],t.tags,t.id);case N.b:return e.setIn(["featured_tags",t.id,"isLoading"],!0);case N.a:return e.setIn(["featured_tags",t.id,"isLoading"],!1);default:return e}},domain_lists:function(e,t){switch(void 0===e&&(e=D),t.type){case F.b:return e.setIn(["blocks","items"],Object(i.OrderedSet)(t.domains)).setIn(["blocks","next"],t.next);case F.a:return e.updateIn(["blocks","items"],(e=>e.union(t.domains))).setIn(["blocks","next"],t.next);case F.d:return e.updateIn(["blocks","items"],(e=>e.delete(t.domain)));default:return e}},status_lists:function(e,t){switch(void 0===e&&(e=ge),t.type){case de.e:case de.b:return e.setIn(["favourites","isLoading"],!0);case de.d:case de.a:return e.setIn(["favourites","isLoading"],!1);case de.f:return me(e,"favourites",t.statuses,t.next);case de.c:return be(e,"favourites",t.statuses,t.next);case le.e:case le.b:return e.setIn(["bookmarks","isLoading"],!0);case le.d:case le.a:return e.setIn(["bookmarks","isLoading"],!1);case le.f:return me(e,"bookmarks",t.statuses,t.next);case le.c:return be(e,"bookmarks",t.statuses,t.next);case he.h:case he.e:return e.setIn(["trending","isLoading"],!0);case he.g:case he.d:return e.setIn(["trending","isLoading"],!1);case he.i:return me(e,"trending",t.statuses,t.next);case he.f:return be(e,"trending",t.statuses,t.next);case I.g:return fe(e,"favourites",t.status);case I.r:return _e(e,"favourites",t.status);case I.c:return fe(e,"bookmarks",t.status);case I.q:return _e(e,"bookmarks",t.status);case pe.a:return me(e,"pins",t.statuses,t.next);case I.h:return fe(e,"pins",t.status);case I.s:return _e(e,"pins",t.status);case d.a:case d.f:return e.updateIn(["trending","items"],Object(i.OrderedSet)(),(e=>e.filterNot((e=>t.statuses.getIn([e,"account"])===t.relationship.id))));default:return e}},accounts:function(e,t){switch(void 0===e&&(e=H),t.type){case P.b:return q(e,t.account);case P.a:return((e,t)=>(t.forEach((t=>{e=q(e,t)})),e))(e,t.accounts);case d.h:return e.setIn([t.id,"hidden"],!1);default:return e}},accounts_counters:function(e,t){switch(void 0===e&&(e=$),t.type){case P.b:return K(e,t.account);case P.a:return((e,t)=>(t.forEach((t=>{e=K(e,t)})),e))(e,t.accounts);case d.d:return t.alreadyFollowing?e:e.updateIn([t.relationship.id,"followers_count"],(e=>e+1));case d.l:return e.updateIn([t.relationship.id,"followers_count"],(e=>Math.max(0,e-1)));default:return e}},accounts_map:St.a,statuses:function(e,t){switch(void 0===e&&(e=G),t.type){case B.e:return e.setIn([t.id,"isLoading"],!0);case B.d:return e.delete(t.id);case P.f:return W(e,t.status);case P.e:return((e,t)=>e.withMutations((e=>t.forEach((t=>W(e,t))))))(e,t.statuses);case I.f:return e.setIn([t.status.get("id"),"favourited"],!0);case I.r:return e.updateIn([t.status.get("id"),"favourites_count"],(e=>Math.max(0,e-1)));case I.e:return void 0===e.get(t.status.get("id"))?e:e.setIn([t.status.get("id"),"favourited"],!1);case I.b:return void 0===e.get(t.status.get("id"))?e:e.setIn([t.status.get("id"),"bookmarked"],!0);case I.a:return void 0===e.get(t.status.get("id"))?e:e.setIn([t.status.get("id"),"bookmarked"],!1);case I.p:return e.setIn([t.status.get("id"),"reblogged"],!0);case I.o:return void 0===e.get(t.status.get("id"))?e:e.setIn([t.status.get("id"),"reblogged"],!1);case I.m:return((e,t)=>z(e,t.status_id,t.name,(e=>e.set("count",t.count))))(e,t.reaction);case I.j:case I.k:return((e,t,n,s)=>z(e,t,n,(e=>e.set("me",!0).update("count",(e=>e+1)).update("url",(e=>e||s)).update("static_url",(e=>e||s)))))(e,t.id,t.name,t.url);case I.l:case I.i:return((e,t,n)=>z(e,t,n,(e=>e.set("me",!1).update("count",(e=>e-1)))))(e,t.id,t.name);case B.g:return e.setIn([t.id,"muted"],!0);case B.k:return e.setIn([t.id,"muted"],!1);case B.h:return e.withMutations((n=>{t.ids.forEach((t=>{void 0!==e.get(t)&&n.setIn([t,"hidden"],!1)}))}));case B.f:return e.withMutations((n=>{t.ids.forEach((t=>{void 0!==e.get(t)&&n.setIn([t,"hidden"],!0)}))}));case B.c:return e.setIn([t.id,"collapsed"],t.isCollapsed);case u.c:return Q(e,t.id,t.references);case B.i:return e.setIn([t.id,"translation"],Object(i.fromJS)(t.translation));case B.j:return e.deleteIn([t.id,"translation"]);default:return e}},relationships:function(e,t){switch(void 0===e&&(e=Y),t.type){case d.G:return e.setIn([t.id,"followed_by"],!0).setIn([t.id,"requested_by"],!1);case d.H:return e.setIn([t.id,"followed_by"],!1).setIn([t.id,"requested_by"],!1);case T.m:return"follow_request"===t.notification.type?e.setIn([t.notification.account.id,"requested_by"],!0):e;case d.c:return e.getIn([t.id,"following"])?e:e.setIn([t.id,t.locked?"requested":"following"],!0);case d.b:return e.setIn([t.id,t.locked?"requested":"following"],!1);case d.k:return e.setIn([t.id,"following"],!1);case d.j:return e.setIn([t.id,"following"],!0);case d.d:case d.l:case d.a:case d.i:case d.f:case d.m:case d.g:case d.n:case X.a:return V(e,t.relationship);case d.I:return((e,t)=>(t.forEach((t=>{e=V(e,t)})),e))(e,t.relationships);case F.c:return J(e,t.accounts,!0);case F.d:return J(e,t.accounts,!1);default:return e}},settings:function(e,t){switch(void 0===e&&(e=oe),t.type){case m.a:return((e,t)=>e.mergeDeep(t).update("columns",(function(e){return void 0===e&&(e=ie),e})))(e,t.state.get("settings"));case T.e:case Z.a:return e.setIn(t.path,t.value).set("saved",!1);case ee.a:return e.update("columns",(e=>e.push(Object(i.fromJS)({id:t.id,uuid:ae(),params:t.params})))).set("saved",!1);case ee.d:return e.update("columns",(e=>e.filterNot((e=>e.get("uuid")===t.uuid)))).set("saved",!1);case ee.b:return((e,t,n)=>{const s=e.get("columns"),a=s.findIndex((e=>e.get("uuid")===t)),o=a+n;let i;return i=s.splice(a,1),i=i.splice(o,0,s.get(a)),e.set("columns",i).set("saved",!1)})(e,t.uuid,t.direction);case ee.c:return((e,t,n,s)=>{const a=e.get("columns"),o=a.findIndex((e=>e.get("uuid")===t)),i=a.update(o,(e=>e.updateIn(["params",...n],(()=>s))));return e.set("columns",i).set("saved",!1)})(e,t.uuid,t.path,t.value);case te.a:return((e,t)=>e.update("frequentlyUsedEmojis",Object(i.Map)(),(e=>e.update(t.id,0,(e=>e+1)))).set("saved",!1))(e,t.emoji);case ne.a:return((e,t)=>e.update("frequentlyUsedLanguages",Object(i.Map)(),(e=>e.update(t,0,(e=>e+1)))).set("saved",!1))(e,t.language);case Z.b:return e.set("saved",!0);case se.v:return 404===t.error.response.status?re(e,t.id):e;case se.m:return re(e,t.id);default:return e}},push_notifications:function(e,t){switch(void 0===e&&(e=ue),t.type){case m.a:{const n=t.state.get("push_subscription");return n?e.set("subscription",new i.default.Map({id:n.get("id"),endpoint:n.get("endpoint")})).set("alerts",n.get("alerts")||ue.get("alerts")).set("isSubscribed",!0):e}case ce.SET_SUBSCRIPTION:return e.set("subscription",new i.default.Map({id:t.subscription.id,endpoint:t.subscription.endpoint})).set("alerts",new i.default.Map(t.subscription.alerts)).set("isSubscribed",!0);case ce.SET_BROWSER_SUPPORT:return e.set("browserSupport",t.value);case ce.CLEAR_SUBSCRIPTION:return ue;case ce.SET_ALERTS:return e.setIn(t.path,t.value);default:return e}},mutes:function(e,t){switch(void 0===e&&(e=Oe),t.type){case L.h:return e.withMutations((e=>{e.setIn(["new","account"],t.account),e.setIn(["new","notifications"],!0)}));case L.i:return e.updateIn(["new","notifications"],(e=>!e));case L.a:return e.setIn(["new","duration"],Number(t.duration));default:return e}},blocks:function(e,t){return void 0===e&&(e=ve),t.type===k.g?e.withMutations((e=>{e.setIn(["new","account_id"],t.account.get("id"))})):e},boosts:function(e,t){switch(void 0===e&&(e=Se),t.type){case je.b:return e.withMutations((e=>{e.setIn(["new","privacy"],t.privacy)}));case je.a:return e.setIn(["new","privacy"],t.privacy);default:return e}},server:function(e,t){switch(void 0===e&&(e=Ce),t.type){case ye.h:return e.setIn(["server","isLoading"],!0);case ye.i:return e.set("server",Object(i.fromJS)(t.server)).setIn(["server","isLoading"],!1);case ye.g:return e.setIn(["server","isLoading"],!1);case ye.b:return e.setIn(["extendedDescription","isLoading"],!0);case ye.c:return e.set("extendedDescription",Object(i.fromJS)(t.description)).setIn(["extendedDescription","isLoading"],!1);case ye.a:return e.setIn(["extendedDescription","isLoading"],!1);case ye.e:return e.setIn(["domainBlocks","isLoading"],!0);case ye.f:return e.setIn(["domainBlocks","items"],Object(i.fromJS)(t.blocks)).setIn(["domainBlocks","isLoading"],!1).setIn(["domainBlocks","isAvailable"],t.isAvailable);case ye.d:return e.setIn(["domainBlocks","isLoading"],!1);default:return e}},contexts:function(e,t){switch(void 0===e&&(e=Ee),t.type){case d.a:case d.f:return((e,t,n)=>{const s=n.filter((e=>e.get("account")===t.id)).map((e=>e.get("id")));return Te(e,s)})(e,t.relationship,t.statuses);case B.a:return n=e,s=t.id,a=t.ancestors,o=t.descendants,n.withMutations((e=>{e.update("inReplyTos",(t=>t.withMutations((t=>{e.update("replies",(e=>e.withMutations((e=>{function n(n){let{id:s,in_reply_to_id:a}=n;a&&!t.has(s)&&(e.update(a,Object(i.List)(),(e=>{const t=e.findLastIndex((e=>Object(l.a)(e,s)<0));return e.insert(t+1,s)})),t.set(s,a))}a.forEach(n),a[0]&&n({id:s,in_reply_to_id:a[a.length-1].id}),o.forEach(n)}))))}))))}));case u.c:return Te(e,[t.id]);case u.k:return((e,t)=>t.in_reply_to_id?e.withMutations((e=>{const n=e.getIn(["replies",t.in_reply_to_id],Object(i.List)());e.setIn(["inReplyTos",t.id],t.in_reply_to_id),n.includes(t.id)||e.setIn(["replies",t.in_reply_to_id],n.push(t.id))})):e)(e,t.status);default:return e}var n,s,a,o},compose:function(e,t){switch(void 0===e&&(e=Le),t.type){case m.a:return((e,t)=>(e=Ne(e.merge(t)),t.get("text")&&(e=e.set("text",t.get("text")).set("focusDate",new Date)),e))(e,t.state.get("compose"));case y.i:return e.set("mounted",e.get("mounted")+1);case y.F:return e.set("mounted",Math.max(e.get("mounted")-1,0)).set("is_composing",!1);case y.s:return e.withMutations((t=>{e.get("spoiler")||t.set("sensitive",!e.get("sensitive")),t.set("idempotencyKey",ae())}));case y.u:return e.withMutations((t=>{t.set("spoiler",!e.get("spoiler")),t.set("idempotencyKey",ae()),!e.get("sensitive")&&e.get("media_attachments").size>=1&&t.set("sensitive",!0)}));case y.v:return e.get("spoiler")?e.set("spoiler_text",t.text).set("idempotencyKey",ae()):e;case y.P:return e.set("privacy",t.value).set("idempotencyKey",ae());case y.a:return e.set("text",t.text).set("idempotencyKey",ae());case y.d:return e.set("is_composing",t.value);case y.p:return e.withMutations((n=>{n.set("id",null),n.set("in_reply_to",t.status.get("id")),n.set("text",function(e,t){let n=Object(i.OrderedSet)([]);return t.getIn(["account","id"])!==Ie.p&&(n=n.add(`@${t.getIn(["account","acct"])} `)),n.union(t.get("mentions").filterNot((e=>e.get("id")===Ie.p)).map((e=>`@${e.get("acct")} `))).join("")}(0,t.status)),n.set("privacy",((e,t)=>{const n=["public","unlisted","private","direct"];return n[Math.max(n.indexOf(e),n.indexOf(t),0)]})(t.status.get("visibility"),e.get("default_privacy"))),n.set("focusDate",new Date),n.set("caretPosition",null),n.set("preselectDate",new Date),n.set("idempotencyKey",ae()),n.update("media_attachments",(e=>e.filter((e=>e.get("unattached"))))),t.status.get("language")&&!t.status.has("translation")?n.set("language",t.status.get("language")):n.set("language",e.get("default_language")),t.status.get("spoiler_text").length>0?(n.set("spoiler",!0),n.set("spoiler_text",t.status.get("spoiler_text")),n.get("media_attachments").size>=1&&n.set("sensitive",!0)):(n.set("spoiler",!1),n.set("spoiler_text",""))}));case y.x:return e.set("is_submitting",!0);case y.H:return e.set("is_changing_upload",!0);case y.q:case y.r:case y.y:return Ne(e);case y.w:return e.set("is_submitting",!1);case y.G:return e.set("is_changing_upload",!1);case y.M:return e.set("is_uploading",!0).update("pending_media_attachments",(e=>e+1));case y.K:return e.set("is_processing",!0);case y.N:return function(e,t,n){const s=e.get("media_attachments").size;return e.withMutations((a=>{"image"===t.get("type")&&(t=t.set("file",n)),a.update("media_attachments",(e=>e.push(t.set("unattached",!0)))),a.set("is_uploading",!1),a.set("is_processing",!1),a.set("resetFileKey",Math.floor(65536*Math.random())),a.set("idempotencyKey",ae()),a.update("pending_media_attachments",(e=>e-1)),0===s&&(e.get("default_sensitive")||e.get("spoiler"))&&a.set("sensitive",!0)}))}(e,Object(i.fromJS)(t.media),t.file);case y.J:return e.set("is_uploading",!1).set("is_processing",!1).update("pending_media_attachments",(e=>e-1));case y.O:return function(e,t){const n=e.get("media_attachments").size;return e.withMutations((e=>{e.update("media_attachments",(e=>e.filterNot((e=>e.get("id")===t)))),e.set("idempotencyKey",ae()),1===n&&e.set("sensitive",!1)}))}(e,t.media_id);case y.L:return e.set("progress",Math.round(t.loaded/t.total*100));case y.T:return e.set("isUploadingThumbnail",!0);case y.S:return e.set("thumbnailProgress",Math.round(t.loaded/t.total*100));case y.R:return e.set("isUploadingThumbnail",!1);case y.U:return e.set("isUploadingThumbnail",!1).update("media_attachments",(e=>e.map((e=>e.get("id")===t.media.id?Object(i.fromJS)(t.media):e))));case y.Q:const n=e.get("media_attachments").find((e=>e.get("id")===t.id));return e.set("media_modal",Object(i.Map)({id:t.id,description:n.get("description")||"",focusX:n.getIn(["meta","focus","x"],0),focusY:n.getIn(["meta","focus","y"],0),dirty:!1}));case y.b:return e.setIn(["media_modal","description"],t.description).setIn(["media_modal","dirty"],!0);case y.c:return e.setIn(["media_modal","focusX"],t.focusX).setIn(["media_modal","focusY"],t.focusY).setIn(["media_modal","dirty"],!0);case y.h:return e.withMutations((e=>{e.update("text",(e=>[e.trim(),`@${t.account.get("acct")} `].filter((e=>0!==e.length)).join(" "))),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("idempotencyKey",ae())}));case y.e:return e.withMutations((e=>{e.update("text",(e=>[e.trim(),`@${t.account.get("acct")} `].filter((e=>0!==e.length)).join(" "))),e.set("privacy","direct"),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("idempotencyKey",ae())}));case y.z:return e.update("suggestions",Object(i.List)(),(e=>e.clear())).set("suggestion_token",null);case y.A:return e.set("suggestions",Object(i.List)(((e,t)=>{let{accounts:n,emojis:s,tags:a,token:o}=t;return n?n.map((e=>({id:e.id,type:"account"}))):s?s.map((e=>({...e,type:"emoji"}))):Ae(((e,t)=>{const n=e.get("tagHistory").map((e=>e.toLowerCase())),s=t.map((e=>({...e,lowerName:e.name.toLowerCase()}))).sort(((e,t)=>{const s=n.includes(e.lowerName),a=n.includes(t.lowerName);return s===a?0:s&&!a?-1:1}));return s.forEach((e=>delete e.lowerName)),s})(e,a.map((e=>({...e,type:"hashtag"})))),o.slice(1),e.get("tagHistory"))})(e,t))).set("suggestion_token",t.token);case y.C:return((e,t,n,s,a)=>e.withMutations((e=>{e.updateIn(a,(e=>`${e.slice(0,t)}${s} ${e.slice(t+n.length)}`)),e.set("suggestion_token",null),e.set("suggestions",Object(i.List)()),1===a.length&&"text"===a[0]&&(e.set("focusDate",new Date),e.set("caretPosition",t+s.length+1)),e.set("idempotencyKey",ae())})))(e,t.position,t.token,t.completion,t.path);case y.B:return((e,t,n,s,a)=>e.withMutations((e=>{e.updateIn(a,(e=>`${e.slice(0,t+n.length)} ${e.slice(t+n.length)}`)),e.set("suggestion_token",null),e.set("suggestions",Object(i.List)()),e.set("focusDate",new Date),e.set("caretPosition",t+n.length+1),e.set("idempotencyKey",ae())})))(e,t.position,t.token,t.completion,t.path);case y.D:return((e,t)=>{const n=t.slice(1),s=e.get("suggestions").toJS();return e.merge({suggestions:Object(i.List)(Ae(s,n,e.get("tagHistory"))),suggestion_token:t})})(e,t.token);case y.E:return e.set("tagHistory",Object(i.fromJS)(t.tags));case u.c:return t.id===e.get("in_reply_to")?e.set("in_reply_to",null):t.id===e.get("id")?e.set("id",null):e;case y.f:return((e,t,n,s)=>{const a=e.get("text"),o=s?" "+n.native:n.native;return e.merge({text:`${a.slice(0,t)}${o} ${a.slice(t)}`,focusDate:new Date,caretPosition:t+o.length+1,idempotencyKey:ae()})})(e,t.position,t.emoji,t.needsSpace);case y.I:return e.set("is_changing_upload",!1).setIn(["media_modal","dirty"],!1).update("media_attachments",(e=>e.map((e=>e.get("id")===t.media.id?Object(i.fromJS)(t.media).set("unattached",!t.attached):e))));case B.b:return e.withMutations((e=>{e.set("text",t.raw_text||Object(ke.a)((e=>{const t=we.parseFromString(e.get("content"),"text/html").documentElement;return e.get("mentions").forEach((e=>{t.querySelector(`a[href="${e.get("url")}"]`).textContent=`@${e.get("acct")}`})),t.innerHTML})(t.status))),e.set("in_reply_to",t.status.get("in_reply_to_id")),e.set("privacy",t.status.get("visibility")),e.set("media_attachments",t.status.get("media_attachments").map((e=>e.set("unattached",!0)))),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("idempotencyKey",ae()),e.set("sensitive",t.status.get("sensitive")),e.set("language",t.status.get("language")),e.set("id",null),t.status.get("spoiler_text").length>0?(e.set("spoiler",!0),e.set("spoiler_text",t.status.get("spoiler_text"))):(e.set("spoiler",!1),e.set("spoiler_text","")),t.status.get("poll")&&e.set("poll",Object(i.Map)({options:t.status.getIn(["poll","options"]).map((e=>e.get("title"))),multiple:t.status.getIn(["poll","multiple"]),expires_in:xe(t.status.getIn(["poll","expires_at"]))}))}));case y.t:return e.withMutations((e=>{e.set("id",t.status.get("id")),e.set("text",t.text),e.set("in_reply_to",t.status.get("in_reply_to_id")),e.set("privacy",t.status.get("visibility")),e.set("media_attachments",t.status.get("media_attachments")),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("idempotencyKey",ae()),e.set("sensitive",t.status.get("sensitive")),e.set("language",t.status.get("language")),t.spoiler_text.length>0?(e.set("spoiler",!0),e.set("spoiler_text",t.spoiler_text)):(e.set("spoiler",!1),e.set("spoiler_text","")),t.status.get("poll")&&e.set("poll",Object(i.Map)({options:t.status.getIn(["poll","options"]).map((e=>e.get("title"))),multiple:t.status.getIn(["poll","multiple"]),expires_in:xe(t.status.getIn(["poll","expires_at"]))}))}));case y.j:return e.set("poll",Me);case y.n:return e.set("poll",null);case y.k:return e.updateIn(["poll","options"],(e=>e.push(t.title)));case y.l:return e.setIn(["poll","options",t.index],t.title);case y.m:return e.updateIn(["poll","options"],(e=>e.delete(t.index)));case y.o:return e.update("poll",(e=>e.set("expires_in",t.expiresIn).set("multiple",t.isMultiple)));case y.g:return e.set("language",t.language);default:return e}},search:function(e,t){switch(void 0===e&&(e=Ue),t.type){case Re.a:return e.set("value",t.value);case Re.b:return e.withMutations((e=>{e.set("value",""),e.set("results",Object(i.Map)()),e.set("submitted",!1),e.set("hidden",!1)}));case Re.g:return e.set("hidden",!1);case y.p:case y.h:case y.e:return e.set("hidden",!0);case Re.e:return e.withMutations((e=>{e.set("isLoading",!0),e.set("submitted",!0)}));case Re.d:return e.set("isLoading",!1);case Re.f:return e.withMutations((e=>{e.set("results",Object(i.Map)({accounts:Object(i.List)(t.results.accounts.map((e=>e.id))),statuses:Object(i.List)(t.results.statuses.map((e=>e.id))),hashtags:Object(i.fromJS)(t.results.hashtags)})),e.set("searchTerm",t.searchTerm),e.set("isLoading",!1)}));case Re.c:const n="hashtags"===t.searchType?Object(i.fromJS)(t.results.hashtags):t.results[t.searchType].map((e=>e.id));return e.updateIn(["results",t.searchType],(e=>e.concat(n)));default:return e}},media_attachments:function(e,t){return void 0===e&&(e=Fe),t.type===m.a?e.merge(t.state.get("media_attachments")):e},notifications:function(e,t){switch(void 0===e&&(e=Pe),t.type){case De.a:return t.markers.notifications?We(e,t.markers.notifications.last_read_id):e;case T.h:return(e=>(e=e.update("mounted",(e=>e+1)),Be(e,1===e.get("mounted"))||(e=e.set("readMarkerId",e.get("lastReadId")),e=Ke(e)),e))(e);case T.l:return e.update("mounted",(e=>e-1));case b.a:return $e(e,!0);case b.c:return $e(e,!1);case T.f:return e.update("items",(t=>e.get("pendingItems").concat(t.take(40)))).set("pendingItems",Object(i.List)()).set("unread",0);case T.c:return e.update("isLoading",(e=>e+1));case T.b:return e.update("isLoading",(e=>e-1));case T.e:return e.set("items",Object(i.List)()).set("pendingItems",Object(i.List)()).set("hasMore",!0);case T.i:return((e,t)=>(e=e.set("top",t),Be(e)||(e=Ke(e)),e))(e,t.top);case T.m:return((e,t,n)=>{const s=e.get("top");return e.get("pendingItems").some((e=>(null==e?void 0:e.get("id"))===t.id))||e.get("items").some((e=>(null==e?void 0:e.get("id"))===t.id))?e:n||!e.get("pendingItems").isEmpty()?e.update("pendingItems",(e=>e.unshift(He(t)))).update("unread",(e=>e+1)):(e=Be(e)?e.update("unread",(e=>e+1)):e.set("lastReadId",t.id)).update("items",(e=>(s&&e.size>40&&(e=e.take(20)),e.unshift(He(t)))))})(e,t.notification,t.usePendingItems);case T.d:return((e,t,n,s,a,o)=>{const r=e.get("lastReadId"),c=Object(i.List)(t.map(He));return e.withMutations((t=>{if(c.isEmpty()||(o=a&&(o||!t.get("pendingItems").isEmpty()),t.update(o?"pendingItems":"items",(e=>{if(a){const t=e.map((e=>null==e?void 0:e.get("id"))).toSet();return c.filterNot((e=>t.includes(e.get("id")))).concat(e)}if(s){const t=e.map((e=>null==e?void 0:e.get("id"))).toSet(),n=c.filterNot((e=>t.includes(e.get("id"))));return e.concat(n)}const t=e.findLastIndex((e=>null!==e&&Object(l.a)(e.get("id"),c.last().get("id"))>=0))+1,n=e.take(t).findLastIndex((e=>null!==e&&Object(l.a)(e.get("id"),c.first().get("id"))>0))+1,o=e.take(n).map((e=>null==e?void 0:e.get("id"))).toSet(),i=c.filterNot((e=>o.includes(e.get("id")))),r=e.slice(n,t).filter((e=>null!==e&&Object(l.a)(e.get("id"),c.last().get("id"))<0));return e.take(n).concat(i,r,e.skip(t))}))),n||t.set("hasMore",!1),Be(e))t.set("unread",t.get("pendingItems").count((e=>null!==e))+t.get("items").count((e=>e&&Object(l.a)(e.get("id"),r)>0)));else{const e=c.find((e=>null!==e));e&&Object(l.a)(r,e.get("id"))<0&&t.set("lastReadId",e.get("id"))}t.update("isLoading",(e=>e-1))}))})(e,t.notifications,t.next,t.isLoadingMore,t.isLoadingRecent,t.usePendingItems);case d.a:return qe(e,[t.relationship.id]);case d.f:return t.relationship.muting_notifications?qe(e,[t.relationship.id]):e;case F.c:return qe(e,t.accounts);case d.G:case d.H:return qe(e,[t.id],"follow_request");case T.a:return e.set("items",Object(i.List)()).set("pendingItems",Object(i.List)()).set("hasMore",!1);case u.c:return((e,t)=>{const n=e.get("lastReadId");if(Be(e)){const s=e.get("items").filter((e=>null!==e&&e.get("status")===t&&Object(l.a)(e.get("id"),n)>0));e=e.update("unread",(e=>e-s.size))}const s=e=>e.filterNot((e=>null!==e&&e.get("status")===t)),a=e.get("pendingItems").filter((e=>null!==e&&e.get("status")===t&&Object(l.a)(e.get("id"),n)>0));return(e=e.update("unread",(e=>e-a.size))).update("items",s).update("pendingItems",s)})(e,t.id);case u.d:return"home"===t.timeline?e.update(t.usePendingItems?"pendingItems":"items",(e=>e.first()?e.unshift(null):e)):e;case T.g:const n=e.get("items").find((e=>null!==e));return n?We(e,n.get("id")):e;case T.k:return e.set("browserSupport",t.value);case T.j:return e.set("browserPermission",t.value);default:return e}},height_cache:function(e,t){switch(void 0===e&&(e=ze),t.type){case Qe.b:return((e,t,n,s)=>e.update(t,Object(i.Map)(),(e=>e.set(n,s))))(e,t.key,t.id,t.height);case Qe.a:return Object(i.Map)();default:return e}},custom_emojis:function(e,t){return void 0===e&&(e=Je),t.type===Ge.a&&(e=Object(i.fromJS)(t.custom_emojis),Object(Xe.a)("",{custom:Object(Ve.buildCustomEmojis)(e)})),e},lists:function(e,t){switch(void 0===e&&(e=Ye),t.type){case se.w:case se.l:case se.z:return Ze(e,t.list);case se.a:return((e,t)=>(t.forEach((t=>{e=Ze(e,t)})),e))(e,t.lists);case se.m:case se.v:return e.set(t.id,!1);default:return e}},listEditor:function(e,t){switch(void 0===e&&(e=et),t.type){case se.p:return et;case se.q:return e.withMutations((e=>{e.set("listId",t.list.get("id")),e.set("title",t.list.get("title")),e.set("isSubmitting",!1)}));case se.u:return e.withMutations((e=>{e.set("title",t.value),e.set("isChanged",!0)}));case se.k:case se.y:return e.withMutations((e=>{e.set("isSubmitting",!0),e.set("isChanged",!1)}));case se.j:case se.x:return e.set("isSubmitting",!1);case se.l:case se.z:return e.withMutations((e=>{e.set("isSubmitting",!1),e.set("listId",t.list.id)}));case se.c:return e.setIn(["accounts","isLoading"],!0);case se.b:return e.setIn(["accounts","isLoading"],!1);case se.d:return e.update("accounts",(e=>e.withMutations((e=>{e.set("isLoading",!1),e.set("loaded",!0),e.set("items",Object(i.List)(t.accounts.map((e=>e.id))))}))));case se.r:return e.setIn(["suggestions","value"],t.value);case se.t:return e.setIn(["suggestions","items"],Object(i.List)(t.accounts.map((e=>e.id))));case se.s:return e.update("suggestions",(e=>e.withMutations((e=>{e.set("items",Object(i.List)()),e.set("value","")}))));case se.n:return e.updateIn(["accounts","items"],(e=>e.unshift(t.accountId)));case se.o:return e.updateIn(["accounts","items"],(e=>e.filterNot((e=>e===t.accountId))));default:return e}},listAdder:function(e,t){switch(void 0===e&&(e=tt),t.type){case se.h:return tt;case se.i:return e.withMutations((e=>{e.set("accountId",t.account.get("id"))}));case se.f:return e.setIn(["lists","isLoading"],!0);case se.e:return e.setIn(["lists","isLoading"],!1);case se.g:return e.update("lists",(e=>e.withMutations((e=>{e.set("isLoading",!1),e.set("loaded",!0),e.set("items",Object(i.List)(t.lists.map((e=>e.id))))}))));case se.n:return e.updateIn(["lists","items"],(e=>e.unshift(t.listId)));case se.o:return e.updateIn(["lists","items"],(e=>e.filterNot((e=>e===t.listId))));default:return e}},filters:function(e,t){switch(void 0===e&&(e=Object(i.Map)()),t.type){case nt.a:return st(e,t.filter);case nt.b:return at(Object(i.Map)(),t.filters);case P.c:return at(e,t.filters);default:return e}},conversations:function(e,t){switch(void 0===e&&(e=it),t.type){case ot.c:return e.set("isLoading",!0);case ot.b:return e.set("isLoading",!1);case ot.d:return((e,t,n,s)=>{let a=Object(i.List)(t.map(rt));return e.withMutations((e=>{a.isEmpty()||e.update("items",(e=>(e=(e=e.map((e=>{const t=a.findIndex((t=>t.get("id")===e.get("id")));if(-1===t)return e;const n=a.get(t);return a=a.delete(t),n}))).concat(a)).sortBy((e=>e.get("last_status")),((e,t)=>null===e||null===t?-1:-1*Object(l.a)(e,t))))),n||s||e.set("hasMore",!1),e.set("isLoading",!1)}))})(e,t.conversations,t.next,t.isLoadingRecent);case ot.h:return((e,t)=>e.update("items",(e=>{const n=e.findIndex((e=>e.get("id")===t.id)),s=rt(t);return-1===n?e.unshift(s):e.set(n,s)})))(e,t.conversation);case ot.e:return e.update("mounted",(e=>e+1));case ot.g:return e.update("mounted",(e=>e-1));case ot.f:return e.update("items",(e=>e.map((e=>e.get("id")===t.id?e.set("unread",!1):e))));case d.a:case d.f:return ct(e,[t.relationship.id]);case F.c:return ct(e,t.accounts);case ot.a:return e.update("items",(e=>e.filterNot((e=>e.get("id")===t.id))));default:return e}},suggestions:function(e,t){switch(void 0===e&&(e=dt),t.type){case ut.c:return e.set("isLoading",!0);case ut.d:return e.withMutations((e=>{e.set("items",Object(i.fromJS)(t.suggestions.map((e=>({...e,account:e.account.id}))))),e.set("isLoading",!1)}));case ut.b:return e.set("isLoading",!1);case ut.a:return e.update("items",(e=>e.filterNot((e=>e.account===t.id))));case d.a:case d.f:return e.update("items",(e=>e.filterNot((e=>e.account===t.relationship.id))));case F.c:return e.update("items",(e=>e.filterNot((e=>t.accounts.includes(e.account)))));default:return e}},polls:function(e,t){return void 0===e&&(e=lt),t.type===P.d?((e,t)=>e.withMutations((e=>t.forEach((t=>e.set(t.id,Object(i.fromJS)(t)))))))(e,t.polls):e},trends:function(e,t){switch(void 0===e&&(e=pt),t.type){case he.k:return e.setIn(["tags","isLoading"],!0);case he.l:return e.withMutations((e=>{e.setIn(["tags","items"],Object(i.fromJS)(t.trends)),e.setIn(["tags","isLoading"],!1)}));case he.j:return e.setIn(["tags","isLoading"],!1);case he.b:return e.setIn(["links","isLoading"],!0);case he.c:return e.withMutations((e=>{e.setIn(["links","items"],Object(i.fromJS)(t.trends)),e.setIn(["links","isLoading"],!1)}));case he.a:return e.setIn(["links","isLoading"],!1);default:return e}},missed_updates:function(e,t){switch(void 0===e&&(e=ht),t.type){case b.a:return e.set("focused",!0).set("unread",0);case b.c:return e.set("focused",!1);case T.m:return e.get("focused")?e:e.update("unread",(e=>e+1));default:return e}},markers:function(e,t){return void 0===e&&(e=Ot),t.type===De.b?(t.home&&(e=e.set("home",t.home)),t.notifications&&(e=e.set("notifications",t.notifications)),e):e},picture_in_picture:function(e,t){switch(void 0===e&&(e=jt),t.type){case vt.a:return{statusId:t.statusId,accountId:t.accountId,type:t.playerType,...t.props};case vt.b:return{...jt};case u.c:return e.statusId===t.id?{...jt}:e;default:return e}},history:function(e,t){switch(void 0===e&&(e=Et),t.type){case yt.b:return e.update(t.statusId,Ct,(e=>e.withMutations((e=>{e.set("loading",!0),e.set("items",Object(i.List)())}))));case yt.c:return e.update(t.statusId,Ct,(e=>e.withMutations((e=>{e.set("loading",!1),e.set("items",Object(i.fromJS)(t.history.map(((e,t)=>({...e,account:e.account.id,original:0===t}))).reverse()))}))));case yt.a:return e.update(t.statusId,Ct,(e=>e.set("loading",!1)));default:return e}},tags:function(e,t){switch(void 0===e&&(e=It),t.type){case Tt.g:return e.set(t.name,Object(i.fromJS)(t.tag));case Tt.i:case Tt.j:return e.setIn([t.name,"following"],!0);case Tt.h:case Tt.k:return e.setIn([t.name,"following"],!1);default:return e}},followed_tags:function(e,t){switch(void 0===e&&(e=kt),t.type){case Tt.e:return e.set("isLoading",!0);case Tt.f:return e.withMutations((e=>{e.set("items",Object(i.fromJS)(t.followed_tags)),e.set("isLoading",!1),e.set("next",t.next)}));case Tt.d:return e.set("isLoading",!1);case Tt.b:return e.set("isLoading",!0);case Tt.c:return e.withMutations((e=>{e.update("items",(e=>e.concat(Object(i.fromJS)(t.followed_tags)))),e.set("isLoading",!1),e.set("next",t.next)}));case Tt.a:return e.set("isLoading",!1);default:return e}}};var Mt=Object(o.combineReducers)(Lt);const Nt=["PENDING","FULFILLED","REJECTED"];const wt=e=>{const t=new Audio;return e.forEach((e=>{let{type:n,src:s}=e;const a=document.createElement("source");a.type=n,a.src=s,t.appendChild(a)})),t};function xt(){return Object(s.c)(Mt,Object(s.b)(Object(s.a)(a.a,function(e){void 0===e&&(e={});const t=e.promiseTypeSuffixes||Nt;return e=>{let{dispatch:n}=e;return e=>s=>{if(s.type&&!s.skipLoading){const[e,a,o]=t,i=new RegExp(`${e}$`,"g"),r=new RegExp(`${a}$`,"g"),c=new RegExp(`${o}$`,"g");s.type.match(i)?n(Object(j.showLoading)()):(s.type.match(r)||s.type.match(c))&&n(Object(j.hideLoading)())}return e(s)}}}({promiseTypeSuffixes:["REQUEST","SUCCESS","FAIL"]}),(e=>{let{dispatch:t}=e;return e=>n=>{if(n.type&&!n.skipAlert){const e=new RegExp("FAIL$","g");n.type.match(e)&&t(Object(O.f)(n.error,n.skipNotFound))}return e(n)}}),function(){const e={boop:wt([{src:"/sounds/boop.ogg",type:"audio/ogg"},{src:"/sounds/boop.mp3",type:"audio/mpeg"}])};return()=>t=>n=>{var s;return n.meta&&n.meta.sound&&e[n.meta.sound]&&((s=e[n.meta.sound]).paused||(s.pause(),"function"==typeof s.fastSeek?s.fastSeek(0):s.currentTime=0),s.play()),t(n)}}()),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():e=>e))}},727:function(e,t,n){"use strict";var s=n(12),a=n(60),o=n(9),i=n(0),r=n(1),c=n.n(r),u=n(712),d=n(713),l=n(699),p=n(6),h=n(52);const g=Object(p.f)({error:{id:"bundle_modal_error.message",defaultMessage:"Something went wrong while loading this component."},retry:{id:"bundle_modal_error.retry",defaultMessage:"Try again"},close:{id:"bundle_modal_error.close",defaultMessage:"Close"}});class m extends c.a.PureComponent{constructor(){super(...arguments),this.handleRetry=()=>{this.props.onRetry()}}render(){const{onClose:e,intl:{formatMessage:t}}=this.props;return Object(i.a)("div",{className:"modal-root__modal error-modal"},void 0,Object(i.a)("div",{className:"error-modal__body"},void 0,Object(i.a)(h.a,{title:t(g.retry),icon:"refresh",onClick:this.handleRetry,size:64}),t(g.error)),Object(i.a)("div",{className:"error-modal__footer"},void 0,Object(i.a)("div",{},void 0,Object(i.a)("button",{onClick:e,className:"error-modal__nav onboarding-modal__skip"},void 0,t(g.close)))))}}var b=Object(p.g)(m),f=n(667);var _=()=>Object(i.a)("div",{className:"modal-root__modal error-modal"},void 0,Object(i.a)("div",{className:"error-modal__body"},void 0,Object(i.a)(f.b,{})),Object(i.a)("div",{className:"error-modal__footer"},void 0,Object(i.a)("div",{},void 0,Object(i.a)("button",{className:"error-modal__nav onboarding-modal__skip"})))),O=n(2),v=n.n(O),j=n(21),S=n.n(j),y=n(20),C=n(10),E=n.n(C);class T extends y.a{constructor(){super(...arguments),this.renderAction=(e,t)=>{if(null===e)return Object(i.a)("li",{className:"dropdown-menu__separator"},`sep-${t}`);const{icon:n=null,text:s,meta:a=null,active:o=!1,href:r="#"}=e;return Object(i.a)("li",{},`${s}-${t}`,Object(i.a)("a",{href:r,target:"_blank",rel:"noopener noreferrer",onClick:this.props.onClick,"data-index":t,className:E()({active:o})},void 0,n&&Object(i.a)(h.a,{title:s,icon:n,role:"presentation",tabIndex:"-1",inverted:!0}),Object(i.a)("div",{},void 0,Object(i.a)("div",{className:E()({"actions-modal__item-label":!!a})},void 0,s),Object(i.a)("div",{},void 0,a))))}}render(){return Object(i.a)("div",{className:"modal-root__modal actions-modal"},void 0,Object(i.a)("ul",{className:E()({"with-status":!!status})},void 0,this.props.actions.map(this.renderAction)))}}T.propTypes={status:S.a.map,actions:v.a.array,onClick:v.a.func};var I,k,L=n(714),M=n(171),N=n(288),w=n(559);let x=Object(s.connect)(((e,t)=>{let{statusId:n}=t;return{language:e.getIn(["statuses",n,"language"])}}),null,null,{forwardRef:!0})(((k=class extends y.a{componentDidMount(){const{media:e,onChangeBackgroundColor:t}=this.props,n=Object(w.a)(e.get("blurhash"));n&&t(n)}render(){const{media:e,statusId:t,language:n,onClose:s}=this.props,a=this.props.options||{};return Object(i.a)("div",{className:"modal-root__modal video-modal"},void 0,Object(i.a)("div",{className:"video-modal__container"},void 0,Object(i.a)(M.default,{preview:e.get("preview_url"),frameRate:e.getIn(["meta","original","frame_rate"]),blurhash:e.get("blurhash"),src:e.get("url"),currentTime:a.startTime,autoPlay:a.autoPlay,volume:a.defaultVolume,onCloseVideo:s,autoFocus:!0,detailed:!0,alt:e.get("description"),lang:n})),Object(i.a)("div",{className:"media-modal__overlay"},void 0,t&&Object(i.a)(N.a,{statusId:t,withOpenButton:!0,onClose:s})))}}).propTypes={media:S.a.map.isRequired,statusId:v.a.string,language:v.a.string,options:v.a.shape({startTime:v.a.number,autoPlay:v.a.bool,defaultVolume:v.a.number}),onClose:v.a.func.isRequired,onChangeBackgroundColor:v.a.func.isRequired},I=k))||I;var A,R,U=n(201),F=n(673),D=n(280),P=n(176),H=n(282),q=n(33),K=n(543),$=n(556),B=n(265);const W=Object(p.f)({cancel_reblog:{id:"status.cancel_reblog_private",defaultMessage:"Unboost"},reblog:{id:"status.reblog",defaultMessage:"Boost"},public_short:{id:"privacy.public.short",defaultMessage:"Public"},unlisted_short:{id:"privacy.unlisted.short",defaultMessage:"Unlisted"},private_short:{id:"privacy.private.short",defaultMessage:"Followers-only"},direct_short:{id:"privacy.direct.short",defaultMessage:"Direct"}});let Q=Object(s.connect)((e=>({privacy:e.getIn(["boosts","new","privacy"])})),(e=>({onChangeBoostPrivacy(t){e(Object(B.c)(t))}})))(A=Object(p.g)((R=class extends y.a{constructor(){super(...arguments),this.handleReblog=()=>{this.props.onReblog(this.props.status,this.props.privacy),this.props.onClose()},this.handleAccountClick=e=>{0!==e.button||e.ctrlKey||e.metaKey||(e.preventDefault(),this.props.onClose(),this.context.router.history.push(`/@${this.props.status.getIn(["account","acct"])}`))},this._findContainer=()=>document.getElementsByClassName("modal-root__container")[0],this.setRef=e=>{this.button=e}}componentDidMount(){this.button.focus()}render(){const{status:e,privacy:t,intl:n}=this.props,s=e.get("reblogged")?W.cancel_reblog:W.reblog,a={public:{icon:"globe",text:n.formatMessage(W.public_short)},unlisted:{icon:"unlock",text:n.formatMessage(W.unlisted_short)},private:{icon:"lock",text:n.formatMessage(W.private_short)},direct:{icon:"at",text:n.formatMessage(W.direct_short)}}[e.get("visibility")];return Object(i.a)("div",{className:"modal-root__modal boost-modal"},void 0,Object(i.a)("div",{className:"boost-modal__container"},void 0,Object(i.a)("div",{className:E()("status",`status-${e.get("visibility")}`,"light")},void 0,Object(i.a)("div",{className:"status__info"},void 0,Object(i.a)("a",{href:`/@${e.getIn(["account","acct"])}/${e.get("id")}`,className:"status__relative-time",target:"_blank",rel:"noopener noreferrer"},void 0,Object(i.a)("span",{className:"status__visibility-icon"},void 0,Object(i.a)(q.a,{id:a.icon,title:a.text})),Object(i.a)(P.default,{timestamp:e.get("created_at")})),Object(i.a)("a",{onClick:this.handleAccountClick,href:`/@${e.getIn(["account","acct"])}`,className:"status__display-name"},void 0,Object(i.a)("div",{className:"status__avatar"},void 0,Object(i.a)(D.a,{account:e.get("account"),size:48})),Object(i.a)(H.a,{account:e.get("account")}))),Object(i.a)(F.a,{status:e}),e.get("media_attachments").size>0&&Object(i.a)(K.a,{compact:!0,media:e.get("media_attachments")}))),Object(i.a)("div",{className:"boost-modal__action-bar"},void 0,Object(i.a)("div",{},void 0,Object(i.a)(p.b,{id:"boost_modal.combo",defaultMessage:"You can press {combo} to skip this next time",values:{combo:Object(i.a)("span",{},void 0,"Shift + ",Object(i.a)(q.a,{id:"retweet"}))}})),"private"!==e.get("visibility")&&!e.get("reblogged")&&Object(i.a)($.a,{noDirect:!0,value:t,container:this._findContainer,onChange:this.props.onChangeBoostPrivacy}),c.a.createElement(U.a,{text:n.formatMessage(s),onClick:this.handleReblog,ref:this.setRef})))}},R.contextTypes={router:v.a.object},R.propTypes={status:S.a.map.isRequired,onReblog:v.a.func.isRequired,onClose:v.a.func.isRequired,onChangeBoostPrivacy:v.a.func.isRequired,privacy:v.a.string.isRequired,intl:v.a.object.isRequired},A=R))||A)||A;var z,G,X=n(306);let V=Object(s.connect)(((e,t)=>{let{statusId:n}=t;return{language:e.getIn(["statuses",n,"language"]),accountStaticAvatar:e.getIn(["accounts",e.getIn(["statuses",n,"account"]),"avatar_static"])}}),null,null,{forwardRef:!0})(((G=class extends y.a{render(){const{media:e,language:t,accountStaticAvatar:n,statusId:s,onClose:a}=this.props,o=this.props.options||{};return Object(i.a)("div",{className:"modal-root__modal audio-modal"},void 0,Object(i.a)("div",{className:"audio-modal__container"},void 0,Object(i.a)(X.default,{src:e.get("url"),alt:e.get("description"),lang:t,duration:e.getIn(["meta","original","duration"],0),height:150,poster:e.get("preview_url")||n,backgroundColor:e.getIn(["meta","colors","background"]),foregroundColor:e.getIn(["meta","colors","foreground"]),accentColor:e.getIn(["meta","colors","accent"]),autoPlay:o.autoPlay})),Object(i.a)("div",{className:"media-modal__overlay"},void 0,s&&Object(i.a)(N.a,{statusId:s,withOpenButton:!0,onClose:a})))}}).propTypes={media:S.a.map.isRequired,statusId:v.a.string.isRequired,language:v.a.string,accountStaticAvatar:v.a.string.isRequired,options:v.a.shape({autoPlay:v.a.bool}),onClose:v.a.func.isRequired,onChangeBackgroundColor:v.a.func.isRequired},z=G))||z;var J,Y;let Z=Object(p.g)((Y=class extends c.a.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.closeWhenConfirm&&this.props.onClose(),this.props.onConfirm()},this.handleSecondary=()=>{this.props.onClose(),this.props.onSecondary()},this.handleCancel=()=>{this.props.onClose()},this.setRef=e=>{this.button=e}}componentDidMount(){this.button.focus()}render(){const{message:e,confirm:t,secondary:n}=this.props;return Object(i.a)("div",{className:"modal-root__modal confirmation-modal"},void 0,Object(i.a)("div",{className:"confirmation-modal__container"},void 0,e),Object(i.a)("div",{className:"confirmation-modal__action-bar"},void 0,Object(i.a)(U.a,{onClick:this.handleCancel,className:"confirmation-modal__cancel-button"},void 0,Object(i.a)(p.b,{id:"confirmation_modal.cancel",defaultMessage:"Cancel"})),void 0!==n&&Object(i.a)(U.a,{text:n,onClick:this.handleSecondary,className:"confirmation-modal__secondary-button"}),c.a.createElement(U.a,{text:t,onClick:this.handleClick,ref:this.setRef})))}},Y.defaultProps={closeWhenConfirm:!0},J=Y))||J;var ee,te,ne=n(15),se=n(226),ae=n(557),oe=n(555),ie=n(155),re=n(166),ce=n(558),ue=n(18),de=n(352),le=n(353),pe=n(49);const he=Object(p.f)({close:{id:"lightbox.close",defaultMessage:"Close"},apply:{id:"upload_modal.apply",defaultMessage:"Apply"},applying:{id:"upload_modal.applying",defaultMessage:"Applying…"},placeholder:{id:"upload_modal.description_placeholder",defaultMessage:"A quick brown fox jumps over the lazy dog"},chooseImage:{id:"upload_modal.choose_image",defaultMessage:"Choose image"},discardMessage:{id:"confirmations.discard_edit_media.message",defaultMessage:"You have unsaved changes to the media description or preview, discard them anyway?"},discardConfirm:{id:"confirmations.discard_edit_media.confirm",defaultMessage:"Discard"}});class ge extends c.a.PureComponent{constructor(){super(...arguments),this.state={loading:!0}}componentDidMount(){const e=new Image;e.addEventListener("load",(()=>this.setState({loading:!1}))),e.src=this.props.src}render(){const{loading:e}=this.state;return e?Object(i.a)("canvas",{width:this.props.width,height:this.props.height}):c.a.createElement("img",Object(o.a)({},this.props,{alt:""}))}}let me=Object(s.connect)(((e,t)=>{let{id:n}=t;return{media:e.getIn(["compose","media_attachments"]).find((e=>e.get("id")===n)),account:e.getIn(["accounts",ue.p]),isUploadingThumbnail:e.getIn(["compose","isUploadingThumbnail"]),description:e.getIn(["compose","media_modal","description"]),lang:e.getIn(["compose","language"]),focusX:e.getIn(["compose","media_modal","focusX"]),focusY:e.getIn(["compose","media_modal","focusY"]),dirty:e.getIn(["compose","media_modal","dirty"]),is_changing_upload:e.getIn(["compose","is_changing_upload"])}}),((e,t)=>{let{id:n}=t;return{onSave:(t,s,a)=>{e(Object(ne.hb)(n,{description:t,focus:`${s.toFixed(2)},${a.toFixed(2)}`}))},onChangeDescription:t=>{e(Object(ne.rb)(t))},onChangeFocus:(t,n)=>{e(Object(ne.sb)(t,n))},onSelectThumbnail:t=>{e(Object(ne.Db)(n,t[0]))}}}),null,{forwardRef:!0})(ee=(e=>Object(p.g)(e,{withRef:!0}))((te=class extends y.a{constructor(){var e;super(...arguments),e=this,this.state={dragging:!1,dirty:!1,progress:0,loading:!0,ocrStatus:""},this.handleMouseDown=e=>{document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.updatePosition(e),this.setState({dragging:!0})},this.handleTouchStart=e=>{document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("touchend",this.handleTouchEnd),this.updatePosition(e),this.setState({dragging:!0})},this.handleMouseMove=e=>{this.updatePosition(e)},this.handleMouseUp=()=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.setState({dragging:!1})},this.handleTouchEnd=()=>{document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("touchend",this.handleTouchEnd),this.setState({dragging:!1})},this.updatePosition=e=>{const{x:t,y:n}=Object(M.getPointerPosition)(this.node,e),s=2*(t-.5),a=-2*(n-.5);this.props.onChangeFocus(s,a)},this.handleChange=e=>{this.props.onChangeDescription(e.target.value)},this.handleKeyDown=e=>{13===e.keyCode&&(e.ctrlKey||e.metaKey)&&(this.props.onChangeDescription(e.target.value),this.handleSubmit(e))},this.handleSubmit=e=>{e.preventDefault(),e.stopPropagation(),this.props.onSave(this.props.description,this.props.focusX,this.props.focusY)},this.getCloseConfirmationMessage=()=>{const{intl:e,dirty:t}=this.props;return t?{message:e.formatMessage(he.discardMessage),confirm:e.formatMessage(he.discardConfirm)}:null},this.setRef=e=>{this.node=e},this.handleTextDetection=()=>{this._detectText()},this._detectText=function(t){void 0===t&&(t=!1);const{media:n}=e.props;e.setState({detecting:!0}),Object(re.T)().then((s=>{let{createWorker:a}=s;const o=a({workerPath:le.a,corePath:de.a,langPath:`${pe.a}/ocr/lang-data/`,logger:t=>{let{status:n,progress:s}=t;"recognizing text"===n?e.setState({ocrStatus:"detecting",progress:s}):e.setState({ocrStatus:"preparing",progress:s})},cacheMethod:t?"refresh":"write"});let i=n.get("url");if(window.URL&&URL.createObjectURL)try{i=URL.createObjectURL(n.get("file"))}catch(e){console.error(e)}return(async()=>{await o.load(),await o.loadLanguage("eng"),await o.initialize("eng");const{data:{text:t}}=await o.recognize(i);e.setState({detecting:!1}),e.props.onChangeDescription(t.replace(/\n\n/g,"******").replace(/\n/g," ").replace(/\*\*\*\*\*\*/g,"\n\n")),await o.terminate()})().catch((n=>{if(t)throw n;e._detectText(!0)}))})).catch((t=>{console.error(t),e.setState({detecting:!1})}))},this.handleThumbnailChange=e=>{e.target.files.length>0&&this.props.onSelectThumbnail(e.target.files)},this.setFileInputRef=e=>{this.fileInput=e},this.handleFileInputClick=()=>{this.fileInput.click()}}componentWillUnmount(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)}render(){const{media:e,intl:t,account:n,onClose:s,isUploadingThumbnail:a,description:o,lang:r,focusX:u,focusY:d,dirty:l,is_changing_upload:g}=this.props,{dragging:m,detecting:b,progress:f,ocrStatus:_}=this.state,O=u/2+.5,v=d/-2+.5,j=e.getIn(["meta","original","width"])||null,S=e.getIn(["meta","original","height"])||null,y=["image","gifv"].includes(e.get("type")),C=["audio","video"].includes(e.get("type"));let T=null;T="audio"===e.get("type")?Object(i.a)(p.b,{id:"upload_form.audio_description",defaultMessage:"Describe for people who are hard of hearing"}):"video"===e.get("type")?Object(i.a)(p.b,{id:"upload_form.video_description",defaultMessage:"Describe for people who are deaf, hard of hearing, blind or have low vision"}):Object(i.a)(p.b,{id:"upload_form.description",defaultMessage:"Describe for people who are blind or have low vision"});let I="";return I="detecting"===_?Object(i.a)(p.b,{id:"upload_modal.analyzing_picture",defaultMessage:"Analyzing picture…"}):Object(i.a)(p.b,{id:"upload_modal.preparing_ocr",defaultMessage:"Preparing OCR…"}),Object(i.a)("div",{className:"modal-root__modal report-modal",style:{maxWidth:960}},void 0,Object(i.a)("div",{className:"report-modal__target"},void 0,Object(i.a)(h.a,{className:"report-modal__close",title:t.formatMessage(he.close),icon:"times",onClick:s,size:20}),Object(i.a)(p.b,{id:"upload_modal.edit_media",defaultMessage:"Edit media"})),Object(i.a)("div",{className:"report-modal__container"},void 0,Object(i.a)("form",{className:"report-modal__comment",onSubmit:this.handleSubmit},void 0,y&&Object(i.a)("p",{},void 0,Object(i.a)(p.b,{id:"upload_modal.hint",defaultMessage:"Click or drag the circle on the preview to choose the focal point which will always be in view on all thumbnails."})),C&&Object(i.a)(c.a.Fragment,{},void 0,Object(i.a)("label",{className:"setting-text-label",htmlFor:"upload-modal__thumbnail"},void 0,Object(i.a)(p.b,{id:"upload_form.thumbnail",defaultMessage:"Change thumbnail"})),Object(i.a)(U.a,{disabled:a||!e.get("unattached"),text:t.formatMessage(he.chooseImage),onClick:this.handleFileInputClick}),Object(i.a)("label",{},void 0,Object(i.a)("span",{style:{display:"none"}},void 0,t.formatMessage(he.chooseImage)),c.a.createElement("input",{id:"upload-modal__thumbnail",ref:this.setFileInputRef,type:"file",accept:"image/png,image/jpeg",onChange:this.handleThumbnailChange,style:{display:"none"},disabled:a||g})),Object(i.a)("hr",{className:"setting-divider"})),Object(i.a)("label",{className:"setting-text-label",htmlFor:"upload-modal__description"},void 0,T),Object(i.a)("div",{className:"setting-text__wrapper"},void 0,Object(i.a)(se.a,{id:"upload-modal__description",className:"setting-text light",value:b?"…":o,lang:r,onChange:this.handleChange,onKeyDown:this.handleKeyDown,disabled:b||g,autoFocus:!0}),Object(i.a)("div",{className:"setting-text__modifiers"},void 0,Object(i.a)(ae.a,{progress:100*f,active:b,icon:"file-text-o",message:I}))),Object(i.a)("div",{className:"setting-text__toolbar"},void 0,Object(i.a)("button",{type:"button",disabled:b||"image"!==e.get("type")||g,className:"link-button",onClick:this.handleTextDetection},void 0,Object(i.a)(p.b,{id:"upload_modal.detect_text",defaultMessage:"Detect text from picture"})),Object(i.a)(oe.a,{max:1500,text:b?"":o})),Object(i.a)(U.a,{type:"submit",disabled:!l||b||a||Object(ie.length)(o)>1500||g,text:t.formatMessage(g?he.applying:he.apply)})),Object(i.a)("div",{className:"focal-point-modal__content"},void 0,y&&c.a.createElement("div",{className:E()("focal-point",{dragging:m}),ref:this.setRef,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart},"image"===e.get("type")&&Object(i.a)(ge,{src:e.get("url"),width:j,height:S,alt:""}),"gifv"===e.get("type")&&Object(i.a)(ce.a,{src:e.get("url"),width:j,height:S}),Object(i.a)("div",{className:"focal-point__preview"},void 0,Object(i.a)("strong",{},void 0,Object(i.a)(p.b,{id:"upload_modal.preview_label",defaultMessage:"Preview ({ratio})",values:{ratio:"16:9"}})),Object(i.a)("div",{style:{width:200,height:112.5,backgroundImage:`url(${e.get("preview_url")})`,backgroundSize:"cover",backgroundPosition:`${100*O}% ${100*v}%`}})),Object(i.a)("div",{className:"focal-point__reticle",style:{top:100*v+"%",left:100*O+"%"}}),Object(i.a)("div",{className:"focal-point__overlay"})),"video"===e.get("type")&&Object(i.a)(M.default,{preview:e.get("preview_url"),frameRate:e.getIn(["meta","original","frame_rate"]),blurhash:e.get("blurhash"),src:e.get("url"),detailed:!0,inline:!0,editable:!0}),"audio"===e.get("type")&&Object(i.a)(X.default,{src:e.get("url"),duration:e.getIn(["meta","original","duration"],0),height:150,poster:e.get("preview_url")||n.get("avatar_static"),backgroundColor:e.getIn(["meta","colors","background"]),foregroundColor:e.getIn(["meta","colors","foreground"]),accentColor:e.getIn(["meta","colors","accent"]),editable:!0}))))}},te.propTypes={media:S.a.map.isRequired,account:S.a.map.isRequired,isUploadingThumbnail:v.a.bool,onSave:v.a.func.isRequired,onChangeDescription:v.a.func.isRequired,onChangeFocus:v.a.func.isRequired,onSelectThumbnail:v.a.func.isRequired,onClose:v.a.func.isRequired,intl:v.a.object.isRequired},ee=te))||ee)||ee;var be,fe=n(562);const _e=Object(p.f)({close:{id:"lightbox.close",defaultMessage:"Close"}});let Oe=Object(p.g)(be=class extends c.a.PureComponent{constructor(){super(...arguments),this.state={navigationHidden:!1},this.toggleNavigation=()=>{this.setState((e=>({navigationHidden:!e.navigationHidden})))}}render(){const{intl:e,src:t,alt:n,onClose:s}=this.props,{navigationHidden:a}=this.state,o=E()("media-modal__navigation",{"media-modal__navigation--hidden":a});return Object(i.a)("div",{className:"modal-root__modal media-modal"},void 0,Object(i.a)("div",{className:"media-modal__closer",role:"presentation",onClick:s},void 0,Object(i.a)(fe.a,{src:t,width:400,height:400,alt:n,onClick:this.toggleNavigation})),Object(i.a)("div",{className:o},void 0,Object(i.a)(h.a,{className:"media-modal__close",title:e.formatMessage(_e.close),icon:"times",onClick:s,size:40})))}})||be;var ve=n(298);const je={MEDIA:()=>Promise.resolve({default:L.a}),VIDEO:()=>Promise.resolve({default:x}),AUDIO:()=>Promise.resolve({default:V}),IMAGE:()=>Promise.resolve({default:Oe}),BOOST:()=>Promise.resolve({default:Q}),CONFIRM:()=>Promise.resolve({default:Z}),MUTE:re.J,BLOCK:re.e,REPORT:re.Q,ACTIONS:()=>Promise.resolve({default:T}),EMBED:re.o,LIST_EDITOR:re.F,FOCAL_POINT:()=>Promise.resolve({default:me}),LIST_ADDER:re.E,COMPARE_HISTORY:re.j,FILTER:re.t,SUBSCRIBED_LANGUAGES:re.S,INTERACTION:re.C,CLOSED_REGISTRATIONS:re.h};class Se extends c.a.PureComponent{constructor(){var e;super(...arguments),e=this,this.state={backgroundColor:null},this.setBackgroundColor=e=>{this.setState({backgroundColor:e})},this.renderLoading=e=>()=>-1===["MEDIA","VIDEO","BOOST","CONFIRM","ACTIONS"].indexOf(e)?Object(i.a)(_,{}):null,this.renderError=e=>{const{onClose:t}=this.props;return c.a.createElement(b,Object(o.a)({},e,{onClose:t}))},this.handleClose=function(t){void 0===t&&(t=!1);const{onClose:n}=e.props;let s=null;try{var a,o,i;s=null==(a=e._modal)||null==a.getWrappedInstance||null==(o=(i=a.getWrappedInstance()).getCloseConfirmationMessage)?void 0:o.call(i)}catch(e){}n(s,t)},this.setModalRef=e=>{this._modal=e}}getSnapshotBeforeUpdate(){return{visible:!!this.props.type}}componentDidUpdate(e,t,n){let{visible:s}=n;s?(document.body.classList.add("with-modals--active"),document.documentElement.style.marginRight=`${Object(u.a)()}px`):(document.body.classList.remove("with-modals--active"),document.documentElement.style.marginRight=0)}render(){const{type:e,props:t,ignoreFocus:n}=this.props,{backgroundColor:s}=this.state,a=!!e;return Object(i.a)(d.a,{backgroundColor:s,onClose:this.handleClose,ignoreFocus:n},void 0,a&&c.a.createElement(c.a.Fragment,null,Object(i.a)(l.a,{fetchComponent:je[e],loading:this.renderLoading(e),error:this.renderError,renderDelay:200},void 0,(e=>c.a.createElement(e,Object(o.a)({},t,{onChangeBackgroundColor:this.setBackgroundColor,onClose:this.handleClose,ref:this.setModalRef})))),Object(i.a)(ve.a,{},void 0,Object(i.a)("meta",{name:"robots",content:"noindex"}))))}}t.a=Object(s.connect)((e=>({ignoreFocus:e.getIn(["modal","ignoreFocus"]),type:e.getIn(["modal","stack",0,"modalType"],null),props:e.getIn(["modal","stack",0,"modalProps"],{})})),(e=>({onClose(t,n){void 0===n&&(n=!1),e(t?Object(a.d)("CONFIRM",{message:t.message,confirm:t.confirm,onConfirm:()=>e(Object(a.c)(void 0,{ignoreFocus:n}))}):Object(a.c)(void 0,{ignoreFocus:n}))}})))(Se)}}]);
//# sourceMappingURL=336-9a03923ed6f5d19fb4d6.chunk.js.map