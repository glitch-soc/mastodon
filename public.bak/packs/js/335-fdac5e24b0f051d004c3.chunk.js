/*! For license information please see 335-fdac5e24b0f051d004c3.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[335],{1298:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),o=n(40),i=n.n(o),r=n(56),c=n(0),u=n(2),l=n.n(u),d=n(298),p=n(6),h=n(12),g=n(1648),m=n(1605),f=n(1365),b=n(724),_=n(62),v=n.n(_),O=n(718),y=n(719),j=n(726),S=n(1647),C=n(1649),E=n(211),T=n(14),I=n(46),w=n(216),k=n(596),M=n(702),N=n(214),x=n(9),L=n(1650),A=n(1366),R=n.n(A),U=n(1306),D=n(1303),F=n(20);class P extends F.a{render(){let{title:e,icon:t,multiColumn:n}=this.props;return Object(c.a)(U.a,{},void 0,Object(c.a)(D.a,{icon:t,title:e,multiColumn:n,focusable:!1,placeholder:!0}),Object(c.a)("div",{className:"scrollable"}))}}P.propTypes={title:l.a.oneOfType([l.a.node,l.a.string]),icon:l.a.string,multiColumn:l.a.bool},P.defaultProps={title:"",icon:""};var H,q,K=n(154),$=n(1203),B=n(10),W=n.n(B),z=n(11);class G extends a.a.PureComponent{constructor(){super(...arguments),this.state={hovering:!1},this.handleMouseEnter=()=>{const{animate:e}=this.props;e||this.setState({hovering:!0})},this.handleMouseLeave=()=>{const{animate:e}=this.props;e||this.setState({hovering:!1})}}render(){const{src:e,staticSrc:t,className:n,animate:s}=this.props,{hovering:a}=this.state;return Object(c.a)("img",{className:n,src:a||s?e:t,alt:"",role:"presentation",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave})}}G.defaultProps={animate:z.a};class Q extends a.a.PureComponent{constructor(){super(...arguments),this.state={copied:!1},this.handleClick=()=>{const{value:e}=this.props;navigator.clipboard.writeText(e),this.setState({copied:!0}),this.timeout=setTimeout((()=>this.setState({copied:!1})),700)}}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}render(){const{children:e}=this.props,{copied:t}=this.state;return Object(c.a)(K.a,{onClick:this.handleClick,className:t?"copied":"copyable"},void 0,t?Object(c.a)(p.b,{id:"copypaste.copied",defaultMessage:"Copied"}):e)}}let V=Object(p.g)((q=class extends a.a.PureComponent{constructor(){super(...arguments),this.handleRetry=()=>{const{onRetry:e}=this.props;e&&e()}}render(){const{errorType:e,multiColumn:t,stacktrace:n}=this.props;let s,a;switch(e){case"routing":s=Object(c.a)(p.b,{id:"bundle_column_error.routing.title",defaultMessage:"404"}),a=Object(c.a)(p.b,{id:"bundle_column_error.routing.body",defaultMessage:"The requested page could not be found. Are you sure the URL in the address bar is correct?"});break;case"network":s=Object(c.a)(p.b,{id:"bundle_column_error.network.title",defaultMessage:"Network error"}),a=Object(c.a)(p.b,{id:"bundle_column_error.network.body",defaultMessage:"There was an error when trying to load this page. This could be due to a temporary problem with your internet connection or this server."});break;case"error":s=Object(c.a)(p.b,{id:"bundle_column_error.error.title",defaultMessage:"Oh, no!"}),a=Object(c.a)(p.b,{id:"bundle_column_error.error.body",defaultMessage:"The requested page could not be rendered. It could be due to a bug in our code, or a browser compatibility issue."})}return Object(c.a)(U.a,{bindToDocument:!t},void 0,Object(c.a)("div",{className:"error-column"},void 0,Object(c.a)(G,{src:"/oops.gif",staticSrc:"/oops.png",className:"error-column__image"}),Object(c.a)("div",{className:"error-column__message"},void 0,Object(c.a)("h1",{},void 0,s),Object(c.a)("p",{},void 0,a),Object(c.a)("div",{className:"error-column__message__actions"},void 0,"network"===e&&Object(c.a)(K.a,{onClick:this.handleRetry},void 0,Object(c.a)(p.b,{id:"bundle_column_error.retry",defaultMessage:"Try again"})),"error"===e&&Object(c.a)(Q,{value:n},void 0,Object(c.a)(p.b,{id:"bundle_column_error.copy_stacktrace",defaultMessage:"Copy error report"})),Object(c.a)($.a,{to:"/",className:W()("button",{"button-tertiary":"routing"!==e})},void 0,Object(c.a)(p.b,{id:"bundle_column_error.return",defaultMessage:"Go back home"}))))),Object(c.a)(d.a,{},void 0,Object(c.a)("meta",{name:"robots",content:"noindex"})))}},q.defaultProps={errorType:"routing"},H=q))||H;var X=n(698);class J extends a.a.PureComponent{render(){const{multiColumn:e,children:t}=this.props;return Object(c.a)(L.a,{},void 0,a.a.Children.map(t,(t=>a.a.cloneElement(t,{multiColumn:e}))))}}class Y extends a.a.Component{constructor(){super(...arguments),this.state={hasError:!1,stacktrace:""},this.renderComponent=e=>{let{match:t}=e;const{component:n,content:s,multiColumn:o,componentParams:i}=this.props,{hasError:r,stacktrace:u}=this.state;return r?Object(c.a)(V,{stacktrace:u,multiColumn:o,errorType:"error"}):Object(c.a)(X.a,{fetchComponent:n,loading:this.renderLoading,error:this.renderError},void 0,(e=>a.a.createElement(e,Object(x.a)({params:t.params,multiColumn:o},i),s)))},this.renderLoading=()=>{const{multiColumn:e}=this.props;return Object(c.a)(P,{multiColumn:e})},this.renderError=e=>a.a.createElement(V,Object(x.a)({},e,{errorType:"network"}))}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){R.a.fromError(e).then((t=>{this.setState({stacktrace:e.toString()+"\n"+t.map((e=>e.toString())).join("\n")})})).catch((e=>{console.error(e)}))}render(){const{component:e,content:t,...n}=this.props;return a.a.createElement(m.a,Object(x.a)({},n,{render:this.renderComponent}))}}Y.defaultProps={componentParams:{}};var Z=n(239),ee=n(54),te=n.n(ee);class ne extends a.a.PureComponent{constructor(){super(...arguments),this.handleKeyUp=e=>{const t=e.keyCode;if(this.props.active&&27===t)e.preventDefault(),e.stopPropagation(),this.props.onClose()}}componentDidMount(){window.addEventListener("keyup",this.handleKeyUp,!1)}componentWillUnmount(){window.removeEventListener("keyup",this.handleKeyUp)}render(){const{active:e}=this.props;return Object(c.a)(Z.a,{defaultStyle:{backgroundOpacity:0,backgroundScale:.95},style:{backgroundOpacity:te()(e?1:0,{stiffness:150,damping:15}),backgroundScale:te()(e?1:.95,{stiffness:200,damping:3})}},void 0,(t=>{let{backgroundOpacity:n,backgroundScale:s}=t;return Object(c.a)("div",{className:"upload-area",style:{visibility:e?"visible":"hidden",opacity:n}},void 0,Object(c.a)("div",{className:"upload-area__drop"},void 0,Object(c.a)("div",{className:"upload-area__background",style:{transform:`scale(${s})`}}),Object(c.a)("div",{className:"upload-area__content"},void 0,Object(c.a)(p.b,{id:"upload_area.title",defaultMessage:"Drag & drop to upload"}))))}))}}var se=n(299),ae=n(21),oe=n.n(ae);var ie,re=()=>Object(c.a)("div",{className:"drawer"},void 0,Object(c.a)("div",{className:"drawer__pager"},void 0,Object(c.a)("div",{className:"drawer__inner"}))),ce=n(157),ue=n(1394),le=n(704),de=n(1459),pe=n(1395),he=n(672),ge=n(302),me=n(668),fe=n(1461);const be=Object(p.f)({aboutActiveUsers:{id:"server_banner.about_active_users",defaultMessage:"People using this server during the last 30 days (Monthly Active Users)"}});let _e=Object(h.connect)((e=>({server:e.getIn(["server","server"])})))(ie=Object(p.g)(ie=class extends a.a.PureComponent{componentDidMount(){const{dispatch:e}=this.props;e(Object(w.l)())}render(){const{server:e,intl:t}=this.props,n=e.get("isLoading");return Object(c.a)("div",{className:"server-banner"},void 0,Object(c.a)("div",{className:"server-banner__introduction"},void 0,Object(c.a)(p.b,{id:"server_banner.introduction",defaultMessage:"{domain} is part of the decentralized social network powered by {mastodon}.",values:{domain:Object(c.a)("strong",{},void 0,z.i),mastodon:Object(c.a)("a",{href:"https://joinmastodon.org",target:"_blank"},void 0,"Mastodon")}})),Object(c.a)(fe.a,{blurhash:e.getIn(["thumbnail","blurhash"]),src:e.getIn(["thumbnail","url"]),className:"server-banner__hero"}),Object(c.a)("div",{className:"server-banner__description"},void 0,n?a.a.createElement(a.a.Fragment,null,Object(c.a)(ge.a,{width:"100%"}),Object(c.a)("br",{}),Object(c.a)(ge.a,{width:"100%"}),Object(c.a)("br",{}),Object(c.a)(ge.a,{width:"70%"})):e.get("description")),Object(c.a)("div",{className:"server-banner__meta"},void 0,Object(c.a)("div",{className:"server-banner__meta__column"},void 0,Object(c.a)("h4",{},void 0,Object(c.a)(p.b,{id:"server_banner.administered_by",defaultMessage:"Administered by:"})),Object(c.a)(me.a,{id:e.getIn(["contact","account","id"]),size:36})),Object(c.a)("div",{className:"server-banner__meta__column"},void 0,Object(c.a)("h4",{},void 0,Object(c.a)(p.b,{id:"server_banner.server_stats",defaultMessage:"Server stats:"})),n?a.a.createElement(a.a.Fragment,null,Object(c.a)("strong",{className:"server-banner__number"},void 0,Object(c.a)(ge.a,{width:"10ch"})),Object(c.a)("br",{}),Object(c.a)("span",{className:"server-banner__number-label"},void 0,Object(c.a)(ge.a,{width:"5ch"}))):a.a.createElement(a.a.Fragment,null,Object(c.a)("strong",{className:"server-banner__number"},void 0,Object(c.a)(he.a,{value:e.getIn(["usage","users","active_month"])})),Object(c.a)("br",{}),Object(c.a)("span",{className:"server-banner__number-label",title:t.formatMessage(be.aboutActiveUsers)},void 0,Object(c.a)(p.b,{id:"server_banner.active_users",defaultMessage:"active users"}))))),Object(c.a)("hr",{className:"spacer"}),Object(c.a)($.a,{className:"button button--block button-secondary",to:"/about"},void 0,Object(c.a)(p.b,{id:"server_banner.learn_more",defaultMessage:"Learn more"})))}})||ie)||ie;var ve,Oe;let ye=Object(h.connect)()(((Oe=class extends a.a.PureComponent{componentDidMount(){const{dispatch:e}=this.props;e(Object(T.wb)())}componentWillUnmount(){const{dispatch:e}=this.props;e(Object(T.Hb)())}render(){const{signedIn:e}=this.context.identity;return Object(c.a)("div",{className:"compose-panel"},void 0,Object(c.a)(ue.a,{openInRoute:!0}),!e&&Object(c.a)(a.a.Fragment,{},void 0,Object(c.a)(_e,{}),Object(c.a)("div",{className:"flex-spacer"})),e&&Object(c.a)(a.a.Fragment,{},void 0,Object(c.a)(de.a,{}),Object(c.a)(le.a,{singleColumn:!0})),Object(c.a)(pe.a,{}))}}).contextTypes={identity:l.a.object.isRequired},ve=Oe))||ve;var je,Se,Ce=n(1330),Ee=n(36),Te=n(1367);const Ie=Object(p.f)({logoutMessage:{id:"confirmations.logout.message",defaultMessage:"Are you sure you want to log out?"},logoutConfirm:{id:"confirmations.logout.confirm",defaultMessage:"Log out"}});let we=(je=Object(h.connect)((e=>({disabledAcct:e.getIn(["accounts",z.g,"acct"]),movedToAcct:z.r?e.getIn(["accounts",z.r,"acct"]):void 0})),((e,t)=>{let{intl:n}=t;return{onLogout(){e(Object(Ee.d)("CONFIRM",{message:n.formatMessage(Ie.logoutMessage),confirm:n.formatMessage(Ie.logoutConfirm),closeWhenConfirm:!1,onConfirm:()=>Object(Te.a)()}))}}})),Object(p.g)(Se=je(Se=class extends a.a.PureComponent{constructor(){super(...arguments),this.handleLogOutClick=e=>(e.preventDefault(),e.stopPropagation(),this.props.onLogout(),!1)}render(){const{disabledAcct:e,movedToAcct:t}=this.props,n=Object(c.a)($.a,{to:`/@${e}`},void 0,e,"@",z.i);return Object(c.a)("div",{className:"sign-in-banner"},void 0,Object(c.a)("p",{},void 0,t?Object(c.a)(p.b,{id:"moved_to_account_banner.text",defaultMessage:"Your account {disabledAccount} is currently disabled because you moved to {movedToAccount}.",values:{disabledAccount:n,movedToAccount:Object(c.a)($.a,{to:`/@${t}`},void 0,t.includes("@")?t:`${t}@${z.i}`)}}):Object(c.a)(p.b,{id:"disabled_account_banner.text",defaultMessage:"Your account {disabledAccount} is currently disabled.",values:{disabledAccount:n}})),Object(c.a)("a",{href:"/auth/edit",className:"button button--block"},void 0,Object(c.a)(p.b,{id:"disabled_account_banner.account_settings",defaultMessage:"Account settings"})),Object(c.a)("button",{type:"button",className:"button button--block button-tertiary",onClick:this.handleLogOutClick},void 0,Object(c.a)(p.b,{id:"confirmations.logout.confirm",defaultMessage:"Log out"})))}})||Se)||Se);var ke,Me,Ne=n(16),xe=n(1396),Le=n(4);const Ae=Object(p.f)({text:{id:"navigation_bar.follow_requests",defaultMessage:"Follow requests"}});let Re=(ke=Object(h.connect)((e=>({count:e.getIn(["user_lists","follow_requests","items"],Object(Le.List)()).size}))),Object(p.g)(Me=ke(Me=class extends a.a.Component{componentDidMount(){const{dispatch:e}=this.props;e(Object(Ne.Y)())}render(){const{count:e,intl:t}=this.props;return 0===e?null:Object(c.a)(Ce.a,{transparent:!0,to:"/follow_requests",icon:Object(c.a)(xe.a,{className:"column-link__icon",id:"user-plus",count:e}),text:t.formatMessage(Ae.text)})}})||Me)||Me);var Ue,De,Fe,Pe=n(48),He=n(38);const qe=Object(Pe.a)([e=>e.get("lists")],(e=>e?e.toList().filter((e=>!!e)).sort(((e,t)=>e.get("title").localeCompare(t.get("title")))).take(4):e));let Ke=(Ue=Object(h.connect)((e=>({lists:qe(e)}))),Object(C.a)(De=Ue(((Fe=class extends F.a{componentDidMount(){const{dispatch:e}=this.props;e(Object(He.I)())}render(){const{lists:e}=this.props;return!e||e.isEmpty()?null:Object(c.a)("div",{className:"list-panel"},void 0,Object(c.a)("hr",{}),e.map((e=>Object(c.a)(Ce.a,{icon:"list-ul",strict:!0,text:e.get("title"),to:`/lists/${e.get("id")}`,transparent:!0},e.get("id")))))}}).propTypes={dispatch:l.a.func.isRequired,lists:oe.a.list},De=Fe))||De)||De);var $e=Object(h.connect)((e=>({count:e.getIn(["local_settings","notifications","tab_badge"])?e.getIn(["notifications","unread"]):0,id:"bell"})))(xe.a);var Be,We,ze=()=>{const e=Object(h.useDispatch)(),t=Object(s.useCallback)((()=>e(Object(Ee.d)("CLOSED_REGISTRATIONS"))),[e]);let n;return n=z.w?Object(c.a)("a",{href:"/auth/sign_up",className:"button button--block button-tertiary"},void 0,Object(c.a)(p.b,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})):Object(c.a)("button",{className:"button button--block button-tertiary",onClick:t},void 0,Object(c.a)(p.b,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})),Object(c.a)("div",{className:"sign-in-banner"},void 0,Object(c.a)("p",{},void 0,Object(c.a)(p.b,{id:"sign_in_banner.text",defaultMessage:"Sign in to follow profiles or hashtags, favourite, share and reply to posts. You can also interact from your account on a different server."})),Object(c.a)("a",{href:"/auth/sign_in",className:"button button--block"},void 0,Object(c.a)(p.b,{id:"sign_in_banner.sign_in",defaultMessage:"Sign in"})),Object(c.a)("a",{href:"https://halcyon.urusai.social/",className:"button button--block"},void 0,"Alternative UI (Halcyon)"),n)},Ge=n(281),Qe=n(1513),Ve=n(1317);const Xe=Object(p.f)({lastStatusAt:{id:"account.featured_tags.last_status_at",defaultMessage:"Last post on {date}"},empty:{id:"account.featured_tags.last_status_never",defaultMessage:"No posts"}});let Je=Object(p.g)(((We=class extends F.a{render(){const{account:e,featuredTags:t,intl:n}=this.props;return!e||e.get("suspended")||t.isEmpty()?null:Object(c.a)("div",{className:"getting-started__trends"},void 0,Object(c.a)("h4",{},void 0,Object(c.a)(p.b,{id:"account.featured_tags.title",defaultMessage:"{name}'s featured hashtags",values:{name:Object(c.a)("bdi",{dangerouslySetInnerHTML:{__html:e.get("display_name_html")}})}})),t.take(3).map((t=>Object(c.a)(Ve.c,{name:t.get("name"),href:t.get("url"),to:`/@${e.get("acct")}/tagged/${t.get("name")}`,uses:t.get("statuses_count"),withGraph:!1,description:1*t.get("statuses_count")>0?n.formatMessage(Xe.lastStatusAt,{date:n.formatDate(t.get("last_status_at"),{month:"short",day:"2-digit"})}):n.formatMessage(Xe.empty)},t.get("name")))))}}).contextTypes={router:l.a.object},We.propTypes={account:oe.a.map,featuredTags:oe.a.list,tagged:l.a.string,intl:l.a.object.isRequired},Be=We))||Be;var Ye=n(236);var Ze,et=Object(h.connect)((()=>{const e=Object(Ye.e)();return(t,n)=>{let{accountId:s}=n;return{account:e(t,s),featuredTags:t.getIn(["user_lists","featured_tags",s,"items"],Object(Le.List)())}}}))(Je),tt=n(670);let nt=Object(h.connect)(((e,t)=>{let{match:{params:{acct:n}}}=t;const s=e.getIn(["accounts_map",Object(tt.b)(n)]);return s?{accountId:s,isLoading:!1}:{isLoading:!0}}))(Ze=class extends a.a.PureComponent{render(){const{accountId:e,isLoading:t,match:{params:{tagged:n}}}=this.props;return t?null:a.a.createElement(a.a.Fragment,null,Object(c.a)("div",{className:"flex-spacer"}),Object(c.a)(et,{accountId:e,tagged:n}))}})||Ze;var st;const at=()=>a.a.createElement(a.a.Fragment,null,z.y&&a.a.createElement(a.a.Fragment,null,Object(c.a)("div",{className:"flex-spacer"}),Object(c.a)(Qe.a,{})));let ot=Object(C.a)(st=class extends a.a.PureComponent{render(){return Object(c.a)(L.a,{},void 0,Object(c.a)(m.a,{path:"/@:acct",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/tagged/:tagged?",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/with_replies",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/followers",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/following",exact:!0,component:nt}),Object(c.a)(m.a,{path:"/@:acct/media",exact:!0,component:nt}),Object(c.a)(m.a,{component:at}))}})||st;var it,rt;const ct=Object(p.f)({home:{id:"tabs_bar.home",defaultMessage:"Home"},notifications:{id:"tabs_bar.notifications",defaultMessage:"Notifications"},explore:{id:"explore.title",defaultMessage:"Explore"},local:{id:"tabs_bar.local_timeline",defaultMessage:"Local"},federated:{id:"tabs_bar.federated_timeline",defaultMessage:"Federated"},direct:{id:"navigation_bar.direct",defaultMessage:"Direct messages"},favourites:{id:"navigation_bar.favourites",defaultMessage:"Favourites"},bookmarks:{id:"navigation_bar.bookmarks",defaultMessage:"Bookmarks"},lists:{id:"navigation_bar.lists",defaultMessage:"Lists"},preferences:{id:"navigation_bar.preferences",defaultMessage:"Preferences"},followsAndFollowers:{id:"navigation_bar.follows_and_followers",defaultMessage:"Follows and followers"},about:{id:"navigation_bar.about",defaultMessage:"About"},search:{id:"navigation_bar.search",defaultMessage:"Search"},app_settings:{id:"navigation_bar.app_settings",defaultMessage:"App settings"}});let ut=Object(p.g)(((rt=class extends a.a.Component{render(){const{intl:e,onOpenSettings:t}=this.props,{signedIn:n,disabledAccountId:s}=this.context.identity;return Object(c.a)("div",{className:"navigation-panel"},void 0,n&&Object(c.a)(a.a.Fragment,{},void 0,Object(c.a)(Ce.a,{transparent:!0,to:"/home",icon:"home",text:e.formatMessage(ct.home)}),Object(c.a)(Ce.a,{transparent:!0,to:"/notifications",icon:Object(c.a)($e,{className:"column-link__icon"}),text:e.formatMessage(ct.notifications)}),Object(c.a)(Re,{})),z.y?Object(c.a)(Ce.a,{transparent:!0,to:"/explore",icon:"hashtag",text:e.formatMessage(ct.explore)}):Object(c.a)(Ce.a,{transparent:!0,to:"/search",icon:"search",text:e.formatMessage(ct.search)}),(n||z.C)&&a.a.createElement(a.a.Fragment,null,Object(c.a)(Ce.a,{transparent:!0,to:"/public/local",icon:"users",text:e.formatMessage(ct.local)}),Object(c.a)(Ce.a,{transparent:!0,exact:!0,to:"/public",icon:"globe",text:e.formatMessage(ct.federated)})),!n&&Object(c.a)("div",{className:"navigation-panel__sign-in-banner"},void 0,Object(c.a)("hr",{}),s?Object(c.a)(we,{}):Object(c.a)(ze,{})),n&&Object(c.a)(a.a.Fragment,{},void 0,Object(c.a)(Ce.a,{transparent:!0,to:"/conversations",icon:"at",text:e.formatMessage(ct.direct)}),Object(c.a)(Ce.a,{transparent:!0,to:"/bookmarks",icon:"bookmark",text:e.formatMessage(ct.bookmarks)}),Object(c.a)(Ce.a,{transparent:!0,to:"/favourites",icon:"star",text:e.formatMessage(ct.favourites)}),Object(c.a)(Ce.a,{transparent:!0,to:"/lists",icon:"list-ul",text:e.formatMessage(ct.lists)}),Object(c.a)(Ke,{}),Object(c.a)("hr",{}),!!Ge.c&&Object(c.a)(Ce.a,{transparent:!0,href:Ge.c,icon:"cog",text:e.formatMessage(ct.preferences)}),Object(c.a)(Ce.a,{transparent:!0,onClick:t,icon:"cogs",text:e.formatMessage(ct.app_settings)})),Object(c.a)("div",{className:"navigation-panel__legal"},void 0,Object(c.a)("hr",{}),Object(c.a)(Ce.a,{transparent:!0,to:"/about",icon:"ellipsis-h",text:e.formatMessage(ct.about)})),Object(c.a)(ot,{}))}}).contextTypes={router:l.a.object.isRequired,identity:l.a.object.isRequired},it=rt))||it;var lt=n(531),dt=n(1393);const pt={COMPOSE:ce.k,HOME:ce.C,NOTIFICATIONS:ce.M,PUBLIC:ce.R,REMOTE:ce.R,COMMUNITY:ce.i,HASHTAG:ce.B,DIRECT:ce.l,FAVOURITES:ce.r,BOOKMARKS:ce.g,LIST:ce.H,DIRECTORY:ce.m};class ht extends F.a{constructor(){super(...arguments),this.mediaQuery="matchMedia"in window&&window.matchMedia("(max-width: 1174px)"),this.state={renderComposePanel:!(this.mediaQuery&&this.mediaQuery.matches)},this.handleLayoutChange=e=>{this.setState({renderComposePanel:!e.matches})},this.handleWheel=()=>{"function"==typeof this._interruptScrollAnimation&&this._interruptScrollAnimation()},this.setRef=e=>{this.node=e},this.renderLoading=e=>()=>"COMPOSE"===e?Object(c.a)(re,{}):Object(c.a)(P,{multiColumn:!0}),this.renderError=e=>a.a.createElement(V,Object(x.a)({multiColumn:!0,errorType:"network"},e))}componentDidMount(){this.props.singleColumn||this.node.addEventListener("wheel",this.handleWheel,!!lt.a&&{passive:!0}),this.mediaQuery&&(this.mediaQuery.addEventListener?this.mediaQuery.addEventListener("change",this.handleLayoutChange):this.mediaQuery.addListener(this.handleLayoutChange),this.setState({renderComposePanel:!this.mediaQuery.matches})),this.isRtlLayout=document.getElementsByTagName("body")[0].classList.contains("rtl")}componentWillUpdate(e){this.props.singleColumn!==e.singleColumn&&e.singleColumn&&this.node.removeEventListener("wheel",this.handleWheel)}componentDidUpdate(e){this.props.singleColumn===e.singleColumn||this.props.singleColumn||this.node.addEventListener("wheel",this.handleWheel,!!lt.a&&{passive:!0})}componentWillUnmount(){this.props.singleColumn||this.node.removeEventListener("wheel",this.handleWheel),this.mediaQuery&&(this.mediaQuery.removeEventListener?this.mediaQuery.removeEventListener("change",this.handleLayoutChange):this.mediaQuery.removeListener(this.handleLayoutChange))}handleChildrenContentChange(){if(!this.props.singleColumn){const e=this.isRtlLayout?-1:1;this._interruptScrollAnimation=Object(dt.a)(this.node,(this.node.scrollWidth-window.innerWidth)*e)}}render(){const{columns:e,children:t,singleColumn:n,navbarUnder:s,openSettings:o}=this.props,{renderComposePanel:i}=this.state;return n?Object(c.a)("div",{className:"columns-area__panels"},void 0,Object(c.a)("div",{className:"columns-area__panels__pane columns-area__panels__pane--compositional"},void 0,Object(c.a)("div",{className:"columns-area__panels__pane__inner"},void 0,i&&Object(c.a)(ye,{}))),Object(c.a)("div",{className:"columns-area__panels__main"},void 0,Object(c.a)("div",{className:"tabs-bar__wrapper"},void 0,Object(c.a)("div",{id:"tabs-bar__portal"})),Object(c.a)("div",{className:"columns-area columns-area--mobile"},void 0,t)),Object(c.a)("div",{className:"columns-area__panels__pane columns-area__panels__pane--start columns-area__panels__pane--navigational"},void 0,Object(c.a)("div",{className:"columns-area__panels__pane__inner"},void 0,Object(c.a)(ut,{onOpenSettings:o})))):a.a.createElement("div",{className:"columns-area",ref:this.setRef},e.map((e=>{const t=null===e.get("params",null)?null:e.get("params").toJS(),n=t&&t.other?t.other:{};return Object(c.a)(X.a,{fetchComponent:pt[e.get("id")],loading:this.renderLoading(e.get("id")),error:this.renderError},e.get("uuid"),(s=>a.a.createElement(s,Object(x.a)({columnId:e.get("uuid"),params:t,multiColumn:!0},n))))})),a.a.Children.map(t,(e=>a.a.cloneElement(e,{multiColumn:!0}))))}}ht.contextTypes={router:l.a.object.isRequired},ht.propTypes={columns:oe.a.list.isRequired,singleColumn:l.a.bool,children:l.a.node,navbarUnder:l.a.bool,openSettings:l.a.func};var gt,mt,ft=Object(h.connect)((e=>({columns:e.getIn(["settings","columns"])})),(e=>({openSettings(t){t.preventDefault(),t.stopPropagation(),e(Object(Ee.d)("SETTINGS",{}))}})),null,{forwardRef:!0})(ht),bt=n(1606),_t=n.n(bt),vt=n(179),Ot=n(305),yt=n(578),jt=n(32),St=n(200),Ct=n(198);const Et=Object(p.f)({close:{id:"lightbox.close",defaultMessage:"Close"}});let Tt=Object(h.connect)(((e,t)=>{let{accountId:n}=t;return{account:e.getIn(["accounts",n])}}))(gt=Object(p.g)(((mt=class extends F.a{render(){const{account:e,statusId:t,onClose:n,intl:s}=this.props;return Object(c.a)("div",{className:"picture-in-picture__header"},void 0,Object(c.a)($.a,{to:`/@${e.get("acct")}/${t}`,className:"picture-in-picture__header__account"},void 0,Object(c.a)(St.a,{account:e,size:36}),Object(c.a)(Ct.a,{account:e})),Object(c.a)(jt.a,{icon:"times",onClick:n,title:s.formatMessage(Et.close)}))}}).propTypes={accountId:l.a.string.isRequired,statusId:l.a.string.isRequired,account:oe.a.map.isRequired,onClose:l.a.func.isRequired,intl:l.a.object.isRequired},gt=mt))||gt)||gt;var It,wt=n(287);let kt=Object(h.connect)((e=>({...e.get("picture_in_picture"),left:"left"===e.getIn(["local_settings","media","pop_in_position"])})))(It=class extends a.a.Component{constructor(){super(...arguments),this.handleClose=()=>{const{dispatch:e}=this.props;e(Object(yt.d)())}}render(){const{type:e,src:t,currentTime:n,accountId:s,statusId:a,left:o}=this.props;if(!n)return null;let i;return"video"===e?i=Object(c.a)(vt.default,{src:t,currentTime:this.props.currentTime,volume:this.props.volume,muted:this.props.muted,autoPlay:!0,inline:!0,alwaysVisible:!0}):"audio"===e&&(i=Object(c.a)(Ot.default,{src:t,currentTime:this.props.currentTime,volume:this.props.volume,muted:this.props.muted,poster:this.props.poster,backgroundColor:this.props.backgroundColor,foregroundColor:this.props.foregroundColor,accentColor:this.props.accentColor,autoPlay:!0})),Object(c.a)("div",{className:W()("picture-in-picture",{left:o})},void 0,Object(c.a)(Tt,{accountId:s,statusId:a,onClose:this.handleClose}),i,Object(c.a)(wt.a,{statusId:a}))}})||It;var Mt=n(1307);n(158);var Nt,xt,Lt,At=()=>Object(c.a)("svg",{viewBox:"0 0 261 66",className:"logo",role:"img"},void 0,Object(c.a)("title",{},void 0,"Mastodon"),Object(c.a)("use",{xlinkHref:"#logo-symbol-wordmark"}));const Rt=Object(h.connect)((e=>({account:e.getIn(["accounts",z.q])})))((e=>{let{account:t}=e;return Object(c.a)(se.a,{href:t.get("url"),to:`/@${t.get("acct")}`,title:t.get("acct")},void 0,Object(c.a)(St.a,{account:t,size:35}))}));let Ut=(Nt=Object(h.connect)(null,(e=>({openClosedRegistrationsModal(){e(Object(Ee.d)("CLOSED_REGISTRATIONS"))}}))),Object(C.a)(xt=Nt(((Lt=class extends a.a.PureComponent{render(){const{signedIn:e}=this.context.identity,{location:t,openClosedRegistrationsModal:n}=this.props;let s;if(e)s=a.a.createElement(a.a.Fragment,null,"/publish"!==t.pathname&&Object(c.a)($.a,{to:"/publish",className:"button"},void 0,Object(c.a)(p.b,{id:"compose_form.publish_form",defaultMessage:"Publish"})),Object(c.a)(Rt,{}));else{let e;e=z.w?Object(c.a)("a",{href:"/auth/sign_up",className:"button button-tertiary"},void 0,Object(c.a)(p.b,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})):Object(c.a)("button",{className:"button button-tertiary",onClick:n},void 0,Object(c.a)(p.b,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})),s=a.a.createElement(a.a.Fragment,null,Object(c.a)("a",{href:"/auth/sign_in",className:"button"},void 0,Object(c.a)(p.b,{id:"sign_in_banner.sign_in",defaultMessage:"Sign in"})),e)}return Object(c.a)("div",{className:"ui__header"},void 0,Object(c.a)($.a,{to:"/",className:"ui__header__logo"},void 0,Object(c.a)(At,{})),Object(c.a)("div",{className:"ui__header__links"},void 0,s))}}).contextTypes={identity:l.a.object},xt=Lt))||xt)||xt);var Dt,Ft;n(1414);const Pt=Object(p.f)({beforeUnload:{id:"ui.beforeunload",defaultMessage:"Your draft will be lost if you leave Mastodon."}}),Ht={help:"?",new:"n",search:"s",forceNew:"option+n",toggleComposeSpoilers:"option+x",focusColumn:["1","2","3","4","5","6","7","8","9"],reply:"r",favourite:"f",boost:"b",mention:"m",open:["enter","o"],openProfile:"p",moveDown:["down","j"],moveUp:["up","k"],back:"backspace",goToHome:"g h",goToNotifications:"g n",goToLocal:"g l",goToFederated:"g t",goToDirect:"g d",goToStart:"g s",goToFavourites:"g f",goToPinned:"g p",goToProfile:"g u",goToBlocked:"g b",goToMuted:"g m",goToRequests:"g r",toggleSpoiler:"x",bookmark:"d",toggleCollapse:"shift+x",toggleSensitive:"h",openMedia:"e"};class qt extends a.a.PureComponent{constructor(){super(...arguments),this.setRef=e=>{e&&(this.node=e)}}componentWillMount(){this.props.mobile?(document.body.classList.toggle("layout-single-column",!0),document.body.classList.toggle("layout-multiple-columns",!1)):(document.body.classList.toggle("layout-single-column",!1),document.body.classList.toggle("layout-multiple-columns",!0))}componentDidUpdate(e){[this.props.location.pathname,"/"].includes(e.location.pathname)||this.node.handleChildrenContentChange(),e.mobile!==this.props.mobile&&(document.body.classList.toggle("layout-single-column",this.props.mobile),document.body.classList.toggle("layout-multiple-columns",!this.props.mobile))}render(){const{children:e,mobile:t,navbarUnder:n}=this.props,{signedIn:s}=this.context.identity;let o;return o=s?t?Object(c.a)(S.a,{from:"/",to:"/home",exact:!0}):Object(c.a)(S.a,{from:"/",to:"/getting-started",exact:!0}):z.z&&z.s&&null!=z.c&&z.c.accounts[z.s]?Object(c.a)(S.a,{from:"/",to:`/@${z.c.accounts[z.s].username}`,exact:!0}):z.y&&z.E?Object(c.a)(S.a,{from:"/",to:"/explore",exact:!0}):Object(c.a)(S.a,{from:"/",to:"/about",exact:!0}),a.a.createElement(ft,{ref:this.setRef,singleColumn:t,navbarUnder:n},Object(c.a)(J,{},void 0,o,Object(c.a)(Y,{path:"/getting-started",component:ce.z,content:e}),Object(c.a)(Y,{path:"/keyboard-shortcuts",component:ce.E,content:e}),Object(c.a)(Y,{path:"/about",component:ce.a,content:e}),Object(c.a)(Y,{path:"/privacy-policy",component:ce.Q,content:e}),Object(c.a)(Y,{path:["/home","/timelines/home"],component:ce.C,content:e}),Object(c.a)(Y,{path:["/public","/timelines/public"],exact:!0,component:ce.R,content:e}),Object(c.a)(Y,{path:["/public/local","/timelines/public/local"],exact:!0,component:ce.i,content:e}),Object(c.a)(Y,{path:["/conversations","/timelines/direct"],component:ce.l,content:e}),Object(c.a)(Y,{path:"/tags/:id",component:ce.B,content:e}),Object(c.a)(Y,{path:"/lists/:id",component:ce.H,content:e}),Object(c.a)(Y,{path:"/notifications",component:ce.M,content:e}),Object(c.a)(Y,{path:"/favourites",component:ce.r,content:e}),Object(c.a)(Y,{path:"/bookmarks",component:ce.g,content:e}),Object(c.a)(Y,{path:"/pinned",component:ce.P,content:e}),Object(c.a)(Y,{path:"/start",component:ce.u,content:e}),Object(c.a)(Y,{path:"/directory",component:ce.m,content:e}),Object(c.a)(Y,{path:["/explore","/search"],component:ce.q,content:e}),Object(c.a)(Y,{path:["/publish","/statuses/new"],component:ce.k,content:e}),Object(c.a)(Y,{path:["/@:acct","/accounts/:id"],exact:!0,component:ce.c,content:e}),Object(c.a)(Y,{path:"/@:acct/tagged/:tagged?",exact:!0,component:ce.c,content:e}),Object(c.a)(Y,{path:["/@:acct/with_replies","/accounts/:id/with_replies"],component:ce.c,content:e,componentParams:{withReplies:!0}}),Object(c.a)(Y,{path:["/accounts/:id/followers","/users/:acct/followers","/@:acct/followers"],component:ce.x,content:e}),Object(c.a)(Y,{path:["/accounts/:id/following","/users/:acct/following","/@:acct/following"],component:ce.y,content:e}),Object(c.a)(Y,{path:["/@:acct/media","/accounts/:id/media"],component:ce.b,content:e}),Object(c.a)(Y,{path:"/@:acct/:statusId",exact:!0,component:ce.V,content:e}),Object(c.a)(Y,{path:"/@:acct/:statusId/reblogs",component:ce.S,content:e}),Object(c.a)(Y,{path:"/@:acct/:statusId/favourites",component:ce.s,content:e}),Object(c.a)(Y,{path:"/timelines/tag/:id",component:ce.B,content:e}),Object(c.a)(Y,{path:"/timelines/list/:id",component:ce.H,content:e}),Object(c.a)(Y,{path:"/statuses/:statusId",exact:!0,component:ce.V,content:e}),Object(c.a)(Y,{path:"/statuses/:statusId/reblogs",component:ce.S,content:e}),Object(c.a)(Y,{path:"/statuses/:statusId/favourites",component:ce.s,content:e}),Object(c.a)(Y,{path:"/follow_requests",component:ce.v,content:e}),Object(c.a)(Y,{path:"/blocks",component:ce.f,content:e}),Object(c.a)(Y,{path:"/domain_blocks",component:ce.n,content:e}),Object(c.a)(Y,{path:"/followed_tags",component:ce.w,content:e}),Object(c.a)(Y,{path:"/mutes",component:ce.L,content:e}),Object(c.a)(Y,{path:"/lists",component:ce.I,content:e}),Object(c.a)(Y,{path:"/getting-started-misc",component:ce.A,content:e}),Object(c.a)(m.a,{component:V})))}}qt.contextTypes={identity:l.a.object};let Kt=Object(h.connect)((e=>({layout:e.getIn(["meta","layout"]),hasComposingText:0!==e.getIn(["compose","text"]).trim().length,hasMediaAttachments:e.getIn(["compose","media_attachments"]).size>0,canUploadMore:!e.getIn(["compose","media_attachments"]).some((e=>["audio","video"].includes(e.get("type"))))&&e.getIn(["compose","media_attachments"]).size<4,layout:e.getIn(["meta","layout"]),layout_local_setting:e.getIn(["local_settings","layout"]),isWide:e.getIn(["local_settings","stretch"]),navbarUnder:e.getIn(["local_settings","navbar_under"]),dropdownMenuIsOpen:null!==e.getIn(["dropdown_menu","openId"]),unreadNotifications:e.getIn(["notifications","unread"]),showFaviconBadge:e.getIn(["local_settings","notifications","favicon_badge"]),hicolorPrivacyIcons:e.getIn(["local_settings","hicolor_privacy_icons"]),moved:e.getIn(["accounts",z.q,"moved"])&&e.getIn(["accounts",e.getIn(["accounts",z.q,"moved"])]),firstLaunch:e.getIn(["settings","introductionVersion"],0)<void 0,username:e.getIn(["accounts",z.q,"username"])})))(Dt=Object(p.g)(Dt=Object(C.a)((Ft=class extends a.a.Component{constructor(){super(...arguments),this.state={draggingOver:!1},this.handleBeforeUnload=e=>{const{intl:t,dispatch:n,hasComposingText:s,hasMediaAttachments:a}=this.props;n(Object(N.e)()),(s||a)&&(e.returnValue=t.formatMessage(Pt.beforeUnload))},this.handleDragEnter=e=>{e.preventDefault(),this.dragTargets||(this.dragTargets=[]),-1===this.dragTargets.indexOf(e.target)&&this.dragTargets.push(e.target),e.dataTransfer&&e.dataTransfer.types.includes("Files")&&this.props.canUploadMore&&this.context.identity.signedIn&&this.setState({draggingOver:!0})},this.handleDragOver=e=>{if(this.dataTransferIsText(e.dataTransfer))return!1;e.preventDefault(),e.stopPropagation();try{e.dataTransfer.dropEffect="copy"}catch(e){}return!1},this.handleDrop=e=>{this.dataTransferIsText(e.dataTransfer)||(e.preventDefault(),this.setState({draggingOver:!1}),this.dragTargets=[],e.dataTransfer&&e.dataTransfer.files.length>=1&&this.props.canUploadMore&&this.context.identity.signedIn&&this.props.dispatch(Object(T.Ib)(e.dataTransfer.files)))},this.handleDragLeave=e=>{e.preventDefault(),e.stopPropagation(),this.dragTargets=this.dragTargets.filter((t=>t!==e.target&&this.node.contains(t))),this.dragTargets.length>0||this.setState({draggingOver:!1})},this.dataTransferIsText=e=>e&&1===Array.from(e.types).filter((e=>"text/plain"===e)).length,this.closeUploadModal=()=>{this.setState({draggingOver:!1})},this.handleServiceWorkerPostMessage=e=>{let{data:t}=e;"navigate"===t.type?this.props.history.push(t.path):console.warn("Unknown message type:",t.type)},this.handleVisibilityChange=()=>{const e=!document[this.visibilityHiddenProp];this.props.dispatch(Object(r.D)(e)),e&&this.props.dispatch(Object(N.d)({immediate:!0}))},this.handleLayoutChange=v()((()=>{this.props.dispatch(Object(k.c)())}),500,{trailing:!0}),this.handleResize=()=>{const e=Object(E.c)(this.props.layout_local_setting);e!==this.props.layout?(this.handleLayoutChange.cancel(),this.props.dispatch(Object(M.b)(e))):this.handleLayoutChange()},this.setRef=e=>{this.node=e},this.handleHotkeyNew=e=>{e.preventDefault();const t=this.node.querySelector(".compose-form__autosuggest-wrapper textarea");t&&t.focus()},this.handleHotkeySearch=e=>{e.preventDefault();const t=this.node.querySelector(".search__input");t&&t.focus()},this.handleHotkeyForceNew=e=>{this.handleHotkeyNew(e),this.props.dispatch(Object(T.Cb)())},this.handleHotkeyToggleComposeSpoilers=e=>{e.preventDefault(),this.props.dispatch(Object(T.hb)())},this.handleHotkeyFocusColumn=e=>{const t=1*e.key+1,n=this.node.querySelector(`.column:nth-child(${t})`);if(!n)return;const s=n.querySelector(".scrollable");if(s){const e=s.querySelector(".focusable");e&&(s.scrollTop>e.offsetTop&&e.scrollIntoView(!0),e.focus())}},this.handleHotkeyBack=()=>{window.history.state?this.props.history.goBack():this.props.history.push("/")},this.setHotkeysRef=e=>{this.hotkeys=e},this.handleHotkeyToggleHelp=()=>{"/keyboard-shortcuts"===this.props.location.pathname?this.props.history.goBack():this.props.history.push("/keyboard-shortcuts")},this.handleHotkeyGoToHome=()=>{this.props.history.push("/home")},this.handleHotkeyGoToNotifications=()=>{this.props.history.push("/notifications")},this.handleHotkeyGoToLocal=()=>{this.props.history.push("/public/local")},this.handleHotkeyGoToFederated=()=>{this.props.history.push("/public")},this.handleHotkeyGoToDirect=()=>{this.props.history.push("/conversations")},this.handleHotkeyGoToStart=()=>{this.props.history.push("/getting-started")},this.handleHotkeyGoToFavourites=()=>{this.props.history.push("/favourites")},this.handleHotkeyGoToPinned=()=>{this.props.history.push("/pinned")},this.handleHotkeyGoToProfile=()=>{this.props.history.push(`/@${this.props.username}`)},this.handleHotkeyGoToBlocked=()=>{this.props.history.push("/blocks")},this.handleHotkeyGoToMuted=()=>{this.props.history.push("/mutes")},this.handleHotkeyGoToRequests=()=>{this.props.history.push("/follow_requests")}}componentDidMount(){const{signedIn:e}=this.context.identity;window.addEventListener("beforeunload",this.handleBeforeUnload,!1),window.addEventListener("resize",this.handleResize,{passive:!0}),document.addEventListener("dragenter",this.handleDragEnter,!1),document.addEventListener("dragover",this.handleDragOver,!1),document.addEventListener("drop",this.handleDrop,!1),document.addEventListener("dragleave",this.handleDragLeave,!1),document.addEventListener("dragend",this.handleDragEnd,!1),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerPostMessage),this.favicon=new _t.a({animation:"none"}),e&&this.props.firstLaunch&&(this.context.router.history.replace("/start"),this.props.dispatch((void 0)())),e&&(this.props.dispatch(Object(N.c)()),this.props.dispatch(Object(I.v)()),this.props.dispatch(Object(r.x)()),setTimeout((()=>this.props.dispatch(Object(w.l)())),3e3)),this.hotkeys.__mousetrap__.stopCallback=(e,t)=>["TEXTAREA","SELECT","INPUT"].includes(t.tagName),void 0!==document.hidden?(this.visibilityHiddenProp="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidden?(this.visibilityHiddenProp="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.visibilityHiddenProp="webkitHidden",this.visibilityChange="webkitvisibilitychange"),void 0!==this.visibilityChange&&(document.addEventListener(this.visibilityChange,this.handleVisibilityChange,!1),this.handleVisibilityChange())}componentWillReceiveProps(e){if(e.layout_local_setting!==this.props.layout_local_setting){const t=Object(E.c)(e.layout_local_setting);t!==this.props.layout?(this.handleLayoutChange.cancel(),this.props.dispatch(Object(M.b)(t))):this.handleLayoutChange()}}componentDidUpdate(e){if((this.props.unreadNotifications!=e.unreadNotifications||this.props.showFaviconBadge!=e.showFaviconBadge)&&this.favicon)try{this.favicon.badge(this.props.showFaviconBadge?this.props.unreadNotifications:0)}catch(e){console.error(e)}}componentWillUnmount(){void 0!==this.visibilityChange&&document.removeEventListener(this.visibilityChange,this.handleVisibilityChange),window.removeEventListener("beforeunload",this.handleBeforeUnload),window.removeEventListener("resize",this.handleResize),document.removeEventListener("dragenter",this.handleDragEnter),document.removeEventListener("dragover",this.handleDragOver),document.removeEventListener("drop",this.handleDrop),document.removeEventListener("dragleave",this.handleDragLeave),document.removeEventListener("dragend",this.handleDragEnd)}render(){const{draggingOver:e}=this.state,{children:t,isWide:n,navbarUnder:s,location:o,dropdownMenuIsOpen:i,layout:r,moved:u}=this.props,l=W()("ui",(e=>{switch(e){case"single":return"single-column";case"multiple":return"multi-columns";default:return"auto-columns"}})(r),{wide:n,"system-font":this.props.systemFontUi,"navbar-under":s,"hicolor-privacy-icons":this.props.hicolorPrivacyIcons}),d={help:this.handleHotkeyToggleHelp,new:this.handleHotkeyNew,search:this.handleHotkeySearch,forceNew:this.handleHotkeyForceNew,toggleComposeSpoilers:this.handleHotkeyToggleComposeSpoilers,focusColumn:this.handleHotkeyFocusColumn,back:this.handleHotkeyBack,goToHome:this.handleHotkeyGoToHome,goToNotifications:this.handleHotkeyGoToNotifications,goToLocal:this.handleHotkeyGoToLocal,goToFederated:this.handleHotkeyGoToFederated,goToDirect:this.handleHotkeyGoToDirect,goToStart:this.handleHotkeyGoToStart,goToFavourites:this.handleHotkeyGoToFavourites,goToPinned:this.handleHotkeyGoToPinned,goToProfile:this.handleHotkeyGoToProfile,goToBlocked:this.handleHotkeyGoToBlocked,goToMuted:this.handleHotkeyGoToMuted,goToRequests:this.handleHotkeyGoToRequests};return a.a.createElement(Mt.HotKeys,{keyMap:Ht,handlers:d,ref:this.setHotkeysRef,attach:window,focused:!0},a.a.createElement("div",{className:l,ref:this.setRef,style:{pointerEvents:i?"none":null}},u&&Object(c.a)("div",{className:"flash-message alert"},void 0,Object(c.a)(p.b,{id:"moved_to_warning",defaultMessage:"This account is marked as moved to {moved_to_link}, and may thus not accept new follows.",values:{moved_to_link:Object(c.a)(se.a,{href:u.get("url"),to:`/@${u.get("acct")}`},void 0,"@",u.get("acct"))}})),Object(c.a)(Ut,{}),Object(c.a)(qt,{location:o,mobile:"mobile"===r||"single-column"===r,navbarUnder:s},void 0,t),"mobile"!==r&&Object(c.a)(kt,{}),Object(c.a)(O.a,{}),Object(c.a)(y.a,{className:"loading-bar"}),Object(c.a)(j.a,{}),Object(c.a)(ne,{active:e,onClose:this.closeUploadModal})))}},Ft.contextTypes={identity:l.a.object.isRequired},Dt=Ft))||Dt)||Dt)||Dt;var $t=n(547),Bt=n(178),Wt=n(307),zt=n(1335);class Gt extends a.a.PureComponent{constructor(){super(...arguments),this.state={hasError:!1,errorMessage:void 0,stackTrace:void 0,mappedStackTrace:void 0,componentStack:void 0}}componentDidCatch(e,t){this.setState({hasError:!0,errorMessage:e.toString(),stackTrace:e.stack,componentStack:t&&t.componentStack,mappedStackTrace:void 0}),R.a.fromError(e).then((e=>{this.setState({mappedStackTrace:e.map((e=>e.toString())).join("\n")})})).catch((()=>{this.setState({mappedStackTrace:void 0})}))}handleReload(e){e.preventDefault(),window.location.reload()}render(){const{hasError:e,errorMessage:t,stackTrace:n,mappedStackTrace:s,componentStack:a}=this.state;if(!e)return this.props.children;const o=t&&t.includes("NotFoundError");let i="";n&&(i+="Stack trace\n-----------\n\n```\n"+t+"\n"+n.toString()+"\n```"),s&&(i+="Mapped stack trace\n-----------\n\n```\n"+t+"\n"+s.toString()+"\n```"),a&&(i&&(i+="\n\n\n"),i+="React component stack\n---------------------\n\n```\n"+a.toString()+"\n```");let r=z.A;return z.A.match(/^https:\/\/github\.com\/[^/]+\/[^/]+\/?$/)&&(r=z.A+"/issues"),Object(c.a)("div",{tabIndex:"-1"},void 0,Object(c.a)("div",{className:"error-boundary"},void 0,Object(c.a)("h1",{},void 0,Object(c.a)(p.b,{id:"web_app_crash.title",defaultMessage:"We're sorry, but something went wrong with the Mastodon app."})),Object(c.a)("p",{},void 0,Object(c.a)(p.b,{id:"web_app_crash.content",defaultMessage:"You could try any of the following:"})),Object(c.a)("ul",{},void 0,o&&Object(c.a)("li",{},void 0,Object(c.a)(p.b,{id:"web_app_crash.disable_addons",defaultMessage:"Disable browser add-ons or built-in translation tools"})),Object(c.a)("li",{},void 0,Object(c.a)(p.b,{id:"web_app_crash.report_issue",defaultMessage:"Report a bug in the {issuetracker}",values:{issuetracker:Object(c.a)("a",{href:r,rel:"noopener noreferrer",target:"_blank"},void 0,Object(c.a)(p.b,{id:"web_app_crash.issue_tracker",defaultMessage:"issue tracker"}))}}),""!==i&&Object(c.a)("details",{},void 0,Object(c.a)("summary",{},void 0,Object(c.a)(p.b,{id:"web_app_crash.debug_info",defaultMessage:"Debug information"})),Object(c.a)("textarea",{className:"web_app_crash-stacktrace",value:i,rows:"10",readOnly:!0}))),Object(c.a)("li",{},void 0,Object(c.a)(p.b,{id:"web_app_crash.reload_page",defaultMessage:"{reload} the current page",values:{reload:Object(c.a)("a",{href:"#",onClick:this.handleReload},void 0,Object(c.a)(p.b,{id:"web_app_crash.reload",defaultMessage:"Reload"}))}})),void 0!==Ge.c&&Object(c.a)("li",{},void 0,Object(c.a)(p.b,{id:"web_app_crash.change_your_settings",defaultMessage:"Change your {settings}",values:{settings:Object(c.a)("a",{href:Ge.c},void 0,Object(c.a)(p.b,{id:"web_app_crash.settings",defaultMessage:"settings"}))}})))),Object(c.a)(d.a,{},void 0,Object(c.a)("meta",{name:"robots",content:"noindex"})))}}var Qt=n(3);const{localeData:Vt,messages:Xt}=Object(Qt.getLocale)();Object(p.e)(Vt);const Jt=z.D,Yt=Object(b.a)(),Zt=Object(Bt.b)(z.c);Yt.dispatch(Zt),Yt.dispatch(Object(Wt.d)()),z.c.meta.me&&Yt.dispatch(Object($t.b)());class en extends a.a.PureComponent{constructor(){var e;super(...arguments),this.identity={signedIn:!!(e=z.c).meta.me,accountId:e.meta.me,disabledAccountId:e.meta.disabled_account_id,accessToken:e.meta.access_token,permissions:e.role?e.role.permissions:0}}getChildContext(){return{identity:this.identity}}componentDidMount(){this.identity.signedIn&&(this.disconnect=Yt.dispatch(Object(zt.f)()))}componentWillUnmount(){this.disconnect&&(this.disconnect(),this.disconnect=null)}shouldUpdateScroll(e,t){var n;let{location:s}=t;return!(null!=(n=s.state)&&n.mastodonModalKey)}render(){const{locale:e}=this.props;return Object(c.a)(p.d,{locale:e,messages:Xt},void 0,Object(c.a)(h.Provider,{store:Yt},void 0,Object(c.a)(Gt,{},void 0,Object(c.a)(g.a,{},void 0,Object(c.a)(f.b,{shouldUpdateScroll:this.shouldUpdateScroll},void 0,Object(c.a)(m.a,{path:"/",component:Kt}))),Object(c.a)(d.a,{defaultTitle:Jt,titleTemplate:`%s - ${Jt}`}))))}}en.childContextTypes={identity:l.a.shape({signedIn:l.a.bool.isRequired,accountId:l.a.string,disabledAccountId:l.a.string,accessToken:l.a.string}).isRequired};var tn=n(43);const nn=n(1614);t.default=function(){return nn.start("main()"),Object(tn.default)((async()=>{const e=document.getElementById("mastodon"),t=JSON.parse(e.getAttribute("data-props"));if(i.a.render(a.a.createElement(en,t),e),Yt.dispatch(Object(r.H)()),z.q&&"serviceWorker"in navigator){const{Workbox:e}=await n.e(2).then(n.bind(null,1646)),t=new e("/sw.js");let s;try{s=await t.register()}catch(e){console.error(e)}if(s){const e=await Promise.resolve().then(n.bind(null,360));Yt.dispatch(e.register())}}nn.stop("main()")}))}},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(1),a=n.n(s),o=n(10),i=n.n(o);class r extends a.a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{this.props.disabled||this.props.onClick(e)},this.setRef=e=>{this.node=e}}focus(){this.node.focus()}render(){let e={className:i()("button",this.props.className,{"button-secondary":this.props.secondary,"button--block":this.props.block}),disabled:this.props.disabled,onClick:this.handleClick,ref:this.setRef};return this.props.title&&(e.title=this.props.title),a.a.createElement("button",e,this.props.text||this.props.children)}}},157:function(e,t,n){"use strict";function s(){return Promise.all([n.e(1),n.e(77)]).then(n.bind(null,1204))}function a(){return Promise.all([n.e(1),n.e(73)]).then(n.bind(null,1269))}function o(){return Promise.all([n.e(1),n.e(100)]).then(n.bind(null,1260))}function i(){return Promise.all([n.e(1),n.e(90)]).then(n.bind(null,1270))}function r(){return Promise.all([n.e(1),n.e(104)]).then(n.bind(null,1276))}function c(){return Promise.all([n.e(1),n.e(71)]).then(n.bind(null,1277))}function u(){return Promise.all([n.e(1),n.e(89)]).then(n.bind(null,1278))}function l(){return Promise.all([n.e(1),n.e(93)]).then(n.bind(null,1205))}function d(){return Promise.all([n.e(1),n.e(94)]).then(n.bind(null,1206))}function p(){return Promise.all([n.e(1),n.e(92)]).then(n.bind(null,1274))}function h(){return Promise.all([n.e(1),n.e(102)]).then(n.bind(null,1279))}function g(){return Promise.all([n.e(1),n.e(74)]).then(n.bind(null,1262))}function m(){return Promise.all([n.e(1),n.e(108)]).then(n.bind(null,1271))}function f(){return Promise.all([n.e(1),n.e(87)]).then(n.bind(null,1207))}function b(){return Promise.all([n.e(1),n.e(91)]).then(n.bind(null,1208))}function _(){return Promise.all([n.e(1),n.e(103)]).then(n.bind(null,1209))}function v(){return Promise.all([n.e(1),n.e(67)]).then(n.bind(null,1210))}function O(){return Promise.all([n.e(1),n.e(66)]).then(n.bind(null,1292))}function y(){return Promise.all([n.e(1),n.e(84)]).then(n.bind(null,1211))}function j(){return Promise.all([n.e(1),n.e(85)]).then(n.bind(null,1212))}function S(){return Promise.all([n.e(1),n.e(105)]).then(n.bind(null,1213))}function C(){return Promise.all([n.e(1),n.e(80)]).then(n.bind(null,1214))}function E(){return Promise.all([n.e(1),n.e(82)]).then(n.bind(null,1280))}function T(){return Promise.all([n.e(1),n.e(79)]).then(n.bind(null,1216))}function I(){return Promise.all([n.e(1),n.e(83)]).then(n.bind(null,1217))}function w(){return Promise.all([n.e(1),n.e(70)]).then(n.bind(null,1218))}function k(){return Promise.all([n.e(1),n.e(69)]).then(n.bind(null,1219))}function M(){return Promise.all([n.e(1),n.e(75)]).then(n.bind(null,1281))}function N(){return Promise.all([n.e(1),n.e(99)]).then(n.bind(null,1220))}function x(){return Promise.all([n.e(1),n.e(101)]).then(n.bind(null,1221))}function L(){return n.e(98).then(n.bind(null,1222))}function A(){return Promise.all([n.e(1),n.e(68)]).then(n.bind(null,1223))}function R(){return Promise.all([n.e(1),n.e(106)]).then(n.bind(null,1263))}function U(){return n.e(107).then(n.bind(null,1267))}function D(){return n.e(1).then(n.bind(null,1201))}function F(){return Promise.resolve().then(n.bind(null,179))}function P(){return Promise.resolve().then(n.bind(null,305))}function H(){return n.e(76).then(n.bind(null,1224))}function q(){return Promise.all([n.e(1),n.e(88)]).then(n.bind(null,1225))}function K(){return Promise.all([n.e(1),n.e(49)]).then(n.bind(null,1282))}function $(){return n.e(334).then(n.t.bind(null,856,7))}function B(){return Promise.all([n.e(1),n.e(47)]).then(n.bind(null,1226))}function W(){return Promise.all([n.e(1),n.e(48)]).then(n.bind(null,1293))}function z(){return Promise.all([n.e(1),n.e(72)]).then(n.bind(null,1227))}function G(){return n.e(81).then(n.bind(null,1283))}function Q(){return Promise.all([n.e(1),n.e(78)]).then(n.bind(null,1265))}function V(){return n.e(96).then(n.bind(null,1228))}function X(){return Promise.all([n.e(1),n.e(97)]).then(n.bind(null,1229))}function J(){return n.e(95).then(n.bind(null,1230))}function Y(){return Promise.all([n.e(1),n.e(46)]).then(n.bind(null,1231))}function Z(){return Promise.all([n.e(1),n.e(50)]).then(n.bind(null,1232))}n.d(t,"p",(function(){return s})),n.d(t,"k",(function(){return a})),n.d(t,"M",(function(){return o})),n.d(t,"C",(function(){return i})),n.d(t,"R",(function(){return r})),n.d(t,"i",(function(){return c})),n.d(t,"B",(function(){return u})),n.d(t,"H",(function(){return l})),n.d(t,"I",(function(){return d})),n.d(t,"G",(function(){return p})),n.d(t,"O",(function(){return h})),n.d(t,"l",(function(){return g})),n.d(t,"V",(function(){return m})),n.d(t,"z",(function(){return f})),n.d(t,"E",(function(){return b})),n.d(t,"P",(function(){return _})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return O})),n.d(t,"x",(function(){return y})),n.d(t,"y",(function(){return j})),n.d(t,"S",(function(){return S})),n.d(t,"s",(function(){return C})),n.d(t,"v",(function(){return E})),n.d(t,"r",(function(){return T})),n.d(t,"w",(function(){return I})),n.d(t,"g",(function(){return w})),n.d(t,"f",(function(){return k})),n.d(t,"n",(function(){return M})),n.d(t,"L",(function(){return N})),n.d(t,"N",(function(){return x})),n.d(t,"K",(function(){return L})),n.d(t,"e",(function(){return A})),n.d(t,"T",(function(){return R})),n.d(t,"U",(function(){return U})),n.d(t,"J",(function(){return D})),n.d(t,"Y",(function(){return F})),n.d(t,"d",(function(){return P})),n.d(t,"o",(function(){return H})),n.d(t,"A",(function(){return q})),n.d(t,"F",(function(){return K})),n.d(t,"X",(function(){return $})),n.d(t,"m",(function(){return B})),n.d(t,"u",(function(){return W})),n.d(t,"j",(function(){return z})),n.d(t,"t",(function(){return G})),n.d(t,"q",(function(){return Q})),n.d(t,"D",(function(){return V})),n.d(t,"W",(function(){return X})),n.d(t,"h",(function(){return J})),n.d(t,"a",(function(){return Y})),n.d(t,"Q",(function(){return Z}))},16:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"a",(function(){return f})),n.d(t,"i",(function(){return v})),n.d(t,"f",(function(){return j})),n.d(t,"m",(function(){return E})),n.d(t,"g",(function(){return w})),n.d(t,"n",(function(){return N})),n.d(t,"s",(function(){return L})),n.d(t,"t",(function(){return A})),n.d(t,"r",(function(){return R})),n.d(t,"p",(function(){return U})),n.d(t,"q",(function(){return D})),n.d(t,"o",(function(){return F})),n.d(t,"y",(function(){return P})),n.d(t,"z",(function(){return H})),n.d(t,"x",(function(){return q})),n.d(t,"v",(function(){return K})),n.d(t,"w",(function(){return $})),n.d(t,"u",(function(){return B})),n.d(t,"P",(function(){return z})),n.d(t,"E",(function(){return Q})),n.d(t,"F",(function(){return V})),n.d(t,"D",(function(){return X})),n.d(t,"B",(function(){return J})),n.d(t,"C",(function(){return Y})),n.d(t,"A",(function(){return Z})),n.d(t,"G",(function(){return te})),n.d(t,"H",(function(){return ae})),n.d(t,"N",(function(){return ie})),n.d(t,"O",(function(){return re})),n.d(t,"M",(function(){return ce})),n.d(t,"L",(function(){return ue})),n.d(t,"K",(function(){return le})),n.d(t,"J",(function(){return de})),n.d(t,"I",(function(){return pe})),n.d(t,"h",(function(){return he})),n.d(t,"X",(function(){return ge})),n.d(t,"fb",(function(){return me})),n.d(t,"eb",(function(){return ve})),n.d(t,"mb",(function(){return Oe})),n.d(t,"R",(function(){return ye})),n.d(t,"lb",(function(){return je})),n.d(t,"gb",(function(){return Se})),n.d(t,"nb",(function(){return Ce})),n.d(t,"Z",(function(){return Ee})),n.d(t,"V",(function(){return Te})),n.d(t,"ab",(function(){return Ie})),n.d(t,"W",(function(){return we})),n.d(t,"db",(function(){return ke})),n.d(t,"Y",(function(){return Me})),n.d(t,"U",(function(){return Ne})),n.d(t,"Q",(function(){return xe})),n.d(t,"ib",(function(){return Le})),n.d(t,"hb",(function(){return Ae})),n.d(t,"ob",(function(){return Re})),n.d(t,"kb",(function(){return Ue})),n.d(t,"bb",(function(){return De})),n.d(t,"cb",(function(){return Fe})),n.d(t,"T",(function(){return Pe})),n.d(t,"S",(function(){return He})),n.d(t,"jb",(function(){return qe}));var s=n(8),a=n(19);const o="ACCOUNT_FETCH_REQUEST",i="ACCOUNT_FETCH_SUCCESS",r="ACCOUNT_FETCH_FAIL",c="ACCOUNT_LOOKUP_FAIL",u="ACCOUNT_FOLLOW_REQUEST",l="ACCOUNT_FOLLOW_SUCCESS",d="ACCOUNT_FOLLOW_FAIL",p="ACCOUNT_UNFOLLOW_REQUEST",h="ACCOUNT_UNFOLLOW_SUCCESS",g="ACCOUNT_UNFOLLOW_FAIL",m="ACCOUNT_BLOCK_REQUEST",f="ACCOUNT_BLOCK_SUCCESS",b="ACCOUNT_BLOCK_FAIL",_="ACCOUNT_UNBLOCK_REQUEST",v="ACCOUNT_UNBLOCK_SUCCESS",O="ACCOUNT_UNBLOCK_FAIL",y="ACCOUNT_MUTE_REQUEST",j="ACCOUNT_MUTE_SUCCESS",S="ACCOUNT_MUTE_FAIL",C="ACCOUNT_UNMUTE_REQUEST",E="ACCOUNT_UNMUTE_SUCCESS",T="ACCOUNT_UNMUTE_FAIL",I="ACCOUNT_PIN_REQUEST",w="ACCOUNT_PIN_SUCCESS",k="ACCOUNT_PIN_FAIL",M="ACCOUNT_UNPIN_REQUEST",N="ACCOUNT_UNPIN_SUCCESS",x="ACCOUNT_UNPIN_FAIL",L="FOLLOWERS_FETCH_REQUEST",A="FOLLOWERS_FETCH_SUCCESS",R="FOLLOWERS_FETCH_FAIL",U="FOLLOWERS_EXPAND_REQUEST",D="FOLLOWERS_EXPAND_SUCCESS",F="FOLLOWERS_EXPAND_FAIL",P="FOLLOWING_FETCH_REQUEST",H="FOLLOWING_FETCH_SUCCESS",q="FOLLOWING_FETCH_FAIL",K="FOLLOWING_EXPAND_REQUEST",$="FOLLOWING_EXPAND_SUCCESS",B="FOLLOWING_EXPAND_FAIL",W="RELATIONSHIPS_FETCH_REQUEST",z="RELATIONSHIPS_FETCH_SUCCESS",G="RELATIONSHIPS_FETCH_FAIL",Q="FOLLOW_REQUESTS_FETCH_REQUEST",V="FOLLOW_REQUESTS_FETCH_SUCCESS",X="FOLLOW_REQUESTS_FETCH_FAIL",J="FOLLOW_REQUESTS_EXPAND_REQUEST",Y="FOLLOW_REQUESTS_EXPAND_SUCCESS",Z="FOLLOW_REQUESTS_EXPAND_FAIL",ee="FOLLOW_REQUEST_AUTHORIZE_REQUEST",te="FOLLOW_REQUEST_AUTHORIZE_SUCCESS",ne="FOLLOW_REQUEST_AUTHORIZE_FAIL",se="FOLLOW_REQUEST_REJECT_REQUEST",ae="FOLLOW_REQUEST_REJECT_SUCCESS",oe="FOLLOW_REQUEST_REJECT_FAIL",ie="PINNED_ACCOUNTS_FETCH_REQUEST",re="PINNED_ACCOUNTS_FETCH_SUCCESS",ce="PINNED_ACCOUNTS_FETCH_FAIL",ue="PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_READY",le="PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR",de="PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE",pe="PINNED_ACCOUNTS_EDITOR_RESET",he="ACCOUNT_REVEAL";function ge(e){return(t,n)=>{t(ke([e])),null===n().getIn(["accounts",e],null)&&(t(function(e){return{type:o,id:e}}(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}`).then((e=>{t(Object(a.g)(e.data))})).then((()=>{t({type:i})})).catch((n=>{t(function(e,t){return{type:r,id:e,error:t,skipAlert:!0}}(e,n))})))}}const me=e=>(t,n)=>{t(fe(e)),Object(s.a)(n).get("/api/v1/accounts/lookup",{params:{acct:e}}).then((e=>{t(ke([e.data.id])),t(Object(a.g)(e.data)),t(be())})).catch((n=>{t(_e(e,n))}))},fe=e=>({type:"ACCOUNT_LOOKUP_REQUEST",acct:e}),be=()=>({type:"ACCOUNT_LOOKUP_SUCCESS"}),_e=(e,t)=>({type:c,acct:e,error:t,skipAlert:!0});function ve(e,t){return void 0===t&&(t={reblogs:!0}),(n,a)=>{const o=a().getIn(["relationships",e,"following"]),i=a().getIn(["accounts",e,"locked"],!1);n(function(e,t){return{type:u,id:e,locked:t,skipLoading:!0}}(e,i)),Object(s.a)(a).post(`/api/v1/accounts/${e}/follow`,t).then((e=>{n(function(e,t){return{type:l,relationship:e,alreadyFollowing:t,skipLoading:!0}}(e.data,o))})).catch((e=>{n(function(e,t){return{type:d,error:e,locked:t,skipLoading:!0}}(e,i))}))}}function Oe(e){return(t,n)=>{t(function(e){return{type:p,id:e,skipLoading:!0}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/unfollow`).then((e=>{var s,a;t((s=e.data,a=n().get("statuses"),{type:h,relationship:s,statuses:a,skipLoading:!0}))})).catch((e=>{t(function(e){return{type:g,error:e,skipLoading:!0}}(e))}))}}function ye(e){return(t,n)=>{t(function(e){return{type:m,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/block`).then((e=>{var s,a;t((s=e.data,a=n().get("statuses"),{type:f,relationship:s,statuses:a}))})).catch((n=>{t(function(e){return{type:b,error:e}}(e))}))}}function je(e){return(t,n)=>{t(function(e){return{type:_,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/unblock`).then((e=>{var n;t((n=e.data,{type:v,relationship:n}))})).catch((n=>{t(function(e){return{type:O,error:e}}(e))}))}}function Se(e,t,n){return void 0===n&&(n=0),(a,o)=>{a(function(e){return{type:y,id:e}}(e)),Object(s.a)(o).post(`/api/v1/accounts/${e}/mute`,{notifications:t,duration:n}).then((e=>{var t,n;a((t=e.data,n=o().get("statuses"),{type:j,relationship:t,statuses:n}))})).catch((t=>{a(function(e){return{type:S,error:e}}(e))}))}}function Ce(e){return(t,n)=>{t(function(e){return{type:C,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/unmute`).then((e=>{var n;t((n=e.data,{type:E,relationship:n}))})).catch((n=>{t(function(e){return{type:T,error:e}}(e))}))}}function Ee(e){return(t,n)=>{t(function(e){return{type:L,id:e}}(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}/followers`).then((n=>{const o=Object(s.b)(n).refs.find((e=>"next"===e.rel));t(Object(a.h)(n.data)),t(function(e,t,n){return{type:A,id:e,accounts:t,next:n}}(e,n.data,o?o.uri:null)),t(ke(n.data.map((e=>e.id))))})).catch((n=>{t(function(e,t){return{type:R,id:e,error:t,skipNotFound:!0}}(e,n))}))}}function Te(e){return(t,n)=>{const o=n().getIn(["user_lists","followers",e,"next"]);null!==o&&(t(function(e){return{type:U,id:e}}(e)),Object(s.a)(n).get(o).then((n=>{const o=Object(s.b)(n).refs.find((e=>"next"===e.rel));t(Object(a.h)(n.data)),t(function(e,t,n){return{type:D,id:e,accounts:t,next:n}}(e,n.data,o?o.uri:null)),t(ke(n.data.map((e=>e.id))))})).catch((n=>{t(function(e,t){return{type:F,id:e,error:t}}(e,n))})))}}function Ie(e){return(t,n)=>{t(function(e){return{type:P,id:e}}(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}/following`).then((n=>{const o=Object(s.b)(n).refs.find((e=>"next"===e.rel));t(Object(a.h)(n.data)),t(function(e,t,n){return{type:H,id:e,accounts:t,next:n}}(e,n.data,o?o.uri:null)),t(ke(n.data.map((e=>e.id))))})).catch((n=>{t(function(e,t){return{type:q,id:e,error:t,skipNotFound:!0}}(e,n))}))}}function we(e){return(t,n)=>{const o=n().getIn(["user_lists","following",e,"next"]);null!==o&&(t(function(e){return{type:K,id:e}}(e)),Object(s.a)(n).get(o).then((n=>{const o=Object(s.b)(n).refs.find((e=>"next"===e.rel));t(Object(a.h)(n.data)),t(function(e,t,n){return{type:$,id:e,accounts:t,next:n}}(e,n.data,o?o.uri:null)),t(ke(n.data.map((e=>e.id))))})).catch((n=>{t(function(e,t){return{type:B,id:e,error:t}}(e,n))})))}}function ke(e){return(t,n)=>{const a=n(),o=a.get("relationships"),i=e.filter((e=>null===o.get(e,null)));!a.getIn(["meta","me"])||0===i.length||(t({type:W,ids:i,skipLoading:!0}),Object(s.a)(n).get(`/api/v1/accounts/relationships?${i.map((e=>`id[]=${e}`)).join("&")}`).then((e=>{var n;t((n=e.data,{type:z,relationships:n,skipLoading:!0}))})).catch((e=>{t(function(e){return{type:G,error:e,skipLoading:!0,skipNotFound:!0}}(e))})))}}function Me(){return(e,t)=>{e({type:Q}),Object(s.a)(t).get("/api/v1/follow_requests").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.h)(t.data)),e(function(e,t){return{type:V,accounts:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>e(function(e){return{type:X,error:e}}(t))))}}function Ne(){return(e,t)=>{const n=t().getIn(["user_lists","follow_requests","next"]);null!==n&&(e({type:J}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.h)(t.data)),e(function(e,t){return{type:Y,accounts:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>e(function(e){return{type:Z,error:e}}(t)))))}}function xe(e){return(t,n)=>{t(function(e){return{type:ee,id:e}}(e)),Object(s.a)(n).post(`/api/v1/follow_requests/${e}/authorize`).then((()=>t(function(e){return{type:te,id:e}}(e)))).catch((n=>t(function(e,t){return{type:ne,id:e,error:t}}(e,n))))}}function Le(e){return(t,n)=>{t(function(e){return{type:se,id:e}}(e)),Object(s.a)(n).post(`/api/v1/follow_requests/${e}/reject`).then((()=>t(function(e){return{type:ae,id:e}}(e)))).catch((n=>t(function(e,t){return{type:oe,id:e,error:t}}(e,n))))}}function Ae(e){return(t,n)=>{t(function(e){return{type:I,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/pin`).then((e=>{var n;t((n=e.data,{type:w,relationship:n}))})).catch((e=>{t(function(e){return{type:k,error:e}}(e))}))}}function Re(e){return(t,n)=>{t(function(e){return{type:M,id:e}}(e)),Object(s.a)(n).post(`/api/v1/accounts/${e}/unpin`).then((e=>{var n;t((n=e.data,{type:N,relationship:n}))})).catch((e=>{t(function(e){return{type:x,error:e}}(e))}))}}const Ue=e=>({type:he,id:e});function De(){return(e,t)=>{e({type:ie}),Object(s.a)(t).get("/api/v1/endorsements",{params:{limit:0}}).then((t=>{var n,s;e(Object(a.h)(t.data)),e((n=t.data,{type:re,accounts:n,next:s}))})).catch((t=>e({type:ce,error:t})))}}function Fe(e){return(t,n)=>{const o={q:e,resolve:!1,limit:4,following:!0};Object(s.a)(n).get("/api/v1/accounts/search",{params:o}).then((n=>{var s,o;t(Object(a.h)(n.data)),t((s=e,o=n.data,{type:ue,query:s,accounts:o}))}))}}function Pe(){return{type:le}}function He(e){return{type:de,value:e}}function qe(){return{type:pe}}},1606:function(e,t,n){var s,a;a=function(e){"use strict";e=e||{};var t,n,s,a,o,i,r,c,u,l,d,p,h,g,m,f,b={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1,dataUrl:!1,win:window};(h={}).ff="undefined"!=typeof InstallTrigger,h.chrome=!!window.chrome,h.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0,h.ie=!1,h.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,h.supported=h.chrome||h.ff||h.opera;var _=[];d=function(){},c=p=!1;var v={ready:function(){c=!0,v.reset(),d()},reset:function(){c&&(_=[],u=!1,l=!1,i.clearRect(0,0,a,s),i.drawImage(r,0,0,a,s),S.setIcon(o),window.clearTimeout(g),window.clearTimeout(m))},start:function(){if(c&&!l&&_.length>0){l=!0;var e=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach((function(e){e in _[0].options&&(t[e]=_[0].options[e])})),T.run(_[0].options,(function(){u=_[0],l=!1,_.length>0&&(_.shift(),v.start())}),!1)};u?T.run(u.options,(function(){e()}),!0):e()}}},O={},y=function(e){return e.n="number"==typeof e.n?Math.abs(0|e.n):e.n,e.x=a*e.x,e.y=s*e.y,e.w=a*e.w,e.h=s*e.h,e.len=(""+e.n).length,e};function j(e){if(e.paused||e.ended||p)return!1;try{i.clearRect(0,0,a,s),i.drawImage(e,0,0,a,s)}catch(e){}m=setTimeout((function(){j(e)}),T.duration),S.setIcon(o)}O.circle=function(e){var n=!1;2===(e=y(e)).len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,n=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,n=!0),i.clearRect(0,0,a,s),i.drawImage(r,0,0,a,s),i.beginPath(),i.font=t.fontStyle+" "+Math.floor(e.h*(e.n>99?.85:1))+"px "+t.fontFamily,i.textAlign="center",n?(i.moveTo(e.x+e.w/2,e.y),i.lineTo(e.x+e.w-e.h/2,e.y),i.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.h/2),i.lineTo(e.x+e.w,e.y+e.h-e.h/2),i.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.h/2,e.y+e.h),i.lineTo(e.x+e.h/2,e.y+e.h),i.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.h/2),i.lineTo(e.x,e.y+e.h/2),i.quadraticCurveTo(e.x,e.y,e.x+e.h/2,e.y)):i.arc(e.x+e.w/2,e.y+e.h/2,e.h/2,0,2*Math.PI),i.fillStyle="rgba("+t.bgColor.r+","+t.bgColor.g+","+t.bgColor.b+","+e.o+")",i.fill(),i.closePath(),i.beginPath(),i.stroke(),i.fillStyle="rgba("+t.textColor.r+","+t.textColor.g+","+t.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?i.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):i.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),i.closePath()},O.rectangle=function(e){2===(e=y(e)).len?(e.x=e.x-.4*e.w,e.w=1.4*e.w):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w),i.clearRect(0,0,a,s),i.drawImage(r,0,0,a,s),i.beginPath(),i.font=t.fontStyle+" "+Math.floor(e.h*(e.n>99?.9:1))+"px "+t.fontFamily,i.textAlign="center",i.fillStyle="rgba("+t.bgColor.r+","+t.bgColor.g+","+t.bgColor.b+","+e.o+")",i.fillRect(e.x,e.y,e.w,e.h),i.fillStyle="rgba("+t.textColor.r+","+t.textColor.g+","+t.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?i.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):i.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),i.closePath()};var S={};function C(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,s){return t+t+n+n+s+s}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!!t&&{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}}function E(e,t){var n,s={};for(n in e)s[n]=e[n];for(n in t)s[n]=t[n];return s}S.getIcon=function(){var e=!1;return t.element?e=t.element:t.elementId?(e=f.getElementById(t.elementId)).setAttribute("href",e.getAttribute("src")):(e=function(){for(var e=f.getElementsByTagName("head")[0].getElementsByTagName("link"),t=e.length-1;t>=0;t--)if(/(^|\s)icon(\s|$)/i.test(e[t].getAttribute("rel")))return e[t];return!1}(),!1===e&&((e=f.createElement("link")).setAttribute("rel","icon"),f.getElementsByTagName("head")[0].appendChild(e))),e.setAttribute("type","image/png"),e},S.setIcon=function(e){var s=e.toDataURL("image/png");if(t.dataUrl&&t.dataUrl(s),t.element)t.element.setAttribute("href",s),t.element.setAttribute("src",s);else if(t.elementId){var a=f.getElementById(t.elementId);a.setAttribute("href",s),a.setAttribute("src",s)}else if(h.ff||h.opera){var o=n;n=f.createElement("link"),h.opera&&n.setAttribute("rel","icon"),n.setAttribute("rel","icon"),n.setAttribute("type","image/png"),f.getElementsByTagName("head")[0].appendChild(n),n.setAttribute("href",s),o.parentNode&&o.parentNode.removeChild(o)}else n.setAttribute("href",s)};var T={duration:40,types:{}};return T.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],T.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],T.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],T.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],T.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],T.run=function(e,n,s,a){var i=T.types[f.hidden||f.msHidden||f.webkitHidden||f.mozHidden?"none":t.animation];a=!0===s?void 0!==a?a:i.length-1:void 0!==a?a:0,n=n||function(){},a<i.length&&a>=0?(O[t.type](E(e,i[a])),g=setTimeout((function(){s?a-=1:a+=1,T.run(e,n,s,a)}),T.duration),S.setIcon(o)):n()},function(){(t=E(b,e)).bgColor=C(t.bgColor),t.textColor=C(t.textColor),t.position=t.position.toLowerCase(),t.animation=T.types[""+t.animation]?t.animation:b.animation,f=t.win.document;var c=t.position.indexOf("up")>-1,u=t.position.indexOf("left")>-1;if(c||u)for(var l=0;l<T.types[""+t.animation].length;l++){var d=T.types[""+t.animation][l];c&&(d.y<.6?d.y=d.y-.4:d.y=d.y-2*d.y+(1-d.w)),u&&(d.x<.6?d.x=d.x-.4:d.x=d.x-2*d.x+(1-d.h)),T.types[""+t.animation][l]=d}t.type=O[""+t.type]?t.type:b.type,n=S.getIcon(),o=document.createElement("canvas"),r=document.createElement("img"),n.hasAttribute("href")?(r.setAttribute("crossOrigin","anonymous"),r.onload=function(){s=r.height>0?r.height:32,a=r.width>0?r.width:32,o.height=s,o.width=a,i=o.getContext("2d"),v.ready()},r.setAttribute("src",n.getAttribute("href"))):(r.onload=function(){s=32,a=32,r.height=s,r.width=a,o.height=s,o.width=a,i=o.getContext("2d"),v.ready()},r.setAttribute("src",""))}(),{badge:function(e,t){t=("string"==typeof t?{animation:t}:t)||{},d=function(){try{if("number"==typeof e?e>0:""!==e){var n={type:"badge",options:{n:e}};if("animation"in t&&T.types[""+t.animation]&&(n.options.animation=""+t.animation),"type"in t&&O[""+t.type]&&(n.options.type=""+t.type),["bgColor","textColor"].forEach((function(e){e in t&&(n.options[e]=C(t[e]))})),["fontStyle","fontFamily"].forEach((function(e){e in t&&(n.options[e]=t[e])})),_.push(n),_.length>100)throw new Error("Too many badges requests in queue.");v.start()}else v.reset()}catch(e){throw new Error("Error setting badge. Message: "+e.message)}},c&&d()},video:function(e){d=function(){try{if("stop"===e)return p=!0,v.reset(),void(p=!1);e.addEventListener("play",(function(){j(this)}),!1)}catch(e){throw new Error("Error setting video. Message: "+e.message)}},c&&d()},image:function(e){d=function(){try{var t=e.width,n=e.height,r=document.createElement("img"),c=t/a<n/s?t/a:n/s;r.setAttribute("crossOrigin","anonymous"),r.onload=function(){i.clearRect(0,0,a,s),i.drawImage(r,0,0,a,s),S.setIcon(o)},r.setAttribute("src",e.getAttribute("src")),r.height=n/c,r.width=t/c}catch(e){throw new Error("Error setting image. Message: "+e.message)}},c&&d()},webcam:function(e){if(window.URL&&window.URL.createObjectURL||(window.URL=window.URL||{},window.URL.createObjectURL=function(e){return e}),h.supported){var t=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,d=function(){try{if("stop"===e)return p=!0,v.reset(),void(p=!1);(t=document.createElement("video")).width=a,t.height=s,navigator.getUserMedia({video:!0,audio:!1},(function(e){t.src=URL.createObjectURL(e),t.play(),j(t)}),(function(){}))}catch(e){throw new Error("Error setting webcam. Message: "+e.message)}},c&&d()}},reset:v.reset,browser:{supported:h.supported}}},void 0===(s=function(){return a}.apply(t,[]))||(e.exports=s)},1614:function(e,t,n){"use strict";function s(e){0}function a(e){0}n.r(t),n.d(t,"start",(function(){return s})),n.d(t,"stop",(function(){return a}))},178:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var s=n(4),a=n(14),o=n(19),i=n(158);const r="STORE_HYDRATE";function c(e){return t=>{const n=(e=>e.withMutations((e=>{void 0!==e.getIn(["local_settings","notifications","show_unread"])&&(!1!==e.getIn(["settings","notifications","showUnread"])&&e.setIn(["settings","notifications","showUnread"],e.getIn(["local_settings","notifications","show_unread"])),e.removeIn(["local_settings","notifications","show_unread"]))})))((e=>Object(s.fromJS)(e,((e,t)=>s.Iterable.isIndexed(t)?t.toList():t.toMap())))(e));t({type:r,state:n}),t(Object(a.sb)()),t(Object(o.h)(Object.values(e.accounts))),t(Object(i.d)())}}},181:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"k",(function(){return O})),n.d(t,"h",(function(){return j})),n.d(t,"f",(function(){return S})),n.d(t,"c",(function(){return C})),n.d(t,"b",(function(){return E})),n.d(t,"i",(function(){return T})),n.d(t,"j",(function(){return I})),n.d(t,"n",(function(){return w})),n.d(t,"m",(function(){return k})),n.d(t,"l",(function(){return L})),n.d(t,"u",(function(){return A})),n.d(t,"p",(function(){return R})),n.d(t,"t",(function(){return U})),n.d(t,"o",(function(){return D})),n.d(t,"q",(function(){return F})),n.d(t,"r",(function(){return P})),n.d(t,"s",(function(){return $}));var s=n(8),a=n(46),o=n(19),i=n(14);const r="STATUS_FETCH_REQUEST",c="STATUS_FETCH_SUCCESS",u="STATUS_FETCH_FAIL",l="STATUS_DELETE_REQUEST",d="STATUS_DELETE_SUCCESS",p="STATUS_DELETE_FAIL",h="CONTEXT_FETCH_REQUEST",g="CONTEXT_FETCH_SUCCESS",m="CONTEXT_FETCH_FAIL",f="STATUS_MUTE_REQUEST",b="STATUS_MUTE_SUCCESS",_="STATUS_MUTE_FAIL",v="STATUS_UNMUTE_REQUEST",O="STATUS_UNMUTE_SUCCESS",y="STATUS_UNMUTE_FAIL",j="STATUS_REVEAL",S="STATUS_HIDE",C="STATUS_COLLAPSE",E="REDRAFT",T="STATUS_TRANSLATE_SUCCESS",I="STATUS_TRANSLATE_UNDO";function w(e,t){return void 0===t&&(t=!1),(n,i)=>{const l=!t&&null!==i().getIn(["statuses",e],null);n(function(e){return(t,n)=>{t(function(e){return{type:h,id:e}}(e)),Object(s.a)(n).get(`/api/v1/statuses/${e}/context`).then((n=>{t(Object(o.k)(n.data.ancestors.concat(n.data.descendants))),t(function(e,t,n){return{type:g,id:e,ancestors:t,descendants:n,statuses:t.concat(n)}}(e,n.data.ancestors,n.data.descendants))})).catch((n=>{n.response&&404===n.response.status&&t(Object(a.n)(e)),t(function(e,t){return{type:m,id:e,error:t,skipAlert:!0}}(e,n))}))}}(e)),l||(n(function(e,t){return{type:r,id:e,skipLoading:t}}(e,l)),Object(s.a)(i).get(`/api/v1/statuses/${e}`).then((e=>{n(Object(o.j)(e.data)),n(function(e){return{type:c,skipLoading:e}}(l))})).catch((t=>{n(function(e,t,n){return{type:u,id:e,error:t,skipLoading:n,skipAlert:!0}}(e,t,l))})))}}const k=(e,t)=>(n,a)=>{let o=a().getIn(["statuses",e]);o.get("poll")&&(o=o.set("poll",a().getIn(["polls",o.get("poll")]))),n(M()),Object(s.a)(a).get(`/api/v1/statuses/${e}/source`).then((e=>{n(N()),Object(i.qb)(a,t),n(Object(i.Eb)(o,e.data.text,e.data.spoiler_text,e.data.content_type))})).catch((e=>{n(x(e))}))},M=()=>({type:"STATUS_FETCH_SOURCE_REQUEST"}),N=()=>({type:"STATUS_FETCH_SOURCE_SUCCESS"}),x=e=>({type:"STATUS_FETCH_SOURCE_FAIL",error:e});function L(e,t,n){return void 0===n&&(n=!1),(o,r)=>{let c=r().getIn(["statuses",e]);c.get("poll")&&(c=c.set("poll",r().getIn(["polls",c.get("poll")]))),o(function(e){return{type:l,id:e}}(e)),Object(s.a)(r).delete(`/api/v1/statuses/${e}`).then((s=>{o(function(e){return{type:d,id:e}}(e)),o(Object(a.n)(e)),n&&(o(function(e,t,n){return{type:E,status:e,raw_text:t,content_type:n}}(c,s.data.text,s.data.content_type)),Object(i.qb)(r,t))})).catch((t=>{o(function(e,t){return{type:p,id:e,error:t}}(e,t))}))}}const A=e=>t=>t(Object(o.j)(e));function R(e){return(t,n)=>{t(function(e){return{type:f,id:e}}(e)),Object(s.a)(n).post(`/api/v1/statuses/${e}/mute`).then((()=>{t(function(e){return{type:b,id:e}}(e))})).catch((n=>{t(function(e,t){return{type:_,id:e,error:t}}(e,n))}))}}function U(e){return(t,n)=>{t(function(e){return{type:v,id:e}}(e)),Object(s.a)(n).post(`/api/v1/statuses/${e}/unmute`).then((()=>{t(function(e){return{type:O,id:e}}(e))})).catch((n=>{t(function(e,t){return{type:y,id:e,error:t}}(e,n))}))}}function D(e){return Array.isArray(e)||(e=[e]),{type:S,ids:e}}function F(e){return Array.isArray(e)||(e=[e]),{type:j,ids:e}}const P=e=>(t,n)=>{t(H(e)),Object(s.a)(n).post(`/api/v1/statuses/${e}/translate`).then((n=>{t(q(e,n.data))})).catch((n=>{t(K(e,n))}))},H=e=>({type:"STATUS_TRANSLATE_REQUEST",id:e}),q=(e,t)=>({type:T,id:e,translation:t}),K=(e,t)=>({type:"STATUS_TRANSLATE_FAIL",id:e,error:t}),$=e=>({type:I,id:e})},184:function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"j",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return y})),n.d(t,"p",(function(){return E})),n.d(t,"m",(function(){return k}));var s=n(8),a=n(19);const o="TRENDS_TAGS_FETCH_REQUEST",i="TRENDS_TAGS_FETCH_SUCCESS",r="TRENDS_TAGS_FETCH_FAIL",c="TRENDS_LINKS_FETCH_REQUEST",u="TRENDS_LINKS_FETCH_SUCCESS",l="TRENDS_LINKS_FETCH_FAIL",d="TRENDS_STATUSES_FETCH_REQUEST",p="TRENDS_STATUSES_FETCH_SUCCESS",h="TRENDS_STATUSES_FETCH_FAIL",g="TRENDS_STATUSES_EXPAND_REQUEST",m="TRENDS_STATUSES_EXPAND_SUCCESS",f="TRENDS_STATUSES_EXPAND_FAIL",b=()=>(e,t)=>{e(_()),Object(s.a)(t).get("/api/v1/trends/tags").then((t=>{let{data:n}=t;return e(v(n))})).catch((t=>e(O(t))))},_=()=>({type:o,skipLoading:!0}),v=e=>({type:i,trends:e,skipLoading:!0}),O=e=>({type:r,error:e,skipLoading:!0,skipAlert:!0}),y=()=>(e,t)=>{e(j()),Object(s.a)(t).get("/api/v1/trends/links").then((t=>{let{data:n}=t;return e(S(n))})).catch((t=>e(C(t))))},j=()=>({type:c,skipLoading:!0}),S=e=>({type:u,trends:e,skipLoading:!0}),C=e=>({type:l,error:e,skipLoading:!0,skipAlert:!0}),E=()=>(e,t)=>{t().getIn(["status_lists","trending","isLoading"])||(e(T()),Object(s.a)(t).get("/api/v1/trends/statuses").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(I(t.data,n?n.uri:null))})).catch((t=>e(w(t)))))},T=()=>({type:d,skipLoading:!0}),I=(e,t)=>({type:p,statuses:e,next:t,skipLoading:!0}),w=e=>({type:h,error:e,skipLoading:!0,skipAlert:!0}),k=()=>(e,t)=>{const n=t().getIn(["status_lists","trending","next"],null);null===n||t().getIn(["status_lists","trending","isLoading"])||(e(M()),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(N(t.data,n?n.uri:null))})).catch((t=>{e(x(t))})))},M=()=>({type:g}),N=(e,t)=>({type:m,statuses:e,next:t}),x=e=>({type:f,error:e})},190:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return _})),n.d(t,"f",(function(){return v}));var s=n(8);const a="DOMAIN_BLOCK_REQUEST",o="DOMAIN_BLOCK_SUCCESS",i="DOMAIN_BLOCK_FAIL",r="DOMAIN_UNBLOCK_REQUEST",c="DOMAIN_UNBLOCK_SUCCESS",u="DOMAIN_UNBLOCK_FAIL",l="DOMAIN_BLOCKS_FETCH_REQUEST",d="DOMAIN_BLOCKS_FETCH_SUCCESS",p="DOMAIN_BLOCKS_FETCH_FAIL",h="DOMAIN_BLOCKS_EXPAND_REQUEST",g="DOMAIN_BLOCKS_EXPAND_SUCCESS",m="DOMAIN_BLOCKS_EXPAND_FAIL";function f(e){return(t,n)=>{t(function(e){return{type:a,domain:e}}(e)),Object(s.a)(n).post("/api/v1/domain_blocks",{domain:e}).then((()=>{const s="@"+e,a=n().get("accounts").filter((e=>e.get("acct").endsWith(s))).valueSeq().map((e=>e.get("id")));t(function(e,t){return{type:o,domain:e,accounts:t}}(e,a))})).catch((n=>{t(function(e,t){return{type:i,domain:e,error:t}}(e,n))}))}}function b(e){return(t,n)=>{t(function(e){return{type:r,domain:e}}(e)),Object(s.a)(n).delete("/api/v1/domain_blocks",{params:{domain:e}}).then((()=>{const s="@"+e,a=n().get("accounts").filter((e=>e.get("acct").endsWith(s))).valueSeq().map((e=>e.get("id")));t(function(e,t){return{type:c,domain:e,accounts:t}}(e,a))})).catch((n=>{t(function(e,t){return{type:u,domain:e,error:t}}(e,n))}))}}function _(){return(e,t)=>{e({type:l}),Object(s.a)(t).get("/api/v1/domain_blocks").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(function(e,t){return{type:d,domains:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e({type:p,error:t})}))}}function v(){return(e,t)=>{const n=t().getIn(["domain_lists","blocks","next"]);n&&(e({type:h}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(function(e,t){return{type:g,domains:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e({type:m,error:t})})))}}},191:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"a",(function(){return m})),n.d(t,"l",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return v})),n.d(t,"j",(function(){return O}));var s=n(8),a=n(16),o=n(19),i=n(36);const r="MUTES_FETCH_REQUEST",c="MUTES_FETCH_SUCCESS",u="MUTES_FETCH_FAIL",l="MUTES_EXPAND_REQUEST",d="MUTES_EXPAND_SUCCESS",p="MUTES_EXPAND_FAIL",h="MUTES_INIT_MODAL",g="MUTES_TOGGLE_HIDE_NOTIFICATIONS",m="MUTES_CHANGE_DURATION";function f(){return(e,t)=>{e({type:r}),Object(s.a)(t).get("/api/v1/mutes").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(o.h)(t.data)),e(function(e,t){return{type:c,accounts:e,next:t}}(t.data,n?n.uri:null)),e(Object(a.db)(t.data.map((e=>e.id))))})).catch((t=>e(function(e){return{type:u,error:e}}(t))))}}function b(){return(e,t)=>{const n=t().getIn(["user_lists","mutes","next"]);null!==n&&(e({type:l}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(o.h)(t.data)),e(function(e,t){return{type:d,accounts:e,next:t}}(t.data,n?n.uri:null)),e(Object(a.db)(t.data.map((e=>e.id))))})).catch((t=>e(function(e){return{type:p,error:e}}(t)))))}}function _(e){return t=>{t({type:h,account:e}),t(Object(i.d)("MUTE"))}}function v(){return e=>{e({type:g})}}function O(e){return t=>{t({type:m,duration:e})}}},192:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"n",(function(){return m})),n.d(t,"m",(function(){return v})),n.d(t,"l",(function(){return O})),n.d(t,"o",(function(){return y})),n.d(t,"p",(function(){return E}));var s=n(8);const a="HASHTAG_FETCH_SUCCESS",o="FOLLOWED_HASHTAGS_FETCH_REQUEST",i="FOLLOWED_HASHTAGS_FETCH_SUCCESS",r="FOLLOWED_HASHTAGS_FETCH_FAIL",c="FOLLOWED_HASHTAGS_EXPAND_REQUEST",u="FOLLOWED_HASHTAGS_EXPAND_SUCCESS",l="FOLLOWED_HASHTAGS_EXPAND_FAIL",d="HASHTAG_FOLLOW_REQUEST",p="HASHTAG_FOLLOW_FAIL",h="HASHTAG_UNFOLLOW_REQUEST",g="HASHTAG_UNFOLLOW_FAIL",m=e=>(t,n)=>{t(f()),Object(s.a)(n).get(`/api/v1/tags/${e}`).then((n=>{let{data:s}=n;t(b(e,s))})).catch((e=>{t(_(e))}))},f=()=>({type:"HASHTAG_FETCH_REQUEST"}),b=(e,t)=>({type:a,name:e,tag:t}),_=e=>({type:"HASHTAG_FETCH_FAIL",error:e}),v=()=>(e,t)=>{e({type:o}),Object(s.a)(t).get("/api/v1/followed_tags").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(function(e,t){return{type:i,followed_tags:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e({type:r,error:t})}))};function O(){return(e,t)=>{const n=t().getIn(["followed_tags","next"]);null!==n&&(e({type:c}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(function(e,t){return{type:u,followed_tags:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:l,error:e}}(t))})))}}const y=e=>(t,n)=>{t(j(e)),Object(s.a)(n).post(`/api/v1/tags/${e}/follow`).then((n=>{let{data:s}=n;t(S(e,s))})).catch((n=>{t(C(e,n))}))},j=e=>({type:d,name:e}),S=(e,t)=>({type:"HASHTAG_FOLLOW_SUCCESS",name:e,tag:t}),C=(e,t)=>({type:p,name:e,error:t}),E=e=>(t,n)=>{t(T(e)),Object(s.a)(n).post(`/api/v1/tags/${e}/unfollow`).then((n=>{let{data:s}=n;t(I(e,s))})).catch((n=>{t(w(e,n))}))},T=e=>({type:h,name:e}),I=(e,t)=>({type:"HASHTAG_UNFOLLOW_SUCCESS",name:e,tag:t}),w=(e,t)=>({type:g,name:e,error:t})},195:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"l",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return f})),n.d(t,"p",(function(){return _})),n.d(t,"s",(function(){return j})),n.d(t,"o",(function(){return S})),n.d(t,"m",(function(){return I})),n.d(t,"q",(function(){return N})),n.d(t,"t",(function(){return R})),n.d(t,"r",(function(){return U})),n.d(t,"n",(function(){return D}));var s=n(8),a=n(247);const o="ANNOUNCEMENTS_FETCH_REQUEST",i="ANNOUNCEMENTS_FETCH_SUCCESS",r="ANNOUNCEMENTS_FETCH_FAIL",c="ANNOUNCEMENTS_UPDATE",u="ANNOUNCEMENTS_DELETE",l="ANNOUNCEMENTS_DISMISS_SUCCESS",d="ANNOUNCEMENTS_REACTION_ADD_REQUEST",p="ANNOUNCEMENTS_REACTION_ADD_FAIL",h="ANNOUNCEMENTS_REACTION_REMOVE_REQUEST",g="ANNOUNCEMENTS_REACTION_REMOVE_FAIL",m="ANNOUNCEMENTS_REACTION_UPDATE",f="ANNOUNCEMENTS_TOGGLE_SHOW",b=()=>{},_=function(e){return void 0===e&&(e=b),(t,n)=>{t(v()),Object(s.a)(n).get("/api/v1/announcements").then((e=>{t(O(e.data.map((e=>Object(a.b)(e)))))})).catch((e=>{t(y(e))})).finally((()=>{e()}))}},v=()=>({type:o,skipLoading:!0}),O=e=>({type:i,announcements:e,skipLoading:!0}),y=e=>({type:r,error:e,skipLoading:!0,skipAlert:!0}),j=e=>({type:c,announcement:Object(a.b)(e)}),S=e=>(t,n)=>{t(C(e)),Object(s.a)(n).post(`/api/v1/announcements/${e}/dismiss`).then((()=>{t(E(e))})).catch((n=>{t(T(e,n))}))},C=e=>({type:"ANNOUNCEMENTS_DISMISS_REQUEST",id:e}),E=e=>({type:l,id:e}),T=(e,t)=>({type:"ANNOUNCEMENTS_DISMISS_FAIL",id:e,error:t}),I=(e,t)=>(n,a)=>{const o=a().getIn(["announcements","items"]).find((t=>t.get("id")===e));let i=!1;if(o){const e=o.get("reactions").find((e=>e.get("name")===t));e&&e.get("me")&&(i=!0)}i||n(w(e,t,i)),Object(s.a)(a).put(`/api/v1/announcements/${e}/reactions/${encodeURIComponent(t)}`).then((()=>{n(k(e,t,i))})).catch((s=>{i||n(M(e,t,s))}))},w=(e,t)=>({type:d,id:e,name:t,skipLoading:!0}),k=(e,t)=>({type:"ANNOUNCEMENTS_REACTION_ADD_SUCCESS",id:e,name:t,skipLoading:!0}),M=(e,t,n)=>({type:p,id:e,name:t,error:n,skipLoading:!0}),N=(e,t)=>(n,a)=>{n(x(e,t)),Object(s.a)(a).delete(`/api/v1/announcements/${e}/reactions/${encodeURIComponent(t)}`).then((()=>{n(L(e,t))})).catch((s=>{n(A(e,t,s))}))},x=(e,t)=>({type:h,id:e,name:t,skipLoading:!0}),L=(e,t)=>({type:"ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS",id:e,name:t,skipLoading:!0}),A=(e,t,n)=>({type:g,id:e,name:t,error:n,skipLoading:!0}),R=e=>({type:m,reaction:e}),U=()=>({type:f}),D=e=>({type:u,id:e})},198:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(0),a=n(1),o=n.n(a),i=n(10),r=n.n(i),c=n(11),u=n(302);class l extends o.a.PureComponent{constructor(){super(...arguments),this.handleMouseEnter=e=>{let{currentTarget:t}=e;if(c.a)return;const n=t.querySelectorAll(".custom-emoji");for(var s=0;s<n.length;s++){let e=n[s];e.src=e.getAttribute("data-original")}},this.handleMouseLeave=e=>{let{currentTarget:t}=e;if(c.a)return;const n=t.querySelectorAll(".custom-emoji");for(var s=0;s<n.length;s++){let e=n[s];e.src=e.getAttribute("data-static")}}}render(){const{account:e,className:t,inline:n,localDomain:a,others:o,onAccountClick:i}=this.props,c=r()("display-name",{inline:n},t);let l,d,p;return e&&(p=e.get("acct"),-1===p.indexOf("@")&&a&&(p=`${p}@${a}`)),o&&o.size>0?(l=o.take(2).map((e=>Object(s.a)("a",{href:e.get("url"),target:"_blank",onClick:t=>i(e.get("acct"),t),title:`@${e.get("acct")}`,rel:"noopener noreferrer"},void 0,Object(s.a)("bdi",{},e.get("id"),Object(s.a)("strong",{className:"display-name__html",dangerouslySetInnerHTML:{__html:e.get("display_name_html")}}))))).reduce(((e,t)=>[e,", ",t])),o.size-2>0&&l.push(" +"+(o.size-2)),d=Object(s.a)("a",{href:e.get("url"),target:"_blank",onClick:t=>i(e.get("acct"),t),rel:"noopener noreferrer"},void 0,Object(s.a)("span",{className:"display-name__account"},void 0,"@",p))):e?(l=Object(s.a)("bdi",{},void 0,Object(s.a)("strong",{className:"display-name__html",dangerouslySetInnerHTML:{__html:e.get("display_name_html")}})),d=Object(s.a)("span",{className:"display-name__account"},void 0,"@",p)):(l=Object(s.a)("bdi",{},void 0,Object(s.a)("strong",{className:"display-name__html"},void 0,Object(s.a)(u.a,{width:"10ch"}))),d=Object(s.a)("span",{className:"display-name__account"},void 0,Object(s.a)(u.a,{width:"7ch"}))),Object(s.a)("span",{className:c,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,l,n?" ":null,d)}}},200:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var s=n(0),a=n(1),o=n.n(a),i=n(11),r=n(10),c=n.n(r);class u extends o.a.PureComponent{constructor(){super(...arguments),this.state={hovering:!1},this.handleMouseEnter=()=>{this.props.animate||this.setState({hovering:!0})},this.handleMouseLeave=()=>{this.props.animate||this.setState({hovering:!1})}}render(){const{account:e,animate:t,className:n,inline:a,size:o}=this.props,{hovering:i}=this.state,r={...this.props.style,width:`${o}px`,height:`${o}px`,backgroundSize:`${o}px ${o}px`};if(e){const n=e.get("avatar"),s=e.get("avatar_static");r.backgroundImage=i||t?`url(${n})`:`url(${s})`}return Object(s.a)("div",{className:c()("account__avatar",{"account__avatar-inline":a},n),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:r,"data-avatar-of":e&&`@${e.get("acct")}`,role:"img","aria-label":null==e?void 0:e.get("acct")})}}u.defaultProps={animate:i.a,size:20,inline:!1}},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l}));var s=n(531),a=n(11);const o=e=>e<=630,i=e=>{switch(e){case"multiple":return"multi-column";case"single":return o(window.innerWidth)?"mobile":"single-column";default:return o(window.innerWidth)?"mobile":a.l?"single-column":"multi-column"}},r=(/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,!!s.a&&{passive:!0});let c=!1;const u=()=>{c=!0,window.removeEventListener("touchstart",u,r)};window.addEventListener("touchstart",u,r);const l=()=>c},216:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"g",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return _})),n.d(t,"j",(function(){return j}));var s=n(8),a=n(19);const o="Server_FETCH_REQUEST",i="Server_FETCH_SUCCESS",r="Server_FETCH_FAIL",c="EXTENDED_DESCRIPTION_REQUEST",u="EXTENDED_DESCRIPTION_SUCCESS",l="EXTENDED_DESCRIPTION_FAIL",d="SERVER_DOMAIN_BLOCKS_FETCH_REQUEST",p="SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS",h="SERVER_DOMAIN_BLOCKS_FETCH_FAIL",g=()=>(e,t)=>{e(m()),Object(s.a)(t).get("/api/v2/instance").then((t=>{let{data:n}=t;n.contact.account&&e(Object(a.g)(n.contact.account)),e(f(n))})).catch((t=>e(b(t))))},m=()=>({type:o}),f=e=>({type:i,server:e}),b=e=>({type:r,error:e}),_=()=>(e,t)=>{e(v()),Object(s.a)(t).get("/api/v1/instance/extended_description").then((t=>{let{data:n}=t;return e(O(n))})).catch((t=>e(y(t))))},v=()=>({type:c}),O=e=>({type:u,description:e}),y=e=>({type:l,error:e}),j=()=>(e,t)=>{e(S()),Object(s.a)(t).get("/api/v1/instance/domain_blocks").then((t=>{let{data:n}=t;return e(C(!0,n))})).catch((t=>{404===t.response.status?e(C(!1,[])):e(E(t))}))},S=()=>({type:d}),C=(e,t)=>({type:p,isAvailable:e,blocks:t}),E=e=>({type:h,error:e})},229:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return m})),n.d(t,"j",(function(){return f}));var s=n(8),a=n(16),o=n(19),i=n(36);const r="BLOCKS_FETCH_REQUEST",c="BLOCKS_FETCH_SUCCESS",u="BLOCKS_FETCH_FAIL",l="BLOCKS_EXPAND_REQUEST",d="BLOCKS_EXPAND_SUCCESS",p="BLOCKS_EXPAND_FAIL",h="BLOCKS_INIT_MODAL";function g(){return(e,t)=>{e({type:r}),Object(s.a)(t).get("/api/v1/blocks").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(o.h)(t.data)),e(function(e,t){return{type:c,accounts:e,next:t}}(t.data,n?n.uri:null)),e(Object(a.db)(t.data.map((e=>e.id))))})).catch((t=>e(function(e){return{type:u,error:e}}(t))))}}function m(){return(e,t)=>{const n=t().getIn(["user_lists","blocks","next"]);null!==n&&(e({type:l}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(o.h)(t.data)),e(function(e,t){return{type:d,accounts:e,next:t}}(t.data,n?n.uri:null)),e(Object(a.db)(t.data.map((e=>e.id))))})).catch((t=>e(function(e){return{type:p,error:e}}(t)))))}}function f(e){return t=>{t({type:h,account:e}),t(Object(i.d)("BLOCK"))}}},232:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return h}));var s=n(8);const a="ACCOUNT_NOTE_SUBMIT_REQUEST",o="ACCOUNT_NOTE_SUBMIT_SUCCESS",i="ACCOUNT_NOTE_SUBMIT_FAIL",r="ACCOUNT_NOTE_INIT_EDIT",c="ACCOUNT_NOTE_CANCEL",u="ACCOUNT_NOTE_CHANGE_COMMENT";function l(){return(e,t)=>{e({type:a});const n=t().getIn(["account_notes","edit","account_id"]);Object(s.a)(t).post(`/api/v1/accounts/${n}/note`,{comment:t().getIn(["account_notes","edit","comment"])}).then((t=>{var n;e((n=t.data,{type:o,relationship:n}))})).catch((t=>e(function(e){return{type:i,error:e}}(t))))}}function d(e){return(t,n)=>{const s=n().getIn(["relationships",e.get("id"),"note"]);t({type:r,account:e,comment:s})}}function p(){return{type:c}}function h(e){return{type:u,comment:e}}},233:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return g})),n.d(t,"k",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"n",(function(){return O})),n.d(t,"i",(function(){return y}));var s=n(8),a=n(19);const o="CONVERSATIONS_MOUNT",i="CONVERSATIONS_UNMOUNT",r="CONVERSATIONS_FETCH_REQUEST",c="CONVERSATIONS_FETCH_SUCCESS",u="CONVERSATIONS_FETCH_FAIL",l="CONVERSATIONS_UPDATE",d="CONVERSATIONS_READ",p="CONVERSATIONS_DELETE_SUCCESS",h=()=>({type:o}),g=()=>({type:i}),m=e=>(t,n)=>{t({type:d,id:e}),Object(s.a)(n).post(`/api/v1/conversations/${e}/read`)},f=function(e){let{maxId:t}=void 0===e?{}:e;return(e,n)=>{e(b());const o={max_id:t};t||(o.since_id=n().getIn(["conversations","items",0,"last_status"]));const i=!!o.since_id;Object(s.a)(n).get("/api/v1/conversations",{params:o}).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.h)(t.data.reduce(((e,t)=>e.concat(t.accounts)),[]))),e(Object(a.k)(t.data.map((e=>e.last_status)).filter((e=>!!e)))),e(_(t.data,n?n.uri:null,i))})).catch((t=>e(v(t))))}},b=()=>({type:r}),_=(e,t,n)=>({type:c,conversations:e,next:t,isLoadingRecent:n}),v=e=>({type:u,error:e}),O=e=>t=>{t(Object(a.h)(e.accounts)),e.last_status&&t(Object(a.j)(e.last_status)),t({type:l,conversation:e})},y=e=>(t,n)=>{t(j(e)),Object(s.a)(n).delete(`/api/v1/conversations/${e}`).then((()=>t(S(e)))).catch((n=>t(C(e,n))))},j=e=>({type:"CONVERSATIONS_DELETE_REQUEST",id:e}),S=e=>({type:p,id:e}),C=(e,t)=>({type:"CONVERSATIONS_DELETE_FAIL",id:e,error:t})},244:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return g})),n.d(t,"l",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"k",(function(){return y}));var s=n(8),a=n(16),o=n(19);const i="SEARCH_CHANGE",r="SEARCH_CLEAR",c="SEARCH_SHOW",u="SEARCH_FETCH_REQUEST",l="SEARCH_FETCH_SUCCESS",d="SEARCH_FETCH_FAIL",p="SEARCH_EXPAND_SUCCESS";function h(e){return{type:i,value:e}}function g(){return{type:r}}function m(){return(e,t)=>{const n=t().getIn(["search","value"]),i=!!t().getIn(["meta","me"]);0!==n.length?(e({type:u}),Object(s.a)(t).get("/api/v2/search",{params:{q:n,resolve:i,limit:10}}).then((t=>{t.data.accounts&&e(Object(o.h)(t.data.accounts)),t.data.statuses&&e(Object(o.k)(t.data.statuses)),e(f(t.data,n)),e(Object(a.db)(t.data.accounts.map((e=>e.id))))})).catch((t=>{e(function(e){return{type:d,error:e}}(t))}))):e(f({accounts:[],statuses:[],hashtags:[]},""))}}function f(e,t){return{type:l,results:e,searchTerm:t}}const b=e=>(t,n)=>{const i=n().getIn(["search","value"]),r=n().getIn(["search","results",e]).size;t(_()),Object(s.a)(n).get("/api/v2/search",{params:{q:i,type:e,offset:r}}).then((n=>{let{data:s}=n;s.accounts&&t(Object(o.h)(s.accounts)),s.statuses&&t(Object(o.k)(s.statuses)),t(v(s,i,e)),t(Object(a.db)(s.accounts.map((e=>e.id))))})).catch((e=>{t(O(e))}))},_=()=>({type:"SEARCH_EXPAND_REQUEST"}),v=(e,t,n)=>({type:p,results:e,searchTerm:t,searchType:n}),O=e=>({type:"SEARCH_EXPAND_FAIL",error:e}),y=()=>({type:c})},274:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return f}));var s=n(8),a=n(19),o=n(16);const i="DIRECTORY_FETCH_REQUEST",r="DIRECTORY_FETCH_SUCCESS",c="DIRECTORY_FETCH_FAIL",u="DIRECTORY_EXPAND_REQUEST",l="DIRECTORY_EXPAND_SUCCESS",d="DIRECTORY_EXPAND_FAIL",p=e=>(t,n)=>{t(h()),Object(s.a)(n).get("/api/v1/directory",{params:{...e,limit:20}}).then((e=>{let{data:n}=e;t(Object(a.h)(n)),t(g(n)),t(Object(o.db)(n.map((e=>e.id))))})).catch((e=>t(m(e))))},h=()=>({type:i}),g=e=>({type:r,accounts:e}),m=e=>({type:c,error:e}),f=e=>(t,n)=>{t(b());const i=n().getIn(["user_lists","directory","items"]).size;Object(s.a)(n).get("/api/v1/directory",{params:{...e,offset:i,limit:20}}).then((e=>{let{data:n}=e;t(Object(a.h)(n)),t(_(n)),t(Object(o.db)(n.map((e=>e.id))))})).catch((e=>t(v(e))))},b=()=>({type:u}),_=e=>({type:l,accounts:e}),v=e=>({type:d,error:e})},275:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return p}));var s=n(8),a=n(19);const o="FAVOURITED_STATUSES_FETCH_REQUEST",i="FAVOURITED_STATUSES_FETCH_SUCCESS",r="FAVOURITED_STATUSES_FETCH_FAIL",c="FAVOURITED_STATUSES_EXPAND_REQUEST",u="FAVOURITED_STATUSES_EXPAND_SUCCESS",l="FAVOURITED_STATUSES_EXPAND_FAIL";function d(){return(e,t)=>{t().getIn(["status_lists","favourites","isLoading"])||(e({type:o,skipLoading:!0}),Object(s.a)(t).get("/api/v1/favourites").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(function(e,t){return{type:i,statuses:e,next:t,skipLoading:!0}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:r,error:e,skipLoading:!0}}(t))})))}}function p(){return(e,t)=>{const n=t().getIn(["status_lists","favourites","next"],null);null===n||t().getIn(["status_lists","favourites","isLoading"])||(e({type:c}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(function(e,t){return{type:u,statuses:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:l,error:e}}(t))})))}}},276:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return p}));var s=n(8),a=n(19);const o="BOOKMARKED_STATUSES_FETCH_REQUEST",i="BOOKMARKED_STATUSES_FETCH_SUCCESS",r="BOOKMARKED_STATUSES_FETCH_FAIL",c="BOOKMARKED_STATUSES_EXPAND_REQUEST",u="BOOKMARKED_STATUSES_EXPAND_SUCCESS",l="BOOKMARKED_STATUSES_EXPAND_FAIL";function d(){return(e,t)=>{t().getIn(["status_lists","bookmarks","isLoading"])||(e({type:o}),Object(s.a)(t).get("/api/v1/bookmarks").then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(function(e,t){return{type:i,statuses:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:r,error:e}}(t))})))}}function p(){return(e,t)=>{const n=t().getIn(["status_lists","bookmarks","next"],null);null===n||t().getIn(["status_lists","bookmarks","isLoading"])||(e({type:c}),Object(s.a)(t).get(n).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(a.k)(t.data)),e(function(e,t){return{type:u,statuses:e,next:t}}(t.data,n?n.uri:null))})).catch((t=>{e(function(e){return{type:l,error:e}}(t))})))}}},281:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return c}));const s="/settings/preferences",a="/settings/profile",o="/auth/sign_out",i=e=>`/admin/accounts/${e}`,r=(e,t)=>`/admin/accounts/${e}/statuses/${t}`,c=e=>{switch(e){case"user_setting_expand_spoilers":case"user_setting_disable_swiping":return`/settings/preferences/appearance#${e}`;default:return s}}},284:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var s,a,o=n(0),i=n(1),r=n.n(i),c=n(2),u=n.n(c),l=n(6),d=n(299),p=n(10),h=n.n(p),g=n(30),m=n(11),f=n(707);const b=(e,t,n)=>e===t||e===n||e.startsWith(t+"/")||e.startsWith(n+"/")||"www."+e===n||("www."+e).startsWith(n+"/"),_=e=>{let t=[];const n=e=>{switch(e.nodeType){case Node.TEXT_NODE:t.push(e.textContent);break;case Node.ELEMENT_NODE:if(e.classList.contains("invisible"))return;const s=e.childNodes;for(let e=0;e<s.length;e++)n(s[e])}};n(e);const s=t.join(""),a=new URL(e.href);if("magnet:"===a.protocol)return!s.startsWith("magnet:");if("xmpp:"===a.protocol)return!(s===a.href||"xmpp:"+s===a.href);if(b(s,a.origin,a.host)||b(s.toLowerCase(),a.origin,a.host))return!1;const o=Object(f.a)(a.hostname).normalize("NFKC"),i=a.host.replace(a.hostname,o),r=a.origin.replace(a.host,i),c=s.normalize("NFKC");return!(b(c,r,i)||b(c.toLowerCase(),r,i))};class v extends r.a.PureComponent{render(){const{translation:e,onClick:t}=this.props;if(e){const n=m.m.find((t=>t[0]===e.get("detected_source_language"))),s=n?n[2]:e.get("detected_source_language"),a=e.get("provider");return Object(o.a)("div",{className:"translate-button"},void 0,Object(o.a)("div",{className:"translate-button__meta"},void 0,Object(o.a)(l.b,{id:"status.translated_from_with",defaultMessage:"Translated from {lang} using {provider}",values:{lang:s,provider:a}})),Object(o.a)("button",{className:"link-button",onClick:t},void 0,Object(o.a)(l.b,{id:"status.show_original",defaultMessage:"Show original"})))}return Object(o.a)("button",{className:"status__content__read-more-button",onClick:t},void 0,Object(o.a)(l.b,{id:"status.translate",defaultMessage:"Translate"}))}}let O=Object(l.g)((a=class extends r.a.PureComponent{constructor(){super(...arguments),this.state={hidden:!0},this.handleMouseEnter=e=>{let{currentTarget:t}=e;if(m.a)return;const n=t.querySelectorAll(".custom-emoji");for(var s=0;s<n.length;s++){let e=n[s];e.src=e.getAttribute("data-original")}},this.handleMouseLeave=e=>{let{currentTarget:t}=e;if(m.a)return;const n=t.querySelectorAll(".custom-emoji");for(var s=0;s<n.length;s++){let e=n[s];e.src=e.getAttribute("data-static")}},this.onLinkClick=e=>{this.props.collapsed&&this.props.parseClick&&this.props.parseClick(e)},this.onMentionClick=(e,t)=>{this.props.parseClick&&this.props.parseClick(t,`/@${e.get("acct")}`)},this.onHashtagClick=(e,t)=>{e=e.replace(/^#/,""),this.props.parseClick&&this.props.parseClick(t,`/tags/${e}`)},this.handleMouseDown=e=>{this.startXY=[e.clientX,e.clientY]},this.handleMouseUp=e=>{const{parseClick:t,disabled:n}=this.props;if(n||!this.startXY)return;const[s,a]=this.startXY,[o,i]=[Math.abs(e.clientX-s),Math.abs(e.clientY-a)];let r=e.target;for(;r!==e.currentTarget;){if(["button","video","a","label","canvas"].includes(r.localName)||"button"===r.getAttribute("role"))return;r=r.parentNode}o+i<5&&0===e.button&&t&&t(e),this.startXY=null},this.handleSpoilerClick=e=>{e.preventDefault(),this.props.onExpandedToggle?this.props.onExpandedToggle():this.setState({hidden:!this.state.hidden})},this.handleTranslate=()=>{this.props.onTranslate()},this.setContentsRef=e=>{this.contentsNode=e}}_updateStatusLinks(){const e=this.contentsNode,{tagLinks:t,rewriteMentions:n}=this.props;if(!e)return;const s=e.querySelectorAll("a");for(var a=0;a<s.length;++a){let e=s[a];if(e.classList.contains("status-link"))continue;e.classList.add("status-link");let o=this.props.status.get("mentions").find((t=>e.href===t.get("url")));if(o){if(e.addEventListener("click",this.onMentionClick.bind(this,o),!1),e.setAttribute("title",o.get("acct")),"no"!==n){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode("@"));const t=document.createElement("span");t.textContent="acct"===n?o.get("acct"):o.get("username"),e.appendChild(t)}}else if("#"===e.textContent[0]||e.previousSibling&&e.previousSibling.textContent&&"#"===e.previousSibling.textContent[e.previousSibling.textContent.length-1])e.addEventListener("click",this.onHashtagClick.bind(this,e.text),!1);else{e.addEventListener("click",this.onLinkClick.bind(this),!1),e.setAttribute("title",e.href),e.classList.add("unhandled-link"),e.setAttribute("target","_blank"),e.setAttribute("rel","noopener nofollow noreferrer");try{if(t&&_(e)){const t=new URL(e.href),n=document.createElement("span");switch(n.classList.add("link-origin-tag"),t.protocol){case"xmpp:":n.textContent=`[${t.href}]`;break;case"magnet:":n.textContent="(magnet)";break;default:n.textContent=`[${t.host}]`}e.insertAdjacentText("beforeend"," "),e.insertAdjacentElement("beforeend",n)}}catch(n){t&&n instanceof TypeError&&e.removeAttribute("href")}}}}componentDidMount(){this._updateStatusLinks()}componentDidUpdate(){this._updateStatusLinks(),this.props.onUpdate&&this.props.onUpdate()}render(){const{status:e,media:t,extraMedia:n,mediaIcons:s,parseClick:a,disabled:i,tagLinks:c,rewriteMentions:u,intl:p,zoomEmojisOnHover:m}=this.props,f=this.props.onExpandedToggle?!this.props.expanded:this.state.hidden,b=this.props.onTranslate&&e.get("translatable"),_={__html:e.get("translation")?e.getIn(["translation","content"]):e.get("contentHtml")},O={__html:e.get("spoilerHtml")},y=e.get("translation")?p.locale:e.get("language"),j=h()("status__content",{"status__content--with-action":a&&!i,"status__content--with-spoiler":e.get("spoiler_text").length>0,"status__content--zoom-emojis-on-hover":m}),S=h()("status__content__text translate",{"status__content--zoom-emojis-on-hover":m}),C=b&&Object(o.a)(v,{onClick:this.handleTranslate,translation:e.get("translation")});if(e.get("spoiler_text").length>0){let a="";const i=e.get("mentions").map((e=>Object(o.a)(d.a,{to:`/@${e.get("acct")}`,href:e.get("url"),className:"mention"},e.get("id"),"@",Object(o.a)("span",{},void 0,e.get("username"))))).reduce(((e,t)=>[...e,t," "]),[]);let u=null;return f?(u=[Object(o.a)(l.b,{id:"status.show_more",defaultMessage:"Show more"},"0")],s&&s.forEach(((e,t)=>{u.push(Object(o.a)(g.a,{fixedWidth:!0,className:"status__content__spoiler-icon",id:e,"aria-hidden":"true"},`icon-${t}`))}))):u=Object(o.a)(l.b,{id:"status.show_less",defaultMessage:"Show less"},"0"),f&&(a=Object(o.a)("div",{},void 0,i)),Object(o.a)("div",{className:j,tabIndex:"0",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp},void 0,Object(o.a)("p",{style:{marginBottom:f&&e.get("mentions").isEmpty()?"0px":null}},void 0,Object(o.a)("span",{dangerouslySetInnerHTML:O,className:"translate",lang:y})," ",Object(o.a)("button",{type:"button",className:"status__content__spoiler-link",onClick:this.handleSpoilerClick,"aria-expanded":!f},void 0,u)),a,Object(o.a)("div",{className:"status__content__spoiler "+(f?"":"status__content__spoiler--visible")},void 0,r.a.createElement("div",{ref:this.setContentsRef,key:`contents-${c}`,tabIndex:f?null:0,dangerouslySetInnerHTML:_,className:S,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,lang:y}),!f&&C,t),n)}return a?Object(o.a)("div",{className:j,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,tabIndex:"0"},void 0,r.a.createElement("div",{ref:this.setContentsRef,key:`contents-${c}-${u}`,dangerouslySetInnerHTML:_,className:S,tabIndex:"0",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,lang:y}),C,t,n):Object(o.a)("div",{className:"status__content",tabIndex:"0"},void 0,r.a.createElement("div",{ref:this.setContentsRef,key:`contents-${c}`,className:S,dangerouslySetInnerHTML:_,tabIndex:"0",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,lang:y}),C,t,n)}},a.contextTypes={identity:u.a.object},a.defaultProps={tagLinks:!0,rewriteMentions:"no"},s=a))||s},286:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n(0),a=(n(1),n(21)),o=n.n(a),i=n(2),r=n.n(i),c=n(20),u=n(6),l=n(10),d=n.n(l),p=n(30);class h extends c.a{render(){const{media:e,compact:t}=this.props;return Object(s.a)("div",{className:d()("attachment-list",{compact:t})},void 0,!t&&Object(s.a)("div",{className:"attachment-list__icon"},void 0,Object(s.a)(p.a,{id:"link"})),Object(s.a)("ul",{className:"attachment-list__list"},void 0,e.map((e=>{const n=e.get("remote_url")||e.get("url");return Object(s.a)("li",{},e.get("id"),Object(s.a)("a",{href:n,target:"_blank",rel:"noopener noreferrer"},void 0,t&&Object(s.a)(p.a,{id:"link"}),t&&" ",n?n.split("/").pop().split("#")[0].split("?")[0]:Object(s.a)(u.b,{id:"attachments_list.unprocessed",defaultMessage:"(unprocessed)"})))}))))}}h.propTypes={media:o.a.list.isRequired,compact:r.a.bool}},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return d}));var s=n(158);const a="COLUMN_ADD",o="COLUMN_REMOVE",i="COLUMN_MOVE",r="COLUMN_PARAMS_CHANGE";function c(e,t){return n=>{n({type:a,id:e,params:t}),n(Object(s.d)())}}function u(e){return t=>{t({type:o,uuid:e}),t(Object(s.d)())}}function l(e,t){return n=>{n({type:i,uuid:e,direction:t}),n(Object(s.d)())}}function d(e,t,n){return a=>{a({type:r,uuid:e,path:t,value:n}),a(Object(s.d)())}}},307:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return c}));var s=n(11),a=n(36);const o="LOCAL_SETTING_CHANGE",i="LOCAL_SETTING_DELETE";function r(){return(e,t)=>{const n=t().getIn(["local_settings","content_warnings","auto_unfold"]),o=t().getIn(["local_settings","swipe_to_change_columns"]);let i=[];null!=n&&(n===s.j?e(u(["content_warnings","auto_unfold"])):i.push("user_setting_expand_spoilers")),null!=o&&(o===!s.f?e(u(["swipe_to_change_columns"])):i.push("user_setting_disable_swiping")),i.length>0&&e(Object(a.d)("DEPRECATED_SETTINGS",{settings:i,onConfirm:()=>e((e=>{e(u(["content_warnings","auto_unfold"])),e(u(["swipe_to_change_columns"]))}))}))}}function c(e,t){return n=>{n({type:o,key:e,value:t}),n(l())}}function u(e){return t=>{t({type:i,key:e}),t(l())}}function l(){return(e,t)=>{const n=t().get("local_settings").toJS();localStorage.setItem("mastodon-settings",JSON.stringify(n))}}},339:function(e,t,n){"use strict";n.r(t),t.default=n.p+"media/flavours/glitch/images/logo_warn_glitch-68f2721071b15e54520ac713d29675cf.svg"},341:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return g}));var s=n(8),a=n(19),o=n(16);const i="SUGGESTIONS_FETCH_REQUEST",r="SUGGESTIONS_FETCH_SUCCESS",c="SUGGESTIONS_FETCH_FAIL",u="SUGGESTIONS_DISMISS";function l(e){return void 0===e&&(e=!1),(t,n)=>{t(d()),Object(s.a)(n).get("/api/v2/suggestions",{params:{limit:20}}).then((n=>{t(Object(a.h)(n.data.map((e=>e.account)))),t(p(n.data)),e&&t(Object(o.db)(n.data.map((e=>e.account.id))))})).catch((e=>t(h(e))))}}function d(){return{type:i,skipLoading:!0}}function p(e){return{type:r,suggestions:e,skipLoading:!0}}function h(e){return{type:c,error:e,skipLoading:!0,skipAlert:!0}}const g=e=>(t,n)=>{t({type:u,id:e}),Object(s.a)(n).delete(`/api/v1/suggestions/${e}`).then((()=>{t(d()),Object(s.a)(n).get("/api/v2/suggestions").then((e=>{t(Object(a.h)(e.data.map((e=>e.account)))),t(p(e.data))})).catch((e=>t(h(e))))})).catch((()=>{}))}},360:function(e,t,n){"use strict";n.r(t),n.d(t,"changeAlerts",(function(){return _})),n.d(t,"CLEAR_SUBSCRIPTION",(function(){return o})),n.d(t,"SET_BROWSER_SUPPORT",(function(){return s})),n.d(t,"SET_SUBSCRIPTION",(function(){return a})),n.d(t,"SET_ALERTS",(function(){return i})),n.d(t,"register",(function(){return b}));const s="PUSH_NOTIFICATIONS_SET_BROWSER_SUPPORT",a="PUSH_NOTIFICATIONS_SET_SUBSCRIPTION",o="PUSH_NOTIFICATIONS_CLEAR_SUBSCRIPTION",i="PUSH_NOTIFICATIONS_SET_ALERTS";var r=n(8),c=n(243);const u=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),s=new Uint8Array(n.length);for(let e=0;e<n.length;++e)s[e]=n.charCodeAt(e);return s},l=()=>document.querySelector('[name="applicationServerKey"]').getAttribute("content"),d=()=>navigator.serviceWorker.ready,p=e=>e.pushManager.getSubscription().then((t=>({registration:e,subscription:t}))),h=e=>e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:u(l())}),g=e=>{let{registration:t,subscription:n}=e;return n?n.unsubscribe().then((()=>t)):t},m=(e,t,n)=>{const s={subscription:t};if(n){const e=c.b.get(n);e&&(s.data=e)}return Object(r.a)(e).post("/api/web/push_subscriptions",s).then((e=>e.data))},f="serviceWorker"in navigator&&"PushManager"in window&&"getKey"in PushSubscription.prototype;function b(){return(e,t)=>{e({type:s,value:f});const n=t().getIn(["meta","me"]);if(f){if(!l())return void console.error("The VAPID public key is not set. You will not be able to receive Web Push Notifications.");d().then(p).then((e=>{let{registration:s,subscription:a}=e;if(null!==a){const e=new Uint8Array(a.options.applicationServerKey).toString(),o=u(l()).toString(),i=t().getIn(["push_notifications","subscription","endpoint"]);return o===e&&a.endpoint===i?a:g({registration:s,subscription:a}).then(h).then((e=>m(t,e,n)))}return h(s).then((e=>m(t,e,n)))})).then((t=>{t instanceof PushSubscription||(e(function(e){return{type:a,subscription:e}}(t)),n&&c.b.set(n,{alerts:t.alerts}))})).catch((t=>(20===t.code&&"AbortError"===t.name?console.warn("Your browser supports Web Push Notifications, but does not seem to implement the VAPID protocol."):5===t.code&&"InvalidCharacterError"===t.name&&console.error("The VAPID public key seems to be invalid:",l()),e({type:o}),n&&c.b.remove(n),d().then(p).then(g)))).catch(console.warn)}else console.warn("Your browser does not support Web Push Notifications.")}}function _(e,t){return n=>{n(function(e,t){return n=>{n({type:i,path:e,value:t})}}(e,t)),n(((e,t)=>{const n=t().get("push_notifications"),s=n.get("subscription"),a={alerts:n.get("alerts")};Object(r.a)(t).put(`/api/web/push_subscriptions/${s.get("id")}`,{data:a}).then((()=>{const e=t().getIn(["meta","me"]);e&&c.b.set(e,a)})).catch(console.warn)}))}}},38:function(e,t,n){"use strict";n.d(t,"w",(function(){return i})),n.d(t,"v",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"u",(function(){return u})),n.d(t,"p",(function(){return l})),n.d(t,"q",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"y",(function(){return m})),n.d(t,"z",(function(){return f})),n.d(t,"x",(function(){return b})),n.d(t,"m",(function(){return _})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return y})),n.d(t,"r",(function(){return j})),n.d(t,"t",(function(){return S})),n.d(t,"s",(function(){return C})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return T})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return w})),n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return M})),n.d(t,"e",(function(){return N})),n.d(t,"G",(function(){return x})),n.d(t,"I",(function(){return U})),n.d(t,"P",(function(){return H})),n.d(t,"O",(function(){return q})),n.d(t,"C",(function(){return K})),n.d(t,"Q",(function(){return G})),n.d(t,"M",(function(){return J})),n.d(t,"F",(function(){return Y})),n.d(t,"H",(function(){return ie})),n.d(t,"E",(function(){return ce})),n.d(t,"D",(function(){return ue})),n.d(t,"B",(function(){return le})),n.d(t,"K",(function(){return me})),n.d(t,"L",(function(){return Oe})),n.d(t,"N",(function(){return ye})),n.d(t,"A",(function(){return Te})),n.d(t,"J",(function(){return Ie}));var s=n(8),a=n(19),o=n(159);const i="LIST_FETCH_SUCCESS",r="LIST_FETCH_FAIL",c="LISTS_FETCH_SUCCESS",u="LIST_EDITOR_TITLE_CHANGE",l="LIST_EDITOR_RESET",d="LIST_EDITOR_SETUP",p="LIST_CREATE_REQUEST",h="LIST_CREATE_SUCCESS",g="LIST_CREATE_FAIL",m="LIST_UPDATE_REQUEST",f="LIST_UPDATE_SUCCESS",b="LIST_UPDATE_FAIL",_="LIST_DELETE_SUCCESS",v="LIST_ACCOUNTS_FETCH_REQUEST",O="LIST_ACCOUNTS_FETCH_SUCCESS",y="LIST_ACCOUNTS_FETCH_FAIL",j="LIST_EDITOR_SUGGESTIONS_CHANGE",S="LIST_EDITOR_SUGGESTIONS_READY",C="LIST_EDITOR_SUGGESTIONS_CLEAR",E="LIST_EDITOR_ADD_SUCCESS",T="LIST_EDITOR_REMOVE_SUCCESS",I="LIST_ADDER_RESET",w="LIST_ADDER_SETUP",k="LIST_ADDER_LISTS_FETCH_REQUEST",M="LIST_ADDER_LISTS_FETCH_SUCCESS",N="LIST_ADDER_LISTS_FETCH_FAIL",x=e=>(t,n)=>{n().getIn(["lists",e])||(t(L(e)),Object(s.a)(n).get(`/api/v1/lists/${e}`).then((e=>{let{data:n}=e;return t(A(n))})).catch((n=>t(R(e,n)))))},L=e=>({type:"LIST_FETCH_REQUEST",id:e}),A=e=>({type:i,list:e}),R=(e,t)=>({type:r,id:e,error:t}),U=()=>(e,t)=>{e(D()),Object(s.a)(t).get("/api/v1/lists").then((t=>{let{data:n}=t;return e(F(n))})).catch((t=>e(P(t))))},D=()=>({type:"LISTS_FETCH_REQUEST"}),F=e=>({type:c,lists:e}),P=e=>({type:"LISTS_FETCH_FAIL",error:e}),H=e=>(t,n)=>{const s=n().getIn(["listEditor","listId"]),a=n().getIn(["listEditor","title"]);t(null===s?$(a,e):G(s,a,e))},q=e=>(t,n)=>{t({type:d,list:n().getIn(["lists",e])}),t(ne(e))},K=e=>({type:u,value:e}),$=(e,t)=>(n,a)=>{n(B()),Object(s.a)(a).post("/api/v1/lists",{title:e}).then((e=>{let{data:s}=e;n(W(s)),t&&n(J())})).catch((e=>n(z(e))))},B=()=>({type:p}),W=e=>({type:h,list:e}),z=e=>({type:g,error:e}),G=(e,t,n,a)=>(o,i)=>{o(Q(e)),Object(s.a)(i).put(`/api/v1/lists/${e}`,{title:t,replies_policy:a}).then((e=>{let{data:t}=e;o(V(t)),n&&o(J())})).catch((t=>o(X(e,t))))},Q=e=>({type:m,id:e}),V=e=>({type:f,list:e}),X=(e,t)=>({type:b,id:e,error:t}),J=()=>({type:l}),Y=e=>(t,n)=>{t(Z(e)),Object(s.a)(n).delete(`/api/v1/lists/${e}`).then((()=>t(ee(e)))).catch((n=>t(te(e,n))))},Z=e=>({type:"LIST_DELETE_REQUEST",id:e}),ee=e=>({type:_,id:e}),te=(e,t)=>({type:"LIST_DELETE_FAIL",id:e,error:t}),ne=e=>(t,n)=>{t(se(e)),Object(s.a)(n).get(`/api/v1/lists/${e}/accounts`,{params:{limit:0}}).then((n=>{let{data:s}=n;t(Object(a.h)(s)),t(ae(e,s))})).catch((n=>t(oe(e,n))))},se=e=>({type:v,id:e}),ae=(e,t,n)=>({type:O,id:e,accounts:t,next:n}),oe=(e,t)=>({type:y,id:e,error:t}),ie=e=>(t,n)=>{const i={q:e,resolve:!1,limit:4,following:!0};Object(s.a)(n).get("/api/v1/accounts/search",{params:i}).then((n=>{let{data:s}=n;t(Object(a.h)(s)),t(re(e,s))})).catch((e=>t(Object(o.f)(e))))},re=(e,t)=>({type:S,query:e,accounts:t}),ce=()=>({type:C}),ue=e=>({type:j,value:e}),le=e=>(t,n)=>{t(de(n().getIn(["listEditor","listId"]),e))},de=(e,t)=>(n,a)=>{n(pe(e,t)),Object(s.a)(a).post(`/api/v1/lists/${e}/accounts`,{account_ids:[t]}).then((()=>n(he(e,t)))).catch((s=>n(ge(e,t,s))))},pe=(e,t)=>({type:"LIST_EDITOR_ADD_REQUEST",listId:e,accountId:t}),he=(e,t)=>({type:E,listId:e,accountId:t}),ge=(e,t,n)=>({type:"LIST_EDITOR_ADD_FAIL",listId:e,accountId:t,error:n}),me=e=>(t,n)=>{t(fe(n().getIn(["listEditor","listId"]),e))},fe=(e,t)=>(n,a)=>{n(be(e,t)),Object(s.a)(a).delete(`/api/v1/lists/${e}/accounts`,{params:{account_ids:[t]}}).then((()=>n(_e(e,t)))).catch((s=>n(ve(e,t,s))))},be=(e,t)=>({type:"LIST_EDITOR_REMOVE_REQUEST",listId:e,accountId:t}),_e=(e,t)=>({type:T,listId:e,accountId:t}),ve=(e,t,n)=>({type:"LIST_EDITOR_REMOVE_FAIL",listId:e,accountId:t,error:n}),Oe=()=>({type:I}),ye=e=>(t,n)=>{t({type:w,account:n().getIn(["accounts",e])}),t(U()),t(je(e))},je=e=>(t,n)=>{t(Se(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}/lists`).then((n=>{let{data:s}=n;return t(Ce(e,s))})).catch((n=>t(Ee(e,n))))},Se=e=>({type:k,id:e}),Ce=(e,t)=>({type:M,id:e,lists:t}),Ee=(e,t)=>({type:N,id:e,err:t}),Te=e=>(t,n)=>{t(de(e,n().getIn(["listAdder","accountId"])))},Ie=e=>(t,n)=>{t(fe(e,n().getIn(["listAdder","accountId"])))}},538:function(e,t,n){var s=n(283);e.exports=function(e){if("string"==typeof e||s(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},540:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var s,a,o=n(0),i=(n(1),n(2)),r=n.n(i),c=n(6),u=n(20),l=n(30);const d=Object(c.f)({public:{id:"privacy.public.short",defaultMessage:"Public"},unlisted:{id:"privacy.unlisted.short",defaultMessage:"Unlisted"},private:{id:"privacy.private.short",defaultMessage:"Followers-only"},direct:{id:"privacy.direct.short",defaultMessage:"Mentioned people only"}});let p=Object(c.g)(((a=class extends u.a{render(){const{withLabel:e,visibility:t,intl:n}=this.props,s={public:"globe",unlisted:"unlock",private:"lock",direct:"envelope"}[t],a=n.formatMessage(d[t]),i=Object(o.a)(l.a,{className:"status__visibility-icon",fixedWidth:!0,id:s,title:a,"aria-hidden":"true"});return e?Object(o.a)("span",{style:{whiteSpace:"nowrap"}},void 0,i," ",a):i}}).propTypes={visibility:r.a.string,intl:r.a.object.isRequired,withLabel:r.a.bool},s=a))||s},545:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var s=n(158);const a="LANGUAGE_USE",o=e=>t=>{t({type:a,language:e}),t(Object(s.d)())}},546:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const s=["public","unlisted","private","direct"];function a(e,t){return s[Math.max(s.indexOf(e),s.indexOf(t),0)]}},547:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var s=n(8);const a="CUSTOM_EMOJIS_FETCH_REQUEST",o="CUSTOM_EMOJIS_FETCH_SUCCESS",i="CUSTOM_EMOJIS_FETCH_FAIL";function r(){return(e,t)=>{e({type:a,skipLoading:!0}),Object(s.a)(t).get("/api/v1/custom_emojis").then((t=>{var n;e((n=t.data,{type:o,custom_emojis:n,skipLoading:!0}))})).catch((t=>{e(function(e){return{type:i,error:e,skipLoading:!0}}(t))}))}}},548:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(0),a=n(1),o=n.n(a),i=n(239),r=n(54),c=n.n(r),u=n(30),l=n(6);class d extends o.a.PureComponent{render(){const{active:e,progress:t,isProcessing:n}=this.props;if(!e)return null;let a;return a=n?Object(s.a)(l.b,{id:"upload_progress.processing",defaultMessage:"Processing…"}):Object(s.a)(l.b,{id:"upload_progress.label",defaultMessage:"Uploading…"}),Object(s.a)("div",{className:"upload-progress"},void 0,Object(s.a)("div",{className:"upload-progress__icon"},void 0,Object(s.a)(u.a,{id:"upload"})),Object(s.a)("div",{className:"upload-progress__message"},void 0,a,Object(s.a)("div",{className:"upload-progress__backdrop"},void 0,Object(s.a)(i.a,{defaultStyle:{width:0},style:{width:c()(t)}},void 0,(e=>{let{width:t}=e;return Object(s.a)("div",{className:"upload-progress__tracker",style:{width:`${t}%`}})})))))}}},549:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s,a=n(0),o=n(1),i=n.n(o),r=n(6),c=n(565);const u=Object(r.f)({public_short:{id:"privacy.public.short",defaultMessage:"Public"},public_long:{id:"privacy.public.long",defaultMessage:"Visible for all"},unlisted_short:{id:"privacy.unlisted.short",defaultMessage:"Unlisted"},unlisted_long:{id:"privacy.unlisted.long",defaultMessage:"Visible for all, but opted-out of discovery features"},private_short:{id:"privacy.private.short",defaultMessage:"Followers only"},private_long:{id:"privacy.private.long",defaultMessage:"Visible for followers only"},direct_short:{id:"privacy.direct.short",defaultMessage:"Only people I mention"},direct_long:{id:"privacy.direct.long",defaultMessage:"Visible for mentioned users only"},change_privacy:{id:"privacy.change",defaultMessage:"Adjust status privacy"}});let l=Object(r.g)(s=class extends i.a.PureComponent{render(){const{value:e,onChange:t,onModalOpen:n,onModalClose:s,disabled:o,noDirect:i,container:r,isUserTouching:l,intl:{formatMessage:d}}=this.props,p={direct:{icon:"envelope",meta:d(u.direct_long),name:"direct",text:d(u.direct_short)},private:{icon:"lock",meta:d(u.private_long),name:"private",text:d(u.private_short)},public:{icon:"globe",meta:d(u.public_long),name:"public",text:d(u.public_short)},unlisted:{icon:"unlock",meta:d(u.unlisted_long),name:"unlisted",text:d(u.unlisted_short)}},h=[p.public,p.unlisted,p.private];return i||h.push(p.direct),Object(a.a)(c.a,{disabled:o,icon:(p[e]||{}).icon,items:h,onChange:t,isUserTouching:l,onModalClose:s,onModalOpen:n,title:d(u.change_privacy),container:r,value:e})}})||s},550:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(0),a=n(1),o=n.n(a),i=n(155);class r extends o.a.PureComponent{checkRemainingText(e){return e<0?Object(s.a)("span",{className:"character-counter character-counter--over"},void 0,e):Object(s.a)("span",{className:"character-counter"},void 0,e)}render(){const e=this.props.max-Object(i.length)(this.props.text);return this.checkRemainingText(e)}}},56:function(e,t,n){"use strict";n.d(t,"s",(function(){return b})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return O})),n.d(t,"k",(function(){return y})),n.d(t,"e",(function(){return j})),n.d(t,"t",(function(){return S})),n.d(t,"g",(function(){return C})),n.d(t,"h",(function(){return E})),n.d(t,"f",(function(){return T})),n.d(t,"i",(function(){return I})),n.d(t,"a",(function(){return w})),n.d(t,"n",(function(){return k})),n.d(t,"j",(function(){return M})),n.d(t,"m",(function(){return N})),n.d(t,"r",(function(){return x})),n.d(t,"q",(function(){return L})),n.d(t,"l",(function(){return A})),n.d(t,"p",(function(){return R})),n.d(t,"o",(function(){return U})),n.d(t,"y",(function(){return F})),n.d(t,"J",(function(){return P})),n.d(t,"x",(function(){return K})),n.d(t,"u",(function(){return $})),n.d(t,"F",(function(){return B})),n.d(t,"v",(function(){return W})),n.d(t,"w",(function(){return z})),n.d(t,"z",(function(){return G})),n.d(t,"A",(function(){return Q})),n.d(t,"C",(function(){return V})),n.d(t,"I",(function(){return X})),n.d(t,"D",(function(){return J})),n.d(t,"G",(function(){return Y})),n.d(t,"B",(function(){return Z})),n.d(t,"H",(function(){return ee})),n.d(t,"E",(function(){return te}));var s=n(8),a=n(13),o=n.n(a),i=n(16),r=n(19),c=n(214),u=n(158),l=n(6),d=n(4),p=n(242),h=n(11),g=n(57);const m=(e,t)=>{"permission"in Notification||(Notification.permission=e),t(Notification.permission)},f=e=>{(()=>{try{Notification.requestPermission().then()}catch(e){return!1}return!0})()?Notification.requestPermission().then((t=>m(t,e))).catch(console.warn):Notification.requestPermission((t=>m(t,e)))},b="NOTIFICATIONS_UPDATE",_="NOTIFICATIONS_DELETE_MARKED_REQUEST",v="NOTIFICATIONS_DELETE_MARKED_SUCCESS",O="NOTIFICATIONS_DELETE_MARKED_FAIL",y="NOTIFICATIONS_MARK_ALL_FOR_DELETE",j="NOTIFICATIONS_ENTER_CLEARING_MODE",S="NOTIFICATION_MARK_FOR_DELETE",C="NOTIFICATIONS_EXPAND_REQUEST",E="NOTIFICATIONS_EXPAND_SUCCESS",T="NOTIFICATIONS_EXPAND_FAIL",I="NOTIFICATIONS_FILTER_SET",w="NOTIFICATIONS_CLEAR",k="NOTIFICATIONS_SCROLL_TOP",M="NOTIFICATIONS_LOAD_PENDING",N="NOTIFICATIONS_MOUNT",x="NOTIFICATIONS_UNMOUNT",L="NOTIFICATIONS_SET_VISIBILITY",A="NOTIFICATIONS_MARK_AS_READ",R="NOTIFICATIONS_SET_BROWSER_SUPPORT",U="NOTIFICATIONS_SET_BROWSER_PERMISSION";Object(l.f)({mention:{id:"notification.mention",defaultMessage:"{name} mentioned you"}});const D=(e,t)=>{const n=t.filter((e=>-1!==["follow","follow_request","admin.sign_up"].indexOf(e.type))).map((e=>e.account.id));n>0&&e(Object(i.db)(n))},F=()=>({type:M});function P(e,t,n){return(s,a)=>{const u=a().getIn(["settings","notifications","quickFilter","active"]),l="all"===u?a().getIn(["settings","notifications","shows",e.type],!0):u===e.type,d=a().getIn(["settings","notifications","alerts",e.type],!0),g=a().getIn(["settings","notifications","sounds",e.type],!0);let m=!1;if(["mention","status"].includes(e.type)&&e.status.filtered){const t=e.status.filtered.filter((e=>e.filter.context.includes("notifications")));if(t.some((e=>"hide"===e.filter.filter_action)))return;m=t.length>0}if(["follow_request"].includes(e.type)&&s(Object(i.Y)()),s(Object(c.d)()),l?(s(Object(r.g)(e.account)),e.status&&s(Object(r.j)(e.status)),e.report&&s(Object(r.g)(e.report.target_account)),s({type:b,notification:e,usePendingItems:h.H,meta:g&&!m?{sound:"boop"}:void 0}),D(s,[e])):g&&!m&&s({type:"NOTIFICATIONS_UPDATE_NOOP",meta:{sound:"boop"}}),void 0!==window.Notification&&d&&!m){const s=new o.a(t[`notification.${e.type}`],n).format({name:e.account.display_name.length>0?e.account.display_name:e.account.username}),a=e.status&&e.status.spoiler_text.length>0?e.status.spoiler_text:Object(p.a)(e.status?e.status.content:""),i=new Notification(s,{body:a,icon:e.account.avatar,tag:e.id});i.addEventListener("click",(()=>{window.focus(),i.close()}))}}}const H=()=>{};let q=new AbortController;function K(e,t){let{maxId:n,forceLoad:a}=void 0===e?{}:e;return void 0===t&&(t=H),(e,o)=>{const i=o().getIn(["settings","notifications","quickFilter","active"]),u=o().get("notifications"),l=!!n;if(u.get("isLoading")){if(!a)return void t();q.abort(),q=new AbortController}const p={max_id:n,exclude_types:"all"===i?(f=o(),f.getIn(["settings","notifications","shows"]).filter((e=>!e)).keySeq().toJS()):(m=i,Object(d.List)(["follow","follow_request","favourite","reaction","reblog","mention","poll","status","update","admin.sign_up","admin.report"]).filterNot((e=>e===m)).toJS())};var m,f;if(!p.max_id&&u.get("items",Object(d.List)()).size+u.get("pendingItems",Object(d.List)()).size>0){const e=u.getIn(["pendingItems",0,"id"]),t=u.getIn(["items",0,"id"]);e&&t&&Object(g.a)(e,t)>0?p.since_id=e:p.since_id=t||e}const b=!!p.since_id;e(function(e){return{type:C,skipLoading:!e}}(l)),Object(s.a)(o).get("/api/v1/notifications",{params:p,signal:q.signal}).then((t=>{const n=Object(s.b)(t).refs.find((e=>"next"===e.rel));e(Object(r.h)(t.data.map((e=>e.account)))),e(Object(r.k)(t.data.map((e=>e.status)).filter((e=>!!e)))),e(Object(r.h)(t.data.filter((e=>e.report)).map((e=>e.report.target_account)))),e(function(e,t,n,s,a){return{type:E,notifications:e,next:t,isLoadingRecent:s,usePendingItems:a,skipLoading:!n}}(t.data,n?n.uri:null,l,b,b&&h.H)),D(e,t.data),e(Object(c.d)())})).catch((t=>{e(function(e,t){return{type:T,error:e,skipLoading:!t,skipAlert:!t||"AbortError"===e.name}}(t,l))})).finally((()=>{t()}))}}function $(){return(e,t)=>{e({type:w}),Object(s.a)(t).post("/api/v1/notifications/clear")}}function B(e){return{type:k,top:e}}function W(){return(e,t)=>{e({type:_});let n=[];t().getIn(["notifications","items"]).forEach((e=>{e.get("markedForDelete")&&n.push(e.get("id"))})),0!==n.length&&Object(s.a)(t).delete(`/api/v1/notifications/destroy_multiple?ids[]=${n.join("&ids[]=")}`).then((()=>{e({type:v})})).catch((t=>{console.error(t),e({type:O})}))}}function z(e){return{type:j,yes:e}}function G(e){return{type:y,yes:e}}function Q(e,t){return{type:S,id:e,yes:t}}function V(){return{type:N}}function X(){return{type:x}}function J(e){return{type:L,visibility:e}}function Y(e){return t=>{t({type:I,path:["notifications","quickFilter","active"],value:e}),t(K({forceLoad:!0})),t(Object(u.d)())}}function Z(){return{type:A}}function ee(){return e=>{var t;e((t="Notification"in window,{type:R,value:t})),"Notification"in window&&e(ne(Notification.permission)),"Notification"in window&&"permissions"in navigator&&navigator.permissions.query({name:"notifications"}).then((t=>{t.onchange=()=>e(ne(Notification.permission))})).catch(console.warn)}}function te(e){return void 0===e&&(e=H),t=>{f((n=>{t(ne(n)),e(n)}))}}function ne(e){return{type:U,value:e}}},565:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n(0),a=n(10),o=n.n(a),i=n(1),r=n.n(i),c=n(188),u=n(32),l=(n(20),n(30)),d=n(659);n(675);class p extends r.a.PureComponent{constructor(){super(...arguments),this.state={value:this.props.openedViaKeyboard?this.props.items[0].name:void 0},this.handleDocumentClick=e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()},this.setRef=e=>{this.node=e},this.handleClick=e=>{const t=Number(e.currentTarget.getAttribute("data-index")),{onChange:n,onClose:s,closeOnChange:a,items:o}=this.props,{name:i}=this.props.items[t];e.preventDefault(),a&&s(),n(i)},this.handleChange=e=>{this.props.value?this.props.onChange(e):this.setState({value:e})},this.handleKeyDown=e=>{const t=Number(e.currentTarget.getAttribute("data-index")),{items:n}=this.props;let s=null;switch(e.key){case"Escape":this.props.onClose();break;case"Enter":case" ":this.handleClick(e);break;case"ArrowDown":s=this.node.childNodes[t+1]||this.node.firstChild;break;case"ArrowUp":s=this.node.childNodes[t-1]||this.node.lastChild;break;case"Tab":s=e.shiftKey?this.node.childNodes[t-1]||this.node.lastChild:this.node.childNodes[t+1]||this.node.firstChild;break;case"Home":s=this.node.firstChild;break;case"End":s=this.node.lastChild}s&&(s.focus(),this.handleChange(this.props.items[Number(s.getAttribute("data-index"))].name),e.preventDefault(),e.stopPropagation())},this.setFocusRef=e=>{this.focusedItem=e},this.renderItem=(e,t)=>{const{name:n,icon:a,meta:i,text:c}=e,u=n===(this.props.value||this.state.value),d=o()("privacy-dropdown__option",{active:u});let p=this.props.renderItemContents&&this.props.renderItemContents(e,t);return p||(p=Object(s.a)(r.a.Fragment,{},void 0,a&&Object(s.a)(l.a,{className:"icon",fixedWidth:!0,id:a}),Object(s.a)("div",{className:"privacy-dropdown__option__content"},void 0,Object(s.a)("strong",{},void 0,c),i))),r.a.createElement("div",{className:d,onClick:this.handleClick,onKeyDown:this.handleKeyDown,role:"option",tabIndex:"0",key:n,"data-index":t,ref:u?this.setFocusRef:null},p)}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,d.b),this.focusedItem?this.focusedItem.focus({preventScroll:!0}):this.node.firstChild.focus({preventScroll:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,d.b)}render(){const{items:e,onChange:t,onClose:n,style:s}=this.props;return r.a.createElement("div",{style:{...s},role:"listbox",ref:this.setRef},!!e&&e.map(((e,t)=>this.renderItem(e,t))))}}p.defaultProps={style:{},closeOnChange:!0};class h extends r.a.PureComponent{constructor(){super(...arguments),this.state={open:!1,openedViaKeyboard:void 0,placement:"bottom"},this.handleToggle=e=>{let{type:t}=e;const{onModalOpen:n}=this.props,{open:s}=this.state;if(this.props.isUserTouching&&this.props.isUserTouching())if(this.state.open)this.props.onModalClose();else{const e=this.handleMakeModal();e&&n&&n(e)}else this.state.open&&this.activeElement&&this.activeElement.focus({preventScroll:!0}),this.setState({open:!this.state.open,openedViaKeyboard:"click"!==t})},this.handleKeyDown=e=>{if("Escape"===e.key)this.handleClose()},this.handleMouseDown=()=>{this.state.open||(this.activeElement=document.activeElement)},this.handleButtonKeyDown=e=>{switch(e.key){case" ":case"Enter":this.handleMouseDown()}},this.handleKeyPress=e=>{switch(e.key){case" ":case"Enter":this.handleToggle(e),e.stopPropagation(),e.preventDefault()}},this.handleClose=()=>{this.state.open&&this.activeElement&&this.activeElement.focus({preventScroll:!0}),this.setState({open:!1})},this.handleItemClick=e=>{const{items:t,onChange:n,onModalClose:s,closeOnChange:a}=this.props,o=Number(e.currentTarget.getAttribute("data-index")),{name:i}=t[o];e.preventDefault(),a&&s(),n(i)},this.handleMakeModal=()=>{const{items:e,onChange:t,onModalOpen:n,onModalClose:s,value:a}=this.props;return t&&n&&s&&e?{renderItemContents:this.props.renderItemContents,onClick:this.handleItemClick,actions:e.map((e=>{let{name:t,...n}=e;return{...n,active:a&&t===a,name:t}}))}:null},this.setTargetRef=e=>{this.target=e},this.findTarget=()=>this.target,this.handleOverlayEnter=e=>{this.setState({placement:e.placement})}}render(){const{disabled:e,title:t,icon:n,items:a,onChange:i,value:l,container:d,renderItemContents:h,closeOnChange:g}=this.props,{open:m,placement:f}=this.state,b=l&&a.findIndex((e=>{let{name:t}=e;return t===l}))===("bottom"===f?0:a.length-1);return r.a.createElement("div",{className:o()("privacy-dropdown",f,{active:m}),onKeyDown:this.handleKeyDown,ref:this.setTargetRef},Object(s.a)("div",{className:o()("privacy-dropdown__value",{active:b})},void 0,Object(s.a)(u.a,{active:m,className:"privacy-dropdown__value-icon",disabled:e,icon:n,inverted:!0,onClick:this.handleToggle,onMouseDown:this.handleMouseDown,onKeyDown:this.handleButtonKeyDown,onKeyPress:this.handleKeyPress,size:18,style:{height:null,lineHeight:"27px"},title:t})),Object(s.a)(c.a,{containerPadding:20,placement:f,show:m,flip:!0,target:this.findTarget,container:d,popperConfig:{strategy:"fixed",onFirstUpdate:this.handleOverlayEnter}},void 0,(e=>{let{props:t,placement:n}=e;return r.a.createElement("div",t,Object(s.a)("div",{className:`dropdown-animation privacy-dropdown__dropdown ${n}`},void 0,Object(s.a)(p,{items:a,renderItemContents:h,onChange:i,onClose:this.handleClose,value:l,openedViaKeyboard:this.state.openedViaKeyboard,closeOnChange:g})))})))}}h.defaultProps={closeOnChange:!0}},566:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return r}));var s=n(8);const a="FEATURED_TAGS_FETCH_REQUEST",o="FEATURED_TAGS_FETCH_SUCCESS",i="FEATURED_TAGS_FETCH_FAIL",r=e=>(t,n)=>{n().getIn(["user_lists","featured_tags",e,"items"])||(t(c(e)),Object(s.a)(n).get(`/api/v1/accounts/${e}/featured_tags`).then((n=>{let{data:s}=n;return t(u(e,s))})).catch((n=>t(l(e,n)))))},c=e=>({type:a,id:e}),u=(e,t)=>({type:o,id:e,tags:t}),l=(e,t)=>({type:i,id:e,error:t})},567:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c}));var s=n(8),a=n(19);const o="HISTORY_FETCH_REQUEST",i="HISTORY_FETCH_SUCCESS",r="HISTORY_FETCH_FAIL",c=e=>(t,n)=>{n().getIn(["history",e,"loading"])||(t(u(e)),Object(s.a)(n).get(`/api/v1/statuses/${e}/history`).then((n=>{let{data:s}=n;t(Object(a.h)(s.map((e=>e.account)))),t(l(e,s))})).catch((e=>t(d(e)))))},u=e=>({type:o,statusId:e}),l=(e,t)=>({type:i,statusId:e,history:t}),d=e=>({type:r,error:e})},577:function(e,t,n){var s=n(238),a=n(283),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(s(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(i.test(e)||!o.test(e)||null!=t&&e in Object(t))}},578:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i}));const s="PICTURE_IN_PICTURE_DEPLOY",a="PICTURE_IN_PICTURE_REMOVE",o=(e,t,n,a)=>(o,i)=>{i().hasIn(["statuses",e])&&o({type:s,statusId:e,accountId:t,playerType:n,props:a})},i=()=>({type:a})},586:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}));const s="DROPDOWN_MENU_OPEN",a="DROPDOWN_MENU_CLOSE";function o(e,t,n){return{type:s,id:e,keyboard:t,scroll_key:n}}function i(e){return{type:a,id:e}}},596:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}));const s="HEIGHT_CACHE_SET",a="HEIGHT_CACHE_CLEAR";function o(e,t,n){return{type:s,key:e,id:t,height:n}}function i(){return{type:a}}},597:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return h}));var s=n(8),a=n(36);const o="FILTERS_FETCH_SUCCESS",i="FILTERS_CREATE_SUCCESS",r=(e,t)=>{let{contextType:n}=t;return t=>t(Object(a.d)("FILTER",{statusId:null==e?void 0:e.get("id"),contextType:n}))},c=()=>(e,t)=>{e({type:"FILTERS_FETCH_REQUEST",skipLoading:!0}),Object(s.a)(t).get("/api/v2/filters").then((t=>{let{data:n}=t;return e({type:o,filters:n,skipLoading:!0})})).catch((t=>e({type:"FILTERS_FETCH_FAIL",err:t,skipLoading:!0,skipAlert:!0})))},u=(e,t,n)=>(a,o)=>{a(l()),Object(s.a)(o).post(`/api/v2/filters/${e.filter_id}/statuses`,e).then((e=>{a(d(e.data)),t&&t()})).catch((e=>{a(p(e)),n&&n()}))},l=()=>({type:"FILTERS_STATUS_CREATE_REQUEST"}),d=e=>({type:"FILTERS_STATUS_CREATE_SUCCESS",filter_status:e}),p=e=>({type:"FILTERS_STATUS_CREATE_FAIL",error:e}),h=(e,t,n)=>(a,o)=>{a(g()),Object(s.a)(o).post("/api/v2/filters",e).then((e=>{a(m(e.data)),t&&t(e.data)})).catch((e=>{a(f(e)),n&&n()}))},g=()=>({type:"FILTERS_CREATE_REQUEST"}),m=e=>({type:i,filter:e}),f=e=>({type:"FILTERS_CREATE_FAIL",error:e})},659:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));const s=!!n(531).a&&{passive:!0};function a(){let e;document&&(e=document.querySelector(".ui"))&&(e=e.parentElement)&&e.focus()}},660:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var s=n(0);n(1);const a=Object(s.a)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"13",height:"13"},void 0,Object(s.a)("path",{d:"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"})),o=Object(s.a)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"13",height:"13"},void 0,Object(s.a)("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"}))},666:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(0);n(1);const a=e=>{let{size:t,strokeWidth:n}=e;const a=`0 0 ${t} ${t}`,o=(t-n)/2;return Object(s.a)("svg",{width:t,heigh:t,viewBox:a,className:"circular-progress",role:"progressbar"},void 0,Object(s.a)("circle",{fill:"none",cx:t/2,cy:t/2,r:o,strokeWidth:`${n}px`}))};t.b=()=>Object(s.a)("div",{className:"loading-indicator"},void 0,Object(s.a)(a,{size:50,strokeWidth:6}))},668:function(e,t,n){"use strict";var s,a,o=n(0),i=n(1),r=n(12),c=n(6),u=n(236),l=n(21),d=n.n(l),p=n(2),h=n.n(p),g=n(200),m=n(198),f=n(299),b=n(32),_=n(20),v=n(11),O=n(163),y=n(302);const j=Object(c.f)({follow:{id:"account.follow",defaultMessage:"Follow"},unfollow:{id:"account.unfollow",defaultMessage:"Unfollow"},requested:{id:"account.requested",defaultMessage:"Awaiting approval"},unblock:{id:"account.unblock",defaultMessage:"Unblock @{name}"},unmute:{id:"account.unmute",defaultMessage:"Unmute @{name}"},mute_notifications:{id:"account.mute_notifications",defaultMessage:"Mute notifications from @{name}"},unmute_notifications:{id:"account.unmute_notifications",defaultMessage:"Unmute notifications from @{name}"},mute:{id:"account.mute",defaultMessage:"Mute @{name}"},block:{id:"account.block",defaultMessage:"Block @{name}"}});let S=Object(c.g)((a=class extends _.a{constructor(){super(...arguments),this.handleFollow=()=>{this.props.onFollow(this.props.account)},this.handleBlock=()=>{this.props.onBlock(this.props.account)},this.handleMute=()=>{this.props.onMute(this.props.account)},this.handleMuteNotifications=()=>{this.props.onMuteNotifications(this.props.account,!0)},this.handleUnmuteNotifications=()=>{this.props.onMuteNotifications(this.props.account,!1)},this.handleAction=()=>{this.props.onActionClick(this.props.account)}}render(){const{account:e,hidden:t,intl:n,small:s,onActionClick:a,actionIcon:r,actionTitle:c,defaultAction:u,size:l}=this.props;if(!e)return Object(o.a)("div",{className:"account"},void 0,Object(o.a)("div",{className:"account__wrapper"},void 0,Object(o.a)("div",{className:"account__display-name"},void 0,Object(o.a)("div",{className:"account__avatar-wrapper"},void 0,Object(o.a)(y.a,{width:36,height:36})),Object(o.a)(m.a,{}))));if(t)return Object(o.a)(i.Fragment,{},void 0,e.get("display_name"),e.get("username"));let d,p;if(a)r&&(d=Object(o.a)(b.a,{icon:r,title:c,onClick:this.handleAction}));else if(e.get("id")!==v.q&&!s&&null!==e.get("relationship",null)){const t=e.getIn(["relationship","following"]),s=e.getIn(["relationship","requested"]),a=e.getIn(["relationship","blocking"]),r=e.getIn(["relationship","muting"]);if(s)d=Object(o.a)(b.a,{disabled:!0,icon:"hourglass",title:n.formatMessage(j.requested)});else if(a)d=Object(o.a)(b.a,{active:!0,icon:"unlock",title:n.formatMessage(j.unblock,{name:e.get("username")}),onClick:this.handleBlock});else if(r){let t;t=e.getIn(["relationship","muting_notifications"])?Object(o.a)(b.a,{active:!0,icon:"bell",title:n.formatMessage(j.unmute_notifications,{name:e.get("username")}),onClick:this.handleUnmuteNotifications}):Object(o.a)(b.a,{active:!0,icon:"bell-slash",title:n.formatMessage(j.mute_notifications,{name:e.get("username")}),onClick:this.handleMuteNotifications}),d=Object(o.a)(i.Fragment,{},void 0,Object(o.a)(b.a,{active:!0,icon:"volume-up",title:n.formatMessage(j.unmute,{name:e.get("username")}),onClick:this.handleMute}),t)}else"mute"===u?d=Object(o.a)(b.a,{icon:"volume-off",title:n.formatMessage(j.mute,{name:e.get("username")}),onClick:this.handleMute}):"block"===u?d=Object(o.a)(b.a,{icon:"lock",title:n.formatMessage(j.block,{name:e.get("username")}),onClick:this.handleBlock}):e.get("moved")&&!t||(d=Object(o.a)(b.a,{icon:t?"user-times":"user-plus",title:n.formatMessage(t?j.unfollow:j.follow),onClick:this.handleFollow,active:t}))}return e.get("mute_expires_at")&&(p=Object(o.a)("div",{},void 0,Object(o.a)(O.default,{timestamp:e.get("mute_expires_at"),futureDate:!0}))),s?Object(o.a)(f.a,{className:"account small",href:e.get("url"),to:`/@${e.get("acct")}`},void 0,Object(o.a)("div",{className:"account__avatar-wrapper"},void 0,Object(o.a)(g.a,{account:e,size:24})),Object(o.a)(m.a,{account:e,inline:!0})):Object(o.a)("div",{className:"account"},void 0,Object(o.a)("div",{className:"account__wrapper"},void 0,Object(o.a)(f.a,{className:"account__display-name",title:e.get("acct"),href:e.get("url"),to:`/@${e.get("acct")}`},e.get("id"),Object(o.a)("div",{className:"account__avatar-wrapper"},void 0,Object(o.a)(g.a,{account:e,size:l})),p,Object(o.a)(m.a,{account:e})),d?Object(o.a)("div",{className:"account__relationship"},void 0,d):null))}},a.propTypes={size:h.a.number,account:d.a.map,onFollow:h.a.func.isRequired,onBlock:h.a.func.isRequired,onMute:h.a.func.isRequired,onMuteNotifications:h.a.func.isRequired,intl:h.a.object.isRequired,hidden:h.a.bool,small:h.a.bool,actionIcon:h.a.string,actionTitle:h.a.string,defaultAction:h.a.string,onActionClick:h.a.func},a.defaultProps={size:36},s=a))||s;var C=n(16),E=n(36),T=n(191);const I=Object(c.f)({unfollowConfirm:{id:"confirmations.unfollow.confirm",defaultMessage:"Unfollow"}});t.a=Object(c.g)(Object(r.connect)((()=>{const e=Object(u.e)();return(t,n)=>({account:e(t,n.id)})}),((e,t)=>{let{intl:n}=t;return{onFollow(t){t.getIn(["relationship","following"])||t.getIn(["relationship","requested"])?v.F?e(Object(E.d)("CONFIRM",{message:Object(o.a)(c.b,{id:"confirmations.unfollow.message",defaultMessage:"Are you sure you want to unfollow {name}?",values:{name:Object(o.a)("strong",{},void 0,"@",t.get("acct"))}}),confirm:n.formatMessage(I.unfollowConfirm),onConfirm:()=>e(Object(C.mb)(t.get("id")))})):e(Object(C.mb)(t.get("id"))):e(Object(C.eb)(t.get("id")))},onBlock(t){t.getIn(["relationship","blocking"])?e(Object(C.lb)(t.get("id"))):e(Object(C.R)(t.get("id")))},onMute(t){t.getIn(["relationship","muting"])?e(Object(C.nb)(t.get("id"))):e(Object(T.m)(t))},onMuteNotifications(t,n){e(Object(C.gb)(t.get("id"),n))}}}))(S))},670:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var s=n(19),a=n(16),o=n(4);const i=e=>e.toLowerCase(),r=Object(o.Map)();function c(e,t){var n,o;switch(void 0===e&&(e=r),t.type){case a.e:return 404===(null==(n=t.error)||null==(o=n.response)?void 0:o.status)?e.set(i(t.acct),null):e;case s.b:return e.set(i(t.account.acct),t.account.id);case s.a:return e.withMutations((e=>t.accounts.forEach((t=>e.set(i(t.acct),t.id)))));default:return e}}},675:function(e,t,n){"use strict";function s(e,t,n){return e(t)?n:null}n.d(t,"a",(function(){return s}))},678:function(e,t,n){"use strict";var s,a,o,i=n(12),r=n(9),c=n(0),u=n(1),l=n.n(u),d=n(6),p=n(157),h=n(188),g=n(10),m=n.n(g),f=n(531),b=n(126),_=n(11),v=n(149);const O=Object(d.f)({emoji:{id:"emoji_button.label",defaultMessage:"Insert emoji"},emoji_search:{id:"emoji_button.search",defaultMessage:"Search..."},custom:{id:"emoji_button.custom",defaultMessage:"Custom"},recent:{id:"emoji_button.recent",defaultMessage:"Frequently used"},search_results:{id:"emoji_button.search_results",defaultMessage:"Search results"},people:{id:"emoji_button.people",defaultMessage:"People"},nature:{id:"emoji_button.nature",defaultMessage:"Nature"},food:{id:"emoji_button.food",defaultMessage:"Food & Drink"},activity:{id:"emoji_button.activity",defaultMessage:"Activity"},travel:{id:"emoji_button.travel",defaultMessage:"Travel & Places"},objects:{id:"emoji_button.objects",defaultMessage:"Objects"},symbols:{id:"emoji_button.symbols",defaultMessage:"Symbols"},flags:{id:"emoji_button.flags",defaultMessage:"Flags"}});let y,j;const S=!!f.a&&{passive:!0},C=()=>`${v.a}/emoji/sheet_13.png`,E=()=>Object(c.a)("div",{className:"emoji-mart-no-results"},void 0,Object(c.a)(j,{emoji:"sleuth_or_spy",set:"twitter",size:32,sheetSize:32,backgroundImageFn:C}),Object(c.a)("div",{className:"emoji-mart-no-results-label"},void 0,Object(c.a)(d.b,{id:"emoji_button.not_found",defaultMessage:"No matching emojis found"})));class T extends l.a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{this.props.onSelect(1*e.currentTarget.getAttribute("data-index"))},this.handleDocumentClick=e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()},this.setRef=e=>{this.node=e}}componentWillReceiveProps(e){e.active?this.attachListeners():this.removeListeners()}componentWillUnmount(){this.removeListeners()}attachListeners(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,S)}removeListeners(){document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,S)}render(){const{active:e}=this.props;return l.a.createElement("div",{className:"emoji-picker-dropdown__modifiers__menu",style:{display:e?"block":"none"},ref:this.setRef},Object(c.a)("button",{onClick:this.handleClick,"data-index":1},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:1,backgroundImageFn:C,native:_.I})),Object(c.a)("button",{onClick:this.handleClick,"data-index":2},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:2,backgroundImageFn:C,native:_.I})),Object(c.a)("button",{onClick:this.handleClick,"data-index":3},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:3,backgroundImageFn:C,native:_.I})),Object(c.a)("button",{onClick:this.handleClick,"data-index":4},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:4,backgroundImageFn:C,native:_.I})),Object(c.a)("button",{onClick:this.handleClick,"data-index":5},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:5,backgroundImageFn:C,native:_.I})),Object(c.a)("button",{onClick:this.handleClick,"data-index":6},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:6,backgroundImageFn:C,native:_.I})))}}class I extends l.a.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.active?this.props.onClose():this.props.onOpen()},this.handleSelect=e=>{this.props.onChange(e),this.props.onClose()}}render(){const{active:e,modifier:t}=this.props;return Object(c.a)("div",{className:"emoji-picker-dropdown__modifiers"},void 0,Object(c.a)(j,{emoji:"fist",set:"twitter",size:22,sheetSize:32,skin:t,onClick:this.handleClick,backgroundImageFn:C,native:_.I}),Object(c.a)(T,{active:e,onSelect:this.handleSelect,onClose:this.props.onClose}))}}let w=Object(d.g)((a=class extends l.a.PureComponent{constructor(){super(...arguments),this.state={modifierOpen:!1,readyToFocus:!1},this.handleDocumentClick=e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()},this.setRef=e=>{this.node=e},this.getI18n=()=>{const{intl:e}=this.props;return{search:e.formatMessage(O.emoji_search),categories:{search:e.formatMessage(O.search_results),recent:e.formatMessage(O.recent),people:e.formatMessage(O.people),nature:e.formatMessage(O.nature),foods:e.formatMessage(O.food),activity:e.formatMessage(O.activity),places:e.formatMessage(O.travel),objects:e.formatMessage(O.objects),symbols:e.formatMessage(O.symbols),flags:e.formatMessage(O.flags),custom:e.formatMessage(O.custom)}}},this.handleClick=(e,t)=>{e.native||(e.native=e.colons),t.ctrlKey||t.metaKey||this.props.onClose(),this.props.onPick(e)},this.handleModifierOpen=()=>{this.setState({modifierOpen:!0})},this.handleModifierClose=()=>{this.setState({modifierOpen:!1})},this.handleModifierChange=e=>{this.props.onSkinTone(e)}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,S),requestAnimationFrame((()=>{if(this.setState({readyToFocus:!0}),this.node){const e=this.node.querySelector('input[type="search"]');e&&e.focus()}}))}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,S)}render(){const{loading:e,style:t,intl:n,custom_emojis:s,skinTone:a,frequentlyUsedEmojis:o}=this.props;if(e)return Object(c.a)("div",{style:{width:299}});const i=n.formatMessage(O.emoji),{modifierOpen:r}=this.state,u=["recent","people","nature","foods","activity","places","objects","symbols","flags"];return u.splice(1,0,...Array.from(Object(b.categoriesFromEmojis)(s)).sort()),l.a.createElement("div",{className:m()("emoji-picker-dropdown__menu",{selecting:r}),style:t,ref:this.setRef},Object(c.a)(y,{perLine:8,emojiSize:22,sheetSize:32,custom:Object(b.buildCustomEmojis)(s),color:"",emoji:"",set:"twitter",title:i,i18n:this.getI18n(),onClick:this.handleClick,include:u,recent:o,skin:a,showPreview:!1,showSkinTones:!1,backgroundImageFn:C,notFound:E,autoFocus:this.state.readyToFocus,emojiTooltip:!0,native:_.I}),Object(c.a)(I,{active:r,modifier:a,onOpen:this.handleModifierOpen,onClose:this.handleModifierClose,onChange:this.handleModifierChange}))}},a.defaultProps={style:{},loading:!0,frequentlyUsedEmojis:[]},s=a))||s,k=Object(d.g)(o=class extends l.a.PureComponent{constructor(){super(...arguments),this.state={active:!1,loading:!1},this.setRef=e=>{this.dropdown=e},this.onShowDropdown=()=>{this.setState({active:!0}),y||(this.setState({loading:!0}),Object(p.p)().then((e=>{y=e.Picker,j=e.Emoji,this.setState({loading:!1})})).catch((()=>{this.setState({loading:!1,active:!1})})))},this.onHideDropdown=()=>{this.setState({active:!1})},this.onToggle=e=>{this.state.disabled||this.state.loading||e.key&&"Enter"!==e.key||(this.state.active?this.onHideDropdown():this.onShowDropdown(e))},this.handleKeyDown=e=>{"Escape"===e.key&&this.onHideDropdown()},this.setTargetRef=e=>{this.target=e},this.findTarget=()=>this.target}render(){const{intl:e,onPickEmoji:t,onSkinTone:n,skinTone:s,frequentlyUsedEmojis:a,button:o}=this.props,i=e.formatMessage(O.emoji),{active:u,loading:d}=this.state;return Object(c.a)("div",{className:"emoji-picker-dropdown",onKeyDown:this.handleKeyDown},void 0,l.a.createElement("div",{ref:this.setTargetRef,className:"emoji-button",title:i,"aria-label":i,"aria-expanded":u,role:"button",onClick:this.onToggle,onKeyDown:this.onToggle,tabIndex:0},o||Object(c.a)("img",{className:m()("emojione",{"pulse-loading":u&&d}),alt:"🙂",src:`${v.a}/emoji/1f602.svg`})),Object(c.a)(h.a,{show:u,placement:"bottom",flip:!0,target:this.findTarget,popperConfig:{strategy:"fixed"}},void 0,(e=>{let{props:o,placement:i}=e;return l.a.createElement("div",Object(r.a)({},o,{style:{...o.style,width:299}}),Object(c.a)("div",{className:`dropdown-animation ${i}`},void 0,Object(c.a)(w,{custom_emojis:this.props.custom_emojis,loading:d,onClose:this.onHideDropdown,onPick:t,onSkinTone:n,skinTone:s,frequentlyUsedEmojis:a})))})))}})||o;var M=n(158),N=n(48),x=n(4),L=n(289);const A=["+1","grinning","kissing_heart","heart_eyes","laughing","stuck_out_tongue_winking_eye","sweat_smile","joy","yum","disappointed","thinking_face","weary","sob","sunglasses","heart","ok_hand"],R=Object(N.a)([e=>e.getIn(["settings","frequentlyUsedEmojis"],Object(x.Map)())],(e=>{let t=e.keySeq().sort(((t,n)=>e.get(t)-e.get(n))).reverse().slice(0,16).toArray();if(t.length<A.length){let e=A.filter((e=>!t.includes(e)));t=t.concat(e.slice(0,A.length-t.length))}return t})),U=Object(N.a)([e=>e.get("custom_emojis")],(e=>e.filter((e=>e.get("visible_in_picker"))).sort(((e,t)=>{const n=e.get("shortcode").toLowerCase(),s=t.get("shortcode").toLowerCase();return n<s?-1:n>s?1:0}))));t.a=Object(i.connect)((e=>({custom_emojis:U(e),skinTone:e.getIn(["settings","skinTone"]),frequentlyUsedEmojis:R(e)})),((e,t)=>{let{onPickEmoji:n}=t;return{onSkinTone:t=>{e(Object(M.c)(["skinTone"],t))},onPickEmoji:t=>{e(Object(L.b)(t)),n&&n(t)}}}))(k)},681:function(e,t,n){"use strict";var s=n(0),a=n(1),o=n.n(a);const i=()=>null,r=()=>{};class c extends o.a.Component{constructor(){super(...arguments),this.state={mod:void 0,forceRender:!1},this.load=e=>{const{fetchComponent:t,onFetch:n,onFetchSuccess:s,onFetchFail:a,renderDelay:o}=e||this.props;if(void 0===t)return this.setState({mod:null}),Promise.resolve();if(n(),c.cache[t.name]){const e=c.cache[t.name];return this.setState({mod:e.default}),s(),Promise.resolve()}return this.setState({mod:void 0}),0!==o&&(this.timestamp=new Date,this.timeout=setTimeout((()=>this.setState({forceRender:!0})),o)),t().then((e=>{c.cache[t.name]=e,this.setState({mod:e.default}),s()})).catch((e=>{this.setState({mod:null}),a(e)}))}}componentWillMount(){this.load(this.props)}componentWillReceiveProps(e){e.fetchComponent!==this.props.fetchComponent&&this.load(e)}componentWillUnmount(){this.timeout&&clearTimeout(this.timeout)}render(){const{loading:e,error:t,children:n,renderDelay:a}=this.props,{mod:o,forceRender:i}=this.state,r=this.timestamp?new Date-this.timestamp:a;return void 0===o?r>=a||i?Object(s.a)(e,{}):null:null===o?Object(s.a)(t,{onRetry:this.load}):n(o)}}c.defaultProps={loading:i,error:i,renderDelay:0,onFetch:r,onFetchSuccess:r,onFetchFail:r},c.cache={},t.a=c},692:function(e,t,n){var s=n(210);e.exports=function(e){return e==e&&!s(e)}},693:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},694:function(e,t,n){var s=n(695),a=n(538);e.exports=function(e,t){for(var n=0,o=(t=s(t,e)).length;null!=e&&n<o;)e=e[a(t[n++])];return n&&n==o?e:void 0}},695:function(e,t,n){var s=n(238),a=n(577),o=n(933),i=n(936);e.exports=function(e,t){return s(e)?e:a(e,t)?[e]:o(i(e))}},698:function(e,t,n){"use strict";var s=n(12),a=n(681);t.a=Object(s.connect)(null,(e=>({onFetch(){var t;e({type:"BUNDLE_FETCH_REQUEST",skipLoading:t})},onFetchSuccess(){var t;e({type:"BUNDLE_FETCH_SUCCESS",skipLoading:t})},onFetchFail(t){e(function(e,t){return{type:"BUNDLE_FETCH_FAIL",error:e,skipLoading:t}}(t))}})))(a.a)},702:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));const s="APP_LAYOUT_CHANGE",a=e=>({type:s,layout:e})},703:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u}));var s=n(8),a=n(19),o=n(11);const i="PINNED_STATUSES_FETCH_REQUEST",r="PINNED_STATUSES_FETCH_SUCCESS",c="PINNED_STATUSES_FETCH_FAIL";function u(){return(e,t)=>{e({type:i}),Object(s.a)(t).get(`/api/v1/accounts/${o.q}/statuses`,{params:{pinned:!0}}).then((t=>{var n;e(Object(a.k)(t.data)),e((n=t.data,{type:r,statuses:n,next:null}))})).catch((t=>{e(function(e){return{type:c,error:e}}(t))}))}}},704:function(e,t,n){"use strict";var s=n(12),a=n(6),o=n(717),i=n(14),r=n(36),c=n(307),u=n(546);const l=Object(a.f)({missingDescriptionMessage:{id:"confirmations.missing_media_description.message",defaultMessage:"At least one media attachment is lacking a description. Consider describing all media attachments for the visually impaired before sending your toot."},missingDescriptionConfirm:{id:"confirmations.missing_media_description.confirm",defaultMessage:"Send anyway"},missingDescriptionEdit:{id:"confirmations.missing_media_description.edit",defaultMessage:"Edit media"}});t.a=Object(a.g)(Object(s.connect)((function(e){const t=e.getIn(["local_settings","always_show_spoilers_field"]),n=e.getIn(["compose","in_reply_to"]),s=n?e.getIn(["statuses",n,"visibility"]):null,a=e.getIn(["local_settings","side_arm"]),o=s?Object(u.a)(s,a):null;let i=null;switch(e.getIn(["local_settings","side_arm_reply_mode"])){case"copy":i=s;break;case"restrict":i=o}return i=i||a,{advancedOptions:e.getIn(["compose","advanced_options"]),focusDate:e.getIn(["compose","focusDate"]),caretPosition:e.getIn(["compose","caretPosition"]),isSubmitting:e.getIn(["compose","is_submitting"]),isEditing:null!==e.getIn(["compose","id"]),isChangingUpload:e.getIn(["compose","is_changing_upload"]),isUploading:e.getIn(["compose","is_uploading"]),layout:e.getIn(["local_settings","layout"]),media:e.getIn(["compose","media_attachments"]),preselectDate:e.getIn(["compose","preselectDate"]),privacy:e.getIn(["compose","privacy"]),sideArm:i,sensitive:e.getIn(["compose","sensitive"]),showSearch:e.getIn(["search","submitted"])&&!e.getIn(["search","hidden"]),spoiler:t||e.getIn(["compose","spoiler"]),spoilerText:e.getIn(["compose","spoiler_text"]),suggestions:e.getIn(["compose","suggestions"]),text:e.getIn(["compose","text"]),anyMedia:e.getIn(["compose","media_attachments"]).size>0,spoilersAlwaysOn:t,mediaDescriptionConfirmation:e.getIn(["local_settings","confirm_missing_media_description"]),preselectOnReply:e.getIn(["local_settings","preselect_on_reply"]),isInReply:null!==e.getIn(["compose","in_reply_to"]),lang:e.getIn(["compose","language"])}}),((e,t)=>{let{intl:n}=t;return{onChange(t){e(Object(i.bb)(t))},onSubmit(t){e(Object(i.Fb)(t))},onClearSuggestions(){e(Object(i.mb)())},onFetchSuggestions(t){e(Object(i.rb)(t))},onSuggestionSelected(t,n,s,a){e(Object(i.Db)(t,n,s,a))},onChangeSpoilerText(t){e(Object(i.gb)(t))},onPaste(t){e(Object(i.Ib)(t))},onPickEmoji(t,n){e(Object(i.ub)(t,n))},onChangeSpoilerness(){e(Object(i.hb)())},onChangeVisibility(t){e(Object(i.ib)(t))},onMediaDescriptionConfirm(t,s,a){void 0===a&&(a=null),e(Object(r.d)("CONFIRM",{message:n.formatMessage(l.missingDescriptionMessage),confirm:n.formatMessage(l.missingDescriptionConfirm),onConfirm:()=>{a&&e(Object(i.ib)(a)),e(Object(i.Fb)(t))},secondary:n.formatMessage(l.missingDescriptionEdit),onSecondary:()=>e(Object(r.d)("FOCAL_POINT",{id:s})),onDoNotAsk:()=>e(Object(c.c)(["confirm_missing_media_description"],!1))}))}}}))(o.a))},717:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ot}));var s,a,o=n(0),i=n(1),r=n.n(i),c=n(21),u=n.n(c),l=n(2),d=n.n(l),p=n(12),h=n(14),g=n(6),m=n(20),f=n(668),b=n(32),_=n(286);const v=Object(g.f)({cancel:{id:"reply_indicator.cancel",defaultMessage:"Cancel"}});let O=Object(g.g)((a=class extends m.a{constructor(){super(...arguments),this.handleClick=()=>{const{onCancel:e}=this.props;e&&e()}}render(){const{status:e,intl:t}=this.props;if(!e)return null;const n=e.get("account"),s=e.get("content"),a=e.get("media_attachments");return Object(o.a)("article",{className:"reply-indicator"},void 0,Object(o.a)("header",{className:"reply-indicator__header"},void 0,Object(o.a)(b.a,{className:"reply-indicator__cancel",icon:"times",onClick:this.handleClick,title:t.formatMessage(v.cancel),inverted:!0}),n&&Object(o.a)(f.a,{id:n,small:!0})),Object(o.a)("div",{className:"reply-indicator__content translate",dangerouslySetInnerHTML:{__html:s||""}}),a.size>0&&Object(o.a)(_.a,{compact:!0,media:a}))}},a.propTypes={status:u.a.map,intl:d.a.object.isRequired,onCancel:d.a.func},s=a))||s;var y=Object(p.connect)((()=>e=>{let t=e.getIn(["compose","id"],null),n=!0;return null===t&&(t=e.getIn(["compose","in_reply_to"]),n=!1),{status:e.getIn(["statuses",t]),editing:n}}),(e=>({onCancel(){e(Object(h.ab)())}})))(O),j=n(200),S=n(198);class C extends m.a{render(){const{account:e}=this.props;return Object(o.a)("div",{className:"account small",title:e.get("acct")},void 0,Object(o.a)("div",{className:"account__avatar-wrapper"},void 0,Object(o.a)(j.a,{account:e,size:24})),Object(o.a)(S.a,{account:e,inline:!0}))}}C.propTypes={account:u.a.map.isRequired};var E=n(236);var T=Object(p.connect)((()=>{const e=Object(E.e)();return(t,n)=>{let{id:s}=n;return{account:e(t,s)}}}))(C),I=n(45),w=n.n(I),k=n(149);class M extends r.a.PureComponent{render(){const{emoji:e}=this.props;let t;if(e.custom)t=e.imageUrl;else{const n=w.a[e.native]||w.a[e.native.replace(/\uFE0F$/,"")];if(!n)return null;t=`${k.a}/emoji/${n.filename}.svg`}return Object(o.a)("div",{className:"emoji"},void 0,Object(o.a)("img",{className:"emojione",src:t,alt:e.native||e.colons}),e.colons)}}var N=n(672);class x extends r.a.PureComponent{render(){const{tag:e}=this.props,t=e.history&&Object(o.a)(N.a,{value:e.history.reduce(((e,t)=>e+1*t.uses),0)});return Object(o.a)("div",{className:"autosuggest-hashtag"},void 0,Object(o.a)("div",{className:"autosuggest-hashtag__name"},void 0,"#",Object(o.a)("strong",{},void 0,e.name)),void 0!==e.history&&Object(o.a)("div",{className:"autosuggest-hashtag__uses"},void 0,Object(o.a)(g.b,{id:"autosuggest_hashtag.per_week",defaultMessage:"{count} per week",values:{count:t}})))}}var L=n(226),A=n(10),R=n.n(A);class U extends m.a{constructor(){super(...arguments),this.state={suggestionsHidden:!0,focused:!1,selectedSuggestion:0,lastToken:null,tokenStart:0},this.onChange=e=>{const[t,n]=((e,t)=>{let n,s=e.slice(0,t).search(/[^\s\u200B]+$/),a=e.slice(t).search(/[\s\u200B]/);return n=a<0?e.slice(s):e.slice(s,a+t),!n||n.trim().length<3||-1===["@",":","#"].indexOf(n[0])?[null,null]:(n=n.trim().toLowerCase(),n.length>0?[s,n]:[null,null])})(e.target.value,e.target.selectionStart);null!==n&&this.state.lastToken!==n?(this.setState({lastToken:n,selectedSuggestion:0,tokenStart:t}),this.props.onSuggestionsFetchRequested(n)):null===n&&(this.setState({lastToken:null}),this.props.onSuggestionsClearRequested()),this.props.onChange(e)},this.onKeyDown=e=>{const{suggestions:t,disabled:n}=this.props,{selectedSuggestion:s,suggestionsHidden:a}=this.state;if(n)e.preventDefault();else if(229!==e.which&&!e.isComposing){switch(e.key){case"Escape":0===t.size||a?document.querySelector(".ui").parentElement.focus():(e.preventDefault(),this.setState({suggestionsHidden:!0}));break;case"ArrowDown":t.size>0&&!a&&(e.preventDefault(),this.setState({selectedSuggestion:Math.min(s+1,t.size-1)}));break;case"ArrowUp":t.size>0&&!a&&(e.preventDefault(),this.setState({selectedSuggestion:Math.max(s-1,0)}));break;case"Enter":case"Tab":null!==this.state.lastToken&&t.size>0&&!a&&(e.preventDefault(),e.stopPropagation(),this.props.onSuggestionSelected(this.state.tokenStart,this.state.lastToken,t.get(s)))}!e.defaultPrevented&&this.props.onKeyDown&&this.props.onKeyDown(e)}},this.onBlur=()=>{this.setState({suggestionsHidden:!0,focused:!1})},this.onFocus=e=>{this.setState({focused:!0}),this.props.onFocus&&this.props.onFocus(e)},this.onSuggestionClick=e=>{const t=this.props.suggestions.get(e.currentTarget.getAttribute("data-index"));e.preventDefault(),this.props.onSuggestionSelected(this.state.tokenStart,this.state.lastToken,t),this.textarea.focus()},this.setTextarea=e=>{this.textarea=e},this.onPaste=e=>{e.clipboardData&&1===e.clipboardData.files.length&&(this.props.onPaste(e.clipboardData.files),e.preventDefault())},this.renderSuggestion=(e,t)=>{const{selectedSuggestion:n}=this.state;let s,a;return"emoji"===e.type?(s=Object(o.a)(M,{emoji:e}),a=e.id):"hashtag"===e.type?(s=Object(o.a)(x,{tag:e}),a=e.name):"account"===e.type&&(s=Object(o.a)(T,{id:e.id}),a=e.id),Object(o.a)("div",{role:"button",tabIndex:"0","data-index":t,className:R()("autosuggest-textarea__suggestions__item",{selected:t===n}),onMouseDown:this.onSuggestionClick},a,s)}}componentWillReceiveProps(e){e.suggestions!==this.props.suggestions&&e.suggestions.size>0&&this.state.suggestionsHidden&&this.state.focused&&this.setState({suggestionsHidden:!1})}render(){const{value:e,suggestions:t,disabled:n,placeholder:s,onKeyUp:a,autoFocus:i,lang:c,children:u}=this.props,{suggestionsHidden:l}=this.state;return[Object(o.a)("div",{className:"compose-form__autosuggest-wrapper"},"autosuggest-wrapper",Object(o.a)("div",{className:"autosuggest-textarea"},void 0,Object(o.a)("label",{},void 0,Object(o.a)("span",{style:{display:"none"}},void 0,s),r.a.createElement(L.a,{ref:this.setTextarea,className:"autosuggest-textarea__textarea",disabled:n,placeholder:s,autoFocus:i,value:e,onChange:this.onChange,onKeyDown:this.onKeyDown,onKeyUp:a,onFocus:this.onFocus,onBlur:this.onBlur,onPaste:this.onPaste,dir:"auto","aria-autocomplete":"list",lang:c}))),u),Object(o.a)("div",{className:"autosuggest-textarea__suggestions-wrapper"},"suggestions-wrapper",Object(o.a)("div",{className:"autosuggest-textarea__suggestions "+(l||t.isEmpty()?"":"autosuggest-textarea__suggestions--visible")},void 0,t.map(this.renderSuggestion)))]}}U.propTypes={value:d.a.string,suggestions:u.a.list,disabled:d.a.bool,placeholder:d.a.string,onSuggestionSelected:d.a.func.isRequired,onSuggestionsClearRequested:d.a.func.isRequired,onSuggestionsFetchRequested:d.a.func.isRequired,onChange:d.a.func.isRequired,onKeyUp:d.a.func,onKeyDown:d.a.func,onPaste:d.a.func.isRequired,autoFocus:d.a.bool,lang:d.a.string},U.defaultProps={autoFocus:!0};class D extends m.a{constructor(){super(...arguments),this.state={suggestionsHidden:!0,focused:!1,selectedSuggestion:0,lastToken:null,tokenStart:0},this.onChange=e=>{const[t,n]=((e,t,n)=>{let s,a=e.slice(0,t).search(/[^\s\u200B]+$/),o=e.slice(t).search(/[\s\u200B]/);return s=o<0?e.slice(a):e.slice(a,o+t),!s||s.trim().length<3||-1===n.indexOf(s[0])?[null,null]:(s=s.trim().toLowerCase(),s.length>0?[a,s]:[null,null])})(e.target.value,e.target.selectionStart,this.props.searchTokens);null!==n&&this.state.lastToken!==n?(this.setState({lastToken:n,selectedSuggestion:0,tokenStart:t}),this.props.onSuggestionsFetchRequested(n)):null===n&&(this.setState({lastToken:null}),this.props.onSuggestionsClearRequested()),this.props.onChange(e)},this.onKeyDown=e=>{const{suggestions:t,disabled:n}=this.props,{selectedSuggestion:s,suggestionsHidden:a}=this.state;if(n)e.preventDefault();else if(229!==e.which&&!e.isComposing){switch(e.key){case"Escape":0===t.size||a?document.querySelector(".ui").parentElement.focus():(e.preventDefault(),this.setState({suggestionsHidden:!0}));break;case"ArrowDown":t.size>0&&!a&&(e.preventDefault(),this.setState({selectedSuggestion:Math.min(s+1,t.size-1)}));break;case"ArrowUp":t.size>0&&!a&&(e.preventDefault(),this.setState({selectedSuggestion:Math.max(s-1,0)}));break;case"Enter":case"Tab":null!==this.state.lastToken&&t.size>0&&!a&&(e.preventDefault(),e.stopPropagation(),this.props.onSuggestionSelected(this.state.tokenStart,this.state.lastToken,t.get(s)))}!e.defaultPrevented&&this.props.onKeyDown&&this.props.onKeyDown(e)}},this.onBlur=()=>{this.setState({suggestionsHidden:!0,focused:!1})},this.onFocus=()=>{this.setState({focused:!0})},this.onSuggestionClick=e=>{const t=this.props.suggestions.get(e.currentTarget.getAttribute("data-index"));e.preventDefault(),this.props.onSuggestionSelected(this.state.tokenStart,this.state.lastToken,t),this.input.focus()},this.setInput=e=>{this.input=e},this.renderSuggestion=(e,t)=>{const{selectedSuggestion:n}=this.state;let s,a;return"emoji"===e.type?(s=Object(o.a)(M,{emoji:e}),a=e.id):"hashtag"===e.type?(s=Object(o.a)(x,{tag:e}),a=e.name):"account"===e.type&&(s=Object(o.a)(T,{id:e.id}),a=e.id),Object(o.a)("div",{role:"button",tabIndex:"0","data-index":t,className:R()("autosuggest-textarea__suggestions__item",{selected:t===n}),onMouseDown:this.onSuggestionClick},a,s)}}componentWillReceiveProps(e){e.suggestions!==this.props.suggestions&&e.suggestions.size>0&&this.state.suggestionsHidden&&this.state.focused&&this.setState({suggestionsHidden:!1})}render(){const{value:e,suggestions:t,disabled:n,placeholder:s,onKeyUp:a,autoFocus:i,className:c,id:u,maxLength:l,lang:d,spellCheck:p}=this.props,{suggestionsHidden:h}=this.state;return Object(o.a)("div",{className:"autosuggest-input"},void 0,Object(o.a)("label",{},void 0,Object(o.a)("span",{style:{display:"none"}},void 0,s),r.a.createElement("input",{type:"text",ref:this.setInput,disabled:n,placeholder:s,autoFocus:i,value:e,onChange:this.onChange,onKeyDown:this.onKeyDown,onKeyUp:a,onFocus:this.onFocus,onBlur:this.onBlur,dir:"auto","aria-autocomplete":"list",id:u,className:c,maxLength:l,lang:d,spellCheck:p})),Object(o.a)("div",{className:"autosuggest-textarea__suggestions "+(h||t.isEmpty()?"":"autosuggest-textarea__suggestions--visible")},void 0,t.map(this.renderSuggestion)))}}D.propTypes={value:d.a.string,suggestions:u.a.list,disabled:d.a.bool,placeholder:d.a.string,onSuggestionSelected:d.a.func.isRequired,onSuggestionsClearRequested:d.a.func.isRequired,onSuggestionsFetchRequested:d.a.func.isRequired,onChange:d.a.func.isRequired,onKeyUp:d.a.func,onKeyDown:d.a.func,autoFocus:d.a.bool,className:d.a.string,id:d.a.string,searchTokens:d.a.arrayOf(d.a.string),maxLength:d.a.number,lang:d.a.string,spellCheck:d.a.bool},D.defaultProps={autoFocus:!0,searchTokens:["@",":","#"]};var F,P,H,q=n(678),K=n(9),$=n(30),B=n(11);const W=Object(g.f)({option_placeholder:{id:"compose_form.poll.option_placeholder",defaultMessage:"Choice {number}"},add_option:{id:"compose_form.poll.add_option",defaultMessage:"Add a choice"},remove_option:{id:"compose_form.poll.remove_option",defaultMessage:"Remove this choice"},poll_duration:{id:"compose_form.poll.duration",defaultMessage:"Poll duration"},single_choice:{id:"compose_form.poll.single_choice",defaultMessage:"Allow one choice"},multiple_choices:{id:"compose_form.poll.multiple_choices",defaultMessage:"Allow multiple choices"},minutes:{id:"intervals.full.minutes",defaultMessage:"{number, plural, one {# minute} other {# minutes}}"},hours:{id:"intervals.full.hours",defaultMessage:"{number, plural, one {# hour} other {# hours}}"},days:{id:"intervals.full.days",defaultMessage:"{number, plural, one {# day} other {# days}}"}});let z=Object(g.g)(F=class extends r.a.PureComponent{constructor(){super(...arguments),this.handleOptionTitleChange=e=>{this.props.onChange(this.props.index,e.target.value)},this.handleOptionRemove=()=>{this.props.onRemove(this.props.index)},this.onSuggestionsClearRequested=()=>{this.props.onClearSuggestions()},this.onSuggestionsFetchRequested=e=>{this.props.onFetchSuggestions(e)},this.onSuggestionSelected=(e,t,n)=>{this.props.onSuggestionSelected(e,t,n,["poll","options",this.props.index])}}render(){const{isPollMultiple:e,title:t,lang:n,index:s,autoFocus:a,intl:i}=this.props;return Object(o.a)("li",{},void 0,Object(o.a)("label",{className:"poll__option editable"},void 0,Object(o.a)("span",{className:R()("poll__input",{checkbox:e})}),Object(o.a)(D,{placeholder:i.formatMessage(W.option_placeholder,{number:s+1}),maxLength:B.t.max_option_chars,value:t,lang:n,spellCheck:!0,onChange:this.handleOptionTitleChange,suggestions:this.props.suggestions,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,onSuggestionSelected:this.onSuggestionSelected,searchTokens:[":"],autoFocus:a})),Object(o.a)("div",{className:"poll__cancel"},void 0,Object(o.a)(b.a,{disabled:s<=1,title:i.formatMessage(W.remove_option),icon:"times",onClick:this.handleOptionRemove})))}})||F,G=Object(g.g)((H=class extends m.a{constructor(){super(...arguments),this.handleAddOption=()=>{this.props.onAddOption("")},this.handleSelectDuration=e=>{this.props.onChangeSettings(e.target.value,this.props.isMultiple)},this.handleSelectMultiple=e=>{this.props.onChangeSettings(this.props.expiresIn,"true"===e.target.value)}}render(){const{options:e,lang:t,expiresIn:n,isMultiple:s,onChangeOption:a,onRemoveOption:i,intl:c,...u}=this.props;if(!e)return null;const l=e.indexOf("");return Object(o.a)("div",{className:"compose-form__poll-wrapper"},void 0,Object(o.a)("ul",{},void 0,e.map(((e,n)=>r.a.createElement(z,Object(K.a)({title:e,lang:t,key:n,index:n,onChange:a,onRemove:i,isPollMultiple:s,autoFocus:n===l},u)))),e.size<B.t.max_options&&Object(o.a)("label",{className:"poll__text editable"},void 0,Object(o.a)("span",{className:R()("poll__input"),style:{opacity:0}}),Object(o.a)("button",{className:"button button-secondary",onClick:this.handleAddOption},void 0,Object(o.a)($.a,{id:"plus"})," ",r.a.createElement(g.b,W.add_option)))),Object(o.a)("div",{className:"poll__footer"},void 0,Object(o.a)("select",{value:s?"true":"false",onChange:this.handleSelectMultiple},void 0,Object(o.a)("option",{value:"false"},void 0,c.formatMessage(W.single_choice)),Object(o.a)("option",{value:"true"},void 0,c.formatMessage(W.multiple_choices))),Object(o.a)("select",{value:n,onChange:this.handleSelectDuration},void 0,Object(o.a)("option",{value:300},void 0,c.formatMessage(W.minutes,{number:5})),Object(o.a)("option",{value:1800},void 0,c.formatMessage(W.minutes,{number:30})),Object(o.a)("option",{value:3600},void 0,c.formatMessage(W.hours,{number:1})),Object(o.a)("option",{value:21600},void 0,c.formatMessage(W.hours,{number:6})),Object(o.a)("option",{value:43200},void 0,c.formatMessage(W.hours,{number:12})),Object(o.a)("option",{value:86400},void 0,c.formatMessage(W.days,{number:1})),Object(o.a)("option",{value:259200},void 0,c.formatMessage(W.days,{number:3})),Object(o.a)("option",{value:604800},void 0,c.formatMessage(W.days,{number:7})))))}},H.propTypes={options:u.a.list,lang:d.a.string,expiresIn:d.a.number,isMultiple:d.a.bool,onChangeOption:d.a.func.isRequired,onAddOption:d.a.func.isRequired,onRemoveOption:d.a.func.isRequired,onChangeSettings:d.a.func.isRequired,suggestions:u.a.list,onClearSuggestions:d.a.func.isRequired,onFetchSuggestions:d.a.func.isRequired,onSuggestionSelected:d.a.func.isRequired,intl:d.a.object.isRequired},P=H))||P;var Q=Object(p.connect)((e=>({suggestions:e.getIn(["compose","suggestions"]),options:e.getIn(["compose","poll","options"]),lang:e.getIn(["compose","language"]),expiresIn:e.getIn(["compose","poll","expires_in"]),isMultiple:e.getIn(["compose","poll","multiple"])})),(e=>({onAddOption(t){e(Object(h.Z)(t))},onRemoveOption(t){e(Object(h.Ab)(t))},onChangeOption(t,n){e(Object(h.jb)(t,n))},onChangeSettings(t,n){e(Object(h.kb)(t,n))},onClearSuggestions(){e(Object(h.mb)())},onFetchSuggestions(t){e(Object(h.rb)(t))},onSuggestionSelected(t,n,s,a){e(Object(h.Db)(t,n,s,a))}})))(G),V=n(548);var X=Object(p.connect)((e=>({active:e.getIn(["compose","is_uploading"]),progress:e.getIn(["compose","progress"]),isProcessing:e.getIn(["compose","is_processing"])})))(V.a),J=n(239),Y=n(54),Z=n.n(Y),ee=n(211);class te extends m.a{constructor(){super(...arguments),this.handleUndoClick=e=>{e.stopPropagation(),this.props.onUndo(this.props.media.get("id"))},this.handleFocalPointClick=e=>{e.stopPropagation(),this.props.onOpenFocalPoint(this.props.media.get("id"))}}render(){const{media:e}=this.props;if(!e)return null;const t=e.getIn(["meta","focus","x"]),n=e.getIn(["meta","focus","y"]),s=100*(t/2+.5),a=100*(n/-2+.5);return Object(o.a)("div",{className:"compose-form__upload",tabIndex:"0",role:"button"},void 0,Object(o.a)(J.a,{defaultStyle:{scale:.8},style:{scale:Z()(1,{stiffness:180,damping:12})}},void 0,(t=>{let{scale:n}=t;return Object(o.a)("div",{className:"compose-form__upload-thumbnail",style:{transform:`scale(${n})`,backgroundImage:`url(${e.get("preview_url")})`,backgroundPosition:`${s}% ${a}%`}},void 0,Object(o.a)("div",{className:"compose-form__upload__actions"},void 0,Object(o.a)("button",{type:"button",className:"icon-button",onClick:this.handleUndoClick},void 0,Object(o.a)($.a,{id:"times"})," ",Object(o.a)(g.b,{id:"upload_form.undo",defaultMessage:"Delete"})),Object(o.a)("button",{type:"button",className:"icon-button",onClick:this.handleFocalPointClick},void 0,Object(o.a)($.a,{id:"pencil"})," ",Object(o.a)(g.b,{id:"upload_form.edit",defaultMessage:"Edit"}))),0===(e.get("description")||"").length&&Object(o.a)("div",{className:"compose-form__upload__warning"},void 0,Object(o.a)("button",{type:"button",className:"icon-button",onClick:this.handleFocalPointClick},void 0,Object(o.a)($.a,{id:"info-circle"})," ",Object(o.a)(g.b,{id:"upload_form.description_missing",defaultMessage:"No description added"}))))})))}}te.contextTypes={router:d.a.object},te.propTypes={media:u.a.map.isRequired,onUndo:d.a.func.isRequired,onOpenFocalPoint:d.a.func.isRequired};var ne=Object(p.connect)(((e,t)=>{let{id:n}=t;return{media:e.getIn(["compose","media_attachments"]).find((e=>e.get("id")===n))}}),(e=>({onUndo:t=>{e(Object(h.Gb)(t))},onOpenFocalPoint:t=>{e(Object(h.tb)(t))},onSubmit(t){e(Object(h.Fb)(t))}})))(te);const se=Object(g.f)({marked:{id:"compose_form.sensitive.marked",defaultMessage:"{count, plural, one {Media is marked as sensitive} other {Media is marked as sensitive}}"},unmarked:{id:"compose_form.sensitive.unmarked",defaultMessage:"{count, plural, one {Media is not marked as sensitive} other {Media is not marked as sensitive}}"}});class ae extends r.a.PureComponent{render(){const{active:e,disabled:t,mediaCount:n,onClick:s,intl:a}=this.props;return Object(o.a)("div",{className:"compose-form__sensitive-button"},void 0,Object(o.a)("label",{className:R()("icon-button",{active:e}),title:a.formatMessage(e?se.marked:se.unmarked,{count:n})},void 0,Object(o.a)("input",{name:"mark-sensitive",type:"checkbox",checked:e,onChange:s,disabled:t}),Object(o.a)("span",{className:R()("checkbox",{active:e})}),Object(o.a)(g.b,{id:"compose_form.sensitive.hide",defaultMessage:"{count, plural, one {Mark media as sensitive} other {Mark media as sensitive}}",values:{count:n}})))}}var oe=Object(p.connect)((e=>{const t=e.getIn(["local_settings","always_show_spoilers_field"]),n=e.getIn(["compose","spoiler_text"]);return{active:e.getIn(["compose","sensitive"])||t&&n&&n.length>0,disabled:e.getIn(["compose","spoiler"]),mediaCount:e.getIn(["compose","media_attachments"]).size}}),(e=>({onClick(){e(Object(h.fb)())}})))(Object(g.g)(ae));class ie extends m.a{render(){const{mediaIds:e}=this.props;return Object(o.a)("div",{className:"compose-form__upload-wrapper"},void 0,Object(o.a)(X,{}),e.size>0&&Object(o.a)("div",{className:"compose-form__uploads-wrapper"},void 0,e.map((e=>Object(o.a)(ne,{id:e},e)))),!e.isEmpty()&&Object(o.a)(oe,{}))}}ie.propTypes={mediaIds:u.a.list.isRequired};var re=Object(p.connect)((e=>({mediaIds:e.getIn(["compose","media_attachments"]).map((e=>e.get("id")))})))(ie);class ce extends r.a.PureComponent{render(){const{message:e}=this.props;return Object(o.a)(J.a,{defaultStyle:{opacity:0,scaleX:.85,scaleY:.75},style:{opacity:Z()(1,{damping:35,stiffness:400}),scaleX:Z()(1,{damping:35,stiffness:400}),scaleY:Z()(1,{damping:35,stiffness:400})}},void 0,(t=>{let{opacity:n,scaleX:s,scaleY:a}=t;return Object(o.a)("div",{className:"compose-form__warning",style:{opacity:n,transform:`scale(${s}, ${a})`}},void 0,e)}))}}var ue=n(281);const le=(()=>{try{const e="_\\u00b7\\u200c",t="\\p{L}\\p{M}",n="\\p{L}\\p{M}\\p{N}\\p{Pc}";return new RegExp("(?:^|[^\\/\\)\\w])#((["+n+"_]["+n+e+"]*["+t+e+"]["+n+e+"]*["+n+"_])|(["+n+"_]*["+t+"]["+n+"_]*))","iu")}catch{return/(?:^|[^/)\w])#(\w*[a-zA-Z·]\w*)/i}})();var de=Object(p.connect)((e=>({needsLockWarning:"private"===e.getIn(["compose","privacy"])&&!e.getIn(["accounts",B.q,"locked"]),hashtagWarning:"public"!==e.getIn(["compose","privacy"])&&le.test(e.getIn(["compose","text"])),directMessageWarning:"direct"===e.getIn(["compose","privacy"])})))((e=>{let{needsLockWarning:t,hashtagWarning:n,directMessageWarning:s}=e;if(t)return Object(o.a)(ce,{message:Object(o.a)(g.b,{id:"compose_form.lock_disclaimer",defaultMessage:"Your account is not {locked}. Anyone can follow you to view your follower-only posts.",values:{locked:Object(o.a)("a",{href:ue.d},void 0,Object(o.a)(g.b,{id:"compose_form.lock_disclaimer.lock",defaultMessage:"locked"}))}})});if(n)return Object(o.a)(ce,{message:Object(o.a)(g.b,{id:"compose_form.hashtag_warning",defaultMessage:"This post won't be listed under any hashtag as it is unlisted. Only public posts can be searched by hashtag."})});if(s){const e=Object(o.a)("span",{},void 0,Object(o.a)(g.b,{id:"compose_form.encryption_warning",defaultMessage:"Posts on Mastodon are not end-to-end encrypted. Do not share any dangerous information over Mastodon."})," ",!!ue.termsLink&&Object(o.a)("a",{href:ue.termsLink,target:"_blank"},void 0,Object(o.a)(g.b,{id:"compose_form.direct_message_warning_learn_more",defaultMessage:"Learn more"})));return Object(o.a)(ce,{message:e})}return null})),pe=n(53),he=n.n(pe),ge=n(343),me=n.n(ge),fe=n(344),be=n.n(fe),_e=n(345),ve=n.n(_e),Oe=n(346),ye=n.n(Oe),je=n(347),Se=n.n(je),Ce=n(348),Ee=n.n(Ce);const Te=he()("((#{validUrlPrecedingChars})(https?:\\/\\/)(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?)",{validUrlPrecedingChars:me.a,validDomain:be.a,validPortNumber:ve.a,validUrlPath:ye.a,validUrlQueryChars:Se.a,validUrlQueryEndingChars:Ee.a},"gi");var Ie=n(669),we=n.n(Ie);const ke={height:null,lineHeight:"27px",width:"23.14285722px"};class Me extends r.a.PureComponent{render(){const{label:e,title:t,active:n,ariaControls:s}=this.props;return Object(o.a)("button",{title:t,"aria-label":t,className:"text-icon-button "+(n?"active":""),"aria-expanded":n,onClick:this.props.onClick,"aria-controls":s,style:ke},void 0,e)}}var Ne=n(36),xe=n(565);var Le=Object(p.connect)(null,(e=>({isUserTouching:ee.b,onModalOpen:t=>e(Object(Ne.d)("ACTIONS",t)),onModalClose:()=>e(Object(Ne.c)())})))(xe.a),Ae=n(549);var Re,Ue=Object(p.connect)((e=>({value:e.getIn(["compose","privacy"])})),(e=>({onChange(t){e(Object(h.ib)(t))},isUserTouching:ee.b,onModalOpen:t=>e(Object(Ne.d)("ACTIONS",t)),onModalClose:()=>e(Object(Ne.c)())})))(Ae.a),De=n(188),Fe=n(531),Pe=n(660),He=n(334),qe=n.n(He);const Ke=Object(g.f)({changeLanguage:{id:"compose.language.change",defaultMessage:"Change language"},search:{id:"compose.language.search",defaultMessage:"Search languages..."},clear:{id:"emoji_button.clear",defaultMessage:"Clear"}}),$e=!!Fe.a&&{passive:!0};class Be extends r.a.PureComponent{constructor(){super(...arguments),this.state={searchValue:""},this.handleDocumentClick=e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()},this.setRef=e=>{this.node=e},this.setListRef=e=>{this.listNode=e},this.handleSearchChange=e=>{let{target:t}=e;this.setState({searchValue:t.value})},this.handleClick=e=>{const t=e.currentTarget.getAttribute("data-index");e.preventDefault(),this.props.onClose(),this.props.onChange(t)},this.handleKeyDown=e=>{const{onClose:t}=this.props,n=Array.from(this.listNode.childNodes).findIndex((t=>t===e.currentTarget));let s=null;switch(e.key){case"Escape":t();break;case"Enter":this.handleClick(e);break;case"ArrowDown":s=this.listNode.childNodes[n+1]||this.listNode.firstChild;break;case"ArrowUp":s=this.listNode.childNodes[n-1]||this.listNode.lastChild;break;case"Tab":s=e.shiftKey?this.listNode.childNodes[n-1]||this.listNode.lastChild:this.listNode.childNodes[n+1]||this.listNode.firstChild;break;case"Home":s=this.listNode.firstChild;break;case"End":s=this.listNode.lastChild}s&&(s.focus(),e.preventDefault(),e.stopPropagation())},this.handleSearchKeyDown=e=>{const{onChange:t,onClose:n}=this.props,{searchValue:s}=this.state;let a=null;switch(e.key){case"Tab":case"ArrowDown":a=this.listNode.firstChild,a&&(a.focus(),e.preventDefault(),e.stopPropagation());break;case"Enter":a=this.listNode.firstChild,a&&(t(a.getAttribute("data-index")),n());break;case"Escape":""!==s&&(e.preventDefault(),this.handleClear())}},this.handleClear=()=>{this.setState({searchValue:""})},this.renderItem=e=>{const{value:t}=this.props;return Object(o.a)("div",{role:"option",tabIndex:"0","data-index":e[0],className:R()("language-dropdown__dropdown__results__item",{active:e[0]===t}),"aria-selected":e[0]===t,onClick:this.handleClick,onKeyDown:this.handleKeyDown},e[0],Object(o.a)("span",{className:"language-dropdown__dropdown__results__item__native-name",lang:e[0]},void 0,e[2])," ",Object(o.a)("span",{className:"language-dropdown__dropdown__results__item__common-name"},void 0,"(",e[1],")"))}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,$e),requestAnimationFrame((()=>{if(this.node){const e=this.node.querySelector('input[type="search"]');e&&e.focus()}}))}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,$e)}search(){const{languages:e,value:t,frequentlyUsedLanguages:n}=this.props,{searchValue:s}=this.state;return""===s?[...e].sort(((e,s)=>{if(e[0]===t)return-1;if(s[0]===t)return 1;{const t=n.indexOf(e[0]),a=n.indexOf(s[0]);return(t>-1?t:1/0)-(a>-1?a:1/0)}})):qe.a.go(s,e,{keys:["0","1","2"],limit:5,threshold:-1e4}).map((e=>e.obj))}frequentlyUsed(){const{languages:e,value:t}=this.props,n=e.find((e=>e[0]===t)),s=[];return n&&s.push(n),s}render(){const{intl:e}=this.props,{searchValue:t}=this.state,n=""!==t,s=this.search();return r.a.createElement("div",{ref:this.setRef},Object(o.a)("div",{className:"emoji-mart-search"},void 0,Object(o.a)("input",{type:"search",value:t,onChange:this.handleSearchChange,onKeyDown:this.handleSearchKeyDown,placeholder:e.formatMessage(Ke.search)}),Object(o.a)("button",{type:"button",className:"emoji-mart-search-icon",disabled:!n,"aria-label":e.formatMessage(Ke.clear),onClick:this.handleClear},void 0,n?Pe.a:Pe.b)),r.a.createElement("div",{className:"language-dropdown__dropdown__results emoji-mart-scroll",role:"listbox",ref:this.setListRef},s.map(this.renderItem)))}}Be.defaultProps={languages:B.m};let We=Object(g.g)(Re=class extends r.a.PureComponent{constructor(){super(...arguments),this.state={open:!1,placement:"bottom"},this.handleToggle=()=>{this.state.open&&this.activeElement&&this.activeElement.focus({preventScroll:!0}),this.setState({open:!this.state.open})},this.handleClose=()=>{const{value:e,onClose:t}=this.props;this.state.open&&this.activeElement&&this.activeElement.focus({preventScroll:!0}),this.setState({open:!1}),t(e)},this.handleChange=e=>{const{onChange:t}=this.props;t(e)},this.setTargetRef=e=>{this.target=e},this.findTarget=()=>this.target,this.handleOverlayEnter=e=>{this.setState({placement:e.placement})}}render(){const{value:e,intl:t,frequentlyUsedLanguages:n}=this.props,{open:s,placement:a}=this.state;return Object(o.a)("div",{className:R()("privacy-dropdown",a,{active:s})},void 0,r.a.createElement("div",{className:"privacy-dropdown__value",ref:this.setTargetRef},Object(o.a)(Me,{className:"privacy-dropdown__value-icon",label:e&&e.toUpperCase(),title:t.formatMessage(Ke.changeLanguage),active:s,onClick:this.handleToggle})),Object(o.a)(De.a,{show:s,placement:"bottom",flip:!0,target:this.findTarget,popperConfig:{strategy:"fixed",onFirstUpdate:this.handleOverlayEnter}},void 0,(s=>{let{props:a,placement:i}=s;return r.a.createElement("div",a,Object(o.a)("div",{className:`dropdown-animation language-dropdown__dropdown ${i}`},void 0,Object(o.a)(Be,{value:e,frequentlyUsedLanguages:n,onClose:this.handleClose,onChange:this.handleChange,intl:t})))})))}})||Re;var ze=n(545),Ge=n(48),Qe=n(4);const Ve=Object(Ge.a)([e=>e.getIn(["settings","frequentlyUsedLanguages"],Object(Qe.Map)())],(e=>e.keySeq().sort(((t,n)=>e.get(t)-e.get(n))).reverse().toArray()));var Xe,Je,Ye,Ze,et=Object(p.connect)((e=>({frequentlyUsedLanguages:Ve(e),value:e.getIn(["compose","language"])})),(e=>({onChange(t){e(Object(h.eb)(t))},onClose(t){e(Object(ze.b)(t))}})))(We);const tt=Object(g.f)({advanced_options_icon_title:{id:"advanced_options.icon_title",defaultMessage:"Advanced options"},attach:{id:"compose.attach",defaultMessage:"Attach..."},content_type:{id:"content-type.change",defaultMessage:"Content type"},doodle:{id:"compose.attach.doodle",defaultMessage:"Draw something"},html:{id:"compose.content-type.html",defaultMessage:"HTML"},local_only_long:{id:"advanced_options.local-only.long",defaultMessage:"Do not post to other instances"},local_only_short:{id:"advanced_options.local-only.short",defaultMessage:"Local-only"},markdown:{id:"compose.content-type.markdown",defaultMessage:"Markdown"},plain:{id:"compose.content-type.plain",defaultMessage:"Plain text"},spoiler:{id:"compose_form.spoiler",defaultMessage:"Hide text behind warning"},threaded_mode_long:{id:"advanced_options.threaded_mode.long",defaultMessage:"Automatically opens a reply on posting"},threaded_mode_short:{id:"advanced_options.threaded_mode.short",defaultMessage:"Threaded mode"},upload:{id:"compose.attach.upload",defaultMessage:"Upload a file"},add_poll:{id:"poll_button.add_poll",defaultMessage:"Add a poll"},remove_poll:{id:"poll_button.remove_poll",defaultMessage:"Remove poll"}});let nt=Object(p.connect)(((e,t)=>{let{name:n}=t;return{checked:e.getIn(["compose","advanced_options",n])}}))((Je=class extends m.a{constructor(){super(...arguments),this.handleChange=()=>{this.props.onChangeAdvancedOption(this.props.name)}}render(){const{meta:e,text:t,checked:n}=this.props;return Object(o.a)(r.a.Fragment,{},void 0,Object(o.a)(we.a,{checked:n,onChange:this.handleChange}),Object(o.a)("div",{className:"privacy-dropdown__option__content"},void 0,Object(o.a)("strong",{},void 0,t),e))}},Je.propTypes={name:d.a.string.isRequired,checked:d.a.bool,onChangeAdvancedOption:d.a.func.isRequired},Xe=Je))||Xe,st=Object(g.g)((Ze=class extends m.a{constructor(){super(...arguments),this.handleChangeFiles=e=>{let{target:{files:t}}=e;const{onUpload:n}=this.props;t.length&&n&&n(t)},this.handleClickAttach=e=>{const{fileElement:t}=this,{onDoodleOpen:n}=this.props;switch(e){case"upload":return void(t&&t.click());case"doodle":return void(n&&n())}},this.handleRefFileElement=e=>{this.fileElement=e},this.renderToggleItemContents=e=>{const{onChangeAdvancedOption:t}=this.props,{name:n,meta:s,text:a}=e;return Object(o.a)(nt,{name:n,text:a,meta:s,onChangeAdvancedOption:t})}}render(){const{acceptContentTypes:e,advancedOptions:t,contentType:n,disabled:s,allowMedia:a,hasMedia:i,allowPoll:c,hasPoll:u,onChangeAdvancedOption:l,onChangeContentType:d,onTogglePoll:p,onToggleSpoiler:h,resetFileKey:g,spoiler:m,showContentTypeChoice:f,isEditing:_,intl:{formatMessage:v}}=this.props,O={plain:{icon:"file-text",name:"text/plain",text:v(tt.plain)},html:{icon:"code",name:"text/html",text:v(tt.html)},markdown:{icon:"arrow-circle-down",name:"text/markdown",text:v(tt.markdown)}};return Object(o.a)("div",{className:"compose-form__buttons"},void 0,r.a.createElement("input",{accept:e,disabled:s||!a,key:g,onChange:this.handleChangeFiles,ref:this.handleRefFileElement,type:"file",multiple:!0,style:{display:"none"}}),Object(o.a)(Le,{disabled:s||!a,icon:"paperclip",items:[{icon:"cloud-upload",name:"upload",text:v(tt.upload)},{icon:"paint-brush",name:"doodle",text:v(tt.doodle)}],onChange:this.handleClickAttach,title:v(tt.attach)}),!!B.t&&Object(o.a)(b.a,{active:u,disabled:s||!c,icon:"tasks",inverted:!0,onClick:p,size:18,style:{height:null,lineHeight:null},title:v(u?tt.remove_poll:tt.add_poll)}),Object(o.a)("hr",{}),Object(o.a)(Ue,{disabled:s||_}),f&&Object(o.a)(Le,{disabled:s,icon:(O[n.split("/")[1]]||{}).icon,items:[O.plain,O.html,O.markdown],onChange:d,title:v(tt.content_type),value:n}),h&&Object(o.a)(Me,{active:m,ariaControls:"glitch.composer.spoiler.input",label:"CW",onClick:h,title:v(tt.spoiler)}),Object(o.a)(et,{}),Object(o.a)(Le,{disabled:s||_,icon:"ellipsis-h",items:t?[{meta:v(tt.local_only_long),name:"do_not_federate",text:v(tt.local_only_short)},{meta:v(tt.threaded_mode_long),name:"threaded_mode",text:v(tt.threaded_mode_short)}]:null,onChange:l,renderItemContents:this.renderToggleItemContents,title:v(tt.advanced_options_icon_title),closeOnChange:!1}))}},Ze.propTypes={acceptContentTypes:d.a.string,advancedOptions:u.a.map,disabled:d.a.bool,allowMedia:d.a.bool,hasMedia:d.a.bool,allowPoll:d.a.bool,hasPoll:d.a.bool,intl:d.a.object.isRequired,onChangeAdvancedOption:d.a.func,onChangeContentType:d.a.func,onTogglePoll:d.a.func,onDoodleOpen:d.a.func,onToggleSpoiler:d.a.func,onUpload:d.a.func,contentType:d.a.string,resetFileKey:d.a.number,spoiler:d.a.bool,showContentTypeChoice:d.a.bool,isEditing:d.a.bool},Ye=Ze))||Ye;var at,ot,it=Object(p.connect)((function(e){e.getIn(["local_settings","always_show_spoilers_field"]);const t=e.getIn(["compose","poll"]),n=e.getIn(["compose","media_attachments"]),s=e.getIn(["compose","pending_media_attachments"]);return{acceptContentTypes:e.getIn(["media_attachments","accept_content_types"]).toArray().join(","),resetFileKey:e.getIn(["compose","resetFileKey"]),hasPoll:!!t,allowMedia:!t&&(n?n.size+s<4&&!n.some((e=>["video","audio"].includes(e.get("type")))):s<4),hasMedia:n&&!!n.size,allowPoll:!(n&&n.size),showContentTypeChoice:e.getIn(["local_settings","show_content_type_choice"]),contentType:e.getIn(["compose","content_type"])}}),(e=>({onChangeAdvancedOption(t,n){e(Object(h.cb)(t,n))},onChangeContentType(t){e(Object(h.db)(t))},onTogglePoll(){e(((t,n)=>{n().getIn(["compose","poll"])?e(Object(h.zb)()):e(Object(h.Y)())}))},onDoodleOpen(){e(Object(Ne.d)("DOODLE",{noEsc:!0,noClose:!0}))}})))(st),rt=n(155),ct=n(154);const ut=Object(g.f)({publish:{id:"compose_form.publish",defaultMessage:"Publish"},publishLoud:{id:"compose_form.publish_loud",defaultMessage:"{publish}!"},saveChanges:{id:"compose_form.save_changes",defaultMessage:"Save changes"}});let lt=Object(g.g)((ot=class extends m.a{constructor(){super(...arguments),this.handleSubmit=()=>{this.props.onSubmit()}}render(){const{countText:e,disabled:t,intl:n,onSecondarySubmit:s,privacy:a,sideArm:i,isEditing:r}=this.props,c=B.o-Object(rt.length)(e||""),u=R()("compose-form__publish",{disabled:t,over:c<0}),l={direct:"envelope",private:"lock",public:"globe",unlisted:"unlock"};let d;if(r)d=n.formatMessage(ut.saveChanges);else if("private"===a||"direct"===a){const e=l[a];d=Object(o.a)("span",{},void 0,Object(o.a)($.a,{id:e})," ",n.formatMessage(ut.publish))}else d="unlisted"!==a?n.formatMessage(ut.publishLoud,{publish:n.formatMessage(ut.publish)}):n.formatMessage(ut.publish);return Object(o.a)("div",{className:u},void 0,i&&!r&&"none"!==i?Object(o.a)("div",{className:"compose-form__publish-button-wrapper"},void 0,Object(o.a)(ct.a,{className:"side_arm",disabled:t,onClick:s,style:{padding:null},text:Object(o.a)($.a,{id:l[i]}),title:`${n.formatMessage(ut.publish)}: ${n.formatMessage({id:`privacy.${i}.short`})}`})):null,Object(o.a)("div",{className:"compose-form__publish-button-wrapper"},void 0,Object(o.a)(ct.a,{className:"primary",text:d,title:`${n.formatMessage(ut.publish)}: ${n.formatMessage({id:`privacy.${a}.short`})}`,onClick:this.handleSubmit,disabled:t})))}},ot.propTypes={countText:d.a.string,disabled:d.a.bool,intl:d.a.object.isRequired,onSecondarySubmit:d.a.func,onSubmit:d.a.func,privacy:d.a.oneOf(["direct","private","unlisted","public"]),sideArm:d.a.oneOf(["none","direct","private","unlisted","public"]),isEditing:d.a.bool},at=ot))||at;var dt,pt;const ht=Object(g.f)({localOnly:{id:"advanced_options.local-only.tooltip",defaultMessage:"This post is local-only"},threadedMode:{id:"advanced_options.threaded_mode.tooltip",defaultMessage:"Threaded mode enabled"}}),gt=[["do_not_federate","home",ht.localOnly],["threaded_mode","comments",ht.threadedMode]];let mt=Object(g.g)(((pt=class extends m.a{render(){const{advancedOptions:e,intl:t}=this.props;return Object(o.a)("div",{className:"compose-form__textarea-icons"},void 0,e?gt.map((n=>{let[s,a,i]=n;return e.get(s)?Object(o.a)("span",{className:"textarea_icon",title:t.formatMessage(i)},s,Object(o.a)($.a,{fixedWidth:!0,id:a})):null})):null)}}).propTypes={advancedOptions:u.a.map,intl:d.a.object.isRequired},dt=pt))||dt;var ft,bt,_t=n(550);const vt=Object(g.f)({placeholder:{id:"compose_form.placeholder",defaultMessage:"What is on your mind?"},missingDescriptionMessage:{id:"confirmations.missing_media_description.message",defaultMessage:"At least one media attachment is lacking a description. Consider describing all media attachments for the visually impaired before sending your toot."},missingDescriptionConfirm:{id:"confirmations.missing_media_description.confirm",defaultMessage:"Send anyway"},spoiler_placeholder:{id:"compose_form.spoiler_placeholder",defaultMessage:"Write your warning here"}});let Ot=Object(g.g)((bt=class extends m.a{constructor(){var e;super(...arguments),e=this,this.handleChange=e=>{this.props.onChange(e.target.value)},this.getFulltextForCharacterCounting=()=>{return[this.props.spoiler?this.props.spoilerText:"",(e=this.props.text,e.replace(Te,"$2xxxxxxxxxxxxxxxxxxxxxxx").replace(/(^|[^/\w])@(([a-z0-9_]+)@[a-z0-9.-]+[a-z0-9]+)/gi,"$1@$3")),this.props.advancedOptions&&this.props.advancedOptions.get("do_not_federate")?" 👁️":""].join("");var e},this.canSubmit=()=>{const{isSubmitting:e,isChangingUpload:t,isUploading:n,anyMedia:s}=this.props,a=this.getFulltextForCharacterCounting();return!(e||n||t||Object(rt.length)(a)>B.o||!a.trim().length&&!s)},this.handleSubmit=function(t){void 0===t&&(t=null);const{onSubmit:n,media:s,mediaDescriptionConfirmation:a,onMediaDescriptionConfirm:o,onChangeVisibility:i}=e.props;if(e.props.text!==e.textarea.value&&e.props.onChange(e.textarea.value),e.canSubmit())if(a&&o&&s&&s.some((e=>!e.get("description")))){const n=s.find((e=>!e.get("description")));o(e.context.router?e.context.router.history:null,n.get("id"),t)}else n&&(i&&t&&i(t),n(e.context.router?e.context.router.history:null))},this.handleChangeSpoiler=e=>{let{target:{value:t}}=e;const{onChangeSpoilerText:n}=this.props;n&&n(t)},this.setRef=e=>{this.composeForm=e},this.handleEmojiPick=e=>{const{textarea:{selectionStart:t}}=this,{onPickEmoji:n}=this.props;n&&n(t,e)},this.handleSecondarySubmit=()=>{const{sideArm:e}=this.props;this.handleSubmit("none"===e?null:e)},this.onSuggestionSelected=(e,t,n)=>{this.props.onSuggestionSelected(e,t,n,["text"])},this.onSpoilerSuggestionSelected=(e,t,n)=>{this.props.onSuggestionSelected(e,t,n,["spoiler_text"])},this.handleKeyDown=e=>{13===e.keyCode&&(e.ctrlKey||e.metaKey)&&this.handleSubmit(),13==e.keyCode&&e.altKey&&this.handleSecondarySubmit()},this.setAutosuggestTextarea=e=>{e&&(this.textarea=e.textarea)},this.handleRefSpoilerText=e=>{e&&(this.spoilerText=e.input)},this.handleFocus=()=>{if(this.composeForm&&!this.props.singleColumn){const{left:e,right:t}=this.composeForm.getBoundingClientRect();(e<0||t>(window.innerWidth||document.documentElement.clientWidth))&&this.composeForm.scrollIntoView()}},this._updateFocusAndSelection=e=>{const{textarea:t,spoilerText:n}=this,{focusDate:s,caretPosition:a,isSubmitting:o,preselectDate:i,text:r,preselectOnReply:c,singleColumn:u}=this.props;let l,d;if(s!==e.focusDate){switch(!0){case i!==e.preselectDate&&this.props.isInReply&&c:d=r.search(/\s/)+1,l=r.length;break;case!isNaN(a)&&null!==a:d=l=a;break;default:d=l=r.length}t&&Promise.resolve().then((()=>{t.setSelectionRange(d,l),t.focus(),u||t.scrollIntoView()})).catch(console.error)}else t&&e.isSubmitting&&!o?t.focus():this.props.spoiler!==e.spoiler&&(this.props.spoiler?n&&n.focus():t&&t.focus())}}componentDidMount(){this._updateFocusAndSelection({})}componentDidUpdate(e){this._updateFocusAndSelection(e)}render(){const{handleEmojiPick:e,handleSecondarySubmit:t,handleSelect:n,handleSubmit:s,handleRefTextarea:a}=this,{advancedOptions:i,intl:c,isSubmitting:u,layout:l,onChangeSpoilerness:d,onChangeVisibility:p,onClearSuggestions:h,onFetchSuggestions:g,onPaste:m,privacy:f,sensitive:b,showSearch:_,sideArm:v,spoiler:O,spoilerText:j,suggestions:S,spoilersAlwaysOn:C,isEditing:E}=this.props,T=this.getFulltextForCharacterCounting();return Object(o.a)("div",{className:"compose-form"},void 0,Object(o.a)(de,{}),Object(o.a)(y,{}),r.a.createElement("div",{className:"spoiler-input "+(O?"spoiler-input--visible":""),ref:this.setRef,"aria-hidden":!this.props.spoiler},r.a.createElement(D,{placeholder:c.formatMessage(vt.spoiler_placeholder),value:j,onChange:this.handleChangeSpoiler,onKeyDown:this.handleKeyDown,disabled:!O,ref:this.handleRefSpoilerText,suggestions:this.props.suggestions,onSuggestionsFetchRequested:g,onSuggestionsClearRequested:h,onSuggestionSelected:this.onSpoilerSuggestionSelected,searchTokens:[":"],id:"glitch.composer.spoiler.input",className:"spoiler-input__input",lang:this.props.lang,autoFocus:!1,spellCheck:!0})),r.a.createElement(U,{ref:this.setAutosuggestTextarea,placeholder:c.formatMessage(vt.placeholder),disabled:u,value:this.props.text,onChange:this.handleChange,onKeyDown:this.handleKeyDown,suggestions:this.props.suggestions,onFocus:this.handleFocus,onSuggestionsFetchRequested:g,onSuggestionsClearRequested:h,onSuggestionSelected:this.onSuggestionSelected,onPaste:m,autoFocus:!_&&!Object(ee.a)(window.innerWidth,l),lang:this.props.lang},Object(o.a)(q.a,{onPickEmoji:e}),Object(o.a)(mt,{advancedOptions:i}),Object(o.a)("div",{className:"compose-form__modifiers"},void 0,Object(o.a)(re,{}),Object(o.a)(Q,{}))),Object(o.a)("div",{className:"compose-form__buttons-wrapper"},void 0,Object(o.a)(it,{advancedOptions:i,disabled:u,onToggleSpoiler:C?null:d,onUpload:m,isEditing:E,sensitive:b||C&&j&&j.length>0,spoiler:C?j&&j.length>0:O}),Object(o.a)("div",{className:"character-counter__wrapper"},void 0,Object(o.a)(_t.a,{text:T,max:B.o}))),Object(o.a)(lt,{countText:T,disabled:!this.canSubmit(),isEditing:E,onSecondarySubmit:t,onSubmit:s,privacy:f,sideArm:v}))}},bt.contextTypes={router:d.a.object},bt.propTypes={intl:d.a.object.isRequired,text:d.a.string,suggestions:u.a.list,spoiler:d.a.bool,privacy:d.a.string,spoilerText:d.a.string,focusDate:d.a.instanceOf(Date),caretPosition:d.a.number,preselectDate:d.a.instanceOf(Date),isSubmitting:d.a.bool,isChangingUpload:d.a.bool,isEditing:d.a.bool,isUploading:d.a.bool,onChange:d.a.func,onSubmit:d.a.func,onClearSuggestions:d.a.func,onFetchSuggestions:d.a.func,onSuggestionSelected:d.a.func,onChangeSpoilerText:d.a.func,onPaste:d.a.func,onPickEmoji:d.a.func,showSearch:d.a.bool,anyMedia:d.a.bool,isInReply:d.a.bool,singleColumn:d.a.bool,lang:d.a.string,advancedOptions:u.a.map,layout:d.a.string,media:u.a.list,sideArm:d.a.string,sensitive:d.a.bool,spoilersAlwaysOn:d.a.bool,mediaDescriptionConfirmation:d.a.bool,preselectOnReply:d.a.bool,onChangeSpoilerness:d.a.func,onChangeVisibility:d.a.func,onPaste:d.a.func,onMediaDescriptionConfirm:d.a.func},bt.defaultProps={showSearch:!1},ft=bt))||ft},718:function(e,t,n){"use strict";var s=n(6),a=n(12),o=n(349),i=n(159),r=n(236);t.a=Object(s.g)(Object(a.connect)(((e,t)=>{let{intl:n}=t;const s=Object(r.c)(e);return s.forEach((e=>["title","message"].forEach((t=>{const s=e[t];"object"==typeof s&&(e[t]=n.formatMessage(s,e[`${t}_values`]))})))),{notifications:s}}),(e=>({onDismiss:t=>{e(Object(i.d)(t))}})))(o.NotificationStack))},719:function(e,t,n){"use strict";var s=n(12),a=n(156),o=n.n(a);t.a=Object(s.connect)(((e,t)=>({loading:e.get("loadingBar")[t.scope||"default"]})))(o.a.WrappedComponent)},720:function(e,t,n){var s=n(862),a=n(868),o=n(883);e.exports=function(e,t){var n={};return t=o(t,3),a(e,(function(e,a,o){s(n,a,t(e,a,o))})),n}},721:function(e,t,n){"use strict";var s,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),o=n(946),i=(s=o)&&s.__esModule?s:{default:s};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=function(){function e(t,n,s,a){var o=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!document)throw new Error("no DOM found");if(t instanceof window.Node&&"CANVAS"===t.tagName)this.canvas=t;else{if("string"!=typeof t)throw new Error("can't look for canvas based on '"+t+"'");this.canvas=document.querySelector(t)}if(!this.canvas)throw new Error("canvas not found");this.canvas.width=n||500,this.canvas.height=s||500,this.canvas.style.cursor="crosshair",this.mouse=new i.default;var r=function(e){e.preventDefault();var t=o.canvas.getBoundingClientRect(),n=e.changedTouches&&e.changedTouches[0]||e,s=n.offsetX,a=n.offsetY;void 0===s&&(s=n.clientX+document.documentElement.scrollLeft-t.left),void 0===a&&(a=n.clientY+document.documentElement.scrollTop-t.top),o.mouse.down?(o.draw(s,a),o._dirty||s===o.mouse.x&&a===o.mouse.y||(o._dirty=!0,o.fireDirty())):(o.mouse.x=s,o.mouse.y=a)},c=function(e){e.preventDefault(),r(e),"fill"!==o._mode?(o.mouse.px=o.mouse.x,o.mouse.py=o.mouse.y,o.mouse.down=!0,o.context.beginPath(),o.context.moveTo(o.mouse.px,o.mouse.py)):o.fill()},u=function(){o.mouse.down=!1,o.context.closePath()};this.canvas.addEventListener("mousemove",r),this.canvas.addEventListener("mousedown",c),document.addEventListener("mouseup",u),this.canvas.addEventListener("touchstart",c),this.canvas.addEventListener("touchend",u),this.canvas.addEventListener("touchmove",r),this.destroy=function(){o.clear(),o.canvas.removeEventListener("mousemove",r),o.canvas.removeEventListener("mousedown",c),document.removeEventListener("mouseup",u),o.canvas.removeEventListener("touchstart",c),o.canvas.removeEventListener("touchend",u),o.canvas.removeEventListener("touchmove",r)},this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="source-over",this.context.globalAlpha=1,this.context.strokeStyle=a||"rgba(0,0,0,1)",this.context.lineCap="round",this.context.lineJoin="round",this.context.translate(.5,.5),this._filling=!1,this._fillStack=[],this.SMOOTHING_INIT=.85,this.WEIGHT_SPREAD=10,this._smoothing=this.SMOOTHING_INIT,this._maxWeight=12,this._thickness=2,this._targetThickness=2,this._weight=2,this._mode="draw",this._adaptive=!0}return a(e,[{key:"draw",value:function(t,n){var s=this.mouse,a=this.context,o=e.lineDistance(t,n,s.px,s.py),i=Math.min(.87,this._smoothing+(o-60)/3e3);s.x=t-(t-s.px)*i,s.y=n-(n-s.py)*i;var r=e.lineDistance(s.x,s.y,s.px,s.py);this._adaptive?(this._targetThickness=(r-1)/49*(this._maxWeight-this._weight)+this._weight,this._thickness>this._targetThickness?this._thickness-=.5:this._thickness<this._targetThickness&&(this._thickness+=.5),a.lineWidth=this._thickness):a.lineWidth=this._weight,a.quadraticCurveTo(s.px,s.py,s.x,s.y),a.stroke(),s.px=s.x,s.py=s.y}},{key:"fireDirty",value:function(){var e=document.createEvent("Event");e.initEvent("dirty",!0,!0),this.canvas.dispatchEvent(e)}},{key:"clear",value:function(){this.dirty&&(this._dirty=!1,this.fireDirty(),"destination-out"===this.context.globalCompositeOperation?(this.mode="draw",this.context.clearRect(-10,-10,this.canvas.width+20,this.canvas.height+20),this.mode="erase"):this.context.clearRect(-10,-10,this.canvas.width+20,this.canvas.height+20))}},{key:"toImage",value:function(){return this.canvas.toDataURL()}},{key:"fill",value:function(){var e=this,t=this.mouse,n=this.context,s=Array.prototype.slice.call(n.getImageData(t.x,t.y,1,1).data,0);this._filling?this._fillStack.push([t.x,t.y,s]):(this.canvas.style.cursor="progress",this._filling=!0,setTimeout((function(){e._floodFill(t.x,t.y,s)}),100))}},{key:"_floodFill",value:function(t,n,s){var a=this,o=this.context,i=Math.floor(t),c=Math.floor(n),u=o.canvas.width,l=o.canvas.height,d=[[i,c]],p=e.hexToRgb(this.color),h=o.getImageData(0,0,o.canvas.width,o.canvas.height),g=Math.min(10*o.globalAlpha*255,255),m=e.colorPixel.apply(e,[h.data].concat(r(p),[s,g])),f=e.matchColor.apply(e,[h.data].concat(r(s)));if(e.matchColor.apply(e,[h.data].concat([].concat(r(p),[255])))(4*(c*o.canvas.width+i)))return this._filling=!1,void setTimeout((function(){a.canvas.style.cursor="crosshair"}),100);for(;d.length;){for(var b=d.pop(),_=b[0],v=b[1],O=4*(v*u+_);v-- >=0&&f(O);)O-=4*u;O+=4*u,++v;for(var y=!1,j=!1;v++<l-1&&f(O);)m(O),_>0&&(f(O-4)?y||(d.push([_-1,v]),y=!0):y&&(y=!1)),_<u-1&&(f(O+4)?j||(d.push([_+1,v]),j=!0):j&&(j=!1)),O+=4*u}o.putImageData(h,0,0),this._fillStack.length?this._floodFill.apply(this,r(this._fillStack.shift())):(this._filling=!1,setTimeout((function(){a.canvas.style.cursor="crosshair"}),100))}},{key:"color",get:function(){return this.context.strokeStyle},set:function(e){if("string"!=typeof e)throw new Error("wrong argument type");this.context.strokeStyle=e}},{key:"weight",get:function(){return this._weight},set:function(e){if("number"!=typeof e)throw new Error("wrong argument type");this._weight=e,this._thickness=e,this._targetThickness=e,this._maxWeight=e+this.WEIGHT_SPREAD}},{key:"adaptiveStroke",get:function(){return this._adaptive},set:function(e){this._adaptive=!!e}},{key:"mode",get:function(){return this._mode},set:function(e){if("string"!=typeof e)throw new Error("wrong argument type");switch(e){case"erase":this._mode="erase",this.context.globalCompositeOperation="destination-out";break;case"fill":this._mode="fill",this.context.globalCompositeOperation="source-over";break;default:this._mode="draw",this.context.globalCompositeOperation="source-over"}}},{key:"dirty",get:function(){return!!this._dirty}},{key:"smoothing",get:function(){return this._smoothing===this.SMOOTHING_INIT},set:function(e){if("boolean"!=typeof e)throw new Error("wrong argument type");this._smoothing=e?this.SMOOTHING_INIT:0}},{key:"opacity",set:function(e){if("number"!=typeof e)throw new Error("wrong argument type");this.context.globalAlpha=e>=1?1:e/10}}],[{key:"lineDistance",value:function(e,t,n,s){var a=Math.pow(n-e,2),o=Math.pow(s-t,2);return Math.sqrt(a+o)}},{key:"hexToRgb",value:function(e){var t=e.match(/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{key:"matchColor",value:function(e,t,n,s,a){return function(o){var i=e[o],r=e[o+1],c=e[o+2],u=e[o+3];return i===t&&r===n&&c===s&&u===a}}},{key:"colorPixel",value:function(t,n,s,a,o,i){var c=e.matchColor.apply(e,[t].concat(r(o)));return function(e){t[e]=n,t[e+1]=s,t[e+2]=a,t[e+3]=i,c(e+4)||(t[e+4]=.01*t[e+4]+.99*n,t[e+4+1]=.01*t[e+4+1]+.99*s,t[e+4+2]=.01*t[e+4+2]+.99*a,t[e+4+3]=.01*t[e+4+3]+.99*i),c(e-4)||(t[e-4]=.01*t[e-4]+.99*n,t[e-4+1]=.01*t[e-4+1]+.99*s,t[e-4+2]=.01*t[e-4+2]+.99*a,t[e-4+3]=.01*t[e-4+3]+.99*i)}}}]),e}();e.exports=function(e,t,n,s){return new c(e,t,n,s)},e.exports.Atrament=c},724:function(e,t,n){"use strict";n.d(t,"a",(function(){return Pt}));var s=n(235),a=n(342),o=n(340),i=n(4),r=n(586);const c=i.default.Map({openId:null,keyboard:!1,scroll_key:null});var u=n(46),l=n(16),d=n(57);const p=Object(i.Map)(),h=Object(i.Map)({unread:0,online:!1,top:!0,isLoading:!1,hasMore:!0,pendingItems:Object(i.List)(),items:Object(i.List)()}),g=function(e,t,n,s){return void 0===s&&(s=null),e.keySeq().forEach((n=>{if(null===s||n!==`account:${s}`&&!n.startsWith(`account:${s}:`)){const s=e=>e.filterNot((e=>e===t));e=e.updateIn([n,"items"],s).updateIn([n,"pendingItems"],s)}})),n.forEach((t=>{e=g(e,t,[],s)})),e};var m=n(178),f=n(702),b=n(211);const _=Object(i.Map)({streaming_api_base_url:null,access_token:null,layout:Object(b.c)(),permissions:"0"});var v=n(159);const O=Object(i.List)([]);var y=n(156),j=n(36),S=n(14);const C=Object(i.Map)({ignoreFocus:!1,stack:Object(i.Stack)()}),E=(e,t)=>{let{modalType:n,ignoreFocus:s}=t;return void 0===n||n===e.getIn(["stack",0,"modalType"])?e.set("ignoreFocus",!!s).update("stack",(e=>e.shift())):e};var T=n(56),I=n(51),w=n(229),k=n(191),M=n(274),N=n(566);const x=Object(i.Map)({next:null,isLoading:!1,items:Object(i.List)()}),L=Object(i.Map)({followers:x,following:x,reblogged_by:x,favourited_by:x,follow_requests:x,blocks:x,mutes:x,featured_tags:x}),A=(e,t,n,s)=>e.setIn(t,Object(i.Map)({next:s,items:Object(i.List)(n.map((e=>e.id))),isLoading:!1})),R=(e,t,n,s)=>e.updateIn(t,(e=>e.set("next",s).set("isLoading",!1).update("items",(e=>e.concat(n.map((e=>e.id))))))),U=(e,t,n,s)=>e.setIn(t,Object(i.Map)({items:Object(i.List)(n.map((e=>((e,t)=>{const n={...e,accountId:t};return Object(i.fromJS)(n)})(e,s))).sort(((e,t)=>t.get("statuses_count")-e.get("statuses_count")))),isLoading:!1}));var D=n(190);const F=Object(i.Map)({blocks:Object(i.Map)({items:Object(i.OrderedSet)()})});var P=n(19);const H=Object(i.Map)(),q=(e,t)=>(delete(t={...t}).followers_count,delete t.following_count,delete t.statuses_count,t.hidden=!1!==e.getIn([t.id,"hidden"])&&t.limited,e.set(t.id,Object(i.fromJS)(t)));const K=(e,t)=>e.set(t.id,Object(i.fromJS)({followers_count:t.followers_count,following_count:t.following_count,statuses_count:t.statuses_count})),$=Object(i.Map)();var B=n(181);const W=(e,t)=>e.set(t.id,Object(i.fromJS)(t)),z=(e,t,n)=>(n.forEach((t=>{e=z(e,t,[])})),e.delete(t)),G=(e,t,n,s)=>e.update(t,(e=>e.update("reactions",(e=>{const t=e.findIndex((e=>e.get("name")===n));return t>-1?e.update(t,(e=>s(e))):e.push(s(Object(i.fromJS)({name:n,count:0})))})))),Q=Object(i.Map)();var V=n(232);const X=(e,t)=>e.set(t.id,Object(i.fromJS)(t)),J=(e,t,n)=>e.withMutations((e=>{t.forEach((t=>{e.setIn([t,"domain_blocking"],n)}))})),Y=Object(i.Map)();var Z=n(158),ee=n(300),te=n(289),ne=n(545),se=n(38);function ae(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ae)}const oe=Object(i.Map)({saved:!0,onboarded:!1,layout:"auto",skinTone:1,trends:Object(i.Map)({show:!0}),home:Object(i.Map)({shows:Object(i.Map)({reblog:!0,reply:!0,direct:!0}),regex:Object(i.Map)({body:""})}),notifications:Object(i.Map)({alerts:Object(i.Map)({follow:!1,follow_request:!1,favourite:!1,reaction:!1,reblog:!1,mention:!1,poll:!1,status:!1,update:!1,"admin.sign_up":!1,"admin.report":!1}),quickFilter:Object(i.Map)({active:"all",show:!0,advanced:!1}),dismissPermissionBanner:!1,showUnread:!0,shows:Object(i.Map)({follow:!0,follow_request:!1,favourite:!0,reblog:!0,reaction:!0,mention:!0,poll:!0,status:!0,update:!0,"admin.sign_up":!0,"admin.report":!0}),sounds:Object(i.Map)({follow:!0,follow_request:!1,favourite:!0,reblog:!0,reaction:!0,mention:!0,poll:!0,status:!0,update:!0,"admin.sign_up":!0,"admin.report":!0}),grouping:Object(i.Map)({reaction:!0,favourite:!0,reblog:!0})}),community:Object(i.Map)({regex:Object(i.Map)({body:""})}),public:Object(i.Map)({regex:Object(i.Map)({body:""})}),direct:Object(i.Map)({conversations:!0,regex:Object(i.Map)({body:""})})}),ie=Object(i.fromJS)([{id:"COMPOSE",uuid:ae(),params:{}},{id:"HOME",uuid:ae(),params:{}},{id:"NOTIFICATIONS",uuid:ae(),params:{}}]),re=(e,t)=>e.update("columns",(e=>e.filterNot((e=>"LIST"===e.get("id")&&e.get("params").get("id")===t))));var ce=n(307);const ue=Object(i.Map)({layout:"auto",stretch:!0,navbar_under:!1,side_arm:"none",side_arm_reply_mode:"keep",show_reply_count:!1,zoom_emojis_on_hover:!0,always_show_spoilers_field:!1,confirm_missing_media_description:!1,confirm_boost_missing_media_description:!1,confirm_before_clearing_draft:!0,prepend_cw_re:!0,preselect_on_reply:!0,inline_preview_cards:!0,hicolor_privacy_icons:!1,show_content_type_choice:!1,tag_misleading_links:!0,rewrite_mentions:"no",content_warnings:Object(i.Map)({filter:null,media_outside:!1,shared_state:!1}),collapsed:Object(i.Map)({enabled:!0,auto:Object(i.Map)({all:!1,notifications:!0,lengthy:!0,reblogs:!1,replies:!1,media:!1,height:500}),backgrounds:Object(i.Map)({user_backgrounds:!1,preview_images:!1}),show_action_bar:!0}),media:Object(i.Map)({letterbox:!0,fullwidth:!0,reveal_behind_cw:!1,pop_in_player:!0,pop_in_position:"right"}),notifications:Object(i.Map)({favicon_badge:!1,tab_badge:!0}),status_icons:Object(i.Map)({language:!0,reply:!0,local_only:!0,media:!0,visibility:!0})});var le=n(360);const de=i.default.Map({subscription:null,alerts:new i.default.Map({follow:!1,follow_request:!1,favourite:!1,reblog:!1,mention:!1,poll:!1}),isSubscribed:!1,browserSupport:!1});var pe=n(275),he=n(276),ge=n(703),me=n(184);const fe=Object(i.Map)({favourites:Object(i.Map)({next:null,loaded:!1,items:Object(i.OrderedSet)()}),bookmarks:Object(i.Map)({next:null,loaded:!1,items:Object(i.OrderedSet)()}),pins:Object(i.Map)({next:null,loaded:!1,items:Object(i.OrderedSet)()}),trending:Object(i.Map)({next:null,loaded:!1,items:Object(i.OrderedSet)()})}),be=(e,t,n,s)=>e.update(t,(e=>e.withMutations((e=>{e.set("next",s),e.set("loaded",!0),e.set("isLoading",!1),e.set("items",Object(i.OrderedSet)(n.map((e=>e.id))))})))),_e=(e,t,n,s)=>e.update(t,(e=>e.withMutations((e=>{e.set("next",s),e.set("isLoading",!1),e.set("items",e.get("items").union(n.map((e=>e.id))))})))),ve=(e,t,n)=>e.updateIn([t,"items"],(e=>e.includes(n.get("id"))?e:Object(i.OrderedSet)([n.get("id")]).union(e))),Oe=(e,t,n)=>e.updateIn([t,"items"],(e=>e.delete(n.get("id"))));const ye=i.default.Map({new:i.default.Map({account:null,notifications:!0,duration:0})});const je=i.default.Map({new:i.default.Map({account_id:null})});var Se=n(216);const Ce=Object(i.Map)({server:Object(i.Map)({isLoading:!0}),extendedDescription:Object(i.Map)({isLoading:!0}),domainBlocks:Object(i.Map)({isLoading:!0,isAvailable:!0,items:Object(i.List)()})});var Ee=n(267);const Te=i.default.Map({new:i.default.Map({privacy:"public"})});const Ie=Object(i.Map)({inReplyTos:Object(i.Map)(),replies:Object(i.Map)()}),we=(e,t)=>e.withMutations((e=>{e.update("inReplyTos",(n=>n.withMutations((n=>{e.update("replies",(e=>e.withMutations((e=>{t.forEach((t=>{const s=n.get(t),a=e.get(t),o=e.get(s);o&&e.set(s,o.filterNot((e=>e===t))),a&&a.forEach((e=>n.delete(e))),n.delete(t),e.delete(t)}))}))))}))))}));var ke=n(546),Me=n(11);function Ne(e,t){return null==t?e:t}var xe=n(242),Le=n(544);const Ae=Object(i.Map)({mounted:0,advanced_options:Object(i.Map)({do_not_federate:!1,threaded_mode:!1}),sensitive:!1,elefriend:Math.random()<.9579784472?Math.floor(3*Math.random()):3,spoiler:!1,spoiler_text:"",privacy:null,id:null,content_type:Me.d||"text/plain",text:"",focusDate:null,caretPosition:null,preselectDate:null,in_reply_to:null,is_submitting:!1,is_uploading:!1,is_changing_upload:!1,progress:0,isUploadingThumbnail:!1,thumbnailProgress:0,media_attachments:Object(i.List)(),pending_media_attachments:0,poll:null,suggestion_token:null,suggestions:Object(i.List)(),default_advanced_options:Object(i.Map)({do_not_federate:!1,threaded_mode:null}),default_privacy:"public",default_sensitive:!1,default_language:"en",resetFileKey:Math.floor(65536*Math.random()),idempotencyKey:null,tagHistory:Object(i.List)(),media_modal:Object(i.Map)({id:null,description:"",focusX:0,focusY:0,dirty:!1}),doodle:Object(i.Map)({fg:"rgb(  0,    0,    0)",bg:"rgb(255,  255,  255)",swapped:!1,mode:"draw",size:"normal",weight:2,opacity:1,adaptiveStroke:!0,smoothing:!1})}),Re=Object(i.Map)({options:Object(i.List)(["",""]),expires_in:86400,multiple:!1});function Ue(e){return e.withMutations((t=>{t.set("id",null),t.set("text",""),Me.d&&t.set("content_type",Me.d),t.set("spoiler",!1),t.set("spoiler_text",""),t.set("is_submitting",!1),t.set("is_changing_upload",!1),t.set("in_reply_to",null),t.update("advanced_options",(t=>t.mergeWith(Ne,e.get("default_advanced_options")))),t.set("privacy",e.get("default_privacy")),t.set("sensitive",e.get("default_sensitive")),t.set("language",e.get("default_language")),t.update("media_attachments",(e=>e.clear())),t.set("poll",null),t.set("idempotencyKey",ae())}))}function De(e,t){return e.withMutations((function(e){let n=function(e,t){let n=Object(i.OrderedSet)([]);return t.account.id!==Me.q&&(n=n.add(`@${t.account.acct} `)),n.union(t.mentions.filter((e=>e.id!==Me.q)).map((e=>`@${e.acct} `))).join("")}(0,t);n+=function(e,t){const n=Object(xe.a)(t.content);return Object(i.OrderedSet)([]).union(Object(Le.a)(t.tags,n).map((e=>`#${e} `))).join("")}(0,t),e.set("text",n),t.spoiler_text?(e.set("spoiler",!0),e.set("spoiler_text",t.spoiler_text)):(e.set("spoiler",!1),e.set("spoiler_text","")),e.set("is_submitting",!1),e.set("in_reply_to",t.id),e.update("advanced_options",(e=>e.merge(new i.Map({do_not_federate:t.local_only})))),e.set("privacy",t.visibility),e.set("sensitive",!1),e.update("media_attachments",(e=>e.clear())),e.set("poll",null),e.set("idempotencyKey",ae()),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("preselectDate",new Date)}))}const Fe=new DOMParser,Pe=e=>{if(!e)return 86400;const t=(new Date(e).getTime()-Date.now())/1e3;return[300,1800,3600,21600,86400,259200,604800].find((e=>e>=t))||86400},He=(e,t,n)=>{if(t=t.toLowerCase(),e.length<4){const s=n.filter((n=>n.toLowerCase().startsWith(t)&&!e.some((e=>"hashtag"===e.type&&e.name.toLowerCase()===n.toLowerCase()))));return e.concat(s.slice(0,4-e.length).toJS().map((e=>({type:"hashtag",name:e}))))}return e};var qe=n(244);const Ke=Object(i.Map)({value:"",submitted:!1,hidden:!1,results:Object(i.Map)(),isLoading:!1,searchTerm:""});const $e=Object(i.Map)({accept_content_types:[]});var Be=n(214);const We=Object(i.Map)({pendingItems:Object(i.List)(),items:Object(i.List)(),hasMore:!0,top:!1,mounted:0,unread:0,lastReadId:"0",readMarkerId:"0",isLoading:0,cleaningMode:!1,isTabVisible:!0,browserSupport:!1,browserPermission:"default",markNewForDelete:!1}),ze=(e,t)=>Object(i.Map)({id:e.id,type:e.type,account:e.account.id,markedForDelete:t,status:e.status?e.status.id:null,report:e.report?Object(i.fromJS)(e.report):null}),Ge=(e,t,n)=>{const s=e=>e.filterNot((e=>null!==e&&t.includes(e.get("account"))&&(void 0===n||n===e.get("type"))));return e.update("items",s).update("pendingItems",s)},Qe=e=>{const t=(e=e.set("unread",e.get("pendingItems").size)).get("items").find((e=>null!==e));return e.set("lastReadId",t?t.get("id"):"0")},Ve=function(e,t){void 0===t&&(t=!1);const n=e.get("isTabVisible"),s=e.get("top"),a=e.get("mounted")>0,o=e.get("lastReadId"),i=e.get("items").findLast((e=>null!==e)),r=!e.get("hasMore")||"0"===o||i&&Object(d.a)(i.get("id"),o)<=0;return!(n&&(t||s)&&a&&r)},Xe=(e,t)=>e.withMutations((n=>{Object(d.a)(t,n.get("lastReadId"))>0&&n.set("lastReadId",t),Object(d.a)(t,n.get("readMarkerId"))>0&&n.set("readMarkerId",t),(e.get("unread")>0||Ve(e))&&n.set("unread",n.get("pendingItems").count((e=>null!==e))+n.get("items").count((e=>e&&Object(d.a)(e.get("id"),t)>0)))}));var Je=n(596);const Ye=Object(i.Map)();var Ze=n(547),et=n(563),tt=n(126);const nt=Object(i.List)([]);const st=Object(i.Map)(),at=(e,t)=>e.set(t.id,Object(i.fromJS)(t));const ot=Object(i.Map)({listId:null,isSubmitting:!1,isChanged:!1,title:"",accounts:Object(i.Map)({items:Object(i.List)(),loaded:!1,isLoading:!1}),suggestions:Object(i.Map)({value:"",items:Object(i.List)()})});const it=Object(i.Map)({accountId:null,lists:Object(i.Map)({items:Object(i.List)(),loaded:!1,isLoading:!1})});var rt=n(597);const ct=(e,t)=>{const n=Object(i.fromJS)({id:t.id,title:t.title,context:t.context,filter_action:t.filter_action,keywords:t.keywords,expires_at:t.expires_at?Date.parse(t.expires_at):null});return Object(i.is)(e.get(t.id),n)?e:e.update(t.id,Object(i.Map)(),(e=>e.mergeWith(((e,t)=>void 0===t?e:t),n)))},ut=(e,t)=>(t.forEach((t=>{e=ct(e,t)})),e);var lt=n(233);const dt=Object(i.Map)({items:Object(i.List)(),isLoading:!1,hasMore:!0,mounted:0}),pt=e=>Object(i.Map)({id:e.id,unread:e.unread,accounts:Object(i.List)(e.accounts.map((e=>e.id))),last_status:e.last_status?e.last_status.id:null}),ht=(e,t)=>e.update("items",(e=>e.filterNot((e=>e.get("accounts").some((e=>t.includes(e)))))));var gt=n(341);const mt=Object(i.Map)({items:Object(i.List)(),isLoading:!1});const ft=Object(i.Map)({accounts:Object(i.Map)({items:Object(i.List)(),loaded:!1,isLoading:!1}),suggestions:Object(i.Map)({value:"",items:Object(i.List)()})});const bt=Object(i.Map)();const _t=Object(i.Map)({tags:Object(i.Map)({items:Object(i.List)(),isLoading:!1}),links:Object(i.Map)({items:Object(i.List)(),isLoading:!1})});var vt=n(195);const Ot=Object(i.Map)({items:Object(i.List)(),isLoading:!1,show:!1}),yt=(e,t,n,s)=>e.update("items",(e=>e.map((e=>e.get("id")===t?e.update("reactions",(e=>{const t=e.findIndex((e=>e.get("name")===n));return t>-1?e.update(t,(e=>s(e))):e.push(s(Object(i.fromJS)({name:n,count:0})))})):e)))),jt=e=>e.sortBy((e=>e.get("starts_at")||e.get("published_at"))),St=(e,t)=>{const n=e.get("items").findIndex((e=>e.get("id")===t.get("id")));return n>-1?e.update("items",(e=>jt(e.update(n,(e=>e.mergeDeep(t)))))):e.update("items",(e=>jt(e.unshift(t))))};const Ct=Object(i.Map)({home:"0",notifications:"0"});const Et=Object(i.Map)({edit:Object(i.Map)({isSubmitting:!1,account_id:null,comment:null})});var Tt=n(578);const It={statusId:null,accountId:null,type:null,src:null,muted:!1,volume:0,currentTime:0};var wt=n(670),kt=n(567);const Mt=Object(i.Map)({loading:!1,items:Object(i.List)()}),Nt=Object(i.Map)();var xt=n(192);const Lt=Object(i.Map)();const At=Object(i.Map)({items:Object(i.List)(),isLoading:!1,next:null});const Rt={announcements:function(e,t){switch(void 0===e&&(e=Ot),t.type){case vt.k:return e.withMutations((e=>{e.set("show",!e.get("show"))}));case vt.d:return e.set("isLoading",!0);case vt.e:return e.withMutations((e=>{const n=Object(i.fromJS)(t.announcements);e.set("items",n),e.set("isLoading",!1)}));case vt.c:return e.set("isLoading",!1);case vt.l:return St(e,Object(i.fromJS)(t.announcement));case vt.j:return((e,t)=>yt(e,t.announcement_id,t.name,(e=>e.set("count",t.count))))(e,t.reaction);case vt.g:case vt.h:return((e,t,n)=>yt(e,t,n,(e=>e.set("me",!0).update("count",(e=>e+1)))))(e,t.id,t.name);case vt.i:case vt.f:return((e,t,n)=>yt(e,t,n,(e=>e.set("me",!1).update("count",(e=>e-1)))))(e,t.id,t.name);case vt.b:return St(e,Object(i.fromJS)({id:t.id,read:!0}));case vt.a:return e.update("items",(e=>{const n=e.findIndex((e=>e.get("id")===t.id));return n>-1?e.delete(n):e}));default:return e}},dropdown_menu:function(e,t){switch(void 0===e&&(e=c),t.type){case r.b:return e.merge({openId:t.id,keyboard:t.keyboard,scroll_key:t.scroll_key});case r.a:return e.get("openId")===t.id?e.set("openId",null).set("scroll_key",null):e;default:return e}},timelines:function(e,t){switch(void 0===e&&(e=p),t.type){case u.h:return e.update(t.timeline,h,(e=>e.update("items",(t=>e.get("pendingItems").concat(t.take(40)))).set("pendingItems",Object(i.List)()).set("unread",0)));case u.f:return e.update(t.timeline,h,(e=>e.set("isLoading",!0)));case u.e:return e.update(t.timeline,h,(e=>e.set("isLoading",!1)));case u.g:return((e,t,n,s,a,o,r)=>e.update(t,h,(e=>e.withMutations((e=>{e.set("isLoading",!1),e.set("isPartial",a),s||o||e.set("hasMore",!1),t.endsWith(":pinned")?e.set("items",n.map((e=>e.get("id")))):n.isEmpty()||(r=o&&(r||!e.get("pendingItems").isEmpty()),e.update(r?"pendingItems":"items",Object(i.List)(),(e=>{const t=n.map((e=>e.get("id"))),s=e.findLastIndex((e=>null!==e&&Object(d.a)(e,t.last())>=0))+1,o=e.take(s).findLastIndex((e=>null!==e&&Object(d.a)(e,t.first())>0))+1;let r=Object(i.OrderedSet)(t).withMutations((n=>{const a=e.slice(o,s).filter((e=>null!==e&&Object(d.a)(e,t.last())<0));n.union(a),n.subtract(e.take(o),e.skip(s))})).toList();return!a||0!==o&&null===e.get(o-1)||(r=r.unshift(null)),e.take(o).concat(r,e.skip(s))})))})))))(e,t.timeline,Object(i.fromJS)(t.statuses),t.next,t.partial,t.isLoadingRecent,t.usePendingItems);case u.k:return((e,t,n,s,a)=>{const o=e.getIn([t,"top"]);if(s||!e.getIn([t,"pendingItems"]).isEmpty())return e.getIn([t,"pendingItems"],Object(i.List)()).includes(n.get("id"))||e.getIn([t,"items"],Object(i.List)()).includes(n.get("id"))||(e=e.update(t,h,(e=>e.update("pendingItems",(e=>e.unshift(n.get("id")))))),a||(e=e.updateIn([t,"unread"],(e=>e+1)))),e;const r=e.getIn([t,"items"],Object(i.List)()),c=r.includes(n.get("id")),u=e.getIn([t,"unread"],0);if(c)return e;let l=r;return e.update(t,h,(e=>e.withMutations((e=>{o||a||e.set("unread",u+1),o&&r.size>40&&(l=l.take(20)),e.set("items",l.unshift(n.get("id")))}))))})(e,t.timeline,Object(i.fromJS)(t.status),t.usePendingItems,t.filtered);case u.c:return g(e,t.id,t.references,t.reblogOf);case u.a:return((e,t)=>e.set(t,h))(e,t.timeline);case l.a:case l.f:return((e,t,n)=>{let s;return n.forEach((a=>{a.get("account")===t.id&&(s=n.filter((e=>e.get("reblog")===a.get("id"))).map((e=>e.get("id"))),e=g(e,a.get("id"),s,t.id))})),e})(e,t.relationship,t.statuses);case l.l:return((e,t,n,s)=>{const a=e=>e.filterNot((e=>s.getIn([e,"account"])===n.id));return t.updateIn([e,"items"],Object(i.List)(),a).updateIn([e,"pendingItems"],Object(i.List)(),a)})("home",e,t.relationship,t.statuses);case u.j:return((e,t,n)=>e.update(t,h,(e=>e.withMutations((e=>{n&&e.set("unread",e.get("pendingItems").size),e.set("top",n)})))))(e,t.timeline,t.top);case u.b:return e.update(t.timeline,h,(e=>((e,t)=>e.get("online")?e:e.withMutations((e=>{e.update(t?"pendingItems":"items",(e=>e.first()?e.unshift(null):e)),e.set("online",!0)})))(e,t.usePendingItems)));case u.d:return e.update(t.timeline,h,(e=>e.set("online",!1).update(t.usePendingItems?"pendingItems":"items",(e=>e.first()?e.unshift(null):e))));case u.i:return e.update(t.timeline,h,(e=>e.set("isPartial",!0).set("items",Object(i.List)()).set("pendingItems",Object(i.List)()).set("unread",0)));default:return e}},meta:function(e,t){switch(void 0===e&&(e=_),t.type){case m.a:return e.merge(t.state.get("meta")).set("permissions",t.state.getIn(["role","permissions"])).set("layout",Object(b.c)(t.state.getIn(["local_settings","layout"])));case f.a:return e.set("layout",t.layout);default:return e}},alerts:function(e,t){switch(void 0===e&&(e=O),t.type){case v.c:return e.push(Object(i.Map)({key:e.size>0?e.last().get("key")+1:0,title:t.title,message:t.message,message_values:t.message_values}));case v.b:return e.filterNot((e=>e.get("key")===t.alert.key));case v.a:return e.clear();default:return e}},loadingBar:y.loadingBarReducer,modal:function(e,t){switch(void 0===e&&(e=C),t.type){case j.b:return((e,t,n)=>e.withMutations((e=>{e.set("ignoreFocus",!1),e.update("stack",(e=>e.unshift(Object(i.Map)({modalType:t,modalProps:n}))))})))(e,t.modalType,t.modalProps);case j.a:return E(e,t);case S.L:return E(e,{modalType:"FOCAL_POINT",ignoreFocus:!1});case u.c:return e.update("stack",(e=>e.filterNot((e=>e.get("modalProps").statusId===t.id))));default:return e}},user_lists:function(e,t){switch(void 0===e&&(e=L),t.type){case l.t:return A(e,["followers",t.id],t.accounts,t.next);case l.q:return R(e,["followers",t.id],t.accounts,t.next);case l.s:case l.p:return e.setIn(["followers",t.id,"isLoading"],!0);case l.r:case l.o:return e.setIn(["followers",t.id,"isLoading"],!1);case l.z:return A(e,["following",t.id],t.accounts,t.next);case l.w:return R(e,["following",t.id],t.accounts,t.next);case l.y:case l.v:return e.setIn(["following",t.id,"isLoading"],!0);case l.x:case l.u:return e.setIn(["following",t.id,"isLoading"],!1);case I.n:return e.setIn(["reblogged_by",t.id],Object(i.List)(t.accounts.map((e=>e.id))));case I.d:return e.setIn(["favourited_by",t.id],Object(i.List)(t.accounts.map((e=>e.id))));case T.s:return"follow_request"===t.notification.type?((e,t)=>e.updateIn(["follow_requests","items"],(e=>e.filterNot((e=>e===t.account.id)).unshift(t.account.id))))(e,t.notification):e;case l.F:return A(e,["follow_requests"],t.accounts,t.next);case l.C:return R(e,["follow_requests"],t.accounts,t.next);case l.E:case l.B:return e.setIn(["follow_requests","isLoading"],!0);case l.D:case l.A:return e.setIn(["follow_requests","isLoading"],!1);case l.G:case l.H:return e.updateIn(["follow_requests","items"],(e=>e.filterNot((e=>e===t.id))));case w.f:return A(e,["blocks"],t.accounts,t.next);case w.c:return R(e,["blocks"],t.accounts,t.next);case w.e:case w.b:return e.setIn(["blocks","isLoading"],!0);case w.d:case w.a:return e.setIn(["blocks","isLoading"],!1);case k.g:return A(e,["mutes"],t.accounts,t.next);case k.d:return R(e,["mutes"],t.accounts,t.next);case k.f:case k.c:return e.setIn(["mutes","isLoading"],!0);case k.e:case k.b:return e.setIn(["mutes","isLoading"],!1);case M.f:return A(e,["directory"],t.accounts,t.next);case M.c:return R(e,["directory"],t.accounts,t.next);case M.e:case M.b:return e.setIn(["directory","isLoading"],!0);case M.d:case M.a:return e.setIn(["directory","isLoading"],!1);case N.c:return U(e,["featured_tags",t.id],t.tags,t.id);case N.b:return e.setIn(["featured_tags",t.id,"isLoading"],!0);case N.a:return e.setIn(["featured_tags",t.id,"isLoading"],!1);default:return e}},domain_lists:function(e,t){switch(void 0===e&&(e=F),t.type){case D.b:return e.setIn(["blocks","items"],Object(i.OrderedSet)(t.domains)).setIn(["blocks","next"],t.next);case D.a:return e.updateIn(["blocks","items"],(e=>e.union(t.domains))).setIn(["blocks","next"],t.next);case D.d:return e.updateIn(["blocks","items"],(e=>e.delete(t.domain)));default:return e}},status_lists:function(e,t){switch(void 0===e&&(e=fe),t.type){case pe.e:case pe.b:return e.setIn(["favourites","isLoading"],!0);case pe.d:case pe.a:return e.setIn(["favourites","isLoading"],!1);case pe.f:return be(e,"favourites",t.statuses,t.next);case pe.c:return _e(e,"favourites",t.statuses,t.next);case he.e:case he.b:return e.setIn(["bookmarks","isLoading"],!0);case he.d:case he.a:return e.setIn(["bookmarks","isLoading"],!1);case he.f:return be(e,"bookmarks",t.statuses,t.next);case he.c:return _e(e,"bookmarks",t.statuses,t.next);case me.h:case me.e:return e.setIn(["trending","isLoading"],!0);case me.g:case me.d:return e.setIn(["trending","isLoading"],!1);case me.i:return be(e,"trending",t.statuses,t.next);case me.f:return _e(e,"trending",t.statuses,t.next);case I.g:return ve(e,"favourites",t.status);case I.r:return Oe(e,"favourites",t.status);case I.c:return ve(e,"bookmarks",t.status);case I.q:return Oe(e,"bookmarks",t.status);case ge.a:return be(e,"pins",t.statuses,t.next);case I.h:return ve(e,"pins",t.status);case I.s:return Oe(e,"pins",t.status);case l.a:case l.f:return e.updateIn(["trending","items"],Object(i.OrderedSet)(),(e=>e.filterNot((e=>t.statuses.getIn([e,"account"])===t.relationship.id))));default:return e}},accounts:function(e,t){switch(void 0===e&&(e=H),t.type){case P.b:return q(e,t.account);case P.a:return((e,t)=>(t.forEach((t=>{e=q(e,t)})),e))(e,t.accounts);case l.h:return e.setIn([t.id,"hidden"],!1);default:return e}},accounts_counters:function(e,t){switch(void 0===e&&(e=$),t.type){case P.b:return K(e,t.account);case P.a:return((e,t)=>(t.forEach((t=>{e=K(e,t)})),e))(e,t.accounts);case l.d:return t.alreadyFollowing?e:e.updateIn([t.relationship.id,"followers_count"],(e=>e+1));case l.l:return e.updateIn([t.relationship.id,"followers_count"],(e=>Math.max(0,e-1)));default:return e}},accounts_map:wt.a,statuses:function(e,t){switch(void 0===e&&(e=Q),t.type){case B.e:return e.setIn([t.id,"isLoading"],!0);case B.d:return e.delete(t.id);case P.f:return W(e,t.status);case P.e:return((e,t)=>e.withMutations((e=>t.forEach((t=>W(e,t))))))(e,t.statuses);case I.f:return e.setIn([t.status.get("id"),"favourited"],!0);case I.r:return e.updateIn([t.status.get("id"),"favourites_count"],(e=>Math.max(0,e-1)));case I.e:return void 0===e.get(t.status.get("id"))?e:e.setIn([t.status.get("id"),"favourited"],!1);case I.b:return e.setIn([t.status.get("id"),"bookmarked"],!0);case I.a:return void 0===e.get(t.status.get("id"))?e:e.setIn([t.status.get("id"),"bookmarked"],!1);case I.p:return e.setIn([t.status.get("id"),"reblogged"],!0);case I.o:return void 0===e.get(t.status.get("id"))?e:e.setIn([t.status.get("id"),"reblogged"],!1);case I.m:return((e,t)=>G(e,t.status_id,t.name,(e=>e.set("count",t.count))))(e,t.reaction);case I.j:case I.k:return((e,t,n,s)=>G(e,t,n,(e=>e.set("me",!0).update("count",(e=>e+1)).update("url",(e=>e||s)).update("static_url",(e=>e||s)))))(e,t.id,t.name,t.url);case I.l:case I.i:return((e,t,n)=>G(e,t,n,(e=>e.set("me",!1).update("count",(e=>e-1)))))(e,t.id,t.name);case B.g:return e.setIn([t.id,"muted"],!0);case B.k:return e.setIn([t.id,"muted"],!1);case B.h:return e.withMutations((n=>{t.ids.forEach((t=>{void 0!==e.get(t)&&n.setIn([t,"hidden"],!1)}))}));case B.f:return e.withMutations((n=>{t.ids.forEach((t=>{void 0!==e.get(t)&&n.setIn([t,"hidden"],!0)}))}));case B.c:return e.setIn([t.id,"collapsed"],t.isCollapsed);case u.c:return z(e,t.id,t.references);case B.i:return e.setIn([t.id,"translation"],Object(i.fromJS)(t.translation));case B.j:return e.deleteIn([t.id,"translation"]);default:return e}},relationships:function(e,t){switch(void 0===e&&(e=Y),t.type){case l.G:return e.setIn([t.id,"followed_by"],!0).setIn([t.id,"requested_by"],!1);case l.H:return e.setIn([t.id,"followed_by"],!1).setIn([t.id,"requested_by"],!1);case T.s:return"follow_request"===t.notification.type?e.setIn([t.notification.account.id,"requested_by"],!0):e;case l.c:return e.getIn([t.id,"following"])?e:e.setIn([t.id,t.locked?"requested":"following"],!0);case l.b:return e.setIn([t.id,t.locked?"requested":"following"],!1);case l.k:return e.setIn([t.id,"following"],!1);case l.j:return e.setIn([t.id,"following"],!0);case l.d:case l.l:case l.a:case l.i:case l.f:case l.m:case l.g:case l.n:case V.f:return X(e,t.relationship);case l.P:return((e,t)=>(t.forEach((t=>{e=X(e,t)})),e))(e,t.relationships);case D.c:return J(e,t.accounts,!0);case D.d:return J(e,t.accounts,!1);default:return e}},settings:function(e,t){switch(void 0===e&&(e=oe),t.type){case m.a:return((e,t)=>e.mergeDeep(t).update("columns",(function(e){return void 0===e&&(e=ie),e})))(e,t.state.get("settings"));case T.i:case Z.a:return e.setIn(t.path,t.value).set("saved",!1);case ee.a:return e.update("columns",(e=>e.push(Object(i.fromJS)({id:t.id,uuid:ae(),params:t.params})))).set("saved",!1);case ee.d:return e.update("columns",(e=>e.filterNot((e=>e.get("uuid")===t.uuid)))).set("saved",!1);case ee.b:return((e,t,n)=>{const s=e.get("columns"),a=s.findIndex((e=>e.get("uuid")===t)),o=a+n;let i;return i=s.splice(a,1),i=i.splice(o,0,s.get(a)),e.set("columns",i).set("saved",!1)})(e,t.uuid,t.direction);case ee.c:return((e,t,n,s)=>{const a=e.get("columns"),o=a.findIndex((e=>e.get("uuid")===t)),i=a.update(o,(e=>e.updateIn(["params",...n],(()=>s))));return e.set("columns",i).set("saved",!1)})(e,t.uuid,t.path,t.value);case te.a:return((e,t)=>e.update("frequentlyUsedEmojis",Object(i.Map)(),(e=>e.update(t.id,0,(e=>e+1)))).set("saved",!1))(e,t.emoji);case ne.a:return((e,t)=>e.update("frequentlyUsedLanguages",Object(i.Map)(),(e=>e.update(t,0,(e=>e+1)))).set("saved",!1))(e,t.language);case Z.b:return e.set("saved",!0);case se.v:return 404===t.error.response.status?re(e,t.id):e;case se.m:return re(e,t.id);default:return e}},local_settings:function(e,t){switch(void 0===e&&(e=ue),t.type){case m.a:return((e,t)=>e.mergeDeep(t))(e,t.state.get("local_settings"));case ce.a:return e.setIn(t.key,t.value);case ce.b:return e.deleteIn(t.key);default:return e}},push_notifications:function(e,t){switch(void 0===e&&(e=de),t.type){case m.a:{const n=t.state.get("push_subscription");return n?e.set("subscription",new i.default.Map({id:n.get("id"),endpoint:n.get("endpoint")})).set("alerts",n.get("alerts")||de.get("alerts")).set("isSubscribed",!0):e}case le.SET_SUBSCRIPTION:return e.set("subscription",new i.default.Map({id:t.subscription.id,endpoint:t.subscription.endpoint})).set("alerts",new i.default.Map(t.subscription.alerts)).set("isSubscribed",!0);case le.SET_BROWSER_SUPPORT:return e.set("browserSupport",t.value);case le.CLEAR_SUBSCRIPTION:return de;case le.SET_ALERTS:return e.setIn(t.path,t.value);default:return e}},mutes:function(e,t){switch(void 0===e&&(e=ye),t.type){case k.h:return e.withMutations((e=>{e.setIn(["new","account"],t.account),e.setIn(["new","notifications"],!0)}));case k.i:return e.updateIn(["new","notifications"],(e=>!e));case k.a:return e.setIn(["new","duration"],Number(t.duration));default:return e}},blocks:function(e,t){return void 0===e&&(e=je),t.type===w.g?e.withMutations((e=>{e.setIn(["new","account_id"],t.account.get("id"))})):e},server:function(e,t){switch(void 0===e&&(e=Ce),t.type){case Se.h:return e.setIn(["server","isLoading"],!0);case Se.i:return e.set("server",Object(i.fromJS)(t.server)).setIn(["server","isLoading"],!1);case Se.g:return e.setIn(["server","isLoading"],!1);case Se.b:return e.setIn(["extendedDescription","isLoading"],!0);case Se.c:return e.set("extendedDescription",Object(i.fromJS)(t.description)).setIn(["extendedDescription","isLoading"],!1);case Se.a:return e.setIn(["extendedDescription","isLoading"],!1);case Se.e:return e.setIn(["domainBlocks","isLoading"],!0);case Se.f:return e.setIn(["domainBlocks","items"],Object(i.fromJS)(t.blocks)).setIn(["domainBlocks","isLoading"],!1).setIn(["domainBlocks","isAvailable"],t.isAvailable);case Se.d:return e.setIn(["domainBlocks","isLoading"],!1);default:return e}},boosts:function(e,t){switch(void 0===e&&(e=Te),t.type){case Ee.b:return e.withMutations((e=>{e.setIn(["new","privacy"],t.privacy)}));case Ee.a:return e.setIn(["new","privacy"],t.privacy);default:return e}},contexts:function(e,t){switch(void 0===e&&(e=Ie),t.type){case l.a:case l.f:return((e,t,n)=>{const s=n.filter((e=>e.get("account")===t.id)).map((e=>e.get("id")));return we(e,s)})(e,t.relationship,t.statuses);case B.a:return n=e,s=t.id,a=t.ancestors,o=t.descendants,n.withMutations((e=>{e.update("inReplyTos",(t=>t.withMutations((t=>{e.update("replies",(e=>e.withMutations((e=>{function n(n){let{id:s,in_reply_to_id:a}=n;a&&!t.has(s)&&(e.update(a,Object(i.List)(),(e=>{const t=e.findLastIndex((e=>Object(d.a)(e,s)<0));return e.insert(t+1,s)})),t.set(s,a))}a.forEach(n),a[0]&&n({id:s,in_reply_to_id:a[a.length-1].id}),o.forEach(n)}))))}))))}));case u.c:return we(e,[t.id]);case u.k:return((e,t)=>t.in_reply_to_id?e.withMutations((e=>{const n=e.getIn(["replies",t.in_reply_to_id],Object(i.List)());e.setIn(["inReplyTos",t.id],t.in_reply_to_id),n.includes(t.id)||e.setIn(["replies",t.in_reply_to_id],n.push(t.id))})):e)(e,t.status);default:return e}var n,s,a,o},compose:function(e,t){switch(void 0===e&&(e=Ae),t.type){case m.a:return((e,t)=>(e=Ue(e.merge(t)),t.get("text")&&(e=e.set("text",t.get("text")).set("focusDate",new Date)),e))(e,t.state.get("compose"));case S.l:return e.set("mounted",e.get("mounted")+1);case S.I:return e.set("mounted",Math.max(e.get("mounted")-1,0));case S.a:return e.set("advanced_options",e.get("advanced_options").set(t.option,!!Ne(!e.getIn(["advanced_options",t.option]),t.value))).set("idempotencyKey",ae());case S.v:return e.withMutations((t=>{e.get("spoiler")||t.set("sensitive",!e.get("sensitive")),t.set("idempotencyKey",ae())}));case S.x:return e.withMutations((t=>{t.set("spoiler",!e.get("spoiler")),t.set("idempotencyKey",ae()),!e.get("sensitive")&&e.get("media_attachments").size>=1&&t.set("sensitive",!0)}));case S.y:return e.set("spoiler_text",t.text).set("idempotencyKey",ae());case S.S:return e.set("privacy",t.value).set("idempotencyKey",ae());case S.e:return e.set("content_type",t.value).set("idempotencyKey",ae());case S.b:return e.set("text",t.text).set("idempotencyKey",ae());case S.f:return e.set("elefriend",(e.get("elefriend")+1)%3);case S.s:return e.withMutations((n=>{if(n.set("id",null),n.set("in_reply_to",t.status.get("id")),n.set("text",function(e,t){let n=Object(i.OrderedSet)([]);return t.getIn(["account","id"])!==Me.q&&(n=n.add(`@${t.getIn(["account","acct"])} `)),n.union(t.get("mentions").filterNot((e=>e.get("id")===Me.q)).map((e=>`@${e.get("acct")} `))).join("")}(0,t.status)),n.set("privacy",Object(ke.a)(t.status.get("visibility"),e.get("default_privacy"))),n.update("advanced_options",(e=>e.merge(new i.Map({do_not_federate:!!t.status.get("local_only")})))),n.set("focusDate",new Date),n.set("caretPosition",null),n.set("preselectDate",new Date),n.set("idempotencyKey",ae()),n.update("media_attachments",(e=>e.filter((e=>e.get("unattached"))))),t.status.get("language")&&!t.status.has("translation")?n.set("language",t.status.get("language")):n.set("language",e.get("default_language")),t.status.get("spoiler_text").length>0){let e=t.status.get("spoiler_text");t.prependCWRe&&!e.match(/^re[: ]/i)&&(e="re: ".concat(e)),n.set("spoiler",!0),n.set("spoiler_text",e)}else n.set("spoiler",!1),n.set("spoiler_text","")}));case S.t:e=e.setIn(["advanced_options","threaded_mode"],!1);case S.u:return e.withMutations((t=>{t.set("in_reply_to",null),Me.d&&t.set("content_type",Me.d),t.set("text",""),t.set("spoiler",!1),t.set("spoiler_text",""),t.set("privacy",e.get("default_privacy")),t.set("id",null),t.set("poll",null),t.update("advanced_options",(t=>t.mergeWith(Ne,e.get("default_advanced_options")))),t.set("idempotencyKey",ae())}));case S.A:return e.set("is_submitting",!0);case S.K:return e.set("is_changing_upload",!0);case S.B:return t.status&&e.getIn(["advanced_options","threaded_mode"])?De(e,t.status):Ue(e);case S.z:return e.set("is_submitting",!1);case S.J:return e.set("is_changing_upload",!1);case S.P:return e.set("is_uploading",!0).update("pending_media_attachments",(e=>e+1));case S.N:return e.set("is_processing",!0);case S.Q:return function(e,t,n){const s=e.get("media_attachments").size;return e.withMutations((a=>{"image"===t.get("type")&&(t=t.set("file",n)),a.update("media_attachments",(e=>e.push(t.set("unattached",!0)))),a.set("is_uploading",!1),a.set("is_processing",!1),a.set("resetFileKey",Math.floor(65536*Math.random())),a.set("idempotencyKey",ae()),a.update("pending_media_attachments",(e=>e-1)),0===s&&(e.get("default_sensitive")||e.get("spoiler"))&&a.set("sensitive",!0)}))}(e,Object(i.fromJS)(t.media),t.file);case S.M:return e.set("is_uploading",!1).set("is_processing",!1).update("pending_media_attachments",(e=>e-1));case S.R:return function(e,t){const n=e.get("media_attachments").size;return e.withMutations((e=>{e.update("media_attachments",(e=>e.filterNot((e=>e.get("id")===t)))),e.set("idempotencyKey",ae()),1===n&&e.set("sensitive",!1)}))}(e,t.media_id);case S.O:return e.set("progress",Math.round(t.loaded/t.total*100));case S.W:return e.set("isUploadingThumbnail",!0);case S.V:return e.set("thumbnailProgress",Math.round(t.loaded/t.total*100));case S.U:return e.set("isUploadingThumbnail",!1);case S.X:return e.set("isUploadingThumbnail",!1).update("media_attachments",(e=>e.map((e=>e.get("id")===t.media.id?Object(i.fromJS)(t.media):e))));case S.T:const n=e.get("media_attachments").find((e=>e.get("id")===t.id));return e.set("media_modal",Object(i.Map)({id:t.id,description:n.get("description")||"",focusX:n.getIn(["meta","focus","x"],0),focusY:n.getIn(["meta","focus","y"],0),dirty:!1}));case S.c:return e.setIn(["media_modal","description"],t.description).setIn(["media_modal","dirty"],!0);case S.d:return e.setIn(["media_modal","focusX"],t.focusX).setIn(["media_modal","focusY"],t.focusY).setIn(["media_modal","dirty"],!0);case S.k:return e.withMutations((e=>{e.update("text",(e=>[e.trim(),`@${t.account.get("acct")} `].filter((e=>0!==e.length)).join(" "))),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("idempotencyKey",ae())}));case S.g:return e.withMutations((e=>{e.update("text",(e=>[e.trim(),`@${t.account.get("acct")} `].filter((e=>0!==e.length)).join(" "))),e.set("privacy","direct"),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("idempotencyKey",ae())}));case S.C:return e.update("suggestions",Object(i.List)(),(e=>e.clear())).set("suggestion_token",null);case S.D:return e.set("suggestions",Object(i.List)(((e,t)=>{let{accounts:n,emojis:s,tags:a,token:o}=t;return n?n.map((e=>({id:e.id,type:"account"}))):s?s.map((e=>({...e,type:"emoji"}))):He(((e,t)=>{const n=e.get("tagHistory").map((e=>e.toLowerCase())),s=t.map((e=>({...e,lowerName:e.name.toLowerCase()}))).sort(((e,t)=>{const s=n.includes(e.lowerName),a=n.includes(t.lowerName);return s===a?0:s&&!a?-1:1}));return s.forEach((e=>delete e.lowerName)),s})(e,a.map((e=>({...e,type:"hashtag"})))),o.slice(1),e.get("tagHistory"))})(e,t))).set("suggestion_token",t.token);case S.F:return((e,t,n,s,a)=>e.withMutations((e=>{e.updateIn(a,(e=>`${e.slice(0,t)}${s}${":"===s[0]?"​":" "}${e.slice(t+n.length)}`)),e.set("suggestion_token",null),e.set("suggestions",Object(i.List)()),1===a.length&&"text"===a[0]&&(e.set("focusDate",new Date),e.set("caretPosition",t+s.length+1)),e.set("idempotencyKey",ae())})))(e,t.position,t.token,t.completion,t.path);case S.E:return((e,t,n,s,a)=>e.withMutations((e=>{e.updateIn(a,(e=>`${e.slice(0,t+n.length)} ${e.slice(t+n.length)}`)),e.set("suggestion_token",null),e.set("suggestions",Object(i.List)()),e.set("focusDate",new Date),e.set("caretPosition",t+n.length+1),e.set("idempotencyKey",ae())})))(e,t.position,t.token,t.completion,t.path);case S.G:return((e,t)=>{const n=t.slice(1),s=e.get("suggestions").toJS();return e.merge({suggestions:Object(i.List)(He(s,n,e.get("tagHistory"))),suggestion_token:t})})(e,t.token);case S.H:return e.set("tagHistory",Object(i.fromJS)(t.tags));case u.c:return t.id===e.get("in_reply_to")?e.set("in_reply_to",null):t.id===e.get("id")?e.set("id",null):e;case S.i:return((e,t,n)=>{const s=n.native;return e.withMutations((e=>{e.update("text",(e=>`${e.slice(0,t)}${s}​${e.slice(t)}`)),e.set("focusDate",new Date),e.set("caretPosition",t+s.length+1),e.set("idempotencyKey",ae())}))})(e,t.position,t.emoji);case S.L:return e.set("is_changing_upload",!1).setIn(["media_modal","dirty"],!1).update("media_attachments",(e=>e.map((e=>e.get("id")===t.media.id?Object(i.fromJS)(t.media).set("unattached",!t.attached):e))));case S.h:return e.mergeIn(["doodle"],t.options);case B.b:const s=!!t.status.get("local_only");let a=t.raw_text||Object(xe.a)((e=>{const t=Fe.parseFromString(e.get("content"),"text/html").documentElement;return e.get("mentions").forEach((e=>{t.querySelector(`a[href="${e.get("url")}"]`).textContent=`@${e.get("acct")}`})),t.innerHTML})(t.status));return s&&(a=a.replace(/ ?👁\ufe0f?\u200b?$/,"")),e.withMutations((e=>{e.set("text",a),e.set("content_type",t.content_type||"text/plain"),e.set("in_reply_to",t.status.get("in_reply_to_id")),e.set("privacy",t.status.get("visibility")),e.set("media_attachments",t.status.get("media_attachments").map((e=>e.set("unattached",!0)))),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("idempotencyKey",ae()),e.set("sensitive",t.status.get("sensitive")),e.set("language",t.status.get("language")),e.update("advanced_options",(e=>e.merge(new i.Map({do_not_federate:s})))),e.set("id",null),t.status.get("spoiler_text").length>0?(e.set("spoiler",!0),e.set("spoiler_text",t.status.get("spoiler_text")),e.get("media_attachments").size>=1&&e.set("sensitive",!0)):(e.set("spoiler",!1),e.set("spoiler_text","")),t.status.get("poll")&&e.set("poll",Object(i.Map)({options:t.status.getIn(["poll","options"]).map((e=>e.get("title"))),multiple:t.status.getIn(["poll","multiple"]),expires_in:Pe(t.status.getIn(["poll","expires_at"]))}))}));case S.w:return e.withMutations((e=>{e.set("id",t.status.get("id")),e.set("text",t.text),e.set("content_type",t.content_type||"text/plain"),e.set("in_reply_to",t.status.get("in_reply_to_id")),e.set("privacy",t.status.get("visibility")),e.set("media_attachments",t.status.get("media_attachments")),e.set("focusDate",new Date),e.set("caretPosition",null),e.set("idempotencyKey",ae()),e.set("sensitive",t.status.get("sensitive")),e.set("language",t.status.get("language")),t.spoiler_text.length>0?(e.set("spoiler",!0),e.set("spoiler_text",t.spoiler_text)):(e.set("spoiler",!1),e.set("spoiler_text","")),t.status.get("poll")&&e.set("poll",Object(i.Map)({options:t.status.getIn(["poll","options"]).map((e=>e.get("title"))),multiple:t.status.getIn(["poll","multiple"]),expires_in:Pe(t.status.getIn(["poll","expires_at"]))}))}));case S.m:return e.set("poll",Re);case S.q:return e.set("poll",null);case S.n:return e.updateIn(["poll","options"],(e=>e.push(t.title)));case S.o:return e.setIn(["poll","options",t.index],t.title);case S.p:return e.updateIn(["poll","options"],(e=>e.delete(t.index)));case S.r:return e.update("poll",(e=>e.set("expires_in",t.expiresIn).set("multiple",t.isMultiple)));case S.j:return e.set("language",t.language);default:return e}},search:function(e,t){switch(void 0===e&&(e=Ke),t.type){case qe.a:return e.set("value",t.value);case qe.b:return e.withMutations((e=>{e.set("value",""),e.set("results",Object(i.Map)()),e.set("submitted",!1),e.set("hidden",!1)}));case qe.g:return e.set("hidden",!1);case S.s:case S.k:case S.g:return e.set("hidden",!0);case qe.e:return e.withMutations((e=>{e.set("isLoading",!0),e.set("submitted",!0)}));case qe.d:return e.set("isLoading",!1);case qe.f:return e.withMutations((e=>{e.set("results",Object(i.Map)({accounts:Object(i.List)(t.results.accounts.map((e=>e.id))),statuses:Object(i.List)(t.results.statuses.map((e=>e.id))),hashtags:Object(i.fromJS)(t.results.hashtags)})),e.set("searchTerm",t.searchTerm),e.set("isLoading",!1)}));case qe.c:const n="hashtags"===t.searchType?Object(i.fromJS)(t.results.hashtags):t.results[t.searchType].map((e=>e.id));return e.updateIn(["results",t.searchType],(e=>e.concat(n)));default:return e}},media_attachments:function(e,t){return void 0===e&&(e=$e),t.type===m.a?e.merge(t.state.get("media_attachments")):e},notifications:function(e,t){let n;switch(void 0===e&&(e=We),t.type){case Be.a:return t.markers.notifications?Xe(e,t.markers.notifications.last_read_id):e;case T.m:return(e=>(e=e.update("mounted",(e=>e+1)),Ve(e,1===e.get("mounted"))||(e=e.set("readMarkerId",e.get("lastReadId")),e=Qe(e)),e))(e);case T.r:return e.update("mounted",(e=>e-1));case T.q:return((e,t)=>(e=e.set("isTabVisible",t),Ve(e)||(e=e.set("readMarkerId",e.get("lastReadId")),e=Qe(e)),e))(e,t.visibility);case T.j:return e.update("items",(t=>e.get("pendingItems").concat(t.take(40)))).set("pendingItems",Object(i.List)()).set("unread",0);case T.g:case T.c:return e.update("isLoading",(e=>e+1));case T.b:case T.f:return e.update("isLoading",(e=>e-1));case T.i:return e.set("items",Object(i.List)()).set("hasMore",!0);case T.n:return((e,t)=>(e=e.set("top",t),Ve(e)||(e=Qe(e)),e))(e,t.top);case T.s:return((e,t,n)=>{const s=e.get("markNewForDelete"),a=e.get("top");return e.get("pendingItems").some((e=>(null==e?void 0:e.get("id"))===t.id))||e.get("items").some((e=>(null==e?void 0:e.get("id"))===t.id))?e:n||!e.get("pendingItems").isEmpty()?e.update("pendingItems",(e=>e.unshift(ze(t,s)))).update("unread",(e=>e+1)):(e=Ve(e)?e.update("unread",(e=>e+1)):e.set("lastReadId",t.id)).update("items",(e=>(a&&e.size>40&&(e=e.take(20)),e.unshift(ze(t,s)))))})(e,t.notification,t.usePendingItems);case T.h:return((e,t,n,s,a,o)=>{const r=e.get("markNewForDelete"),c=e.get("lastReadId"),u=Object(i.List)(t.map((e=>ze(e,r))));return e.withMutations((t=>{if(u.isEmpty()||(o=a&&(o||!t.get("pendingItems").isEmpty()),t.update(o?"pendingItems":"items",(e=>{if(a){const t=e.map((e=>null==e?void 0:e.get("id"))).toSet();return u.filterNot((e=>t.includes(e.get("id")))).concat(e)}if(s){const t=e.map((e=>null==e?void 0:e.get("id"))).toSet(),n=u.filterNot((e=>t.includes(e.get("id"))));return e.concat(n)}const t=e.findLastIndex((e=>null!==e&&Object(d.a)(e.get("id"),u.last().get("id"))>=0))+1,n=e.take(t).findLastIndex((e=>null!==e&&Object(d.a)(e.get("id"),u.first().get("id"))>0))+1,o=e.take(n).map((e=>null==e?void 0:e.get("id"))).toSet(),i=u.filterNot((e=>o.includes(e.get("id")))),r=e.slice(n,t).filter((e=>null!==e&&Object(d.a)(e.get("id"),u.last().get("id"))<0));return e.take(n).concat(i,r,e.skip(t))}))),n||t.set("hasMore",!1),Ve(e))t.set("unread",t.get("pendingItems").count((e=>null!==e))+t.get("items").count((e=>e&&Object(d.a)(e.get("id"),c)>0)));else{const e=u.find((e=>null!==e));e&&Object(d.a)(c,e.get("id"))<0&&t.set("lastReadId",e.get("id"))}t.update("isLoading",(e=>e-1))}))})(e,t.notifications,t.next,t.isLoadingMore,t.isLoadingRecent,t.usePendingItems);case l.a:return Ge(e,[t.relationship.id]);case l.f:return t.relationship.muting_notifications?Ge(e,[t.relationship.id]):e;case D.c:return Ge(e,t.accounts);case l.G:case l.H:return Ge(e,[t.id],"follow_request");case T.a:return e.set("items",Object(i.List)()).set("pendingItems",Object(i.List)()).set("hasMore",!1);case u.c:return((e,t)=>{const n=e.get("lastReadId");if(Ve(e)){const s=e.get("items").filter((e=>null!==e&&e.get("status")===t&&Object(d.a)(e.get("id"),n)>0));e=e.update("unread",(e=>e-s.size))}const s=e=>e.filterNot((e=>null!==e&&e.get("status")===t)),a=e.get("pendingItems").filter((e=>null!==e&&e.get("status")===t&&Object(d.a)(e.get("id"),n)>0));return(e=e.update("unread",(e=>e-a.size))).update("items",s).update("pendingItems",s)})(e,t.id);case u.d:return"home"===t.timeline?e.update(t.usePendingItems?"pendingItems":"items",(e=>e.first()?e.unshift(null):e)):e;case T.p:return e.set("browserSupport",t.value);case T.o:return e.set("browserPermission",t.value);case T.t:return((e,t,n)=>e.update("items",(e=>e.map((e=>null===e?null:e.get("id")===t?e.set("markedForDelete",n):e)))))(e,t.id,t.yes);case T.d:return(e=>e.update("items",(e=>e.filterNot((e=>null===e?e:e.get("markedForDelete"))))))(e).update("isLoading",(e=>e-1));case T.e:return n=e.set("cleaningMode",t.yes),t.yes?n:(e=>e.update("items",(e=>e.map((e=>null===e?e:e.set("markedForDelete",!1))))))(n).set("markNewForDelete",!1);case T.k:return n=e,null===t.yes||(n=n.set("markNewForDelete",t.yes)),((e,t)=>e.update("items",(e=>e.map((e=>null===e?null:null!==t?e.set("markedForDelete",t):e.set("markedForDelete",!e.get("markedForDelete")))))))(n,t.yes);case T.l:const s=e.get("items").find((e=>null!==e));return s?Xe(e,s.get("id")):e;default:return e}},height_cache:function(e,t){switch(void 0===e&&(e=Ye),t.type){case Je.b:return((e,t,n,s)=>e.update(t,Object(i.Map)(),(e=>e.set(n,s))))(e,t.key,t.id,t.height);case Je.a:return Object(i.Map)();default:return e}},custom_emojis:function(e,t){return void 0===e&&(e=nt),t.type===Ze.a&&(e=Object(i.fromJS)(t.custom_emojis),Object(et.a)("",{custom:Object(tt.buildCustomEmojis)(e)})),e},lists:function(e,t){switch(void 0===e&&(e=st),t.type){case se.w:case se.l:case se.z:return at(e,t.list);case se.a:return((e,t)=>(t.forEach((t=>{e=at(e,t)})),e))(e,t.lists);case se.m:case se.v:return e.set(t.id,!1);default:return e}},listEditor:function(e,t){switch(void 0===e&&(e=ot),t.type){case se.p:return ot;case se.q:return e.withMutations((e=>{e.set("listId",t.list.get("id")),e.set("title",t.list.get("title")),e.set("isSubmitting",!1)}));case se.u:return e.withMutations((e=>{e.set("title",t.value),e.set("isChanged",!0)}));case se.k:case se.y:return e.withMutations((e=>{e.set("isSubmitting",!0),e.set("isChanged",!1)}));case se.j:case se.x:return e.set("isSubmitting",!1);case se.l:case se.z:return e.withMutations((e=>{e.set("isSubmitting",!1),e.set("listId",t.list.id)}));case se.c:return e.setIn(["accounts","isLoading"],!0);case se.b:return e.setIn(["accounts","isLoading"],!1);case se.d:return e.update("accounts",(e=>e.withMutations((e=>{e.set("isLoading",!1),e.set("loaded",!0),e.set("items",Object(i.List)(t.accounts.map((e=>e.id))))}))));case se.r:return e.setIn(["suggestions","value"],t.value);case se.t:return e.setIn(["suggestions","items"],Object(i.List)(t.accounts.map((e=>e.id))));case se.s:return e.update("suggestions",(e=>e.withMutations((e=>{e.set("items",Object(i.List)()),e.set("value","")}))));case se.n:return e.updateIn(["accounts","items"],(e=>e.unshift(t.accountId)));case se.o:return e.updateIn(["accounts","items"],(e=>e.filterNot((e=>e===t.accountId))));default:return e}},listAdder:function(e,t){switch(void 0===e&&(e=it),t.type){case se.h:return it;case se.i:return e.withMutations((e=>{e.set("accountId",t.account.get("id"))}));case se.f:return e.setIn(["lists","isLoading"],!0);case se.e:return e.setIn(["lists","isLoading"],!1);case se.g:return e.update("lists",(e=>e.withMutations((e=>{e.set("isLoading",!1),e.set("loaded",!0),e.set("items",Object(i.List)(t.lists.map((e=>e.id))))}))));case se.n:return e.updateIn(["lists","items"],(e=>e.unshift(t.listId)));case se.o:return e.updateIn(["lists","items"],(e=>e.filterNot((e=>e===t.listId))));default:return e}},filters:function(e,t){switch(void 0===e&&(e=Object(i.Map)()),t.type){case rt.a:return ct(e,t.filter);case rt.b:return ut(Object(i.Map)(),t.filters);case P.c:return ut(e,t.filters);default:return e}},conversations:function(e,t){switch(void 0===e&&(e=dt),t.type){case lt.c:return e.set("isLoading",!0);case lt.b:return e.set("isLoading",!1);case lt.d:return((e,t,n,s)=>{let a=Object(i.List)(t.map(pt));return e.withMutations((e=>{a.isEmpty()||e.update("items",(e=>(e=(e=e.map((e=>{const t=a.findIndex((t=>t.get("id")===e.get("id")));if(-1===t)return e;const n=a.get(t);return a=a.delete(t),n}))).concat(a)).sortBy((e=>e.get("last_status")),((e,t)=>null===e||null===t?-1:-1*Object(d.a)(e,t))))),n||s||e.set("hasMore",!1),e.set("isLoading",!1)}))})(e,t.conversations,t.next,t.isLoadingRecent);case lt.h:return((e,t)=>e.update("items",(e=>{const n=e.findIndex((e=>e.get("id")===t.id)),s=pt(t);return-1===n?e.unshift(s):e.set(n,s)})))(e,t.conversation);case lt.e:return e.update("mounted",(e=>e+1));case lt.g:return e.update("mounted",(e=>e-1));case lt.f:return e.update("items",(e=>e.map((e=>e.get("id")===t.id?e.set("unread",!1):e))));case l.a:case l.f:return ht(e,[t.relationship.id]);case D.c:return ht(e,t.accounts);case lt.a:return e.update("items",(e=>e.filterNot((e=>e.get("id")===t.id))));default:return e}},suggestions:function(e,t){switch(void 0===e&&(e=mt),t.type){case gt.c:return e.set("isLoading",!0);case gt.d:return e.withMutations((e=>{e.set("items",Object(i.fromJS)(t.suggestions.map((e=>({...e,account:e.account.id}))))),e.set("isLoading",!1)}));case gt.b:return e.set("isLoading",!1);case gt.a:return e.update("items",(e=>e.filterNot((e=>e.account===t.id))));case l.a:case l.f:return e.update("items",(e=>e.filterNot((e=>e.account===t.relationship.id))));case D.c:return e.update("items",(e=>e.filterNot((e=>t.accounts.includes(e.account)))));default:return e}},pinnedAccountsEditor:function(e,t){switch(void 0===e&&(e=ft),t.type){case l.I:return ft;case l.N:return e.setIn(["accounts","isLoading"],!0);case l.M:return e.setIn(["accounts","isLoading"],!1);case l.O:return e.update("accounts",(e=>e.withMutations((e=>{e.set("isLoading",!1),e.set("loaded",!0),e.set("items",Object(i.List)(t.accounts.map((e=>e.id))))}))));case l.J:return e.setIn(["suggestions","value"],t.value);case l.L:return e.setIn(["suggestions","items"],Object(i.List)(t.accounts.map((e=>e.id))));case l.K:return e.update("suggestions",(e=>e.withMutations((e=>{e.set("items",Object(i.List)()),e.set("value","")}))));case l.g:return e.updateIn(["accounts","items"],(e=>e.unshift(t.relationship.id)));case l.n:return e.updateIn(["accounts","items"],(e=>e.filterNot((e=>e===t.relationship.id))));default:return e}},polls:function(e,t){return void 0===e&&(e=bt),t.type===P.d?((e,t)=>e.withMutations((e=>t.forEach((t=>e.set(t.id,Object(i.fromJS)(t)))))))(e,t.polls):e},trends:function(e,t){switch(void 0===e&&(e=_t),t.type){case me.k:return e.setIn(["tags","isLoading"],!0);case me.l:return e.withMutations((e=>{e.setIn(["tags","items"],Object(i.fromJS)(t.trends)),e.setIn(["tags","isLoading"],!1)}));case me.j:return e.setIn(["tags","isLoading"],!1);case me.b:return e.setIn(["links","isLoading"],!0);case me.c:return e.withMutations((e=>{e.setIn(["links","items"],Object(i.fromJS)(t.trends)),e.setIn(["links","isLoading"],!1)}));case me.a:return e.setIn(["links","isLoading"],!1);default:return e}},markers:function(e,t){return void 0===e&&(e=Ct),t.type===Be.b?(t.home&&(e=e.set("home",t.home)),t.notifications&&(e=e.set("notifications",t.notifications)),e):e},account_notes:function(e,t){switch(void 0===e&&(e=Et),t.type){case V.c:return e.withMutations((e=>{e.setIn(["edit","isSubmitting"],!1),e.setIn(["edit","account_id"],t.account.get("id")),e.setIn(["edit","comment"],t.comment)}));case V.b:return e.setIn(["edit","comment"],t.comment);case V.e:return e.setIn(["edit","isSubmitting"],!0);case V.d:return e.setIn(["edit","isSubmitting"],!1);case V.f:case V.a:return e.withMutations((e=>{e.setIn(["edit","isSubmitting"],!1),e.setIn(["edit","account_id"],null),e.setIn(["edit","comment"],null)}));default:return e}},picture_in_picture:function(e,t){switch(void 0===e&&(e=It),t.type){case Tt.a:return{statusId:t.statusId,accountId:t.accountId,type:t.playerType,...t.props};case Tt.b:return{...It};case u.c:return e.statusId===t.id?{...It}:e;default:return e}},history:function(e,t){switch(void 0===e&&(e=Nt),t.type){case kt.b:return e.update(t.statusId,Mt,(e=>e.withMutations((e=>{e.set("loading",!0),e.set("items",Object(i.List)())}))));case kt.c:return e.update(t.statusId,Mt,(e=>e.withMutations((e=>{e.set("loading",!1),e.set("items",Object(i.fromJS)(t.history.map(((e,t)=>({...e,account:e.account.id,original:0===t}))).reverse()))}))));case kt.a:return e.update(t.statusId,Mt,(e=>e.set("loading",!1)));default:return e}},tags:function(e,t){switch(void 0===e&&(e=Lt),t.type){case xt.g:return e.set(t.name,Object(i.fromJS)(t.tag));case xt.i:case xt.j:return e.setIn([t.name,"following"],!0);case xt.h:case xt.k:return e.setIn([t.name,"following"],!1);default:return e}},followed_tags:function(e,t){switch(void 0===e&&(e=At),t.type){case xt.e:return e.set("isLoading",!0);case xt.f:return e.withMutations((e=>{e.set("items",Object(i.fromJS)(t.followed_tags)),e.set("isLoading",!1),e.set("next",t.next)}));case xt.d:return e.set("isLoading",!1);case xt.b:return e.set("isLoading",!0);case xt.c:return e.withMutations((e=>{e.update("items",(e=>e.concat(Object(i.fromJS)(t.followed_tags)))),e.set("isLoading",!1),e.set("next",t.next)}));case xt.a:return e.set("isLoading",!1);default:return e}}};var Ut=Object(o.combineReducers)(Rt);const Dt=["PENDING","FULFILLED","REJECTED"];const Ft=e=>{const t=new Audio;return e.forEach((e=>{let{type:n,src:s}=e;const a=document.createElement("source");a.type=n,a.src=s,t.appendChild(a)})),t};function Pt(){return Object(s.c)(Ut,Object(s.b)(Object(s.a)(a.a,function(e){void 0===e&&(e={});const t=e.promiseTypeSuffixes||Dt;return e=>{let{dispatch:n}=e;return e=>s=>{if(s.type&&!s.skipLoading){const[e,a,o]=t,i=new RegExp(`${e}$`,"g"),r=new RegExp(`${a}$`,"g"),c=new RegExp(`${o}$`,"g");s.type.match(i)?n(Object(y.showLoading)()):(s.type.match(r)||s.type.match(c))&&n(Object(y.hideLoading)())}return e(s)}}}({promiseTypeSuffixes:["REQUEST","SUCCESS","FAIL"]}),(e=>{let{dispatch:t}=e;return e=>n=>{if(n.type&&!n.skipAlert){const e=new RegExp("FAIL$","g");n.type.match(e)&&t(Object(v.f)(n.error,n.skipNotFound))}return e(n)}}),function(){const e={boop:Ft([{src:"/sounds/boop.ogg",type:"audio/ogg"},{src:"/sounds/boop.mp3",type:"audio/mpeg"}])};return()=>t=>n=>{var s;return n.meta&&n.meta.sound&&e[n.meta.sound]&&((s=e[n.meta.sound]).paused||(s.pause(),"function"==typeof s.fastSeek?s.fastSeek(0):s.currentTime=0),s.play()),t(n)}}()),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():e=>e))}},726:function(e,t,n){"use strict";var s=n(12),a=n(36),o=n(9),i=n(0),r=n(1),c=n.n(r),u=n(705),l=n(706),d=n(698),p=n(6),h=n(32);const g=Object(p.f)({error:{id:"bundle_modal_error.message",defaultMessage:"Something went wrong while loading this component."},retry:{id:"bundle_modal_error.retry",defaultMessage:"Try again"},close:{id:"bundle_modal_error.close",defaultMessage:"Close"}});class m extends c.a.Component{constructor(){super(...arguments),this.handleRetry=()=>{this.props.onRetry()}}render(){const{onClose:e,intl:{formatMessage:t}}=this.props;return Object(i.a)("div",{className:"modal-root__modal error-modal"},void 0,Object(i.a)("div",{className:"error-modal__body"},void 0,Object(i.a)(h.a,{title:t(g.retry),icon:"refresh",onClick:this.handleRetry,size:64}),t(g.error)),Object(i.a)("div",{className:"error-modal__footer"},void 0,Object(i.a)("div",{},void 0,Object(i.a)("button",{onClick:e,className:"error-modal__nav onboarding-modal__skip"},void 0,t(g.close)))))}}var f=Object(p.g)(m),b=n(666);var _=()=>Object(i.a)("div",{className:"modal-root__modal error-modal"},void 0,Object(i.a)("div",{className:"error-modal__body"},void 0,Object(i.a)(b.b,{})),Object(i.a)("div",{className:"error-modal__footer"},void 0,Object(i.a)("div",{},void 0,Object(i.a)("button",{className:"error-modal__nav onboarding-modal__skip"})))),v=n(2),O=n.n(v),y=n(21),j=n.n(y),S=n(20),C=n(284),E=n(200),T=n(163),I=n(198),w=n(10),k=n.n(w);class M extends S.a{constructor(){super(...arguments),this.renderAction=(e,t)=>{if(null===e)return Object(i.a)("li",{className:"dropdown-menu__separator"},`sep-${t}`);const{icon:n=null,text:s,meta:a=null,active:o=!1,href:r="#"}=e;let u=this.props.renderItemContents&&this.props.renderItemContents(e,t);return u||(u=Object(i.a)(c.a.Fragment,{},void 0,n&&Object(i.a)(h.a,{title:s,icon:n,role:"presentation",tabIndex:"-1",inverted:!0}),Object(i.a)("div",{},void 0,Object(i.a)("div",{className:k()({"actions-modal__item-label":!!a})},void 0,s),Object(i.a)("div",{},void 0,a)))),Object(i.a)("li",{},`${s}-${t}`,Object(i.a)("a",{href:r,target:"_blank",rel:"noopener noreferrer",onClick:this.props.onClick,"data-index":t,className:k()("link",{active:o})},void 0,u))}}render(){const e=this.props.status&&Object(i.a)("div",{className:"status light"},void 0,Object(i.a)("div",{className:"boost-modal__status-header"},void 0,Object(i.a)("div",{className:"boost-modal__status-time"},void 0,Object(i.a)("a",{href:this.props.status.get("url"),className:"status__relative-time",target:"_blank",rel:"noopener noreferrer"},void 0,Object(i.a)(T.default,{timestamp:this.props.status.get("created_at")}))),Object(i.a)("a",{href:this.props.status.getIn(["account","url"]),className:"status__display-name",rel:"noopener noreferrer"},void 0,Object(i.a)("div",{className:"status__avatar"},void 0,Object(i.a)(E.a,{account:this.props.status.get("account"),size:48})),Object(i.a)(I.a,{account:this.props.status.get("account")}))),Object(i.a)(C.a,{status:this.props.status}));return Object(i.a)("div",{className:"modal-root__modal actions-modal"},void 0,e,Object(i.a)("ul",{className:k()({"with-status":!!e})},void 0,this.props.actions.map(this.renderAction)))}}M.propTypes={status:j.a.map,onClick:O.a.func,actions:O.a.arrayOf(O.a.shape({active:O.a.bool,href:O.a.string,icon:O.a.string,meta:O.a.string,name:O.a.string,text:O.a.string})),renderItemContents:O.a.func};var N,x,L=n(708),A=n(179),R=n(287),U=n(552);let D=Object(s.connect)(((e,t)=>{let{statusId:n}=t;return{language:e.getIn(["statuses",n,"language"])}}),null,null,{forwardRef:!0})(((x=class extends S.a{componentDidMount(){const{media:e,onChangeBackgroundColor:t,onClose:n}=this.props,s=Object(U.a)(e.get("blurhash"));s&&t(s)}render(){const{media:e,statusId:t,language:n,onClose:s}=this.props,a=this.props.options||{};return Object(i.a)("div",{className:"modal-root__modal video-modal"},void 0,Object(i.a)("div",{className:"video-modal__container"},void 0,Object(i.a)(A.default,{preview:e.get("preview_url"),frameRate:e.getIn(["meta","original","frame_rate"]),blurhash:e.get("blurhash"),src:e.get("url"),currentTime:a.startTime,autoPlay:a.autoPlay,volume:a.defaultVolume,onCloseVideo:s,autoFocus:!0,detailed:!0,alt:e.get("description"),lang:n})),Object(i.a)("div",{className:"media-modal__overlay"},void 0,t&&Object(i.a)(R.a,{statusId:t,withOpenButton:!0,onClose:s})))}}).contextTypes={router:O.a.object},x.propTypes={media:j.a.map.isRequired,statusId:O.a.string,language:O.a.string,options:O.a.shape({startTime:O.a.number,autoPlay:O.a.bool,defaultVolume:O.a.number}),onClose:O.a.func.isRequired,onChangeBackgroundColor:O.a.func.isRequired},N=x))||N;var F,P,H=n(154),q=n(286),K=n(30),$=n(549),B=n(267),W=n(540);const z=Object(p.f)({cancel_reblog:{id:"status.cancel_reblog_private",defaultMessage:"Unboost"},reblog:{id:"status.reblog",defaultMessage:"Boost"}});let G=Object(s.connect)((e=>({privacy:e.getIn(["boosts","new","privacy"])})),(e=>({onChangeBoostPrivacy(t){e(Object(B.c)(t))}})))(F=Object(p.g)((P=class extends S.a{constructor(){super(...arguments),this.handleReblog=()=>{this.props.onReblog(this.props.status,this.props.privacy),this.props.onClose()},this.handleAccountClick=e=>{if(0===e.button){e.preventDefault(),this.props.onClose();let t={...this.context.router.history.location.state};t.mastodonBackSteps=(t.mastodonBackSteps||0)+1,this.context.router.history.push(`/@${this.props.status.getIn(["account","acct"])}`,t)}},this._findContainer=()=>document.getElementsByClassName("modal-root__container")[0],this.setRef=e=>{this.button=e}}componentDidMount(){this.button.focus()}render(){const{status:e,missingMediaDescription:t,privacy:n,intl:s}=this.props,a=e.get("reblogged")?z.cancel_reblog:z.reblog;return Object(i.a)("div",{className:"modal-root__modal boost-modal"},void 0,Object(i.a)("div",{className:"boost-modal__container"},void 0,Object(i.a)("div",{className:k()("status",`status-${e.get("visibility")}`,"light")},void 0,Object(i.a)("div",{className:"boost-modal__status-header"},void 0,Object(i.a)("div",{className:"boost-modal__status-time"},void 0,Object(i.a)("a",{href:e.get("url"),className:"status__relative-time",target:"_blank",rel:"noopener noreferrer"},void 0,Object(i.a)(W.a,{visibility:e.get("visibility")}),Object(i.a)(T.default,{timestamp:e.get("created_at")}))),Object(i.a)("a",{onClick:this.handleAccountClick,href:e.getIn(["account","url"]),className:"status__display-name"},void 0,Object(i.a)("div",{className:"status__avatar"},void 0,Object(i.a)(E.a,{account:e.get("account"),size:48})),Object(i.a)(I.a,{account:e.get("account")}))),Object(i.a)(C.a,{status:e}),e.get("media_attachments").size>0&&Object(i.a)(q.a,{compact:!0,media:e.get("media_attachments")}))),Object(i.a)("div",{className:"boost-modal__action-bar"},void 0,Object(i.a)("div",{},void 0,t?Object(i.a)(p.b,{id:"boost_modal.missing_description",defaultMessage:"This toot contains some media without description"}):Object(i.a)(p.b,{id:"boost_modal.combo",defaultMessage:"You can press {combo} to skip this next time",values:{combo:Object(i.a)("span",{},void 0,"Shift + ",Object(i.a)(K.a,{id:"retweet"}))}})),"private"!==e.get("visibility")&&!e.get("reblogged")&&Object(i.a)($.a,{noDirect:!0,value:n,container:this._findContainer,onChange:this.props.onChangeBoostPrivacy}),c.a.createElement(H.a,{text:s.formatMessage(a),onClick:this.handleReblog,ref:this.setRef})))}},P.contextTypes={router:O.a.object},P.propTypes={status:j.a.map.isRequired,onReblog:O.a.func.isRequired,onClose:O.a.func.isRequired,missingMediaDescription:O.a.bool,intl:O.a.object.isRequired},F=P))||F)||F;var Q,V;const X=Object(p.f)({favourite:{id:"status.favourite",defaultMessage:"Favourite"}});let J=Object(p.g)((V=class extends S.a{constructor(){super(...arguments),this.handleFavourite=()=>{this.props.onFavourite(this.props.status),this.props.onClose()},this.handleAccountClick=e=>{if(0===e.button){e.preventDefault(),this.props.onClose();let t={...this.context.router.history.location.state};t.mastodonBackSteps=(t.mastodonBackSteps||0)+1,this.context.router.history.push(`/@${this.props.status.getIn(["account","acct"])}`,t)}},this.setRef=e=>{this.button=e}}componentDidMount(){this.button.focus()}render(){const{status:e,intl:t}=this.props;return Object(i.a)("div",{className:"modal-root__modal boost-modal"},void 0,Object(i.a)("div",{className:"boost-modal__container"},void 0,Object(i.a)("div",{className:k()("status",`status-${e.get("visibility")}`,"light")},void 0,Object(i.a)("div",{className:"boost-modal__status-header"},void 0,Object(i.a)("div",{className:"boost-modal__status-time"},void 0,Object(i.a)("a",{href:e.get("url"),className:"status__relative-time",target:"_blank",rel:"noopener noreferrer"},void 0,Object(i.a)(W.a,{visibility:e.get("visibility")}),Object(i.a)(T.default,{timestamp:e.get("created_at")}))),Object(i.a)("a",{onClick:this.handleAccountClick,href:e.getIn(["account","url"]),className:"status__display-name"},void 0,Object(i.a)("div",{className:"status__avatar"},void 0,Object(i.a)(E.a,{account:e.get("account"),size:48})),Object(i.a)(I.a,{account:e.get("account")}))),Object(i.a)(C.a,{status:e}),e.get("media_attachments").size>0&&Object(i.a)(q.a,{compact:!0,media:e.get("media_attachments")}))),Object(i.a)("div",{className:"boost-modal__action-bar"},void 0,Object(i.a)("div",{},void 0,Object(i.a)(p.b,{id:"favourite_modal.combo",defaultMessage:"You can press {combo} to skip this next time",values:{combo:Object(i.a)("span",{},void 0,"Shift + ",Object(i.a)(K.a,{id:"star"}))}})),c.a.createElement(H.a,{text:t.formatMessage(X.favourite),onClick:this.handleFavourite,ref:this.setRef})))}},V.contextTypes={router:O.a.object},V.propTypes={status:j.a.map.isRequired,onFavourite:O.a.func.isRequired,onClose:O.a.func.isRequired,intl:O.a.object.isRequired},Q=V))||Q;var Y,Z,ee=n(305);let te=Object(s.connect)(((e,t)=>{let{statusId:n}=t;return{language:e.getIn(["statuses",n,"language"]),accountStaticAvatar:e.getIn(["accounts",e.getIn(["statuses",n,"account"]),"avatar_static"])}}),null,null,{forwardRef:!0})(((Z=class extends S.a{render(){const{media:e,language:t,accountStaticAvatar:n,statusId:s,onClose:a}=this.props,o=this.props.options||{};return Object(i.a)("div",{className:"modal-root__modal audio-modal"},void 0,Object(i.a)("div",{className:"audio-modal__container"},void 0,Object(i.a)(ee.default,{src:e.get("url"),alt:e.get("description"),lang:t,duration:e.getIn(["meta","original","duration"],0),height:150,poster:e.get("preview_url")||n,backgroundColor:e.getIn(["meta","colors","background"]),foregroundColor:e.getIn(["meta","colors","foreground"]),accentColor:e.getIn(["meta","colors","accent"]),autoPlay:o.autoPlay})),Object(i.a)("div",{className:"media-modal__overlay"},void 0,s&&Object(i.a)(R.a,{statusId:s,withOpenButton:!0,onClose:a})))}}).propTypes={media:j.a.map.isRequired,statusId:O.a.string.isRequired,language:O.a.string,accountStaticAvatar:O.a.string.isRequired,options:O.a.shape({autoPlay:O.a.bool}),onClose:O.a.func.isRequired,onChangeBackgroundColor:O.a.func.isRequired},Z.contextTypes={router:O.a.object},Y=Z))||Y;var ne,se,ae=n(720),oe=n.n(ae),ie=n(62),re=n.n(ie),ce=n(721),ue=n.n(ce),le=n(14);const de=[["rgb(  0,    0,    0)","Black"],["rgb( 38,   38,   38)","Gray 15"],["rgb( 77,   77,   77)","Grey 30"],["rgb(128,  128,  128)","Grey 50"],["rgb(171,  171,  171)","Grey 67"],["rgb(217,  217,  217)","Grey 85"],["rgb(255,  255,  255)","White"],["rgb(128,    0,    0)","Maroon"],["rgb(209,    0,    0)","English-red"],["rgb(255,   54,   34)","Tomato"],["rgb(252,   60,    3)","Orange-red"],["rgb(255,  140,  105)","Salmon"],["rgb(252,  232,   32)","Cadium-yellow"],["rgb(243,  253,   37)","Lemon yellow"],["rgb(121,    5,   35)","Dark crimson"],["rgb(169,   32,   62)","Deep carmine"],["rgb(255,  140,    0)","Orange"],["rgb(255,  168,   18)","Dark tangerine"],["rgb(217,  144,   88)","Persian orange"],["rgb(194,  178,  128)","Sand"],["rgb(255,  229,  180)","Peach"],["rgb(100,   54,   46)","Bole"],["rgb(108,   41,   52)","Dark cordovan"],["rgb(163,   65,   44)","Chestnut"],["rgb(228,  136,  100)","Dark salmon"],["rgb(255,  195,  143)","Apricot"],["rgb(255,  219,  188)","Unbleached silk"],["rgb(242,  227,  198)","Straw"],["rgb( 53,   19,   13)","Bistre"],["rgb( 84,   42,   14)","Dark chocolate"],["rgb(102,   51,   43)","Burnt sienna"],["rgb(184,   66,    0)","Sienna"],["rgb(216,  153,   12)","Yellow ochre"],["rgb(210,  180,  140)","Tan"],["rgb(232,  204,  144)","Dark wheat"],["rgb(  0,   49,   83)","Prussian blue"],["rgb( 48,   69,  119)","Dark grey blue"],["rgb(  0,   71,  171)","Cobalt blue"],["rgb( 31,  117,  254)","Blue"],["rgb(120,  180,  255)","Bright french blue"],["rgb(171,  200,  255)","Bright steel blue"],["rgb(208,  231,  255)","Ice blue"],["rgb( 30,   51,   58)","Medium jungle green"],["rgb( 47,   79,   79)","Dark slate grey"],["rgb( 74,  104,   93)","Dark grullo green"],["rgb(  0,  128,  128)","Teal"],["rgb( 67,  170,  176)","Turquoise"],["rgb(109,  174,  199)","Cerulean frost"],["rgb(173,  217,  186)","Tiffany green"],["rgb( 22,   34,   29)","Gray-asparagus"],["rgb( 36,   48,   45)","Medium dark teal"],["rgb( 74,  104,   93)","Xanadu"],["rgb(119,  198,  121)","Mint"],["rgb(175,  205,  182)","Timberwolf"],["rgb(185,  245,  246)","Celeste"],["rgb(193,  255,  234)","Aquamarine"],["rgb( 29,   52,   35)","Cal Poly Pomona"],["rgb(  1,   68,   33)","Forest green"],["rgb( 42,  128,    0)","Napier green"],["rgb(128,  128,    0)","Olive"],["rgb( 65,  156,  105)","Sea green"],["rgb(189,  246,   29)","Green-yellow"],["rgb(231,  244,  134)","Bright chartreuse"],["rgb(138,   23,  137)","Purple"],["rgb( 78,   39,  138)","Violet"],["rgb(193,   75,  110)","Dark thulian pink"],["rgb(222,   49,   99)","Cerise"],["rgb(255,   20,  147)","Deep pink"],["rgb(255,  102,  204)","Rose pink"],["rgb(255,  203,  219)","Pink"],["rgb(255,  255,  255)","White"],["rgb(229,   17,    1)","RGB Red"],["rgb(  0,  255,    0)","RGB Green"],["rgb(  0,    0,  255)","RGB Blue"],["rgb(  0,  255,  255)","CMYK Cyan"],["rgb(255,    0,  255)","CMYK Magenta"],["rgb(255,  255,    0)","CMYK Yellow"]];let pe=[];for(let e=0;e<7;e++){for(let t=0;t<11;t++)pe.push(de[7*t+e]);pe.push(null)}const he={normal:[500,500,"Square 500"],tootbanner:[702,330,"Tootbanner"],s640x480:[640,480,"640×480 - 480p"],s800x600:[800,600,"800×600 - SVGA"],s720x480:[720,405,"720x405 - 16:9"]};let ge=Object(s.connect)((e=>({options:e.getIn(["compose","doodle"])})),(e=>({setOpt:t=>e(Object(le.pb)(t)),submit:t=>e(Object(le.Ib)([t]))})))((se=class extends S.a{constructor(){super(...arguments),this.handleKeyUp=e=>{if("INPUT"!==e.target.nodeName){if("Delete"===e.key)return e.preventDefault(),void this.handleClearBtn();("Backspace"===e.key||"z"===e.key&&(e.ctrlKey||e.metaKey))&&(e.preventDefault(),this.undo()),"Control"!==e.key&&"Meta"!==e.key||(this.controlHeld=!1,this.swapped=!1),"Shift"===e.key&&(this.shiftHeld=!1,this.mode="draw")}},this.handleKeyDown=e=>{"Control"!==e.key&&"Meta"!==e.key||(this.controlHeld=!0,this.swapped=!0),"Shift"===e.key&&(this.shiftHeld=!0,this.mode="fill")},this.setCanvasRef=e=>{this.canvas=e,e&&(e.addEventListener("dirty",(()=>{this.saveUndo(),this.sketcher._dirty=!1})),e.addEventListener("click",(()=>{"fill"===this.mode&&this.saveUndo()})),e.addEventListener("contextmenu",(e=>{e.preventDefault()})),e.addEventListener("mousedown",(e=>{2===e.button&&(this.swapped=!0)})),e.addEventListener("mouseup",(e=>{2===e.button&&(this.swapped=this.controlHeld)})),this.initSketcher(e),this.mode="draw")},this.onDoneButton=()=>{const e=function(e,t){let n=e.split(","),s=n[0].match(/:(.*?);/)[1],a=atob(n[1]),o=a.length,i=new Uint8Array(o);for(;o--;)i[o]=a.charCodeAt(o);return new File([i],t,{type:s})}(this.sketcher.toImage(),"doodle.png");this.props.submit(e),this.props.onClose()},this.onCancelButton=()=>{this.undos.length>1&&!confirm("Discard doodle? All changes will be lost!")||this.props.onClose()},this.clearScreen=()=>{this.ctx.fillStyle=this.bg,this.ctx.fillRect(-1,-1,this.canvas.width+2,this.canvas.height+2),this.undos=[],this.doSaveUndo()},this.undo=()=>{if(this.undos.length>1){this.undos.pop();const e=this.undos.pop();this.sketcher.clear(),this.ctx.putImageData(e,0,0),this.doSaveUndo()}},this.doSaveUndo=()=>{this.undos.push(this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height))},this.saveUndo=re()((()=>{this.doSaveUndo()}),100),this.onPaletteClick=e=>{const t=e.target.dataset.color;this.controlHeld?this.bg=t:this.fg=t,e.target.blur(),e.preventDefault()},this.onPaletteRClick=e=>{this.bg=e.target.dataset.color,e.target.blur(),e.preventDefault()},this.setModeDraw=e=>{this.mode="draw",e.target.blur()},this.setModeFill=e=>{this.mode="fill",e.target.blur()},this.tglSmooth=e=>{this.smoothing=!this.smoothing,e.target.blur()},this.tglAdaptive=e=>{this.adaptiveStroke=!this.adaptiveStroke,e.target.blur()},this.setWeight=e=>{this.weight=+e.target.value||1},this.changeSize=e=>{let t=e.target.value;t!==this.oldSize&&(this.undos.length>1&&!confirm("Change canvas size? This will erase your current drawing!")||(this.size=t))},this.handleClearBtn=()=>{this.undos.length>1&&!confirm("Clear canvas? This will erase your current drawing!")||this.clearScreen()}}get fg(){return this.props.options.get("fg")}set fg(e){this.props.setOpt({fg:e})}get bg(){return this.props.options.get("bg")}set bg(e){this.props.setOpt({bg:e})}get swapped(){return this.props.options.get("swapped")}set swapped(e){this.props.setOpt({swapped:e})}get mode(){return this.props.options.get("mode")}set mode(e){this.props.setOpt({mode:e})}get weight(){return this.props.options.get("weight")}set weight(e){this.props.setOpt({weight:e})}get opacity(){return this.props.options.get("opacity")}set opacity(e){this.props.setOpt({opacity:e})}get adaptiveStroke(){return this.props.options.get("adaptiveStroke")}set adaptiveStroke(e){this.props.setOpt({adaptiveStroke:e})}get smoothing(){return this.props.options.get("smoothing")}set smoothing(e){this.props.setOpt({smoothing:e})}get size(){return this.props.options.get("size")}set size(e){this.props.setOpt({size:e})}componentDidMount(){this.controlHeld=!1,this.shiftHeld=!1,this.swapped=!1,window.addEventListener("keyup",this.handleKeyUp,!1),window.addEventListener("keydown",this.handleKeyDown,!1)}componentWillUnmount(){window.removeEventListener("keyup",this.handleKeyUp,!1),window.removeEventListener("keydown",this.handleKeyDown,!1),this.sketcher&&this.sketcher.destroy()}initSketcher(e){void 0===e&&(e=null);const t=he[this.size];this.sketcher&&this.sketcher.destroy(),this.sketcher=new ue.a(e||this.canvas,t[0],t[1]),e&&(this.ctx=this.sketcher.context,this.updateSketcherSettings()),this.clearScreen()}updateSketcherSettings(){this.sketcher&&(this.oldSize!==this.size&&this.initSketcher(),this.sketcher.color=this.swapped?this.bg:this.fg,this.sketcher.opacity=this.opacity,this.sketcher.weight=this.weight,this.sketcher.mode=this.mode,this.sketcher.smoothing=this.smoothing,this.sketcher.adaptiveStroke=this.adaptiveStroke,this.oldSize=this.size)}render(){return this.updateSketcherSettings(),Object(i.a)("div",{className:"modal-root__modal doodle-modal"},void 0,Object(i.a)("div",{className:"doodle-modal__container"},void 0,c.a.createElement("canvas",{ref:this.setCanvasRef})),Object(i.a)("div",{className:"doodle-modal__action-bar"},void 0,Object(i.a)("div",{className:"doodle-toolbar"},void 0,Object(i.a)(H.a,{text:"Done",onClick:this.onDoneButton}),Object(i.a)(H.a,{text:"Cancel",onClick:this.onCancelButton})),Object(i.a)("div",{className:"filler"}),Object(i.a)("div",{className:"doodle-toolbar with-inputs"},void 0,Object(i.a)("div",{},void 0,Object(i.a)("label",{htmlFor:"dd_smoothing"},void 0,"Smoothing"),Object(i.a)("span",{className:"val"},void 0,Object(i.a)("input",{type:"checkbox",id:"dd_smoothing",onChange:this.tglSmooth,checked:this.smoothing}))),Object(i.a)("div",{},void 0,Object(i.a)("label",{htmlFor:"dd_adaptive"},void 0,"Adaptive"),Object(i.a)("span",{className:"val"},void 0,Object(i.a)("input",{type:"checkbox",id:"dd_adaptive",onChange:this.tglAdaptive,checked:this.adaptiveStroke}))),Object(i.a)("div",{},void 0,Object(i.a)("label",{htmlFor:"dd_weight"},void 0,"Weight"),Object(i.a)("span",{className:"val"},void 0,Object(i.a)("input",{type:"number",min:1,id:"dd_weight",value:this.weight,onChange:this.setWeight}))),Object(i.a)("div",{},void 0,Object(i.a)("select",{"aria-label":"Canvas size",onInput:this.changeSize,defaultValue:this.size},void 0,Object.values(oe()(he,((e,t)=>Object(i.a)("option",{value:t},t,e[2]))))))),Object(i.a)("div",{className:"doodle-toolbar"},void 0,Object(i.a)(h.a,{icon:"pencil",title:"Draw",label:"Draw",onClick:this.setModeDraw,size:18,active:"draw"===this.mode,inverted:!0}),Object(i.a)(h.a,{icon:"bath",title:"Fill",label:"Fill",onClick:this.setModeFill,size:18,active:"fill"===this.mode,inverted:!0}),Object(i.a)(h.a,{icon:"undo",title:"Undo",label:"Undo",onClick:this.undo,size:18,inverted:!0}),Object(i.a)(h.a,{icon:"trash",title:"Clear",label:"Clear",onClick:this.handleClearBtn,size:18,inverted:!0})),Object(i.a)("div",{className:"doodle-palette"},void 0,pe.map(((e,t)=>null===e?Object(i.a)("br",{},t):Object(i.a)("button",{style:{backgroundColor:e[0]},onClick:this.onPaletteClick,onContextMenu:this.onPaletteRClick,"data-color":e[0],title:e[1],className:k()({foreground:this.fg===e[0],background:this.bg===e[0]})},t))))))}},se.propTypes={options:j.a.map,onClose:O.a.func.isRequired,setOpt:O.a.func.isRequired,submit:O.a.func.isRequired},ne=se))||ne;var me,fe;let be=Object(p.g)((fe=class extends c.a.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.closeWhenConfirm&&this.props.onClose(),this.props.onConfirm(),this.props.onDoNotAsk&&this.doNotAskCheckbox.checked&&this.props.onDoNotAsk()},this.handleSecondary=()=>{this.props.onClose(),this.props.onSecondary()},this.handleCancel=()=>{this.props.onClose()},this.setRef=e=>{this.button=e},this.setDoNotAskRef=e=>{this.doNotAskCheckbox=e}}componentDidMount(){this.button.focus()}render(){const{message:e,confirm:t,secondary:n,onDoNotAsk:s}=this.props;return Object(i.a)("div",{className:"modal-root__modal confirmation-modal"},void 0,Object(i.a)("div",{className:"confirmation-modal__container"},void 0,e),Object(i.a)("div",{},void 0,s&&Object(i.a)("div",{className:"confirmation-modal__do_not_ask_again"},void 0,c.a.createElement("input",{type:"checkbox",id:"confirmation-modal__do_not_ask_again-checkbox",ref:this.setDoNotAskRef}),Object(i.a)("label",{for:"confirmation-modal__do_not_ask_again-checkbox"},void 0,Object(i.a)(p.b,{id:"confirmation_modal.do_not_ask_again",defaultMessage:"Do not ask for confirmation again"}))),Object(i.a)("div",{className:"confirmation-modal__action-bar"},void 0,Object(i.a)(H.a,{onClick:this.handleCancel,className:"confirmation-modal__cancel-button"},void 0,Object(i.a)(p.b,{id:"confirmation_modal.cancel",defaultMessage:"Cancel"})),void 0!==n&&Object(i.a)(H.a,{text:n,onClick:this.handleSecondary,className:"confirmation-modal__secondary-button"}),c.a.createElement(H.a,{text:t,onClick:this.handleClick,ref:this.setRef}))))}},fe.defaultProps={closeWhenConfirm:!0},me=fe))||me;var _e,ve,Oe=n(226),ye=n(548),je=n(550),Se=n(155),Ce=n(157),Ee=n(551),Te=n(11),Ie=n(352),we=n(353),ke=n(149);const Me=Object(p.f)({close:{id:"lightbox.close",defaultMessage:"Close"},apply:{id:"upload_modal.apply",defaultMessage:"Apply"},applying:{id:"upload_modal.applying",defaultMessage:"Applying…"},placeholder:{id:"upload_modal.description_placeholder",defaultMessage:"A quick brown fox jumps over the lazy dog"},chooseImage:{id:"upload_modal.choose_image",defaultMessage:"Choose image"},discardMessage:{id:"confirmations.discard_edit_media.message",defaultMessage:"You have unsaved changes to the media description or preview, discard them anyway?"},discardConfirm:{id:"confirmations.discard_edit_media.confirm",defaultMessage:"Discard"}});class Ne extends c.a.PureComponent{constructor(){super(...arguments),this.state={loading:!0}}componentDidMount(){const e=new Image;e.addEventListener("load",(()=>this.setState({loading:!1}))),e.src=this.props.src}render(){const{loading:e}=this.state;return e?Object(i.a)("canvas",{width:this.props.width,height:this.props.height}):c.a.createElement("img",Object(o.a)({},this.props,{alt:""}))}}let xe=Object(s.connect)(((e,t)=>{let{id:n}=t;return{media:e.getIn(["compose","media_attachments"]).find((e=>e.get("id")===n)),account:e.getIn(["accounts",Te.q]),isUploadingThumbnail:e.getIn(["compose","isUploadingThumbnail"]),description:e.getIn(["compose","media_modal","description"]),lang:e.getIn(["compose","language"]),focusX:e.getIn(["compose","media_modal","focusX"]),focusY:e.getIn(["compose","media_modal","focusY"]),dirty:e.getIn(["compose","media_modal","dirty"]),is_changing_upload:e.getIn(["compose","is_changing_upload"])}}),((e,t)=>{let{id:n}=t;return{onSave:(t,s,a)=>{e(Object(le.lb)(n,{description:t,focus:`${s.toFixed(2)},${a.toFixed(2)}`}))},onChangeDescription:t=>{e(Object(le.xb)(t))},onChangeFocus:(t,n)=>{e(Object(le.yb)(t,n))},onSelectThumbnail:t=>{e(Object(le.Jb)(n,t[0]))}}}),null,{forwardRef:!0})(_e=(e=>Object(p.g)(e,{withRef:!0}))((ve=class extends S.a{constructor(){var e;super(...arguments),e=this,this.state={dragging:!1,dirty:!1,progress:0,loading:!0,ocrStatus:""},this.handleMouseDown=e=>{document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.updatePosition(e),this.setState({dragging:!0})},this.handleTouchStart=e=>{document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("touchend",this.handleTouchEnd),this.updatePosition(e),this.setState({dragging:!0})},this.handleMouseMove=e=>{this.updatePosition(e)},this.handleMouseUp=()=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.setState({dragging:!1})},this.handleTouchEnd=()=>{document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("touchend",this.handleTouchEnd),this.setState({dragging:!1})},this.updatePosition=e=>{const{x:t,y:n}=Object(A.getPointerPosition)(this.node,e),s=2*(t-.5),a=-2*(n-.5);this.props.onChangeFocus(s,a)},this.handleChange=e=>{this.props.onChangeDescription(e.target.value)},this.handleKeyDown=e=>{13===e.keyCode&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation(),this.props.onChangeDescription(e.target.value),this.handleSubmit())},this.handleSubmit=()=>{this.props.onSave(this.props.description,this.props.focusX,this.props.focusY)},this.getCloseConfirmationMessage=()=>{const{intl:e,dirty:t}=this.props;return t?{message:e.formatMessage(Me.discardMessage),confirm:e.formatMessage(Me.discardConfirm)}:null},this.setRef=e=>{this.node=e},this.handleTextDetection=()=>{this._detectText()},this._detectText=function(t){void 0===t&&(t=!1);const{media:n}=e.props;e.setState({detecting:!0}),Object(Ce.X)().then((s=>{let{createWorker:a}=s;const o=a({workerPath:we.a,corePath:Ie.a,langPath:`${ke.a}/ocr/lang-data/`,logger:t=>{let{status:n,progress:s}=t;"recognizing text"===n?e.setState({ocrStatus:"detecting",progress:s}):e.setState({ocrStatus:"preparing",progress:s})},cacheMethod:t?"refresh":"write"});let i=n.get("url");if(window.URL&&URL.createObjectURL)try{i=URL.createObjectURL(n.get("file"))}catch(e){console.error(e)}return(async()=>{await o.load(),await o.loadLanguage("eng"),await o.initialize("eng");const{data:{text:t}}=await o.recognize(i);e.setState({detecting:!1}),e.props.onChangeDescription(t.replace(/\n\n/g,"******").replace(/\n/g," ").replace(/\*\*\*\*\*\*/g,"\n\n")),await o.terminate()})().catch((n=>{if(t)throw n;e._detectText(!0)}))})).catch((t=>{console.error(t),e.setState({detecting:!1})}))},this.handleThumbnailChange=e=>{e.target.files.length>0&&this.props.onSelectThumbnail(e.target.files)},this.setFileInputRef=e=>{this.fileInput=e},this.handleFileInputClick=()=>{this.fileInput.click()}}componentWillUnmount(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)}render(){const{media:e,intl:t,account:n,onClose:s,isUploadingThumbnail:a,description:o,lang:r,focusX:u,focusY:l,dirty:d,is_changing_upload:g}=this.props,{dragging:m,detecting:f,progress:b,ocrStatus:_}=this.state,v=u/2+.5,O=l/-2+.5,y=e.getIn(["meta","original","width"])||null,j=e.getIn(["meta","original","height"])||null,S=["image","gifv"].includes(e.get("type")),C=["audio","video"].includes(e.get("type"));let E=null;E="audio"===e.get("type")?Object(i.a)(p.b,{id:"upload_form.audio_description",defaultMessage:"Describe for people who are hard of hearing"}):"video"===e.get("type")?Object(i.a)(p.b,{id:"upload_form.video_description",defaultMessage:"Describe for people who are deaf, hard of hearing, blind or have low vision"}):Object(i.a)(p.b,{id:"upload_form.description",defaultMessage:"Describe for people who are blind or have low vision"});let T="";return T="detecting"===_?Object(i.a)(p.b,{id:"upload_modal.analyzing_picture",defaultMessage:"Analyzing picture…"}):Object(i.a)(p.b,{id:"upload_modal.preparing_ocr",defaultMessage:"Preparing OCR…"}),Object(i.a)("div",{className:"modal-root__modal report-modal",style:{maxWidth:960}},void 0,Object(i.a)("div",{className:"report-modal__target"},void 0,Object(i.a)(h.a,{className:"report-modal__close",title:t.formatMessage(Me.close),icon:"times",onClick:s,size:20}),Object(i.a)(p.b,{id:"upload_modal.edit_media",defaultMessage:"Edit media"})),Object(i.a)("div",{className:"report-modal__container"},void 0,Object(i.a)("div",{className:"report-modal__comment"},void 0,S&&Object(i.a)("p",{},void 0,Object(i.a)(p.b,{id:"upload_modal.hint",defaultMessage:"Click or drag the circle on the preview to choose the focal point which will always be in view on all thumbnails."})),C&&Object(i.a)(c.a.Fragment,{},void 0,Object(i.a)("label",{className:"setting-text-label",htmlFor:"upload-modal__thumbnail"},void 0,Object(i.a)(p.b,{id:"upload_form.thumbnail",defaultMessage:"Change thumbnail"})),Object(i.a)(H.a,{disabled:a||!e.get("unattached"),text:t.formatMessage(Me.chooseImage),onClick:this.handleFileInputClick}),Object(i.a)("label",{},void 0,Object(i.a)("span",{style:{display:"none"}},void 0,t.formatMessage(Me.chooseImage)),c.a.createElement("input",{id:"upload-modal__thumbnail",ref:this.setFileInputRef,type:"file",accept:"image/png,image/jpeg",onChange:this.handleThumbnailChange,style:{display:"none"},disabled:a||g})),Object(i.a)("hr",{className:"setting-divider"})),Object(i.a)("label",{className:"setting-text-label",htmlFor:"upload-modal__description"},void 0,E),Object(i.a)("div",{className:"setting-text__wrapper"},void 0,Object(i.a)(Oe.a,{id:"upload-modal__description",className:"setting-text light",value:f?"…":o,lang:r,onChange:this.handleChange,onKeyDown:this.handleKeyDown,disabled:f||g,autoFocus:!0}),Object(i.a)("div",{className:"setting-text__modifiers"},void 0,Object(i.a)(ye.a,{progress:100*b,active:f,icon:"file-text-o",message:T}))),Object(i.a)("div",{className:"setting-text__toolbar"},void 0,Object(i.a)("button",{disabled:f||"image"!==e.get("type")||g,className:"link-button",onClick:this.handleTextDetection},void 0,Object(i.a)(p.b,{id:"upload_modal.detect_text",defaultMessage:"Detect text from picture"})),Object(i.a)(je.a,{max:1500,text:f?"":o})),Object(i.a)(H.a,{disabled:!d||f||a||Object(Se.length)(o)>1500||g,text:t.formatMessage(g?Me.applying:Me.apply),onClick:this.handleSubmit})),Object(i.a)("div",{className:"focal-point-modal__content"},void 0,S&&c.a.createElement("div",{className:k()("focal-point",{dragging:m}),ref:this.setRef,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart},"image"===e.get("type")&&Object(i.a)(Ne,{src:e.get("url"),width:y,height:j,alt:""}),"gifv"===e.get("type")&&Object(i.a)(Ee.a,{src:e.get("url"),width:y,height:j}),Object(i.a)("div",{className:"focal-point__preview"},void 0,Object(i.a)("strong",{},void 0,Object(i.a)(p.b,{id:"upload_modal.preview_label",defaultMessage:"Preview ({ratio})",values:{ratio:"16:9"}})),Object(i.a)("div",{style:{width:200,height:112.5,backgroundImage:`url(${e.get("preview_url")})`,backgroundSize:"cover",backgroundPosition:`${100*v}% ${100*O}%`}})),Object(i.a)("div",{className:"focal-point__reticle",style:{top:100*O+"%",left:100*v+"%"}}),Object(i.a)("div",{className:"focal-point__overlay"})),"video"===e.get("type")&&Object(i.a)(A.default,{preview:e.get("preview_url"),frameRate:e.getIn(["meta","original","frame_rate"]),blurhash:e.get("blurhash"),src:e.get("url"),detailed:!0,inline:!0,editable:!0}),"audio"===e.get("type")&&Object(i.a)(ee.default,{src:e.get("url"),duration:e.getIn(["meta","original","duration"],0),height:150,poster:e.get("preview_url")||n.get("avatar_static"),backgroundColor:e.getIn(["meta","colors","background"]),foregroundColor:e.getIn(["meta","colors","foreground"]),accentColor:e.getIn(["meta","colors","accent"]),editable:!0}))))}},ve.propTypes={media:j.a.map.isRequired,account:j.a.map.isRequired,isUploadingThumbnail:O.a.bool,onSave:O.a.func.isRequired,onChangeDescription:O.a.func.isRequired,onChangeFocus:O.a.func.isRequired,onSelectThumbnail:O.a.func.isRequired,onClose:O.a.func.isRequired,intl:O.a.object.isRequired},_e=ve))||_e)||_e;var Le,Ae=n(281),Re=n(339);const Ue=Object(p.f)({discardChanges:{id:"confirmations.deprecated_settings.confirm",defaultMessage:"Use Mastodon preferences"},user_setting_expand_spoilers:{id:"settings.enable_content_warnings_auto_unfold",defaultMessage:"Automatically unfold content-warnings"},user_setting_disable_swiping:{id:"settings.swipe_to_change_columns",defaultMessage:"Allow swiping to change columns (Mobile only)"}});let De=Object(p.g)(Le=class extends c.a.PureComponent{constructor(){super(...arguments),this.handleClick=()=>{this.props.onConfirm(),this.props.onClose()},this.setRef=e=>{this.button=e}}componentDidMount(){this.button.focus()}render(){const{settings:e,intl:t}=this.props;return Object(i.a)("div",{className:"modal-root__modal confirmation-modal"},void 0,Object(i.a)("div",{className:"confirmation-modal__container"},void 0,Object(i.a)("img",{src:Re.default,className:"modal-warning",alt:""}),Object(i.a)(p.b,{id:"confirmations.deprecated_settings.message",defaultMessage:"Some of the glitch-soc device-specific {app_settings} you are using have been replaced by Mastodon {preferences} and will be overriden:",values:{app_settings:Object(i.a)("strong",{className:"deprecated-settings-label"},void 0,Object(i.a)(K.a,{id:"cogs"})," ",Object(i.a)(p.b,{id:"navigation_bar.app_settings",defaultMessage:"App settings"})),preferences:Object(i.a)("strong",{className:"deprecated-settings-label"},void 0,Object(i.a)(K.a,{id:"cog"})," ",Object(i.a)(p.b,{id:"navigation_bar.preferences",defaultMessage:"Preferences"}))}}),Object(i.a)("div",{className:"deprecated-settings-info"},void 0,Object(i.a)("ul",{},void 0,e.map((e=>Object(i.a)("li",{},void 0,Object(i.a)("a",{href:Object(Ae.b)(e)},void 0,c.a.createElement(p.b,Ue[e])))))))),Object(i.a)("div",{},void 0,Object(i.a)("div",{className:"confirmation-modal__action-bar"},void 0,Object(i.a)("div",{}),c.a.createElement(H.a,{text:t.formatMessage(Ue.discardChanges),onClick:this.handleClick,ref:this.setRef}))))}})||Le;var Fe,Pe=n(561);const He=Object(p.f)({close:{id:"lightbox.close",defaultMessage:"Close"}});let qe=Object(p.g)(Fe=class extends c.a.PureComponent{constructor(){super(...arguments),this.state={navigationHidden:!1},this.toggleNavigation=()=>{this.setState((e=>({navigationHidden:!e.navigationHidden})))}}render(){const{intl:e,src:t,alt:n,onClose:s}=this.props,{navigationHidden:a}=this.state,o=k()("media-modal__navigation",{"media-modal__navigation--hidden":a});return Object(i.a)("div",{className:"modal-root__modal media-modal"},void 0,Object(i.a)("div",{className:"media-modal__closer",role:"presentation",onClick:s},void 0,Object(i.a)(Pe.a,{src:t,width:400,height:400,alt:n,onClick:this.toggleNavigation})),Object(i.a)("div",{className:o},void 0,Object(i.a)(h.a,{className:"media-modal__close",title:e.formatMessage(He.close),icon:"times",onClick:s,size:40})))}})||Fe;var Ke=n(298);const $e={MEDIA:()=>Promise.resolve({default:L.a}),ONBOARDING:Ce.N,VIDEO:()=>Promise.resolve({default:D}),AUDIO:()=>Promise.resolve({default:te}),IMAGE:()=>Promise.resolve({default:qe}),BOOST:()=>Promise.resolve({default:G}),FAVOURITE:()=>Promise.resolve({default:J}),DOODLE:()=>Promise.resolve({default:ge}),CONFIRM:()=>Promise.resolve({default:be}),MUTE:Ce.K,BLOCK:Ce.e,REPORT:Ce.T,SETTINGS:Ce.U,DEPRECATED_SETTINGS:()=>Promise.resolve({default:De}),ACTIONS:()=>Promise.resolve({default:M}),EMBED:Ce.o,LIST_EDITOR:Ce.G,FOCAL_POINT:()=>Promise.resolve({default:xe}),LIST_ADDER:Ce.F,PINNED_ACCOUNTS_EDITOR:Ce.O,COMPARE_HISTORY:Ce.j,FILTER:Ce.t,SUBSCRIBED_LANGUAGES:Ce.W,INTERACTION:Ce.D,CLOSED_REGISTRATIONS:Ce.h};class Be extends c.a.PureComponent{constructor(){var e;super(...arguments),e=this,this.state={backgroundColor:null},this.setBackgroundColor=e=>{this.setState({backgroundColor:e})},this.renderLoading=e=>()=>-1===["MEDIA","VIDEO","BOOST","FAVOURITE","DOODLE","CONFIRM","ACTIONS"].indexOf(e)?Object(i.a)(_,{}):null,this.renderError=e=>{const{onClose:t}=this.props;return c.a.createElement(f,Object(o.a)({},e,{onClose:t}))},this.handleClose=function(t){void 0===t&&(t=!1);const{onClose:n}=e.props;let s=null;try{var a,o,i;s=null==(a=e._modal)||null==a.getWrappedInstance||null==(o=(i=a.getWrappedInstance()).getCloseConfirmationMessage)?void 0:o.call(i)}catch(e){}n(s,t)},this.setModalRef=e=>{this._modal=e},this.noop=()=>{}}componentDidUpdate(){this.props.type?(document.body.classList.add("with-modals--active"),document.documentElement.style.marginRight=`${Object(u.a)()}px`):(document.body.classList.remove("with-modals--active"),document.documentElement.style.marginRight=0)}render(){const{type:e,props:t,ignoreFocus:n}=this.props,{backgroundColor:s}=this.state,a=!!e;return Object(i.a)(l.a,{backgroundColor:s,onClose:t&&t.noClose?this.noop:this.handleClose,noEsc:!!t&&t.noEsc,ignoreFocus:n},void 0,a&&c.a.createElement(c.a.Fragment,null,Object(i.a)(d.a,{fetchComponent:$e[e],loading:this.renderLoading(e),error:this.renderError,renderDelay:200},void 0,(e=>c.a.createElement(e,Object(o.a)({},t,{onChangeBackgroundColor:this.setBackgroundColor,onClose:this.handleClose,ref:this.setModalRef})))),Object(i.a)(Ke.a,{},void 0,Object(i.a)("meta",{name:"robots",content:"noindex"}))))}}t.a=Object(s.connect)((e=>({ignoreFocus:e.getIn(["modal","ignoreFocus"]),type:e.getIn(["modal","stack",0,"modalType"],null),props:e.getIn(["modal","stack",0,"modalProps"],{})})),(e=>({onClose(t,n){void 0===n&&(n=!1),e(t?Object(a.d)("CONFIRM",{message:t.message,confirm:t.confirm,onConfirm:()=>e(Object(a.c)(void 0,{ignoreFocus:n}))}):Object(a.c)(void 0,{ignoreFocus:n}))}})))(Be)},862:function(e,t,n){var s=n(863);e.exports=function(e,t,n){"__proto__"==t&&s?s(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},863:function(e,t,n){var s=n(250),a=function(){try{var e=s(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},868:function(e,t,n){var s=n(869),a=n(573);e.exports=function(e,t){return e&&s(e,t,a)}},869:function(e,t,n){var s=n(870)();e.exports=s},870:function(e,t){e.exports=function(e){return function(t,n,s){for(var a=-1,o=Object(t),i=s(t),r=i.length;r--;){var c=i[e?r:++a];if(!1===n(o[c],c,o))break}return t}}},883:function(e,t,n){var s=n(884),a=n(931),o=n(942),i=n(238),r=n(943);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?a(e[0],e[1]):s(e):r(e)}},884:function(e,t,n){var s=n(885),a=n(930),o=n(693);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||s(n,e,t)}}},885:function(e,t,n){var s=n(689),a=n(676);e.exports=function(e,t,n,o){var i=n.length,r=i,c=!o;if(null==e)return!r;for(e=Object(e);i--;){var u=n[i];if(c&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<r;){var l=(u=n[i])[0],d=e[l],p=u[1];if(c&&u[2]){if(void 0===d&&!(l in e))return!1}else{var h=new s;if(o)var g=o(d,p,l,e,t,h);if(!(void 0===g?a(p,d,3,o,h):g))return!1}}return!0}},930:function(e,t,n){var s=n(692),a=n(573);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,s(i)]}return t}},931:function(e,t,n){var s=n(676),a=n(932),o=n(939),i=n(577),r=n(692),c=n(693),u=n(538);e.exports=function(e,t){return i(e)&&r(t)?c(u(e),t):function(n){var i=a(n,e);return void 0===i&&i===t?o(n,e):s(t,i,3)}}},932:function(e,t,n){var s=n(694);e.exports=function(e,t,n){var a=null==e?void 0:s(e,t);return void 0===a?n:a}},933:function(e,t,n){var s=n(934),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=s((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,(function(e,n,s,a){t.push(s?a.replace(o,"$1"):n||e)})),t}));e.exports=i},934:function(e,t,n){var s=n(935);e.exports=function(e){var t=s(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},935:function(e,t,n){var s=n(576);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,s);return n.cache=o.set(a,i)||o,i};return n.cache=new(a.Cache||s),n}a.Cache=s,e.exports=a},936:function(e,t,n){var s=n(937);e.exports=function(e){return null==e?"":s(e)}},937:function(e,t,n){var s=n(253),a=n(938),o=n(238),i=n(283),r=s?s.prototype:void 0,c=r?r.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return a(t,e)+"";if(i(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},938:function(e,t){e.exports=function(e,t){for(var n=-1,s=null==e?0:e.length,a=Array(s);++n<s;)a[n]=t(e[n],n,e);return a}},939:function(e,t,n){var s=n(940),a=n(941);e.exports=function(e,t){return null!=e&&a(e,t,s)}},940:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},941:function(e,t,n){var s=n(695),a=n(685),o=n(238),i=n(687),r=n(574),c=n(538);e.exports=function(e,t,n){for(var u=-1,l=(t=s(t,e)).length,d=!1;++u<l;){var p=c(t[u]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++u!=l?d:!!(l=null==e?0:e.length)&&r(l)&&i(p,l)&&(o(e)||a(e))}},942:function(e,t){e.exports=function(e){return e}},943:function(e,t,n){var s=n(944),a=n(945),o=n(577),i=n(538);e.exports=function(e){return o(e)?s(i(e)):a(e)}},944:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},945:function(e,t,n){var s=n(694);e.exports=function(e){return function(t){return s(t,e)}}},946:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(e){function t(){a(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,0));return e._down=!1,e._px=0,e._py=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"down",get:function(){return this._down},set:function(e){this._down=e}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}},{key:"px",get:function(){return this._px},set:function(e){this._px=e}},{key:"py",get:function(){return this._py},set:function(e){this._py=e}}]),t}(function(){function e(t,n){a(this,e),this._x=t,this._y=n}return s(e,[{key:"set",value:function(e,t){this._x=e,this._y=t}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}}]),e}());t.default=o}}]);
//# sourceMappingURL=335-fdac5e24b0f051d004c3.chunk.js.map