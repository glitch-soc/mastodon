{"version":3,"sources":["webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/column_loading.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/bundle_column_error.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/util/react_router_helpers.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/upload_area.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/drawer_loading.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/server_banner.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/compose_panel.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/disabled_account_banner.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/follow_requests_column_link.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/list_panel.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/notifications_counter_icon.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/sign_in_banner.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/account/components/featured_tags.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/account/containers/featured_tags_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/account/navigation.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/navigation_portal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/navigation_panel.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/columns_area.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/containers/columns_area_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/picture_in_picture/components/header.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/picture_in_picture/index.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/logo.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/header.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/index.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/error_boundary.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/containers/mastodon.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/main.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/button.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/util/async-components.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/accounts.js","webpack:///./node_modules/favico.js/favico.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/performance.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/store.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/statuses.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/trends.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/domain_blocks.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/mutes.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/tags.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/announcements.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/display_name.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/avatar.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/is_mobile.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/server.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/blocks.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/account_notes.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/conversations.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/search.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/directory.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/favourites.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/bookmarks.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/utils/backend_links.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/status_content.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/attachment_list.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/columns.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/local_settings.js","webpack:///./app/javascript/flavours/glitch/images/logo_warn_glitch.svg","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/suggestions.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/push_notifications/setter.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/push_notifications/registerer.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/push_notifications/index.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/lists.js","webpack:///./node_modules/lodash/_toKey.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/status_visibility_icon.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/languages.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/utils/privacy_preference.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/custom_emojis.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/upload_progress.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/privacy_dropdown.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/character_counter.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/utils/notifications.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/notifications.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/dropdown_menu.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/dropdown.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/featured_tags.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/history.js","webpack:///./node_modules/lodash/_isKey.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/picture_in_picture.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/dropdown_menu.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/height_cache.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/filters.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/utils/dom_helpers.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/utils/icons.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/loading_indicator.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/account.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/containers/account_container.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/accounts_map.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/utils/react_helpers.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/emoji_picker_dropdown.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/emoji_picker_dropdown_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/bundle.jsx","webpack:///./node_modules/lodash/_isStrictComparable.js","webpack:///./node_modules/lodash/_matchesStrictComparable.js","webpack:///./node_modules/lodash/_baseGet.js","webpack:///./node_modules/lodash/_castPath.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/containers/bundle_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/bundles.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/app.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/actions/pin_statuses.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/compose_form_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/reply_indicator.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/reply_indicator_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/autosuggest_account.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/autosuggest_account_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/autosuggest_emoji.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/autosuggest_hashtag.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/autosuggest_textarea.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/components/autosuggest_input.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/poll_form.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/poll_form_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/upload_progress_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/upload.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/upload_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/sensitive_button_container.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/upload_form.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/upload_form_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/warning.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/warning_container.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/util/url_regex.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/text_icon_button.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/dropdown_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/privacy_dropdown_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/language_dropdown.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/language_dropdown_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/options.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/containers/options_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/publisher.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/textarea_icons.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/components/compose_form.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/compose/util/counter.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/containers/notifications_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/containers/loading_bar_container.js","webpack:///./node_modules/lodash/mapValues.js","webpack:///./node_modules/atrament/lib/atrament.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/dropdown_menu.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/timelines.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/meta.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/alerts.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/modal.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/user_lists.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/domain_lists.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/accounts.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/accounts_counters.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/statuses.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/relationships.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/uuid.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/settings.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/local_settings.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/push_notifications.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/status_lists.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/mutes.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/blocks.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/server.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/boosts.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/contexts.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/utils/js_helpers.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/compose.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/search.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/media_attachments.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/notifications.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/height_cache.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/custom_emojis.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/lists.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/list_editor.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/list_adder.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/filters.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/conversations.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/suggestions.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/pinned_accounts_editor.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/polls.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/trends.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/announcements.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/markers.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/account_notes.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/picture_in_picture.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/history.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/tags.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/followed_tags.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/reducers/index.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/middleware/loading_bar.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/middleware/sounds.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/store/configureStore.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/middleware/errors.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/bundle_modal_error.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/modal_loading.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/actions_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/video_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/boost_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/favourite_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/audio_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/doodle_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/confirmation_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/focal_point_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/deprecated_settings_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/image_modal.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/components/modal_root.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/ui/containers/modal_container.js","webpack:///./node_modules/lodash/_baseAssignValue.js","webpack:///./node_modules/lodash/_defineProperty.js","webpack:///./node_modules/lodash/_baseForOwn.js","webpack:///./node_modules/lodash/_baseFor.js","webpack:///./node_modules/lodash/_createBaseFor.js","webpack:///./node_modules/lodash/_baseIteratee.js","webpack:///./node_modules/lodash/_baseMatches.js","webpack:///./node_modules/lodash/_baseIsMatch.js","webpack:///./node_modules/lodash/_getMatchData.js","webpack:///./node_modules/lodash/_baseMatchesProperty.js","webpack:///./node_modules/lodash/get.js","webpack:///./node_modules/lodash/_stringToPath.js","webpack:///./node_modules/lodash/_memoizeCapped.js","webpack:///./node_modules/lodash/memoize.js","webpack:///./node_modules/lodash/toString.js","webpack:///./node_modules/lodash/_baseToString.js","webpack:///./node_modules/lodash/_arrayMap.js","webpack:///./node_modules/lodash/hasIn.js","webpack:///./node_modules/lodash/_baseHasIn.js","webpack:///./node_modules/lodash/_hasPath.js","webpack:///./node_modules/lodash/identity.js","webpack:///./node_modules/lodash/property.js","webpack:///./node_modules/lodash/_baseProperty.js","webpack:///./node_modules/lodash/_basePropertyDeep.js","webpack:///./node_modules/atrament/lib/mouse.js"],"names":["ColumnLoading","ImmutablePureComponent","render","title","icon","multiColumn","this","props","_jsx","Column","ColumnHeader","focusable","placeholder","className","propTypes","PropTypes","oneOfType","node","string","bool","defaultProps","GIF","React","PureComponent","constructor","arguments","state","hovering","handleMouseEnter","animate","setState","handleMouseLeave","src","staticSrc","alt","role","onMouseEnter","onMouseLeave","autoPlayGif","CopyButton","copied","handleClick","value","navigator","clipboard","writeText","timeout","setTimeout","componentWillUnmount","clearTimeout","children","Button","onClick","FormattedMessage","id","defaultMessage","BundleColumnError","injectIntl","_class2","handleRetry","onRetry","errorType","stacktrace","body","bindToDocument","Link","to","classNames","Helmet","name","content","_class","WrappedSwitch","Switch","Children","map","child","cloneElement","WrappedRoute","Component","hasError","renderComponent","_ref","match","component","componentParams","BundleContainer","fetchComponent","loading","renderLoading","error","renderError","createElement","_extends","params","static","componentDidCatch","StackTrace","fromError","then","stackframes","toString","frame","join","catch","err","console","rest","Route","UploadArea","handleKeyUp","e","keyCode","active","preventDefault","stopPropagation","onClose","componentDidMount","window","addEventListener","removeEventListener","Motion","defaultStyle","backgroundOpacity","backgroundScale","style","spring","stiffness","damping","visibility","opacity","transform","DrawerLoading","messages","defineMessages","aboutActiveUsers","ServerBanner","connect","server","getIn","_dec","dispatch","fetchServer","intl","isLoading","get","values","domain","mastodon","href","target","Image","blurhash","Fragment","Skeleton","width","Account","size","ShortNumber","formatMessage","ComposePanel","mountCompose","unmountCompose","signedIn","context","identity","SearchContainer","openInRoute","NavigationContainer","ComposeFormContainer","singleColumn","LinkFooter","contextTypes","object","isRequired","logoutMessage","logoutConfirm","DisabledAccountBanner","disabledAcct","disabledAccountId","movedToAcct","movedToAccountId","undefined","mapDispatchToProps","onLogout","openModal","message","confirm","closeWhenConfirm","onConfirm","logOut","handleLogOutClick","disabledAccountLink","disabledAccount","movedToAccount","includes","type","text","FollowRequestsColumnLink","count","ImmutableList","fetchFollowRequests","ColumnLink","transparent","IconWithBadge","getOrderedLists","createSelector","lists","toList","filter","item","sort","a","b","localeCompare","take","ListPanel","withRouter","fetchLists","isEmpty","list","strict","func","ImmutablePropTypes","SignInBanner","useDispatch","openClosedRegistrationsModal","useCallback","signupButton","registrationsOpen","lastStatusAt","empty","FeaturedTags","account","featuredTags","dangerouslySetInnerHTML","__html","featuredTag","Hashtag","uses","withGraph","description","date","formatDate","month","day","router","tagged","mapStateToProps","getAccount","makeGetAccount","accountId","AccountNavigation","acct","normalizeForLookup","DefaultNavigation","showTrends","Trends","NavigationPortal","path","exact","home","notifications","explore","local","federated","direct","favourites","bookmarks","preferences","followsAndFollowers","about","search","app_settings","NavigationPanel","onOpenSettings","NotificationsCounterIcon","timelinePreview","preferencesLink","componentMap","Compose","HomeTimeline","Notifications","PublicTimeline","CommunityTimeline","HashtagTimeline","DirectTimeline","FavouritedStatuses","BookmarkedStatuses","ListTimeline","Directory","ColumnsArea","mediaQuery","matchMedia","renderComposePanel","matches","handleLayoutChange","handleWheel","_interruptScrollAnimation","setRef","columnId","supportsPassiveEvents","passive","addListener","isRtlLayout","document","getElementsByTagName","classList","contains","componentWillUpdate","nextProps","componentDidUpdate","prevProps","removeListener","handleChildrenContentChange","modifier","scrollRight","scrollWidth","innerWidth","columns","navbarUnder","openSettings","ref","column","toJS","other","SpecificComponent","forwardRef","close","Header","statusId","Avatar","DisplayName","IconButton","PictureInPicture","left","handleClose","removePictureInPicture","currentTime","player","Video","volume","muted","autoPlay","inline","alwaysVisible","Audio","poster","backgroundColor","foregroundColor","accentColor","Footer","Logo","viewBox","xlinkHref","me","Permalink","location","pathname","beforeUnload","keyMap","help","new","forceNew","toggleComposeSpoilers","focusColumn","reply","favourite","boost","mention","open","openProfile","moveDown","moveUp","back","goToHome","goToNotifications","goToLocal","goToFederated","goToDirect","goToStart","goToFavourites","goToPinned","goToProfile","goToBlocked","goToMuted","goToRequests","toggleSpoiler","bookmark","toggleCollapse","toggleSensitive","openMedia","SwitchingColumnsArea","c","componentWillMount","mobile","toggle","redirect","Redirect","from","singleUserMode","owner","initialState","accounts","username","trendsAsLanding","ColumnsAreaContainer","GettingStarted","KeyboardShortcuts","About","PrivacyPolicy","PinnedStatuses","FollowRecommendations","Explore","AccountTimeline","withReplies","Followers","Following","AccountGallery","Status","Reblogs","Favourites","FollowRequests","Blocks","DomainBlocks","FollowedTags","Mutes","Lists","GettingStartedMisc","UI","layout","hasComposingText","trim","length","hasMediaAttachments","canUploadMore","some","x","layout_local_setting","isWide","dropdownMenuIsOpen","unreadNotifications","showFaviconBadge","hicolorPrivacyIcons","moved","firstLaunch","INTRODUCTION_VERSION","draggingOver","handleBeforeUnload","synchronouslySubmitMarkers","returnValue","handleDragEnter","dragTargets","indexOf","push","dataTransfer","types","handleDragOver","dataTransferIsText","dropEffect","handleDrop","files","uploadCompose","handleDragLeave","el","Array","closeUploadModal","handleServiceWorkerPostMessage","data","history","warn","handleVisibilityChange","visibilityHiddenProp","notificationsSetVisibility","submitMarkers","immediate","_debounce","clearHeight","trailing","handleResize","layoutFromWindow","cancel","changeLayout","handleHotkeyNew","element","querySelector","focus","handleHotkeySearch","handleHotkeyForceNew","resetCompose","handleHotkeyToggleComposeSpoilers","changeComposeSpoilerness","handleHotkeyFocusColumn","index","key","container","status","scrollTop","offsetTop","scrollIntoView","handleHotkeyBack","goBack","setHotkeysRef","hotkeys","handleHotkeyToggleHelp","handleHotkeyGoToHome","handleHotkeyGoToNotifications","handleHotkeyGoToLocal","handleHotkeyGoToFederated","handleHotkeyGoToDirect","handleHotkeyGoToStart","handleHotkeyGoToFavourites","handleHotkeyGoToPinned","handleHotkeyGoToProfile","handleHotkeyGoToBlocked","handleHotkeyGoToMuted","handleHotkeyGoToRequests","handleDragEnd","serviceWorker","favicon","Favico","animation","replace","closeOnboarding","fetchMarkers","expandHomeTimeline","expandNotifications","__mousetrap__","stopCallback","tagName","hidden","visibilityChange","msHidden","webkitHidden","componentWillReceiveProps","badge","columnsClass","systemFontUi","handlers","HotKeys","attach","focused","pointerEvents","moved_to_link","PermaLink","NotificationsContainer","LoadingBarContainer","ModalContainer","ErrorBoundary","errorMessage","stackTrace","mappedStackTrace","componentStack","info","stack","sf","handleReload","reload","likelyBrowserAddonIssue","debugInfo","issueTracker","source_url","tabIndex","issuetracker","rel","rows","readOnly","settings","localeData","getLocale","addLocaleData","siteTitle","store","configureStore","hydrateAction","hydrateStore","checkDeprecatedLocalSettings","meta","fetchCustomEmojis","Mastodon","disabled_account_id","accessToken","access_token","permissions","getChildContext","disconnect","connectUserStream","shouldUpdateScroll","_","_location$state","mastodonModalKey","locale","IntlProvider","ReduxProvider","BrowserRouter","ScrollContext","defaultTitle","titleTemplate","childContextTypes","shape","perf","require","main","start","ready","async","mountNode","getElementById","JSON","parse","getAttribute","ReactDOM","setupBrowserNotifications","Workbox","wb","registration","register","registerPushNotifications","stop","disabled","attrs","secondary","block","EmojiPicker","ListEditor","PinnedAccountsEditor","OnboardingModal","MuteModal","BlockModal","ReportModal","SettingsModal","MediaGallery","EmbedModal","ListAdder","Tesseract","CompareHistoryModal","FilterModal","InteractionModal","SubscribedLanguagesModal","ClosedRegistrationsModal","ACCOUNT_FETCH_REQUEST","ACCOUNT_FETCH_SUCCESS","ACCOUNT_FETCH_FAIL","ACCOUNT_LOOKUP_FAIL","ACCOUNT_FOLLOW_REQUEST","ACCOUNT_FOLLOW_SUCCESS","ACCOUNT_FOLLOW_FAIL","ACCOUNT_UNFOLLOW_REQUEST","ACCOUNT_UNFOLLOW_SUCCESS","ACCOUNT_UNFOLLOW_FAIL","ACCOUNT_BLOCK_REQUEST","ACCOUNT_BLOCK_SUCCESS","ACCOUNT_BLOCK_FAIL","ACCOUNT_UNBLOCK_REQUEST","ACCOUNT_UNBLOCK_SUCCESS","ACCOUNT_UNBLOCK_FAIL","ACCOUNT_MUTE_REQUEST","ACCOUNT_MUTE_SUCCESS","ACCOUNT_MUTE_FAIL","ACCOUNT_UNMUTE_REQUEST","ACCOUNT_UNMUTE_SUCCESS","ACCOUNT_UNMUTE_FAIL","ACCOUNT_PIN_REQUEST","ACCOUNT_PIN_SUCCESS","ACCOUNT_PIN_FAIL","ACCOUNT_UNPIN_REQUEST","ACCOUNT_UNPIN_SUCCESS","ACCOUNT_UNPIN_FAIL","FOLLOWERS_FETCH_REQUEST","FOLLOWERS_FETCH_SUCCESS","FOLLOWERS_FETCH_FAIL","FOLLOWERS_EXPAND_REQUEST","FOLLOWERS_EXPAND_SUCCESS","FOLLOWERS_EXPAND_FAIL","FOLLOWING_FETCH_REQUEST","FOLLOWING_FETCH_SUCCESS","FOLLOWING_FETCH_FAIL","FOLLOWING_EXPAND_REQUEST","FOLLOWING_EXPAND_SUCCESS","FOLLOWING_EXPAND_FAIL","RELATIONSHIPS_FETCH_REQUEST","RELATIONSHIPS_FETCH_SUCCESS","RELATIONSHIPS_FETCH_FAIL","FOLLOW_REQUESTS_FETCH_REQUEST","FOLLOW_REQUESTS_FETCH_SUCCESS","FOLLOW_REQUESTS_FETCH_FAIL","FOLLOW_REQUESTS_EXPAND_REQUEST","FOLLOW_REQUESTS_EXPAND_SUCCESS","FOLLOW_REQUESTS_EXPAND_FAIL","FOLLOW_REQUEST_AUTHORIZE_REQUEST","FOLLOW_REQUEST_AUTHORIZE_SUCCESS","FOLLOW_REQUEST_AUTHORIZE_FAIL","FOLLOW_REQUEST_REJECT_REQUEST","FOLLOW_REQUEST_REJECT_SUCCESS","FOLLOW_REQUEST_REJECT_FAIL","PINNED_ACCOUNTS_FETCH_REQUEST","PINNED_ACCOUNTS_FETCH_SUCCESS","PINNED_ACCOUNTS_FETCH_FAIL","PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_READY","PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR","PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE","PINNED_ACCOUNTS_EDITOR_RESET","ACCOUNT_REVEAL","fetchAccount","getState","fetchRelationships","fetchAccountRequest","api","response","importFetchedAccount","skipAlert","fetchAccountFail","lookupAccount","lookupAccountRequest","lookupAccountSuccess","lookupAccountFail","followAccount","options","reblogs","alreadyFollowing","locked","skipLoading","followAccountRequest","post","relationship","followAccountSuccess","followAccountFail","unfollowAccount","unfollowAccountRequest","statuses","unfollowAccountFail","blockAccount","blockAccountRequest","blockAccountFail","unblockAccount","unblockAccountRequest","unblockAccountFail","muteAccount","duration","muteAccountRequest","muteAccountFail","unmuteAccount","unmuteAccountRequest","unmuteAccountFail","fetchFollowers","fetchFollowersRequest","next","getLinks","refs","find","link","importFetchedAccounts","fetchFollowersSuccess","uri","skipNotFound","fetchFollowersFail","expandFollowers","url","expandFollowersRequest","expandFollowersSuccess","expandFollowersFail","fetchFollowing","fetchFollowingRequest","fetchFollowingSuccess","fetchFollowingFail","expandFollowing","expandFollowingRequest","expandFollowingSuccess","expandFollowingFail","accountIds","loadedRelationships","newAccountIds","ids","relationships","fetchRelationshipsFail","fetchFollowRequestsSuccess","fetchFollowRequestsFail","expandFollowRequests","expandFollowRequestsSuccess","expandFollowRequestsFail","authorizeFollowRequest","authorizeFollowRequestRequest","authorizeFollowRequestSuccess","authorizeFollowRequestFail","rejectFollowRequest","rejectFollowRequestRequest","rejectFollowRequestSuccess","rejectFollowRequestFail","pinAccount","pinAccountRequest","pinAccountFail","unpinAccount","unpinAccountRequest","unpinAccountFail","revealAccount","fetchPinnedAccounts","limit","fetchPinnedAccountsSuggestions","q","resolve","following","query","clearPinnedAccountsSuggestions","changePinnedAccountsSuggestions","resetPinnedAccountsEditor","opt","_opt","_orig","_h","_w","_canvas","_context","_img","_ready","_lastBadge","_running","_readyCb","_stop","_browser","_animTimeout","_drawTimeout","_doc","_def","bgColor","textColor","fontFamily","fontStyle","position","elementId","dataUrl","win","ff","InstallTrigger","chrome","opera","userAgent","ie","safari","Object","prototype","call","HTMLElement","supported","_queue","reset","clearRect","drawImage","setIcon","run","forEach","shift","n","Math","abs","y","w","h","len","drawVideo","video","paused","ended","circle","more","beginPath","font","floor","textAlign","moveTo","lineTo","quadraticCurveTo","arc","PI","fillStyle","r","g","o","fill","closePath","stroke","fillText","rectangle","fillRect","hexToRgb","hex","m","result","exec","parseInt","merge","def","attrname","mergedOpt","getIcon","elm","setAttribute","i","test","getLink","appendChild","canvas","toDataURL","old","parentNode","removeChild","fade","none","pop","popFade","slide","cb","revert","step","animationType","mozHidden","toLowerCase","isUp","isLeft","hasAttribute","onload","height","getContext","init","number","opts","Error","videoElement","image","imageElement","newImg","ratio","webcam","action","URL","createObjectURL","obj","newVideo","getUserMedia","oGetUserMedia","msGetUserMedia","mozGetUserMedia","webkitGetUserMedia","audio","stream","play","browser","process","STORE_HYDRATE","rawState","withMutations","setIn","removeIn","applyMigrations","fromJS","k","v","Iterable","isIndexed","toMap","convertState","hydrateCompose","saveSettings","STATUS_FETCH_REQUEST","STATUS_FETCH_SUCCESS","STATUS_FETCH_FAIL","STATUS_DELETE_REQUEST","STATUS_DELETE_SUCCESS","STATUS_DELETE_FAIL","CONTEXT_FETCH_REQUEST","CONTEXT_FETCH_SUCCESS","CONTEXT_FETCH_FAIL","STATUS_MUTE_REQUEST","STATUS_MUTE_SUCCESS","STATUS_MUTE_FAIL","STATUS_UNMUTE_REQUEST","STATUS_UNMUTE_SUCCESS","STATUS_UNMUTE_FAIL","STATUS_REVEAL","STATUS_HIDE","STATUS_COLLAPSE","REDRAFT","STATUS_TRANSLATE_SUCCESS","STATUS_TRANSLATE_UNDO","fetchStatus","forceFetch","fetchContextRequest","importFetchedStatuses","ancestors","concat","descendants","fetchContextSuccess","deleteFromTimelines","fetchContextFail","fetchContext","fetchStatusRequest","importFetchedStatus","fetchStatusSuccess","fetchStatusFail","editStatus","routerHistory","set","fetchStatusSourceRequest","fetchStatusSourceSuccess","ensureComposeIsVisible","setComposeToStatus","spoiler_text","content_type","fetchStatusSourceFail","deleteStatus","withRedraft","deleteStatusRequest","delete","deleteStatusSuccess","raw_text","redraft","deleteStatusFail","updateStatus","muteStatus","muteStatusRequest","muteStatusSuccess","muteStatusFail","unmuteStatus","unmuteStatusRequest","unmuteStatusSuccess","unmuteStatusFail","hideStatus","isArray","revealStatus","translateStatus","translateStatusRequest","translateStatusSuccess","translateStatusFail","translation","undoStatusTranslation","TRENDS_TAGS_FETCH_REQUEST","TRENDS_TAGS_FETCH_SUCCESS","TRENDS_TAGS_FETCH_FAIL","TRENDS_LINKS_FETCH_REQUEST","TRENDS_LINKS_FETCH_SUCCESS","TRENDS_LINKS_FETCH_FAIL","TRENDS_STATUSES_FETCH_REQUEST","TRENDS_STATUSES_FETCH_SUCCESS","TRENDS_STATUSES_FETCH_FAIL","TRENDS_STATUSES_EXPAND_REQUEST","TRENDS_STATUSES_EXPAND_SUCCESS","TRENDS_STATUSES_EXPAND_FAIL","fetchTrendingHashtags","fetchTrendingHashtagsRequest","fetchTrendingHashtagsSuccess","fetchTrendingHashtagsFail","trends","fetchTrendingLinks","fetchTrendingLinksRequest","_ref2","fetchTrendingLinksSuccess","fetchTrendingLinksFail","fetchTrendingStatuses","fetchTrendingStatusesRequest","fetchTrendingStatusesSuccess","fetchTrendingStatusesFail","expandTrendingStatuses","expandTrendingStatusesRequest","expandTrendingStatusesSuccess","expandTrendingStatusesFail","DOMAIN_BLOCK_REQUEST","DOMAIN_BLOCK_SUCCESS","DOMAIN_BLOCK_FAIL","DOMAIN_UNBLOCK_REQUEST","DOMAIN_UNBLOCK_SUCCESS","DOMAIN_UNBLOCK_FAIL","DOMAIN_BLOCKS_FETCH_REQUEST","DOMAIN_BLOCKS_FETCH_SUCCESS","DOMAIN_BLOCKS_FETCH_FAIL","DOMAIN_BLOCKS_EXPAND_REQUEST","DOMAIN_BLOCKS_EXPAND_SUCCESS","DOMAIN_BLOCKS_EXPAND_FAIL","blockDomain","blockDomainRequest","at_domain","endsWith","valueSeq","blockDomainSuccess","blockDomainFail","unblockDomain","unblockDomainRequest","unblockDomainSuccess","unblockDomainFail","fetchDomainBlocks","domains","fetchDomainBlocksSuccess","expandDomainBlocks","expandDomainBlocksSuccess","MUTES_FETCH_REQUEST","MUTES_FETCH_SUCCESS","MUTES_FETCH_FAIL","MUTES_EXPAND_REQUEST","MUTES_EXPAND_SUCCESS","MUTES_EXPAND_FAIL","MUTES_INIT_MODAL","MUTES_TOGGLE_HIDE_NOTIFICATIONS","MUTES_CHANGE_DURATION","fetchMutes","fetchMutesSuccess","fetchMutesFail","expandMutes","expandMutesSuccess","expandMutesFail","initMuteModal","toggleHideNotifications","changeMuteDuration","HASHTAG_FETCH_SUCCESS","FOLLOWED_HASHTAGS_FETCH_REQUEST","FOLLOWED_HASHTAGS_FETCH_SUCCESS","FOLLOWED_HASHTAGS_FETCH_FAIL","FOLLOWED_HASHTAGS_EXPAND_REQUEST","FOLLOWED_HASHTAGS_EXPAND_SUCCESS","FOLLOWED_HASHTAGS_EXPAND_FAIL","HASHTAG_FOLLOW_REQUEST","HASHTAG_FOLLOW_FAIL","HASHTAG_UNFOLLOW_REQUEST","HASHTAG_UNFOLLOW_FAIL","fetchHashtag","fetchHashtagRequest","fetchHashtagSuccess","fetchHashtagFail","tag","fetchFollowedHashtags","followed_tags","fetchFollowedHashtagsSuccess","expandFollowedHashtags","expandFollowedHashtagsSuccess","expandFollowedHashtagsFail","followHashtag","followHashtagRequest","followHashtagSuccess","followHashtagFail","unfollowHashtag","unfollowHashtagRequest","_ref3","unfollowHashtagSuccess","unfollowHashtagFail","ANNOUNCEMENTS_FETCH_REQUEST","ANNOUNCEMENTS_FETCH_SUCCESS","ANNOUNCEMENTS_FETCH_FAIL","ANNOUNCEMENTS_UPDATE","ANNOUNCEMENTS_DELETE","ANNOUNCEMENTS_DISMISS_SUCCESS","ANNOUNCEMENTS_REACTION_ADD_REQUEST","ANNOUNCEMENTS_REACTION_ADD_FAIL","ANNOUNCEMENTS_REACTION_REMOVE_REQUEST","ANNOUNCEMENTS_REACTION_REMOVE_FAIL","ANNOUNCEMENTS_REACTION_UPDATE","ANNOUNCEMENTS_TOGGLE_SHOW","noOp","fetchAnnouncements","done","fetchAnnouncementsRequest","fetchAnnouncementsSuccess","normalizeAnnouncement","fetchAnnouncementsFail","finally","announcements","updateAnnouncements","announcement","dismissAnnouncement","announcementId","dismissAnnouncementRequest","dismissAnnouncementSuccess","dismissAnnouncementFail","addReaction","alreadyAdded","reaction","addReactionRequest","put","encodeURIComponent","addReactionSuccess","addReactionFail","removeReaction","removeReactionRequest","removeReactionSuccess","removeReactionFail","updateReaction","toggleShowAnnouncements","deleteAnnouncement","currentTarget","emojis","querySelectorAll","emoji","localDomain","others","onAccountClick","computedClass","displayName","suffix","reduce","prev","cur","backgroundSize","backgroundImage","isMobile","forceSingleColumn","listenerOptions","MSStream","userTouching","touchListener","isUserTouching","SERVER_FETCH_REQUEST","SERVER_FETCH_SUCCESS","SERVER_FETCH_FAIL","EXTENDED_DESCRIPTION_REQUEST","EXTENDED_DESCRIPTION_SUCCESS","EXTENDED_DESCRIPTION_FAIL","SERVER_DOMAIN_BLOCKS_FETCH_REQUEST","SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS","SERVER_DOMAIN_BLOCKS_FETCH_FAIL","fetchServerRequest","contact","fetchServerSuccess","fetchServerFail","fetchExtendedDescription","fetchExtendedDescriptionRequest","fetchExtendedDescriptionSuccess","fetchExtendedDescriptionFail","fetchDomainBlocksRequest","fetchDomainBlocksFail","isAvailable","blocks","BLOCKS_FETCH_REQUEST","BLOCKS_FETCH_SUCCESS","BLOCKS_FETCH_FAIL","BLOCKS_EXPAND_REQUEST","BLOCKS_EXPAND_SUCCESS","BLOCKS_EXPAND_FAIL","BLOCKS_INIT_MODAL","fetchBlocks","fetchBlocksSuccess","fetchBlocksFail","expandBlocks","expandBlocksSuccess","expandBlocksFail","initBlockModal","ACCOUNT_NOTE_SUBMIT_REQUEST","ACCOUNT_NOTE_SUBMIT_SUCCESS","ACCOUNT_NOTE_SUBMIT_FAIL","ACCOUNT_NOTE_INIT_EDIT","ACCOUNT_NOTE_CANCEL","ACCOUNT_NOTE_CHANGE_COMMENT","submitAccountNote","comment","submitAccountNoteFail","initEditAccountNote","cancelAccountNote","changeAccountNoteComment","CONVERSATIONS_MOUNT","CONVERSATIONS_UNMOUNT","CONVERSATIONS_FETCH_REQUEST","CONVERSATIONS_FETCH_SUCCESS","CONVERSATIONS_FETCH_FAIL","CONVERSATIONS_UPDATE","CONVERSATIONS_READ","CONVERSATIONS_DELETE_SUCCESS","mountConversations","unmountConversations","markConversationRead","conversationId","expandConversations","_temp","maxId","expandConversationsRequest","max_id","since_id","isLoadingRecent","aggr","last_status","expandConversationsSuccess","expandConversationsFail","conversations","updateConversations","conversation","deleteConversation","deleteConversationRequest","deleteConversationSuccess","deleteConversationFail","SEARCH_CHANGE","SEARCH_CLEAR","SEARCH_SHOW","SEARCH_FETCH_REQUEST","SEARCH_FETCH_SUCCESS","SEARCH_FETCH_FAIL","SEARCH_EXPAND_SUCCESS","changeSearch","clearSearch","submitSearch","fetchSearchSuccess","fetchSearchFail","hashtags","results","searchTerm","expandSearch","offset","expandSearchRequest","expandSearchSuccess","expandSearchFail","searchType","showSearch","DIRECTORY_FETCH_REQUEST","DIRECTORY_FETCH_SUCCESS","DIRECTORY_FETCH_FAIL","DIRECTORY_EXPAND_REQUEST","DIRECTORY_EXPAND_SUCCESS","DIRECTORY_EXPAND_FAIL","fetchDirectory","fetchDirectoryRequest","fetchDirectorySuccess","fetchDirectoryFail","expandDirectory","expandDirectoryRequest","loadedItems","expandDirectorySuccess","expandDirectoryFail","FAVOURITED_STATUSES_FETCH_REQUEST","FAVOURITED_STATUSES_FETCH_SUCCESS","FAVOURITED_STATUSES_FETCH_FAIL","FAVOURITED_STATUSES_EXPAND_REQUEST","FAVOURITED_STATUSES_EXPAND_SUCCESS","FAVOURITED_STATUSES_EXPAND_FAIL","fetchFavouritedStatuses","fetchFavouritedStatusesSuccess","fetchFavouritedStatusesFail","expandFavouritedStatuses","expandFavouritedStatusesSuccess","expandFavouritedStatusesFail","BOOKMARKED_STATUSES_FETCH_REQUEST","BOOKMARKED_STATUSES_FETCH_SUCCESS","BOOKMARKED_STATUSES_FETCH_FAIL","BOOKMARKED_STATUSES_EXPAND_REQUEST","BOOKMARKED_STATUSES_EXPAND_SUCCESS","BOOKMARKED_STATUSES_EXPAND_FAIL","fetchBookmarkedStatuses","fetchBookmarkedStatusesSuccess","fetchBookmarkedStatusesFail","expandBookmarkedStatuses","expandBookmarkedStatusesSuccess","expandBookmarkedStatusesFail","profileLink","signOutLink","accountAdminLink","statusAdminLink","account_id","status_id","preferenceLink","setting_name","textMatchesTarget","origin","host","startsWith","isLinkMisleading","linkTextParts","walk","nodeType","Node","TEXT_NODE","textContent","ELEMENT_NODE","childNodes","linkText","targetURL","protocol","hostname","decodeIDNA","normalize","TranslateButton","language","preloadedLanguages","lang","languageName","provider","StatusContent","onLinkClick","collapsed","parseClick","onMentionClick","onHashtagClick","hashtag","handleMouseDown","startXY","clientX","clientY","handleMouseUp","startX","startY","deltaX","deltaY","localName","button","handleSpoilerClick","onExpandedToggle","handleTranslate","onTranslate","setContentsRef","contentsNode","_updateStatusLinks","tagLinks","rewriteMentions","links","add","bind","firstChild","createTextNode","acctSpan","previousSibling","insertAdjacentText","insertAdjacentElement","TypeError","removeAttribute","onUpdate","media","extraMedia","mediaIcons","zoomEmojisOnHover","expanded","renderTranslate","spoilerContent","classnames","textClassNames","translateButton","mentionsPlaceholder","mentionLinks","aggregate","toggleText","mediaIcon","idx","Icon","fixedWidth","onMouseDown","onMouseUp","marginBottom","AttachmentList","compact","attachment","displayUrl","split","COLUMN_ADD","COLUMN_REMOVE","COLUMN_MOVE","COLUMN_PARAMS_CHANGE","addColumn","removeColumn","uuid","moveColumn","direction","changeColumnParams","LOCAL_SETTING_CHANGE","LOCAL_SETTING_DELETE","local_auto_unfold","local_swipe_to_change_columns","changed_settings","expandSpoilers","deleteLocalSetting","disableSwiping","changeLocalSetting","saveLocalSettings","localSettings","localStorage","setItem","stringify","SUGGESTIONS_FETCH_REQUEST","SUGGESTIONS_FETCH_SUCCESS","SUGGESTIONS_FETCH_FAIL","SUGGESTIONS_DISMISS","fetchSuggestions","withRelationships","fetchSuggestionsRequest","fetchSuggestionsSuccess","fetchSuggestionsFail","suggestions","dismissSuggestion","SET_BROWSER_SUPPORT","SET_SUBSCRIPTION","CLEAR_SUBSCRIPTION","SET_ALERTS","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","charCodeAt","getApplicationServerKey","getRegistration","getPushSubscription","pushManager","getSubscription","subscription","subscribe","userVisibleOnly","applicationServerKey","unsubscribe","sendSubscriptionToBackend","pushNotificationsSetting","supportsPushNotifications","PushSubscription","currentServerKey","subscriptionServerKey","serverEndpoint","endpoint","setSubscription","alerts","code","remove","changeAlerts","setAlerts","LIST_FETCH_SUCCESS","LIST_FETCH_FAIL","LISTS_FETCH_SUCCESS","LIST_EDITOR_TITLE_CHANGE","LIST_EDITOR_RESET","LIST_EDITOR_SETUP","LIST_CREATE_REQUEST","LIST_CREATE_SUCCESS","LIST_CREATE_FAIL","LIST_UPDATE_REQUEST","LIST_UPDATE_SUCCESS","LIST_UPDATE_FAIL","LIST_DELETE_SUCCESS","LIST_ACCOUNTS_FETCH_REQUEST","LIST_ACCOUNTS_FETCH_SUCCESS","LIST_ACCOUNTS_FETCH_FAIL","LIST_EDITOR_SUGGESTIONS_CHANGE","LIST_EDITOR_SUGGESTIONS_READY","LIST_EDITOR_SUGGESTIONS_CLEAR","LIST_EDITOR_ADD_SUCCESS","LIST_EDITOR_REMOVE_SUCCESS","LIST_ADDER_RESET","LIST_ADDER_SETUP","LIST_ADDER_LISTS_FETCH_REQUEST","LIST_ADDER_LISTS_FETCH_SUCCESS","LIST_ADDER_LISTS_FETCH_FAIL","fetchList","fetchListRequest","fetchListSuccess","fetchListFail","fetchListsRequest","fetchListsSuccess","fetchListsFail","submitListEditor","shouldReset","listId","createList","updateList","setupListEditor","fetchListAccounts","changeListEditorTitle","createListRequest","createListSuccess","resetListEditor","createListFail","replies_policy","updateListRequest","_ref4","updateListSuccess","updateListFail","deleteList","deleteListRequest","deleteListSuccess","deleteListFail","fetchListAccountsRequest","_ref5","fetchListAccountsSuccess","fetchListAccountsFail","fetchListSuggestions","_ref6","fetchListSuggestionsReady","showAlertForError","clearListSuggestions","changeListSuggestions","addToListEditor","addToList","addToListRequest","account_ids","addToListSuccess","addToListFail","removeFromListEditor","removeFromList","removeFromListRequest","removeFromListSuccess","removeFromListFail","resetListAdder","setupListAdder","fetchAccountLists","fetchAccountListsRequest","_ref7","fetchAccountListsSuccess","fetchAccountListsFail","addToListAdder","removeFromListAdder","isSymbol","module","exports","public","unlisted","private","VisibilityIcon","withLabel","visibilityIcon","label","whiteSpace","LANGUAGE_USE","useLanguage","order","privacyPreference","max","CUSTOM_EMOJIS_FETCH_REQUEST","CUSTOM_EMOJIS_FETCH_SUCCESS","CUSTOM_EMOJIS_FETCH_FAIL","custom_emojis","fetchCustomEmojisFail","UploadProgress","progress","isProcessing","public_short","public_long","unlisted_short","unlisted_long","private_short","private_long","direct_short","direct_long","change_privacy","PrivacyDropdown","onChange","onModalOpen","onModalClose","noDirect","privacyItems","items","Dropdown","CharacterCounter","checkRemainingText","diff","handlePermission","permission","callback","Notification","requestNotificationPermission","checkNotificationPromise","requestPermission","NOTIFICATIONS_UPDATE","NOTIFICATIONS_DELETE_MARKED_REQUEST","NOTIFICATIONS_DELETE_MARKED_SUCCESS","NOTIFICATIONS_DELETE_MARKED_FAIL","NOTIFICATIONS_MARK_ALL_FOR_DELETE","NOTIFICATIONS_ENTER_CLEARING_MODE","NOTIFICATION_MARK_FOR_DELETE","NOTIFICATIONS_EXPAND_REQUEST","NOTIFICATIONS_EXPAND_SUCCESS","NOTIFICATIONS_EXPAND_FAIL","NOTIFICATIONS_FILTER_SET","NOTIFICATIONS_CLEAR","NOTIFICATIONS_SCROLL_TOP","NOTIFICATIONS_LOAD_PENDING","NOTIFICATIONS_MOUNT","NOTIFICATIONS_UNMOUNT","NOTIFICATIONS_SET_VISIBILITY","NOTIFICATIONS_MARK_AS_READ","NOTIFICATIONS_SET_BROWSER_SUPPORT","NOTIFICATIONS_SET_BROWSER_PERMISSION","fetchRelatedRelationships","loadPending","updateNotifications","notification","intlMessages","intlLocale","activeFilter","showInColumn","showAlert","playSound","filtered","filters","filter_action","report","target_account","usePendingItems","preferPendingItems","sound","IntlMessageFormat","format","display_name","unescapeHTML","notify","avatar","expandNotificationsController","AbortController","forceLoad","isLoadingMore","abort","exclude_types","enabled","keySeq","filterNot","compareId","expandNotificationsRequest","signal","expandNotificationsSuccess","expandNotificationsFail","clearNotifications","scrollTopNotifications","top","deleteMarkedNotifications","enterNotificationClearingMode","yes","markAllNotifications","markNotificationForDelete","mountNotifications","unmountNotifications","setFilter","filterType","markNotificationsAsRead","setBrowserPermission","onchange","requestBrowserPermission","ComposerOptionsDropdownContent","openedViaKeyboard","handleDocumentClick","Number","closeOnChange","handleChange","handleKeyDown","lastChild","shiftKey","setFocusRef","focusedItem","renderItem","contents","renderItemContents","onKeyDown","withPassive","preventScroll","ComposerOptionsDropdown","placement","handleToggle","modal","handleMakeModal","activeElement","handleButtonKeyDown","handleKeyPress","handleItemClick","actions","setTargetRef","findTarget","handleOverlayEnter","findIndex","inverted","onKeyPress","lineHeight","Overlay","containerPadding","show","flip","popperConfig","strategy","onFirstUpdate","DropdownMenu","FEATURED_TAGS_FETCH_REQUEST","FEATURED_TAGS_FETCH_SUCCESS","FEATURED_TAGS_FETCH_FAIL","fetchFeaturedTags","fetchFeaturedTagsRequest","fetchFeaturedTagsSuccess","fetchFeaturedTagsFail","tags","HISTORY_FETCH_REQUEST","HISTORY_FETCH_SUCCESS","HISTORY_FETCH_FAIL","fetchHistory","fetchHistoryRequest","fetchHistorySuccess","fetchHistoryFail","reIsDeepProp","reIsPlainProp","PICTURE_IN_PICTURE_DEPLOY","PICTURE_IN_PICTURE_REMOVE","deployPictureInPicture","playerType","hasIn","DROPDOWN_MENU_OPEN","DROPDOWN_MENU_CLOSE","openDropdownMenu","keyboard","scroll_key","closeDropdownMenu","HEIGHT_CACHE_SET","HEIGHT_CACHE_CLEAR","setHeight","FILTERS_FETCH_SUCCESS","FILTERS_CREATE_SUCCESS","initAddFilter","contextType","fetchFilters","createFilterStatus","onSuccess","onFail","createFilterStatusRequest","filter_id","createFilterStatusSuccess","createFilterStatusFail","filter_status","createFilter","createFilterRequest","createFilterSuccess","createFilterFail","focusRoot","parentElement","loupeIcon","xmlns","d","deleteIcon","CircularProgress","strokeWidth","radius","heigh","cx","cy","LoadingIndicator","follow","unfollow","requested","unblock","unmute","mute_notifications","unmute_notifications","mute","handleFollow","onFollow","handleBlock","onBlock","handleMute","onMute","handleMuteNotifications","onMuteNotifications","handleUnmuteNotifications","handleAction","onActionClick","small","actionIcon","actionTitle","defaultAction","buttons","mute_expires_at","blocking","muting","hidingNotificationsButton","RelativeTimestamp","timestamp","futureDate","unfollowConfirm","makeMapStateToProps","unfollowModal","str","ImmutableMap","accountsMap","_action$error","_action$error$respons","ACCOUNT_IMPORT","ACCOUNTS_IMPORT","conditionalRender","emoji_search","custom","recent","search_results","people","nature","food","activity","travel","objects","symbols","flags","Emoji","backgroundImageFn","assetHost","notFoundFn","sheetSize","ModifierPickerMenu","onSelect","attachListeners","removeListeners","display","skin","native","useSystemEmojiFont","ModifierPicker","onOpen","handleSelect","EmojiPickerMenu","modifierOpen","readyToFocus","getI18n","categories","foods","places","event","colons","ctrlKey","metaKey","onPick","handleModifierOpen","handleModifierClose","handleModifierChange","onSkinTone","requestAnimationFrame","skinTone","frequentlyUsedEmojis","categoriesSort","splice","categoriesFromEmojis","selecting","perLine","emojiSize","buildCustomEmojis","color","i18n","include","showPreview","showSkinTones","notFound","autoFocus","emojiTooltip","EmojiPickerDropdown","_class3","dropdown","onShowDropdown","EmojiPickerAsync","EmojiMart","Picker","onHideDropdown","onToggle","onPickEmoji","DEFAULTS","getFrequentlyUsedEmojis","emojiCounters","reverse","slice","toArray","uniqueDefaults","getCustomEmojis","aShort","bShort","changeSetting","useEmoji","emptyComponent","noop","Bundle","mod","forceRender","load","onFetch","onFetchSuccess","onFetchFail","renderDelay","Promise","cache","default","Date","Loading","elapsed","isObject","srcValue","castPath","toKey","isKey","stringToPath","fetchBundleFail","APP_LAYOUT_CHANGE","PINNED_STATUSES_FETCH_REQUEST","PINNED_STATUSES_FETCH_SUCCESS","PINNED_STATUSES_FETCH_FAIL","fetchPinnedStatuses","pinned","fetchPinnedStatusesFail","missingDescriptionMessage","missingDescriptionConfirm","missingDescriptionEdit","spoilersAlwaysOn","inReplyTo","replyPrivacy","sideArmBasePrivacy","sideArmRestrictedPrivacy","sideArmPrivacy","advancedOptions","focusDate","caretPosition","isSubmitting","isEditing","isChangingUpload","isUploading","preselectDate","privacy","sideArm","sensitive","spoiler","spoilerText","anyMedia","mediaDescriptionConfirmation","preselectOnReply","isInReply","changeCompose","onSubmit","submitCompose","onClearSuggestions","clearComposeSuggestions","onFetchSuggestions","token","fetchComposeSuggestions","onSuggestionSelected","suggestion","selectComposeSuggestion","onChangeSpoilerText","changeComposeSpoilerText","onPaste","insertEmojiCompose","onChangeSpoilerness","onChangeVisibility","changeComposeVisibility","onMediaDescriptionConfirm","mediaId","overriddenVisibility","onSecondary","onDoNotAsk","ComposeForm","ReplyIndicator","onCancel","attachments","AccountContainer","editing","cancelReplyCompose","AutosuggestAccount","AutosuggestEmoji","imageUrl","mapping","unicodeMapping","filename","AutosuggestHashtag","weeklyUses","total","AutosuggestTextarea","suggestionsHidden","selectedSuggestion","lastToken","tokenStart","textAtCursorMatchesToken","word","right","selectionStart","onSuggestionsFetchRequested","onSuggestionsClearRequested","which","isComposing","min","defaultPrevented","onBlur","onFocus","onSuggestionClick","textarea","setTextarea","clipboardData","renderSuggestion","inner","AutosuggestAccountContainer","selected","onKeyUp","Textarea","dir","AutosuggestInput","searchTokens","input","setInput","maxLength","spellCheck","arrayOf","option_placeholder","add_option","remove_option","poll_duration","single_choice","multiple_choices","minutes","hours","days","Option","handleOptionTitleChange","handleOptionRemove","onRemove","isPollMultiple","checkbox","pollLimits","max_option_chars","PollForm","_class4","handleAddOption","onAddOption","handleSelectDuration","onChangeSettings","isMultiple","handleSelectMultiple","expiresIn","onChangeOption","onRemoveOption","autoFocusIndex","max_options","addPollOption","removePollOption","changePollOption","changePollSettings","Upload","handleUndoClick","onUndo","handleFocalPointClick","onOpenFocalPoint","focusX","focusY","scale","backgroundPosition","undoUploadCompose","initMediaEditModal","marked","unmarked","SensitiveButton","mediaCount","checked","changeComposeSensitivity","UploadForm","mediaIds","UploadProgressContainer","UploadContainer","SensitiveButtonContainer","Warning","scaleX","scaleY","APPROX_HASHTAG_RE","buildHashtagRE","HASHTAG_SEPARATORS","ALPHA","WORD","RegExp","needsLockWarning","hashtagWarning","directMessageWarning","termsLink","urlRegex","regexSupplant","validUrlPrecedingChars","validDomain","validPortNumber","validUrlPath","validUrlQueryChars","validUrlQueryEndingChars","iconStyle","TextIconButton","ariaControls","closeModal","changeLanguage","clear","LanguageDropdownMenu","searchValue","setListRef","listNode","handleSearchChange","handleSearchKeyDown","handleClear","languages","frequentlyUsedLanguages","indexOfA","indexOfB","Infinity","fuzzysort","go","keys","threshold","frequentlyUsed","current","isSearching","LanguageDropdown","toUpperCase","getFrequentlyUsedLanguages","languageCounters","changeComposeLanguage","advanced_options_icon_title","doodle","html","local_only_long","local_only_short","markdown","plain","threaded_mode_long","threaded_mode_short","upload","add_poll","remove_poll","ToggleOption","onChangeAdvancedOption","Toggle","ComposerOptions","handleChangeFiles","onUpload","handleClickAttach","fileElement","onDoodleOpen","click","handleRefFileElement","renderToggleItemContents","acceptContentTypes","contentType","allowMedia","hasMedia","allowPoll","hasPoll","onChangeContentType","onTogglePoll","onToggleSpoiler","resetFileKey","showContentTypeChoice","contentTypeItems","accept","multiple","DropdownContainer","PrivacyDropdownContainer","poll","pending_media","option","changeComposeAdvancedOption","changeComposeContentType","removePoll","addPoll","noEsc","noClose","Options","publish","publishLoud","saveChanges","Publisher","handleSubmit","countText","onSecondarySubmit","maxChars","over","privacyIcons","publishText","iconId","padding","oneOf","localOnly","threadedMode","iconMap","TextareaIcons","spoiler_placeholder","_this","getFulltextForCharacterCounting","inputText","canSubmit","fulltext","firstWithoutDescription","handleChangeSpoiler","composeForm","handleEmojiPick","handleSecondarySubmit","onSpoilerSuggestionSelected","altKey","setAutosuggestTextarea","textareaComponent","handleRefSpoilerText","spoilerComponent","handleFocus","getBoundingClientRect","documentElement","clientWidth","_updateFocusAndSelection","selectionEnd","isNaN","setSelectionRange","handleRefTextarea","WarningContainer","ReplyIndicatorContainer","UploadFormContainer","PollFormContainer","OptionsContainer","instanceOf","getAlerts","onDismiss","alert","dismissAlert","NotificationStack","ownProps","scope","LoadingBar","WrappedComponent","baseAssignValue","baseForOwn","baseIteratee","iteratee","_createClass","defineProperties","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_mouse","_mouse2","__esModule","_toConsumableArray","arr","arr2","Atrament","selector","instance","_classCallCheck","cursor","mouse","mouseMove","rect","changedTouches","offsetX","offsetY","scrollLeft","down","draw","_dirty","fireDirty","mouseDown","mousePosition","_mode","px","py","mouseUp","destroy","globalCompositeOperation","globalAlpha","strokeStyle","lineCap","lineJoin","translate","_filling","_fillStack","SMOOTHING_INIT","WEIGHT_SPREAD","_smoothing","_maxWeight","_thickness","_targetThickness","_weight","_adaptive","mX","mY","rawDist","lineDistance","smoothingFactor","dist","lineWidth","createEvent","initEvent","dispatchEvent","dirty","mode","_this2","startColor","getImageData","_floodFill","_startX","_startY","_this3","canvasWidth","canvasHeight","pixelStack","fillColor","colorLayer","alpha","colorPixel","apply","matchColor","matchFillColor","newPos","pixelPos","reachLeft","reachRight","putImageData","s","x1","y1","x2","y2","xs","pow","ys","sqrt","hexColor","compR","compG","compB","compA","fillR","fillG","fillB","Immutable","Map","openId","initialTimeline","unread","online","hasMore","pendingItems","references","exclude_account","timeline","helper","updateIn","streaming_api_base_url","ignoreFocus","ImmutableStack","popModal","modalType","update","initialListState","followers","reblogged_by","favourited_by","follow_requests","mutes","featured_tags","normalizeList","appendToList","normalizeFeaturedTags","normalizeFeaturedTag","ImmutableOrderedSet","normalizeAccount","followers_count","following_count","statuses_count","limited","importStatus","updater","reactions","normalizeRelationship","setDomainBlocking","random","saved","onboarded","shows","reblog","regex","follow_request","quickFilter","advanced","dismissPermissionBanner","showUnread","sounds","grouping","community","defaultColumns","filterDeadListColumns","stretch","navbar_under","side_arm","side_arm_reply_mode","show_reply_count","zoom_emojis_on_hover","always_show_spoilers_field","confirm_missing_media_description","confirm_boost_missing_media_description","confirm_before_clearing_draft","prepend_cw_re","preselect_on_reply","inline_preview_cards","hicolor_privacy_icons","show_content_type_choice","tag_misleading_links","rewrite_mentions","content_warnings","media_outside","shared_state","auto","all","lengthy","replies","backgrounds","user_backgrounds","preview_images","show_action_bar","letterbox","fullwidth","reveal_behind_cw","pop_in_player","pop_in_position","favicon_badge","tab_badge","status_icons","local_only","isSubscribed","browserSupport","loaded","pins","trending","listType","listMap","union","prependOneToList","removeOneFromList","extendedDescription","domainBlocks","inReplyTos","deleteFromContexts","immutableState","immutableAncestors","immutableDescendants","inReplyToIdOfId","repliesOfId","siblings","sibling","overwrite","oldVal","newVal","mounted","advanced_options","do_not_federate","threaded_mode","elefriend","defaultContentType","in_reply_to","is_submitting","is_uploading","is_changing_upload","isUploadingThumbnail","thumbnailProgress","media_attachments","pending_media_attachments","suggestion_token","default_advanced_options","default_privacy","default_sensitive","default_language","idempotencyKey","tagHistory","media_modal","fg","bg","swapped","weight","adaptiveStroke","smoothing","initialPoll","expires_in","clearAll","mergeWith","continueThread","mentions","apiStatusToTextMentions","recoverHashtags","apiStatusToTextHashtags","domParser","DOMParser","expiresInFromExpiresAt","expires_at","delta","getTime","now","mergeLocalHashtagResults","prefix","localTags","submitted","accept_content_types","lastReadId","readMarkerId","cleaningMode","isTabVisible","browserPermission","markNewForDelete","notificationToMap","markForDelete","markedForDelete","filterNotifications","clearUnread","lastNotification","shouldCountUnreadNotifications","ignoreScroll","isOnTop","isMounted","lastItem","findLast","lastItemReached","recountUnread","last_read_id","mutable","isChanged","normalizeFilter","normalizedFilter","keywords","is","old_value","new_value","normalizeFilters","conversationToMap","filterConversations","sortAnnouncements","sortBy","updateAnnouncement","mergeDeep","unshift","edit","initialHistory","reducers","updateReactionCount","announcement_id","dropdown_menu","timelines","TIMELINE_LOAD_PENDING","TIMELINE_EXPAND_REQUEST","TIMELINE_EXPAND_FAIL","TIMELINE_EXPAND_SUCCESS","expandNormalizedTimeline","isPartial","mMap","oldIds","newIds","lastIndex","findLastIndex","last","firstIndex","first","insertedIds","olderIds","subtract","skip","partial","TIMELINE_UPDATE","updateTimeline","includesId","TIMELINE_DELETE","reblogOf","TIMELINE_CLEAR","clearTimeline","filterTimelines","filterTimeline","TIMELINE_SCROLL_TOP","updateTop","TIMELINE_CONNECT","reconnectTimeline","TIMELINE_DISCONNECT","TIMELINE_MARK_AS_PARTIAL","ALERT_SHOW","message_values","ALERT_DISMISS","ALERT_CLEAR","loadingBar","loadingBarReducer","MODAL_OPEN","pushModal","modalProps","MODAL_CLOSE","COMPOSE_UPLOAD_CHANGE_SUCCESS","user_lists","REBLOGS_FETCH_SUCCESS","FAVOURITES_FETCH_SUCCESS","normalizeFollowRequest","domain_lists","status_lists","FAVOURITE_SUCCESS","UNFAVOURITE_SUCCESS","BOOKMARK_SUCCESS","UNBOOKMARK_SUCCESS","PIN_SUCCESS","UNPIN_SUCCESS","normalizeAccounts","accounts_counters","num","accounts_map","STATUS_IMPORT","STATUSES_IMPORT","importStatuses","FAVOURITE_REQUEST","FAVOURITE_FAIL","BOOKMARK_REQUEST","BOOKMARK_FAIL","REBLOG_REQUEST","REBLOG_FAIL","REACTION_UPDATE","REACTION_ADD_REQUEST","REACTION_REMOVE_FAIL","REACTION_REMOVE_REQUEST","REACTION_ADD_FAIL","isCollapsed","deleteIn","normalizeRelationships","hydrate","val","SETTING_CHANGE","newIndex","newColumns","EMOJI_USE","updateFrequentEmojis","updateFrequentLanguages","SETTING_SAVE","local_settings","push_notifications","push_subscription","boosts","BOOSTS_INIT_MODAL","BOOSTS_CHANGE_PRIVACY","contexts","filterContexts","ownedStatusIds","addReply","in_reply_to_id","has","insert","updateContext","normalizeContext","compose","hydratedState","COMPOSE_MOUNT","COMPOSE_UNMOUNT","COMPOSE_ADVANCED_OPTIONS_CHANGE","COMPOSE_SENSITIVITY_CHANGE","COMPOSE_SPOILERNESS_CHANGE","COMPOSE_SPOILER_TEXT_CHANGE","COMPOSE_VISIBILITY_CHANGE","COMPOSE_CONTENT_TYPE_CHANGE","COMPOSE_CHANGE","COMPOSE_CYCLE_ELEFRIEND","COMPOSE_REPLY","statusToTextMentions","prependCWRe","COMPOSE_REPLY_CANCEL","COMPOSE_RESET","COMPOSE_SUBMIT_REQUEST","COMPOSE_UPLOAD_CHANGE_REQUEST","COMPOSE_SUBMIT_SUCCESS","COMPOSE_SUBMIT_FAIL","COMPOSE_UPLOAD_CHANGE_FAIL","COMPOSE_UPLOAD_REQUEST","COMPOSE_UPLOAD_PROCESSING","COMPOSE_UPLOAD_SUCCESS","file","prevSize","appendMedia","COMPOSE_UPLOAD_FAIL","COMPOSE_UPLOAD_UNDO","removeMedia","media_id","COMPOSE_UPLOAD_PROGRESS","round","THUMBNAIL_UPLOAD_REQUEST","THUMBNAIL_UPLOAD_PROGRESS","THUMBNAIL_UPLOAD_FAIL","THUMBNAIL_UPLOAD_SUCCESS","INIT_MEDIA_EDIT_MODAL","COMPOSE_CHANGE_MEDIA_DESCRIPTION","COMPOSE_CHANGE_MEDIA_FOCUS","COMPOSE_MENTION","COMPOSE_DIRECT","COMPOSE_SUGGESTIONS_CLEAR","COMPOSE_SUGGESTIONS_READY","normalizeSuggestions","sortHashtagsByUse","personalHistory","sorted","t","lowerName","usedA","usedB","COMPOSE_SUGGESTION_SELECT","insertSuggestion","completion","oldText","COMPOSE_SUGGESTION_IGNORE","ignoreSuggestion","COMPOSE_SUGGESTION_TAGS_UPDATE","updateSuggestionTags","COMPOSE_TAG_HISTORY_UPDATE","COMPOSE_EMOJI_INSERT","insertEmoji","emojiData","attached","COMPOSE_DOODLE_SET","mergeIn","fragment","parseFromString","innerHTML","expandMentions","COMPOSE_SET_STATUS","COMPOSE_POLL_ADD","COMPOSE_POLL_REMOVE","COMPOSE_POLL_OPTION_ADD","COMPOSE_POLL_OPTION_CHANGE","COMPOSE_POLL_OPTION_REMOVE","COMPOSE_POLL_SETTINGS_CHANGE","COMPOSE_LANGUAGE_CHANGE","st","MARKERS_FETCH_SUCCESS","markers","updateMounted","updateVisibility","nbLoading","normalizeNotification","expandNormalizedNotifications","newItems","oldItems","idsToCheck","toSet","insertedItems","olderItems","mostRecent","muting_notifications","deleteByStatus","deletedUnread","notificationId","deleteMarkedNotifs","unmarkAllForDelete","markAllForDelete","height_cache","ConvertToImmutable","emojiSearch","normalizeLists","listEditor","listAdder","FILTERS_IMPORT","expandNormalizedConversations","oldItem","newItemIndex","newItem","updateConversation","pinnedAccountsEditor","polls","POLLS_IMPORT","importPolls","MARKERS_SUBMIT_SUCCESS","account_notes","picture_in_picture","original","combineReducers","defaultTypeSuffixes","createAudio","sources","source","createStore","appReducer","applyMiddleware","thunk","config","promiseTypeSuffixes","PENDING","FULFILLED","REJECTED","isPending","isFulfilled","isRejected","showLoading","hideLoading","loadingBarMiddleware","isFail","soundCache","boop","pause","fastSeek","soundsMiddleware","__REDUX_DEVTOOLS_EXTENSION__","f","retry","BundleModalError","ModalLoading","ActionsModal","renderAction","VideoModal","onChangeBackgroundColor","getAverageFromBlurhash","preview","frameRate","startTime","defaultVolume","onCloseVideo","detailed","withOpenButton","cancel_reblog","BoostModal","onChangeBoostPrivacy","changeBoostPrivacy","handleReblog","onReblog","handleAccountClick","mastodonBackSteps","_findContainer","getElementsByClassName","missingMediaDescription","buttonText","combo","FavouriteModal","handleFavourite","onFavourite","AudioModal","accountStaticAvatar","palette","palReordered","row","col","DOODLE_SIZES","normal","tootbanner","s640x480","s800x600","s720x480","DoodleModal","setOpt","doodleSet","submit","nodeName","handleClearBtn","undo","controlHeld","shiftHeld","setCanvasRef","elem","saveUndo","sketcher","initSketcher","onDoneButton","dataurl","mime","bstr","u8arr","File","dataURLtoFile","toImage","onCancelButton","undos","clearScreen","ctx","doSaveUndo","buf","onPaletteClick","dataset","blur","onPaletteRClick","setModeDraw","setModeFill","tglSmooth","tglAdaptive","setWeight","changeSize","newSize","oldSize","sizepreset","updateSketcherSettings","htmlFor","onInput","defaultValue","_mapValues","onContextMenu","ConfirmationModal","doNotAskCheckbox","handleSecondary","handleCancel","setDoNotAskRef","for","applying","chooseImage","discardMessage","discardConfirm","ImageLoader","FocalPointModal","onSave","changeUploadCompose","toFixed","onChangeDescription","onChangeMediaDescription","onChangeFocus","onChangeMediaFocus","onSelectThumbnail","uploadThumbnail","withRef","_dec2","dragging","ocrStatus","handleMouseMove","updatePosition","handleTouchStart","handleTouchEnd","getPointerPosition","getCloseConfirmationMessage","handleTextDetection","_detectText","refreshCache","detecting","fetchTesseract","createWorker","worker","workerPath","tesseractWorkerPath","corePath","tesseractCorePath","langPath","logger","cacheMethod","media_url","loadLanguage","initialize","recognize","terminate","handleThumbnailChange","setFileInputRef","fileInput","handleFileInputClick","focals","thumbnailable","descriptionLabel","ocrMessage","maxWidth","onTouchStart","GIFV","previewWidth","editable","discardChanges","user_setting_expand_spoilers","user_setting_disable_swiping","DeprecatedSettingsModal","illustration","ImageModal","navigationHidden","toggleNavigation","prevState","navigationClassName","MODAL_COMPONENTS","MEDIA","MediaModal","VIDEO","AUDIO","IMAGE","BOOST","FAVOURITE","DOODLE","CONFIRM","DEPRECATED_SETTINGS","ACTIONS","FOCAL_POINT","ModalRoot","setBackgroundColor","modalId","_this$_modal","_this$_modal$getWrapp","_this$_modal$getWrapp2","_modal","getWrappedInstance","setModalRef","marginRight","getScrollbarWidth","visible","Base","confirmationMessage","getNative","baseFor","createBaseFor","fromRight","keysFunc","iterable","baseMatches","baseMatchesProperty","property","baseIsMatch","getMatchData","matchesStrictComparable","matchData","Stack","baseIsEqual","customizer","noCustomizer","objValue","COMPARE_PARTIAL_FLAG","isStrictComparable","baseGet","memoizeCapped","rePropName","reEscapeChar","quote","subString","memoize","MapCache","resolver","memoized","args","Cache","baseToString","Symbol","arrayMap","symbolProto","symbolToString","array","baseHasIn","hasPath","isArguments","isIndex","isLength","hasFunc","baseProperty","basePropertyDeep","Mouse","_Point","self","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","_down","_px","_py","subClass","superClass","create","setPrototypeOf","_inherits","_x","_y","Point"],"mappings":"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AG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IAELnW,EAAUjE,MAAMkc,KAAO,CAAC,CACtBrd,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IAELnW,EAAUjE,MAAMmc,IAAM,CAAC,CACrBtd,EAAG,EACHia,EAAG,EACHC,EAAG,EACHC,EAAG,EACHoB,EAAG,GACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,GACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,GACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,GACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,GACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,GACF,CACDvb,EAAG,GACHia,EAAG,GACHC,EAAG,GACHC,EAAG,GACHoB,EAAG,IAELnW,EAAUjE,MAAMoc,QAAU,CAAC,CACzBvd,EAAG,IACHia,EAAG,IACH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","file":"js/335-fdac5e24b0f051d004c3.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Column from 'flavours/glitch/components/column';\nimport ColumnHeader from 'flavours/glitch/components/column_header';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nexport default class ColumnLoading extends ImmutablePureComponent {\n\n  static propTypes = {\n    title: PropTypes.oneOfType([PropTypes.node, PropTypes.string]),\n    icon: PropTypes.string,\n    multiColumn: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    title: '',\n    icon: '',\n  };\n\n  render() {\n    let { title, icon, multiColumn } = this.props;\n\n    return (\n      <Column>\n        <ColumnHeader icon={icon} title={title} multiColumn={multiColumn} focusable={false} placeholder />\n        <div className='scrollable' />\n      </Column>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, FormattedMessage } from 'react-intl';\nimport Column from 'flavours/glitch/components/column';\nimport Button from 'flavours/glitch/components/button';\nimport { Helmet } from 'react-helmet';\nimport { Link } from 'react-router-dom';\nimport classNames from 'classnames';\nimport { autoPlayGif } from 'flavours/glitch/initial_state';\n\nclass GIF extends React.PureComponent {\n\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    staticSrc: PropTypes.string.isRequired,\n    className: PropTypes.string,\n    animate: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    animate: autoPlayGif,\n  };\n\n  state = {\n    hovering: false,\n  };\n\n  handleMouseEnter = () => {\n    const { animate } = this.props;\n\n    if (!animate) {\n      this.setState({ hovering: true });\n    }\n  };\n\n  handleMouseLeave = () => {\n    const { animate } = this.props;\n\n    if (!animate) {\n      this.setState({ hovering: false });\n    }\n  };\n\n  render () {\n    const { src, staticSrc, className, animate } = this.props;\n    const { hovering } = this.state;\n\n    return (\n      <img\n        className={className}\n        src={(hovering || animate) ? src : staticSrc}\n        alt=''\n        role='presentation'\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n      />\n    );\n  }\n\n}\n\nclass CopyButton extends React.PureComponent {\n\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    value: PropTypes.string.isRequired,\n  };\n\n  state = {\n    copied: false,\n  };\n\n  handleClick = () => {\n    const { value } = this.props;\n    navigator.clipboard.writeText(value);\n    this.setState({ copied: true });\n    this.timeout = setTimeout(() => this.setState({ copied: false }), 700);\n  };\n\n  componentWillUnmount () {\n    if (this.timeout) clearTimeout(this.timeout);\n  }\n\n  render () {\n    const { children } = this.props;\n    const { copied } = this.state;\n\n    return (\n      <Button onClick={this.handleClick} className={copied ? 'copied' : 'copyable'}>{copied ? <FormattedMessage id='copypaste.copied' defaultMessage='Copied' /> : children}</Button>\n    );\n  }\n\n}\n\nexport default @injectIntl\nclass BundleColumnError extends React.PureComponent {\n\n  static propTypes = {\n    errorType: PropTypes.oneOf(['routing', 'network', 'error']),\n    onRetry: PropTypes.func,\n    intl: PropTypes.object.isRequired,\n    multiColumn: PropTypes.bool,\n    stacktrace: PropTypes.string,\n  };\n\n  static defaultProps = {\n    errorType: 'routing',\n  };\n\n  handleRetry = () => {\n    const { onRetry } = this.props;\n\n    if (onRetry) {\n      onRetry();\n    }\n  };\n\n  render () {\n    const { errorType, multiColumn, stacktrace } = this.props;\n\n    let title, body;\n\n    switch(errorType) {\n    case 'routing':\n      title = <FormattedMessage id='bundle_column_error.routing.title' defaultMessage='404' />;\n      body = <FormattedMessage id='bundle_column_error.routing.body' defaultMessage='The requested page could not be found. Are you sure the URL in the address bar is correct?' />;\n      break;\n    case 'network':\n      title = <FormattedMessage id='bundle_column_error.network.title' defaultMessage='Network error' />;\n      body = <FormattedMessage id='bundle_column_error.network.body' defaultMessage='There was an error when trying to load this page. This could be due to a temporary problem with your internet connection or this server.' />;\n      break;\n    case 'error':\n      title = <FormattedMessage id='bundle_column_error.error.title' defaultMessage='Oh, no!' />;\n      body = <FormattedMessage id='bundle_column_error.error.body' defaultMessage='The requested page could not be rendered. It could be due to a bug in our code, or a browser compatibility issue.' />;\n      break;\n    }\n\n    return (\n      <Column bindToDocument={!multiColumn}>\n        <div className='error-column'>\n          <GIF src='/oops.gif' staticSrc='/oops.png' className='error-column__image' />\n\n          <div className='error-column__message'>\n            <h1>{title}</h1>\n            <p>{body}</p>\n\n            <div className='error-column__message__actions'>\n              {errorType === 'network' && <Button onClick={this.handleRetry}><FormattedMessage id='bundle_column_error.retry' defaultMessage='Try again' /></Button>}\n              {errorType === 'error' && <CopyButton value={stacktrace}><FormattedMessage id='bundle_column_error.copy_stacktrace' defaultMessage='Copy error report' /></CopyButton>}\n              <Link to='/' className={classNames('button', { 'button-tertiary': errorType !== 'routing' })}><FormattedMessage id='bundle_column_error.return' defaultMessage='Go back home' /></Link>\n            </div>\n          </div>\n        </div>\n\n        <Helmet>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Switch, Route } from 'react-router-dom';\nimport StackTrace from 'stacktrace-js';\nimport ColumnLoading from 'flavours/glitch/features/ui/components/column_loading';\nimport BundleColumnError from 'flavours/glitch/features/ui/components/bundle_column_error';\nimport BundleContainer from 'flavours/glitch/features/ui/containers/bundle_container';\n\n// Small wrapper to pass multiColumn to the route components\nexport class WrappedSwitch extends React.PureComponent {\n\n  render () {\n    const { multiColumn, children } = this.props;\n\n    return (\n      <Switch>\n        {React.Children.map(children, child => React.cloneElement(child, { multiColumn }))}\n      </Switch>\n    );\n  }\n\n}\n\nWrappedSwitch.propTypes = {\n  multiColumn: PropTypes.bool,\n  children: PropTypes.node,\n};\n\n// Small Wraper to extract the params from the route and pass\n// them to the rendered component, together with the content to\n// be rendered inside (the children)\nexport class WrappedRoute extends React.Component {\n\n  static propTypes = {\n    component: PropTypes.func.isRequired,\n    content: PropTypes.node,\n    multiColumn: PropTypes.bool,\n    componentParams: PropTypes.object,\n  };\n\n  static defaultProps = {\n    componentParams: {},\n  };\n\n  static getDerivedStateFromError () {\n    return {\n      hasError: true,\n    };\n  }\n\n  state = {\n    hasError: false,\n    stacktrace: '',\n  };\n\n  componentDidCatch (error) {\n    StackTrace.fromError(error).then(stackframes => {\n      this.setState({ stacktrace: error.toString() + '\\n' + stackframes.map(frame => frame.toString()).join('\\n') });\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  renderComponent = ({ match }) => {\n    const { component, content, multiColumn, componentParams } = this.props;\n    const { hasError, stacktrace } = this.state;\n\n    if (hasError) {\n      return (\n        <BundleColumnError\n          stacktrace={stacktrace}\n          multiColumn={multiColumn}\n          errorType='error'\n        />\n      );\n    }\n\n    return (\n      <BundleContainer fetchComponent={component} loading={this.renderLoading} error={this.renderError}>\n        {Component => <Component params={match.params} multiColumn={multiColumn} {...componentParams}>{content}</Component>}\n      </BundleContainer>\n    );\n  };\n\n  renderLoading = () => {\n    const { multiColumn } = this.props;\n\n    return <ColumnLoading multiColumn={multiColumn} />;\n  };\n\n  renderError = (props) => {\n    return <BundleColumnError {...props} errorType='network' />;\n  };\n\n  render () {\n    const { component: Component, content, ...rest } = this.props;\n\n    return <Route {...rest} render={this.renderComponent} />;\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Motion from '../../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport { FormattedMessage } from 'react-intl';\n\nexport default class UploadArea extends React.PureComponent {\n\n  static propTypes = {\n    active: PropTypes.bool,\n    onClose: PropTypes.func,\n  };\n\n  handleKeyUp = (e) => {\n    const keyCode = e.keyCode;\n    if (this.props.active) {\n      switch(keyCode) {\n      case 27:\n        e.preventDefault();\n        e.stopPropagation();\n        this.props.onClose();\n        break;\n      }\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keyup', this.handleKeyUp, false);\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keyup', this.handleKeyUp);\n  }\n\n  render () {\n    const { active } = this.props;\n\n    return (\n      <Motion defaultStyle={{ backgroundOpacity: 0, backgroundScale: 0.95 }} style={{ backgroundOpacity: spring(active ? 1 : 0, { stiffness: 150, damping: 15 }), backgroundScale: spring(active ? 1 : 0.95, { stiffness: 200, damping: 3 }) }}>\n        {({ backgroundOpacity, backgroundScale }) =>\n          (<div className='upload-area' style={{ visibility: active ? 'visible' : 'hidden', opacity: backgroundOpacity }}>\n            <div className='upload-area__drop'>\n              <div className='upload-area__background' style={{ transform: `scale(${backgroundScale})` }} />\n              <div className='upload-area__content'><FormattedMessage id='upload_area.title' defaultMessage='Drag & drop to upload' /></div>\n            </div>\n          </div>)\n        }\n      </Motion>\n    );\n  }\n\n}\n","import React from 'react';\n\nconst DrawerLoading = () => (\n  <div className='drawer'>\n    <div className='drawer__pager'>\n      <div className='drawer__inner' />\n    </div>\n  </div>\n);\n\nexport default DrawerLoading;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { fetchServer } from 'flavours/glitch/actions/server';\nimport ShortNumber from 'flavours/glitch/components/short_number';\nimport Skeleton from 'flavours/glitch/components/skeleton';\nimport Account from 'flavours/glitch/containers/account_container';\nimport { domain } from 'flavours/glitch/initial_state';\nimport Image from 'flavours/glitch/components/image';\nimport { Link } from 'react-router-dom';\n\nconst messages = defineMessages({\n  aboutActiveUsers: { id: 'server_banner.about_active_users', defaultMessage: 'People using this server during the last 30 days (Monthly Active Users)' },\n});\n\nconst mapStateToProps = state => ({\n  server: state.getIn(['server', 'server']),\n});\n\nexport default @connect(mapStateToProps)\n@injectIntl\nclass ServerBanner extends React.PureComponent {\n\n  static propTypes = {\n    server: PropTypes.object,\n    dispatch: PropTypes.func,\n    intl: PropTypes.object,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(fetchServer());\n  }\n\n  render () {\n    const { server, intl } = this.props;\n    const isLoading = server.get('isLoading');\n\n    return (\n      <div className='server-banner'>\n        <div className='server-banner__introduction'>\n          <FormattedMessage id='server_banner.introduction' defaultMessage='{domain} is part of the decentralized social network powered by {mastodon}.' values={{ domain: <strong>{domain}</strong>, mastodon: <a href='https://joinmastodon.org' target='_blank'>Mastodon</a> }} />\n        </div>\n\n        <Image blurhash={server.getIn(['thumbnail', 'blurhash'])} src={server.getIn(['thumbnail', 'url'])} className='server-banner__hero' />\n\n        <div className='server-banner__description'>\n          {isLoading ? (\n            <>\n              <Skeleton width='100%' />\n              <br />\n              <Skeleton width='100%' />\n              <br />\n              <Skeleton width='70%' />\n            </>\n          ) : server.get('description')}\n        </div>\n\n        <div className='server-banner__meta'>\n          <div className='server-banner__meta__column'>\n            <h4><FormattedMessage id='server_banner.administered_by' defaultMessage='Administered by:' /></h4>\n\n            <Account id={server.getIn(['contact', 'account', 'id'])} size={36} />\n          </div>\n\n          <div className='server-banner__meta__column'>\n            <h4><FormattedMessage id='server_banner.server_stats' defaultMessage='Server stats:' /></h4>\n\n            {isLoading ? (\n              <>\n                <strong className='server-banner__number'><Skeleton width='10ch' /></strong>\n                <br />\n                <span className='server-banner__number-label'><Skeleton width='5ch' /></span>\n              </>\n            ) : (\n              <>\n                <strong className='server-banner__number'><ShortNumber value={server.getIn(['usage', 'users', 'active_month'])} /></strong>\n                <br />\n                <span className='server-banner__number-label' title={intl.formatMessage(messages.aboutActiveUsers)}><FormattedMessage id='server_banner.active_users' defaultMessage='active users' /></span>\n              </>\n            )}\n          </div>\n        </div>\n\n        <hr className='spacer' />\n\n        <Link className='button button--block button-secondary' to='/about'><FormattedMessage id='server_banner.learn_more' defaultMessage='Learn more' /></Link>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport SearchContainer from 'flavours/glitch/features/compose/containers/search_container';\nimport ComposeFormContainer from 'flavours/glitch/features/compose/containers/compose_form_container';\nimport NavigationContainer from 'flavours/glitch/features/compose/containers/navigation_container';\nimport LinkFooter from './link_footer';\nimport ServerBanner from 'flavours/glitch/components/server_banner';\nimport { mountCompose, unmountCompose } from 'flavours/glitch/actions/compose';\n\nexport default @connect()\nclass ComposePanel extends React.PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(mountCompose());\n  }\n\n  componentWillUnmount () {\n    const { dispatch } = this.props;\n    dispatch(unmountCompose());\n  }\n\n  render() {\n    const { signedIn } = this.context.identity;\n\n    return (\n      <div className='compose-panel'>\n        <SearchContainer openInRoute />\n\n        {!signedIn && (\n          <React.Fragment>\n            <ServerBanner />\n            <div className='flex-spacer' />\n          </React.Fragment>\n        )}\n\n        {signedIn && (\n          <React.Fragment>\n            <NavigationContainer />\n            <ComposeFormContainer singleColumn />\n          </React.Fragment>\n        )}\n\n        <LinkFooter />\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\nimport { disabledAccountId, movedToAccountId, domain } from 'flavours/glitch/initial_state';\nimport { openModal } from 'flavours/glitch/actions/modal';\nimport { logOut } from 'flavours/glitch/utils/log_out';\n\nconst messages = defineMessages({\n  logoutMessage: { id: 'confirmations.logout.message', defaultMessage: 'Are you sure you want to log out?' },\n  logoutConfirm: { id: 'confirmations.logout.confirm', defaultMessage: 'Log out' },\n});\n\nconst mapStateToProps = (state) => ({\n  disabledAcct: state.getIn(['accounts', disabledAccountId, 'acct']),\n  movedToAcct: movedToAccountId ? state.getIn(['accounts', movedToAccountId, 'acct']) : undefined,\n});\n\nconst mapDispatchToProps = (dispatch, { intl }) => ({\n  onLogout () {\n    dispatch(openModal('CONFIRM', {\n      message: intl.formatMessage(messages.logoutMessage),\n      confirm: intl.formatMessage(messages.logoutConfirm),\n      closeWhenConfirm: false,\n      onConfirm: () => logOut(),\n    }));\n  },\n});\n\nexport default @injectIntl\n@connect(mapStateToProps, mapDispatchToProps)\nclass DisabledAccountBanner extends React.PureComponent {\n\n  static propTypes = {\n    disabledAcct: PropTypes.string.isRequired,\n    movedToAcct: PropTypes.string,\n    onLogout: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  handleLogOutClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.props.onLogout();\n\n    return false;\n  };\n\n  render () {\n    const { disabledAcct, movedToAcct } = this.props;\n\n    const disabledAccountLink = (\n      <Link to={`/@${disabledAcct}`}>\n        {disabledAcct}@{domain}\n      </Link>\n    );\n\n    return (\n      <div className='sign-in-banner'>\n        <p>\n          {movedToAcct ? (\n            <FormattedMessage\n              id='moved_to_account_banner.text'\n              defaultMessage='Your account {disabledAccount} is currently disabled because you moved to {movedToAccount}.'\n              values={{\n                disabledAccount: disabledAccountLink,\n                movedToAccount: <Link to={`/@${movedToAcct}`}>{movedToAcct.includes('@') ? movedToAcct : `${movedToAcct}@${domain}`}</Link>,\n              }}\n            />\n          ) : (\n            <FormattedMessage\n              id='disabled_account_banner.text'\n              defaultMessage='Your account {disabledAccount} is currently disabled.'\n              values={{\n                disabledAccount: disabledAccountLink,\n              }}\n            />\n          )}\n        </p>\n        <a href='/auth/edit' className='button button--block'>\n          <FormattedMessage id='disabled_account_banner.account_settings' defaultMessage='Account settings' />\n        </a>\n        <button type='button' className='button button--block button-tertiary' onClick={this.handleLogOutClick}>\n          <FormattedMessage id='confirmations.logout.confirm' defaultMessage='Log out' />\n        </button>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { fetchFollowRequests } from 'flavours/glitch/actions/accounts';\nimport { connect } from 'react-redux';\nimport ColumnLink from 'flavours/glitch/features/ui/components/column_link';\nimport IconWithBadge from 'flavours/glitch/components/icon_with_badge';\nimport { List as ImmutableList } from 'immutable';\nimport { injectIntl, defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  text: { id: 'navigation_bar.follow_requests', defaultMessage: 'Follow requests' },\n});\n\nconst mapStateToProps = state => ({\n  count: state.getIn(['user_lists', 'follow_requests', 'items'], ImmutableList()).size,\n});\n\nexport default @injectIntl\n@connect(mapStateToProps)\nclass FollowRequestsColumnLink extends React.Component {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    count: PropTypes.number.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n\n    dispatch(fetchFollowRequests());\n  }\n\n  render () {\n    const { count, intl } = this.props;\n\n    if (count === 0) {\n      return null;\n    }\n\n    return (\n      <ColumnLink\n        transparent\n        to='/follow_requests'\n        icon={<IconWithBadge className='column-link__icon' id='user-plus' count={count} />}\n        text={intl.formatMessage(messages.text)}\n      />\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createSelector } from 'reselect';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { fetchLists } from 'flavours/glitch/actions/lists';\nimport ColumnLink from './column_link';\n\nconst getOrderedLists = createSelector([state => state.get('lists')], lists => {\n  if (!lists) {\n    return lists;\n  }\n\n  return lists.toList().filter(item => !!item).sort((a, b) => a.get('title').localeCompare(b.get('title'))).take(4);\n});\n\nconst mapStateToProps = state => ({\n  lists: getOrderedLists(state),\n});\n\nexport default @withRouter\n@connect(mapStateToProps)\nclass ListPanel extends ImmutablePureComponent {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    lists: ImmutablePropTypes.list,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(fetchLists());\n  }\n\n  render () {\n    const { lists } = this.props;\n\n    if (!lists || lists.isEmpty()) {\n      return null;\n    }\n\n    return (\n      <div className='list-panel'>\n        <hr />\n\n        {lists.map(list => (\n          <ColumnLink icon='list-ul' key={list.get('id')} strict text={list.get('title')} to={`/lists/${list.get('id')}`} transparent />\n        ))}\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport IconWithBadge from 'flavours/glitch/components/icon_with_badge';\n\nconst mapStateToProps = state => ({\n  count: state.getIn(['local_settings', 'notifications', 'tab_badge']) ? state.getIn(['notifications', 'unread']) : 0,\n  id: 'bell',\n});\n\nexport default connect(mapStateToProps)(IconWithBadge);\n","import React, { useCallback } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useDispatch } from 'react-redux';\nimport { registrationsOpen } from 'flavours/glitch/initial_state';\nimport { openModal } from 'flavours/glitch/actions/modal';\n\nconst SignInBanner = () => {\n  const dispatch = useDispatch();\n\n  const openClosedRegistrationsModal = useCallback(\n    () => dispatch(openModal('CLOSED_REGISTRATIONS')),\n    [dispatch],\n  );\n\n  let signupButton;\n\n  if (registrationsOpen) {\n    signupButton = (\n      <a href='/auth/sign_up' className='button button--block button-tertiary'>\n        <FormattedMessage id='sign_in_banner.create_account' defaultMessage='Create account' />\n      </a>\n    );\n  } else {\n    signupButton = (\n      <button className='button button--block button-tertiary' onClick={openClosedRegistrationsModal}>\n        <FormattedMessage id='sign_in_banner.create_account' defaultMessage='Create account' />\n      </button>\n    );\n  }\n\n  return (\n    <div className='sign-in-banner'>\n      <p><FormattedMessage id='sign_in_banner.text' defaultMessage='Sign in to follow profiles or hashtags, favourite, share and reply to posts. You can also interact from your account on a different server.' /></p>\n      <a href='/auth/sign_in' className='button button--block'><FormattedMessage id='sign_in_banner.sign_in' defaultMessage='Sign in' /></a>\n      <a href='https://halcyon.urusai.social/' className='button button--block'>Alternative UI (Halcyon)</a>\n      {signupButton}\n    </div>\n  );\n};\n\nexport default SignInBanner;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport Hashtag from 'flavours/glitch/components/hashtag';\n\nconst messages = defineMessages({\n  lastStatusAt: { id: 'account.featured_tags.last_status_at', defaultMessage: 'Last post on {date}' },\n  empty: { id: 'account.featured_tags.last_status_never', defaultMessage: 'No posts' },\n});\n\nexport default @injectIntl\nclass FeaturedTags extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    account: ImmutablePropTypes.map,\n    featuredTags: ImmutablePropTypes.list,\n    tagged: PropTypes.string,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { account, featuredTags, intl } = this.props;\n\n    if (!account || account.get('suspended') || featuredTags.isEmpty()) {\n      return null;\n    }\n\n    return (\n      <div className='getting-started__trends'>\n        <h4><FormattedMessage id='account.featured_tags.title' defaultMessage=\"{name}'s featured hashtags\" values={{ name: <bdi dangerouslySetInnerHTML={{ __html: account.get('display_name_html') }} /> }} /></h4>\n\n        {featuredTags.take(3).map(featuredTag => (\n          <Hashtag\n            key={featuredTag.get('name')}\n            name={featuredTag.get('name')}\n            href={featuredTag.get('url')}\n            to={`/@${account.get('acct')}/tagged/${featuredTag.get('name')}`}\n            uses={featuredTag.get('statuses_count')}\n            withGraph={false}\n            description={((featuredTag.get('statuses_count') * 1) > 0) ? intl.formatMessage(messages.lastStatusAt, { date: intl.formatDate(featuredTag.get('last_status_at'), { month: 'short', day: '2-digit' }) }) : intl.formatMessage(messages.empty)}\n          />\n        ))}\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport FeaturedTags from '../components/featured_tags';\nimport { makeGetAccount } from 'flavours/glitch/selectors';\nimport { List as ImmutableList } from 'immutable';\n\nconst mapStateToProps = () => {\n  const getAccount = makeGetAccount();\n\n  return (state, { accountId }) => ({\n    account: getAccount(state, accountId),\n    featuredTags: state.getIn(['user_lists', 'featured_tags', accountId, 'items'], ImmutableList()),\n  });\n};\n\nexport default connect(mapStateToProps)(FeaturedTags);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport FeaturedTags from 'flavours/glitch/features/account/containers/featured_tags_container';\nimport { normalizeForLookup } from 'flavours/glitch/reducers/accounts_map';\n\nconst mapStateToProps = (state, { match: { params: { acct } } }) => {\n  const accountId = state.getIn(['accounts_map', normalizeForLookup(acct)]);\n\n  if (!accountId) {\n    return {\n      isLoading: true,\n    };\n  }\n\n  return {\n    accountId,\n    isLoading: false,\n  };\n};\n\nexport default @connect(mapStateToProps)\nclass AccountNavigation extends React.PureComponent {\n\n  static propTypes = {\n    match: PropTypes.shape({\n      params: PropTypes.shape({\n        acct: PropTypes.string,\n        tagged: PropTypes.string,\n      }).isRequired,\n    }).isRequired,\n\n    accountId: PropTypes.string,\n    isLoading: PropTypes.bool,\n  };\n\n  render () {\n    const { accountId, isLoading, match: { params: { tagged } } } = this.props;\n\n    if (isLoading) {\n      return null;\n    }\n\n    return (\n      <>\n        <div className='flex-spacer' />\n        <FeaturedTags accountId={accountId} tagged={tagged} />\n      </>\n    );\n  }\n\n}\n","import React from 'react';\nimport { Switch, Route, withRouter } from 'react-router-dom';\nimport { showTrends } from 'flavours/glitch/initial_state';\nimport Trends from 'flavours/glitch/features/getting_started/containers/trends_container';\nimport AccountNavigation from 'flavours/glitch/features/account/navigation';\n\nconst DefaultNavigation = () => (\n  <>\n    {showTrends && (\n      <>\n        <div className='flex-spacer' />\n        <Trends />\n      </>\n    )}\n  </>\n);\n\nexport default @withRouter\nclass NavigationPortal extends React.PureComponent {\n\n  render () {\n    return (\n      <Switch>\n        <Route path='/@:acct' exact component={AccountNavigation} />\n        <Route path='/@:acct/tagged/:tagged?' exact component={AccountNavigation} />\n        <Route path='/@:acct/with_replies' exact component={AccountNavigation} />\n        <Route path='/@:acct/followers' exact component={AccountNavigation} />\n        <Route path='/@:acct/following' exact component={AccountNavigation} />\n        <Route path='/@:acct/media' exact component={AccountNavigation} />\n        <Route component={DefaultNavigation} />\n      </Switch>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { Link } from 'react-router-dom';\nimport { timelinePreview, showTrends } from 'flavours/glitch/initial_state';\nimport ColumnLink from 'flavours/glitch/features/ui/components/column_link';\nimport DisabledAccountBanner from './disabled_account_banner';\nimport FollowRequestsColumnLink from './follow_requests_column_link';\nimport ListPanel from './list_panel';\nimport NotificationsCounterIcon from './notifications_counter_icon';\nimport SignInBanner from './sign_in_banner';\nimport { preferencesLink, relationshipsLink } from 'flavours/glitch/utils/backend_links';\nimport NavigationPortal from 'flavours/glitch/components/navigation_portal';\n\nconst messages = defineMessages({\n  home: { id: 'tabs_bar.home', defaultMessage: 'Home' },\n  notifications: { id: 'tabs_bar.notifications', defaultMessage: 'Notifications' },\n  explore: { id: 'explore.title', defaultMessage: 'Explore' },\n  local: { id: 'tabs_bar.local_timeline', defaultMessage: 'Local' },\n  federated: { id: 'tabs_bar.federated_timeline', defaultMessage: 'Federated' },\n  direct: { id: 'navigation_bar.direct', defaultMessage: 'Direct messages' },\n  favourites: { id: 'navigation_bar.favourites', defaultMessage: 'Favourites' },\n  bookmarks: { id: 'navigation_bar.bookmarks', defaultMessage: 'Bookmarks' },\n  lists: { id: 'navigation_bar.lists', defaultMessage: 'Lists' },\n  preferences: { id: 'navigation_bar.preferences', defaultMessage: 'Preferences' },\n  followsAndFollowers: { id: 'navigation_bar.follows_and_followers', defaultMessage: 'Follows and followers' },\n  about: { id: 'navigation_bar.about', defaultMessage: 'About' },\n  search: { id: 'navigation_bar.search', defaultMessage: 'Search' },\n  app_settings: { id: 'navigation_bar.app_settings', defaultMessage: 'App settings' },\n});\n\nexport default @injectIntl\nclass NavigationPanel extends React.Component {\n\n  static contextTypes = {\n    router: PropTypes.object.isRequired,\n    identity: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    onOpenSettings: PropTypes.func,\n  };\n\n  render() {\n    const { intl, onOpenSettings } = this.props;\n    const { signedIn, disabledAccountId } = this.context.identity;\n\n    return (\n      <div className='navigation-panel'>\n        {signedIn && (\n          <React.Fragment>\n            <ColumnLink transparent to='/home' icon='home' text={intl.formatMessage(messages.home)} />\n            <ColumnLink transparent to='/notifications' icon={<NotificationsCounterIcon className='column-link__icon' />} text={intl.formatMessage(messages.notifications)} />\n            <FollowRequestsColumnLink />\n          </React.Fragment>\n        )}\n\n        {showTrends ? (\n          <ColumnLink transparent to='/explore' icon='hashtag' text={intl.formatMessage(messages.explore)} />\n        ) : (\n          <ColumnLink transparent to='/search' icon='search' text={intl.formatMessage(messages.search)} />\n        )}\n\n        {(signedIn || timelinePreview) && (\n          <>\n            <ColumnLink transparent to='/public/local' icon='users' text={intl.formatMessage(messages.local)} />\n            <ColumnLink transparent exact to='/public' icon='globe' text={intl.formatMessage(messages.federated)} />\n          </>\n        )}\n\n        {!signedIn && (\n          <div className='navigation-panel__sign-in-banner'>\n            <hr />\n            { disabledAccountId ? <DisabledAccountBanner /> : <SignInBanner /> }\n          </div>\n        )}\n\n        {signedIn && (\n          <React.Fragment>\n            <ColumnLink transparent to='/conversations' icon='at' text={intl.formatMessage(messages.direct)} />\n            <ColumnLink transparent to='/bookmarks' icon='bookmark' text={intl.formatMessage(messages.bookmarks)} />\n            <ColumnLink transparent to='/favourites' icon='star' text={intl.formatMessage(messages.favourites)} />\n            <ColumnLink transparent to='/lists' icon='list-ul' text={intl.formatMessage(messages.lists)} />\n\n            <ListPanel />\n\n            <hr />\n\n            {!!preferencesLink && <ColumnLink transparent href={preferencesLink} icon='cog' text={intl.formatMessage(messages.preferences)} />}\n            <ColumnLink transparent onClick={onOpenSettings} icon='cogs' text={intl.formatMessage(messages.app_settings)} />\n          </React.Fragment>\n        )}\n\n        <div className='navigation-panel__legal'>\n          <hr />\n          <ColumnLink transparent to='/about' icon='ellipsis-h' text={intl.formatMessage(messages.about)} />\n        </div>\n\n        <NavigationPortal />\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport BundleContainer from '../containers/bundle_container';\nimport ColumnLoading from './column_loading';\nimport DrawerLoading from './drawer_loading';\nimport BundleColumnError from './bundle_column_error';\nimport {\n  Compose,\n  Notifications,\n  HomeTimeline,\n  CommunityTimeline,\n  PublicTimeline,\n  HashtagTimeline,\n  DirectTimeline,\n  FavouritedStatuses,\n  BookmarkedStatuses,\n  ListTimeline,\n  Directory,\n} from '../../ui/util/async-components';\nimport ComposePanel from './compose_panel';\nimport NavigationPanel from './navigation_panel';\n\nimport { supportsPassiveEvents } from 'detect-passive-events';\nimport { scrollRight } from 'flavours/glitch/scroll';\n\nconst componentMap = {\n  'COMPOSE': Compose,\n  'HOME': HomeTimeline,\n  'NOTIFICATIONS': Notifications,\n  'PUBLIC': PublicTimeline,\n  'REMOTE': PublicTimeline,\n  'COMMUNITY': CommunityTimeline,\n  'HASHTAG': HashtagTimeline,\n  'DIRECT': DirectTimeline,\n  'FAVOURITES': FavouritedStatuses,\n  'BOOKMARKS': BookmarkedStatuses,\n  'LIST': ListTimeline,\n  'DIRECTORY': Directory,\n};\n\nexport default class ColumnsArea extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    columns: ImmutablePropTypes.list.isRequired,\n    singleColumn: PropTypes.bool,\n    children: PropTypes.node,\n    navbarUnder: PropTypes.bool,\n    openSettings: PropTypes.func,\n  };\n\n  // Corresponds to (max-width: $no-gap-breakpoint + 285px - 1px) in SCSS\n  mediaQuery = 'matchMedia' in window && window.matchMedia('(max-width: 1174px)');\n\n  state = {\n    renderComposePanel: !(this.mediaQuery && this.mediaQuery.matches),\n  };\n\n  componentDidMount() {\n    if (!this.props.singleColumn) {\n      this.node.addEventListener('wheel', this.handleWheel, supportsPassiveEvents ? { passive: true } : false);\n    }\n\n    if (this.mediaQuery) {\n      if (this.mediaQuery.addEventListener) {\n        this.mediaQuery.addEventListener('change', this.handleLayoutChange);\n      } else {\n        this.mediaQuery.addListener(this.handleLayoutChange);\n      }\n      this.setState({ renderComposePanel: !this.mediaQuery.matches });\n    }\n\n    this.isRtlLayout = document.getElementsByTagName('body')[0].classList.contains('rtl');\n  }\n\n  componentWillUpdate(nextProps) {\n    if (this.props.singleColumn !== nextProps.singleColumn && nextProps.singleColumn) {\n      this.node.removeEventListener('wheel', this.handleWheel);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.singleColumn !== prevProps.singleColumn && !this.props.singleColumn) {\n      this.node.addEventListener('wheel', this.handleWheel, supportsPassiveEvents ? { passive: true } : false);\n    }\n  }\n\n  componentWillUnmount () {\n    if (!this.props.singleColumn) {\n      this.node.removeEventListener('wheel', this.handleWheel);\n    }\n\n    if (this.mediaQuery) {\n      if (this.mediaQuery.removeEventListener) {\n        this.mediaQuery.removeEventListener('change', this.handleLayoutChange);\n      } else {\n        this.mediaQuery.removeListener(this.handleLayoutChange);\n      }\n    }\n  }\n\n  handleChildrenContentChange() {\n    if (!this.props.singleColumn) {\n      const modifier = this.isRtlLayout ? -1 : 1;\n      this._interruptScrollAnimation = scrollRight(this.node, (this.node.scrollWidth - window.innerWidth) * modifier);\n    }\n  }\n\n  handleLayoutChange = (e) => {\n    this.setState({ renderComposePanel: !e.matches });\n  };\n\n  handleWheel = () => {\n    if (typeof this._interruptScrollAnimation !== 'function') {\n      return;\n    }\n\n    this._interruptScrollAnimation();\n  };\n\n  setRef = (node) => {\n    this.node = node;\n  };\n\n  renderLoading = columnId => () => {\n    return columnId === 'COMPOSE' ? <DrawerLoading /> : <ColumnLoading multiColumn />;\n  };\n\n  renderError = (props) => {\n    return <BundleColumnError multiColumn errorType='network' {...props} />;\n  };\n\n  render () {\n    const { columns, children, singleColumn, navbarUnder, openSettings } = this.props;\n    const { renderComposePanel } = this.state;\n\n    if (singleColumn) {\n      return (\n        <div className='columns-area__panels'>\n          <div className='columns-area__panels__pane columns-area__panels__pane--compositional'>\n            <div className='columns-area__panels__pane__inner'>\n              {renderComposePanel && <ComposePanel />}\n            </div>\n          </div>\n\n          <div className='columns-area__panels__main'>\n            <div className='tabs-bar__wrapper'><div id='tabs-bar__portal' /></div>\n            <div className='columns-area columns-area--mobile'>{children}</div>\n          </div>\n\n          <div className='columns-area__panels__pane columns-area__panels__pane--start columns-area__panels__pane--navigational'>\n            <div className='columns-area__panels__pane__inner'>\n              <NavigationPanel onOpenSettings={openSettings} />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className='columns-area' ref={this.setRef}>\n        {columns.map(column => {\n          const params = column.get('params', null) === null ? null : column.get('params').toJS();\n          const other  = params && params.other ? params.other : {};\n\n          return (\n            <BundleContainer key={column.get('uuid')} fetchComponent={componentMap[column.get('id')]} loading={this.renderLoading(column.get('id'))} error={this.renderError}>\n              {SpecificComponent => <SpecificComponent columnId={column.get('uuid')} params={params} multiColumn {...other} />}\n            </BundleContainer>\n          );\n        })}\n\n        {React.Children.map(children, child => React.cloneElement(child, { multiColumn: true }))}\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport ColumnsArea from '../components/columns_area';\nimport { openModal } from 'flavours/glitch/actions/modal';\n\nconst mapStateToProps = state => ({\n  columns: state.getIn(['settings', 'columns']),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  openSettings (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    dispatch(openModal('SETTINGS', {}));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(ColumnsArea);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport { Link } from 'react-router-dom';\nimport Avatar from 'flavours/glitch/components/avatar';\nimport DisplayName from 'flavours/glitch/components/display_name';\nimport { defineMessages, injectIntl } from 'react-intl';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n});\n\nconst mapStateToProps = (state, { accountId }) => ({\n  account: state.getIn(['accounts', accountId]),\n});\n\nexport default @connect(mapStateToProps)\n@injectIntl\nclass Header extends ImmutablePureComponent {\n\n  static propTypes = {\n    accountId: PropTypes.string.isRequired,\n    statusId: PropTypes.string.isRequired,\n    account: ImmutablePropTypes.map.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { account, statusId, onClose, intl } = this.props;\n\n    return (\n      <div className='picture-in-picture__header'>\n        <Link to={`/@${account.get('acct')}/${statusId}`} className='picture-in-picture__header__account'>\n          <Avatar account={account} size={36} />\n          <DisplayName account={account} />\n        </Link>\n\n        <IconButton icon='times' onClick={onClose} title={intl.formatMessage(messages.close)} />\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Video from 'flavours/glitch/features/video';\nimport Audio from 'flavours/glitch/features/audio';\nimport { removePictureInPicture } from 'flavours/glitch/actions/picture_in_picture';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport classNames from 'classnames';\n\nconst mapStateToProps = state => ({\n  ...state.get('picture_in_picture'),\n  left: state.getIn(['local_settings', 'media', 'pop_in_position']) === 'left',\n});\n\nexport default @connect(mapStateToProps)\nclass PictureInPicture extends React.Component {\n\n  static propTypes = {\n    statusId: PropTypes.string,\n    accountId: PropTypes.string,\n    type: PropTypes.string,\n    src: PropTypes.string,\n    muted: PropTypes.bool,\n    volume: PropTypes.number,\n    currentTime: PropTypes.number,\n    poster: PropTypes.string,\n    backgroundColor: PropTypes.string,\n    foregroundColor: PropTypes.string,\n    accentColor: PropTypes.string,\n    dispatch: PropTypes.func.isRequired,\n    left: PropTypes.bool,\n  };\n\n  handleClose = () => {\n    const { dispatch } = this.props;\n    dispatch(removePictureInPicture());\n  };\n\n  render () {\n    const { type, src, currentTime, accountId, statusId, left } = this.props;\n\n    if (!currentTime) {\n      return null;\n    }\n\n    let player;\n\n    if (type === 'video') {\n      player = (\n        <Video\n          src={src}\n          currentTime={this.props.currentTime}\n          volume={this.props.volume}\n          muted={this.props.muted}\n          autoPlay\n          inline\n          alwaysVisible\n        />\n      );\n    } else if (type === 'audio') {\n      player = (\n        <Audio\n          src={src}\n          currentTime={this.props.currentTime}\n          volume={this.props.volume}\n          muted={this.props.muted}\n          poster={this.props.poster}\n          backgroundColor={this.props.backgroundColor}\n          foregroundColor={this.props.foregroundColor}\n          accentColor={this.props.accentColor}\n          autoPlay\n        />\n      );\n    }\n\n    return (\n      <div className={classNames('picture-in-picture', { left })}>\n        <Header accountId={accountId} statusId={statusId} onClose={this.handleClose} />\n\n        {player}\n\n        <Footer statusId={statusId} />\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\n\nconst Logo = () => (\n  <svg viewBox='0 0 261 66' className='logo' role='img'>\n    <title>Mastodon</title>\n    <use xlinkHref='#logo-symbol-wordmark' />\n  </svg>\n);\n\nexport default Logo;\n","import React from 'react';\nimport Logo from 'flavours/glitch/components/logo';\nimport { Link, withRouter } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\nimport { registrationsOpen, me } from 'flavours/glitch/initial_state';\nimport Avatar from 'flavours/glitch/components/avatar';\nimport Permalink from 'flavours/glitch/components/permalink';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { openModal } from 'flavours/glitch/actions/modal';\n\nconst Account = connect(state => ({\n  account: state.getIn(['accounts', me]),\n}))(({ account }) => (\n  <Permalink href={account.get('url')} to={`/@${account.get('acct')}`} title={account.get('acct')}>\n    <Avatar account={account} size={35} />\n  </Permalink>\n));\n\nconst mapDispatchToProps = (dispatch) => ({\n  openClosedRegistrationsModal() {\n    dispatch(openModal('CLOSED_REGISTRATIONS'));\n  },\n});\n\nexport default @withRouter \n@connect(null, mapDispatchToProps)\nclass Header extends React.PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    openClosedRegistrationsModal: PropTypes.func,\n    location: PropTypes.object,\n  };\n\n  render () {\n    const { signedIn } = this.context.identity;\n    const { location, openClosedRegistrationsModal } = this.props;\n\n    let content;\n\n    if (signedIn) {\n      content = (\n        <>\n          {location.pathname !== '/publish' && <Link to='/publish' className='button'><FormattedMessage id='compose_form.publish_form' defaultMessage='Publish' /></Link>}\n          <Account />\n        </>\n      );\n    } else {\n      let signupButton;\n\n      if (registrationsOpen) {\n        signupButton = (\n          <a href='/auth/sign_up' className='button button-tertiary'>\n            <FormattedMessage id='sign_in_banner.create_account' defaultMessage='Create account' />\n          </a>\n        );\n      } else {\n        signupButton = (\n          <button className='button button-tertiary' onClick={openClosedRegistrationsModal}>\n            <FormattedMessage id='sign_in_banner.create_account' defaultMessage='Create account' />\n          </button>\n        );\n      }\n\n      content = (\n        <>\n          <a href='/auth/sign_in' className='button'><FormattedMessage id='sign_in_banner.sign_in' defaultMessage='Sign in' /></a>\n          {signupButton}\n        </>\n      );\n    }\n\n    return (\n      <div className='ui__header'>\n        <Link to='/' className='ui__header__logo'><Logo /></Link>\n\n        <div className='ui__header__links'>\n          {content}\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport NotificationsContainer from './containers/notifications_container';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport LoadingBarContainer from './containers/loading_bar_container';\nimport ModalContainer from './containers/modal_container';\nimport { connect } from 'react-redux';\nimport { Redirect, Route, withRouter } from 'react-router-dom';\nimport { layoutFromWindow } from 'flavours/glitch/is_mobile';\nimport { debounce } from 'lodash';\nimport { uploadCompose, resetCompose, changeComposeSpoilerness } from 'flavours/glitch/actions/compose';\nimport { expandHomeTimeline } from 'flavours/glitch/actions/timelines';\nimport { expandNotifications, notificationsSetVisibility } from 'flavours/glitch/actions/notifications';\nimport { fetchServer } from 'flavours/glitch/actions/server';\nimport { clearHeight } from 'flavours/glitch/actions/height_cache';\nimport { changeLayout } from 'flavours/glitch/actions/app';\nimport { synchronouslySubmitMarkers, submitMarkers, fetchMarkers } from 'flavours/glitch/actions/markers';\nimport { WrappedSwitch, WrappedRoute } from './util/react_router_helpers';\nimport BundleColumnError from './components/bundle_column_error';\nimport UploadArea from './components/upload_area';\nimport PermaLink from 'flavours/glitch/components/permalink';\nimport ColumnsAreaContainer from './containers/columns_area_container';\nimport classNames from 'classnames';\nimport Favico from 'favico.js';\nimport PictureInPicture from 'flavours/glitch/features/picture_in_picture';\nimport {\n  Compose,\n  Status,\n  GettingStarted,\n  KeyboardShortcuts,\n  PublicTimeline,\n  CommunityTimeline,\n  AccountTimeline,\n  AccountGallery,\n  HomeTimeline,\n  Followers,\n  Following,\n  Reblogs,\n  Favourites,\n  DirectTimeline,\n  HashtagTimeline,\n  Notifications,\n  FollowRequests,\n  FavouritedStatuses,\n  BookmarkedStatuses,\n  FollowedTags,\n  ListTimeline,\n  Blocks,\n  DomainBlocks,\n  Mutes,\n  PinnedStatuses,\n  Lists,\n  GettingStartedMisc,\n  Directory,\n  Explore,\n  FollowRecommendations,\n  About,\n  PrivacyPolicy,\n} from './util/async-components';\nimport { HotKeys } from 'react-hotkeys';\nimport initialState, { me, owner, singleUserMode, showTrends, trendsAsLanding } from '../../initial_state';\nimport { closeOnboarding, INTRODUCTION_VERSION } from 'flavours/glitch/actions/onboarding';\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\nimport { Helmet } from 'react-helmet';\nimport Header from './components/header';\n\n// Dummy import, to make sure that <Status /> ends up in the application bundle.\n// Without this it ends up in ~8 very commonly used bundles.\nimport '../../../glitch/components/status';\n\nconst messages = defineMessages({\n  beforeUnload: { id: 'ui.beforeunload', defaultMessage: 'Your draft will be lost if you leave Mastodon.' },\n});\n\nconst mapStateToProps = state => ({\n  layout: state.getIn(['meta', 'layout']),\n  hasComposingText: state.getIn(['compose', 'text']).trim().length !== 0,\n  hasMediaAttachments: state.getIn(['compose', 'media_attachments']).size > 0,\n  canUploadMore: !state.getIn(['compose', 'media_attachments']).some(x => ['audio', 'video'].includes(x.get('type'))) && state.getIn(['compose', 'media_attachments']).size < 4,\n  layout: state.getIn(['meta', 'layout']),\n  layout_local_setting: state.getIn(['local_settings', 'layout']),\n  isWide: state.getIn(['local_settings', 'stretch']),\n  navbarUnder: state.getIn(['local_settings', 'navbar_under']),\n  dropdownMenuIsOpen: state.getIn(['dropdown_menu', 'openId']) !== null,\n  unreadNotifications: state.getIn(['notifications', 'unread']),\n  showFaviconBadge: state.getIn(['local_settings', 'notifications', 'favicon_badge']),\n  hicolorPrivacyIcons: state.getIn(['local_settings', 'hicolor_privacy_icons']),\n  moved: state.getIn(['accounts', me, 'moved']) && state.getIn(['accounts', state.getIn(['accounts', me, 'moved'])]),\n  firstLaunch: state.getIn(['settings', 'introductionVersion'], 0) < INTRODUCTION_VERSION,\n  username: state.getIn(['accounts', me, 'username']),\n});\n\nconst keyMap = {\n  help: '?',\n  new: 'n',\n  search: 's',\n  forceNew: 'option+n',\n  toggleComposeSpoilers: 'option+x',\n  focusColumn: ['1', '2', '3', '4', '5', '6', '7', '8', '9'],\n  reply: 'r',\n  favourite: 'f',\n  boost: 'b',\n  mention: 'm',\n  open: ['enter', 'o'],\n  openProfile: 'p',\n  moveDown: ['down', 'j'],\n  moveUp: ['up', 'k'],\n  back: 'backspace',\n  goToHome: 'g h',\n  goToNotifications: 'g n',\n  goToLocal: 'g l',\n  goToFederated: 'g t',\n  goToDirect: 'g d',\n  goToStart: 'g s',\n  goToFavourites: 'g f',\n  goToPinned: 'g p',\n  goToProfile: 'g u',\n  goToBlocked: 'g b',\n  goToMuted: 'g m',\n  goToRequests: 'g r',\n  toggleSpoiler: 'x',\n  bookmark: 'd',\n  toggleCollapse: 'shift+x',\n  toggleSensitive: 'h',\n  openMedia: 'e',\n};\n\nclass SwitchingColumnsArea extends React.PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    children: PropTypes.node,\n    location: PropTypes.object,\n    navbarUnder: PropTypes.bool,\n    mobile: PropTypes.bool,\n  };\n\n  componentWillMount () {\n    if (this.props.mobile) {\n      document.body.classList.toggle('layout-single-column', true);\n      document.body.classList.toggle('layout-multiple-columns', false);\n    } else {\n      document.body.classList.toggle('layout-single-column', false);\n      document.body.classList.toggle('layout-multiple-columns', true);\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (![this.props.location.pathname, '/'].includes(prevProps.location.pathname)) {\n      this.node.handleChildrenContentChange();\n    }\n\n    if (prevProps.mobile !== this.props.mobile) {\n      document.body.classList.toggle('layout-single-column', this.props.mobile);\n      document.body.classList.toggle('layout-multiple-columns', !this.props.mobile);\n    }\n  }\n\n  setRef = c => {\n    if (c) {\n      this.node = c;\n    }\n  };\n\n  render () {\n    const { children, mobile, navbarUnder } = this.props;\n    const { signedIn } = this.context.identity;\n\n    let redirect;\n\n    if (signedIn) {\n      if (mobile) {\n        redirect = <Redirect from='/' to='/home' exact />;\n      } else {\n        redirect = <Redirect from='/' to='/getting-started' exact />;\n      }\n    } else if (singleUserMode && owner && initialState?.accounts[owner]) {\n      redirect = <Redirect from='/' to={`/@${initialState.accounts[owner].username}`} exact />;\n    } else if (showTrends && trendsAsLanding) {\n      redirect = <Redirect from='/' to='/explore' exact />;\n    } else {\n      redirect = <Redirect from='/' to='/about' exact />;\n    }\n\n    return (\n      <ColumnsAreaContainer ref={this.setRef} singleColumn={mobile} navbarUnder={navbarUnder}>\n        <WrappedSwitch>\n          {redirect}\n\n          <WrappedRoute path='/getting-started' component={GettingStarted} content={children} />\n          <WrappedRoute path='/keyboard-shortcuts' component={KeyboardShortcuts} content={children} />\n          <WrappedRoute path='/about' component={About} content={children} />\n          <WrappedRoute path='/privacy-policy' component={PrivacyPolicy} content={children} />\n\n          <WrappedRoute path={['/home', '/timelines/home']} component={HomeTimeline} content={children} />\n          <WrappedRoute path={['/public', '/timelines/public']} exact component={PublicTimeline} content={children} />\n          <WrappedRoute path={['/public/local', '/timelines/public/local']} exact component={CommunityTimeline} content={children} />\n          <WrappedRoute path={['/conversations', '/timelines/direct']} component={DirectTimeline} content={children} />\n          <WrappedRoute path='/tags/:id' component={HashtagTimeline} content={children} />\n          <WrappedRoute path='/lists/:id' component={ListTimeline} content={children} />\n          <WrappedRoute path='/notifications' component={Notifications} content={children} />\n          <WrappedRoute path='/favourites' component={FavouritedStatuses} content={children} />\n\n          <WrappedRoute path='/bookmarks' component={BookmarkedStatuses} content={children} />\n          <WrappedRoute path='/pinned' component={PinnedStatuses} content={children} />\n\n          <WrappedRoute path='/start' component={FollowRecommendations} content={children} />\n          <WrappedRoute path='/directory' component={Directory} content={children} />\n          <WrappedRoute path={['/explore', '/search']} component={Explore} content={children} />\n          <WrappedRoute path={['/publish', '/statuses/new']} component={Compose} content={children} />\n\n          <WrappedRoute path={['/@:acct', '/accounts/:id']} exact component={AccountTimeline} content={children} />\n          <WrappedRoute path='/@:acct/tagged/:tagged?' exact component={AccountTimeline} content={children} />\n          <WrappedRoute path={['/@:acct/with_replies', '/accounts/:id/with_replies']} component={AccountTimeline} content={children} componentParams={{ withReplies: true }} />\n          <WrappedRoute path={['/accounts/:id/followers', '/users/:acct/followers', '/@:acct/followers']} component={Followers} content={children} />\n          <WrappedRoute path={['/accounts/:id/following', '/users/:acct/following', '/@:acct/following']} component={Following} content={children} />\n          <WrappedRoute path={['/@:acct/media', '/accounts/:id/media']} component={AccountGallery} content={children} />\n          <WrappedRoute path='/@:acct/:statusId' exact component={Status} content={children} />\n          <WrappedRoute path='/@:acct/:statusId/reblogs' component={Reblogs} content={children} />\n          <WrappedRoute path='/@:acct/:statusId/favourites' component={Favourites} content={children} />\n\n          {/* Legacy routes, cannot be easily factored with other routes because they share a param name */}\n          <WrappedRoute path='/timelines/tag/:id' component={HashtagTimeline} content={children} />\n          <WrappedRoute path='/timelines/list/:id' component={ListTimeline} content={children} />\n          <WrappedRoute path='/statuses/:statusId' exact component={Status} content={children} />\n          <WrappedRoute path='/statuses/:statusId/reblogs' component={Reblogs} content={children} />\n          <WrappedRoute path='/statuses/:statusId/favourites' component={Favourites} content={children} />\n\n          <WrappedRoute path='/follow_requests' component={FollowRequests} content={children} />\n          <WrappedRoute path='/blocks' component={Blocks} content={children} />\n          <WrappedRoute path='/domain_blocks' component={DomainBlocks} content={children} />\n          <WrappedRoute path='/followed_tags' component={FollowedTags} content={children} />\n          <WrappedRoute path='/mutes' component={Mutes} content={children} />\n          <WrappedRoute path='/lists' component={Lists} content={children} />\n          <WrappedRoute path='/getting-started-misc' component={GettingStartedMisc} content={children} />\n\n          <Route component={BundleColumnError} />\n        </WrappedSwitch>\n      </ColumnsAreaContainer>\n    );\n  }\n\n}\n\nexport default @connect(mapStateToProps)\n@injectIntl\n@withRouter\nclass UI extends React.Component {\n\n  static contextTypes = {\n    identity: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    children: PropTypes.node,\n    layout_local_setting: PropTypes.string,\n    isWide: PropTypes.bool,\n    systemFontUi: PropTypes.bool,\n    navbarUnder: PropTypes.bool,\n    isComposing: PropTypes.bool,\n    hasComposingText: PropTypes.bool,\n    hasMediaAttachments: PropTypes.bool,\n    canUploadMore: PropTypes.bool,\n    match: PropTypes.object.isRequired,\n    location: PropTypes.object.isRequired,\n    history: PropTypes.object.isRequired,\n    intl: PropTypes.object.isRequired,\n    dropdownMenuIsOpen: PropTypes.bool,\n    unreadNotifications: PropTypes.number,\n    showFaviconBadge: PropTypes.bool,\n    moved: ImmutablePropTypes.map,\n    layout: PropTypes.string.isRequired,\n    firstLaunch: PropTypes.bool,\n    username: PropTypes.string,\n  };\n\n  state = {\n    draggingOver: false,\n  };\n\n  handleBeforeUnload = (e) => {\n    const { intl, dispatch, hasComposingText, hasMediaAttachments } = this.props;\n\n    dispatch(synchronouslySubmitMarkers());\n\n    if (hasComposingText || hasMediaAttachments) {\n      // Setting returnValue to any string causes confirmation dialog.\n      // Many browsers no longer display this text to users,\n      // but we set user-friendly message for other browsers, e.g. Edge.\n      e.returnValue = intl.formatMessage(messages.beforeUnload);\n    }\n  };\n\n  handleDragEnter = (e) => {\n    e.preventDefault();\n\n    if (!this.dragTargets) {\n      this.dragTargets = [];\n    }\n\n    if (this.dragTargets.indexOf(e.target) === -1) {\n      this.dragTargets.push(e.target);\n    }\n\n    if (e.dataTransfer && e.dataTransfer.types.includes('Files') && this.props.canUploadMore && this.context.identity.signedIn) {\n      this.setState({ draggingOver: true });\n    }\n  };\n\n  handleDragOver = (e) => {\n    if (this.dataTransferIsText(e.dataTransfer)) return false;\n    e.preventDefault();\n    e.stopPropagation();\n\n    try {\n      e.dataTransfer.dropEffect = 'copy';\n    } catch (err) {\n\n    }\n\n    return false;\n  };\n\n  handleDrop = (e) => {\n    if (this.dataTransferIsText(e.dataTransfer)) return;\n\n    e.preventDefault();\n\n    this.setState({ draggingOver: false });\n    this.dragTargets = [];\n\n    if (e.dataTransfer && e.dataTransfer.files.length >= 1 && this.props.canUploadMore && this.context.identity.signedIn) {\n      this.props.dispatch(uploadCompose(e.dataTransfer.files));\n    }\n  };\n\n  handleDragLeave = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.dragTargets = this.dragTargets.filter(el => el !== e.target && this.node.contains(el));\n\n    if (this.dragTargets.length > 0) {\n      return;\n    }\n\n    this.setState({ draggingOver: false });\n  };\n\n  dataTransferIsText = (dataTransfer) => {\n    return (dataTransfer && Array.from(dataTransfer.types).filter((type) => type === 'text/plain').length === 1);\n  };\n\n  closeUploadModal = () => {\n    this.setState({ draggingOver: false });\n  };\n\n  handleServiceWorkerPostMessage = ({ data }) => {\n    if (data.type === 'navigate') {\n      this.props.history.push(data.path);\n    } else {\n      console.warn('Unknown message type:', data.type);\n    }\n  };\n\n  handleVisibilityChange = () => {\n    const visibility = !document[this.visibilityHiddenProp];\n    this.props.dispatch(notificationsSetVisibility(visibility));\n    if (visibility) {\n      this.props.dispatch(submitMarkers({ immediate: true }));\n    }\n  };\n\n  handleLayoutChange = debounce(() => {\n    this.props.dispatch(clearHeight()); // The cached heights are no longer accurate, invalidate\n  }, 500, {\n    trailing: true,\n  });\n\n  handleResize = () => {\n    const layout = layoutFromWindow(this.props.layout_local_setting);\n\n    if (layout !== this.props.layout) {\n      this.handleLayoutChange.cancel();\n      this.props.dispatch(changeLayout(layout));\n    } else {\n      this.handleLayoutChange();\n    }\n  };\n\n  componentDidMount () {\n    const { signedIn } = this.context.identity;\n\n    window.addEventListener('beforeunload', this.handleBeforeUnload, false);\n    window.addEventListener('resize', this.handleResize, { passive: true });\n\n    document.addEventListener('dragenter', this.handleDragEnter, false);\n    document.addEventListener('dragover', this.handleDragOver, false);\n    document.addEventListener('drop', this.handleDrop, false);\n    document.addEventListener('dragleave', this.handleDragLeave, false);\n    document.addEventListener('dragend', this.handleDragEnd, false);\n\n    if ('serviceWorker' in  navigator) {\n      navigator.serviceWorker.addEventListener('message', this.handleServiceWorkerPostMessage);\n    }\n\n    this.favicon = new Favico({ animation:'none' });\n\n    // On first launch, redirect to the follow recommendations page\n    if (signedIn && this.props.firstLaunch) {\n      this.context.router.history.replace('/start');\n      this.props.dispatch(closeOnboarding());\n    }\n\n    if (signedIn) {\n      this.props.dispatch(fetchMarkers());\n      this.props.dispatch(expandHomeTimeline());\n      this.props.dispatch(expandNotifications());\n\n      setTimeout(() => this.props.dispatch(fetchServer()), 3000);\n    }\n\n    this.hotkeys.__mousetrap__.stopCallback = (e, element) => {\n      return ['TEXTAREA', 'SELECT', 'INPUT'].includes(element.tagName);\n    };\n\n    if (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support\n      this.visibilityHiddenProp = 'hidden';\n      this.visibilityChange = 'visibilitychange';\n    } else if (typeof document.msHidden !== 'undefined') {\n      this.visibilityHiddenProp = 'msHidden';\n      this.visibilityChange = 'msvisibilitychange';\n    } else if (typeof document.webkitHidden !== 'undefined') {\n      this.visibilityHiddenProp = 'webkitHidden';\n      this.visibilityChange = 'webkitvisibilitychange';\n    }\n\n    if (this.visibilityChange !== undefined) {\n      document.addEventListener(this.visibilityChange, this.handleVisibilityChange, false);\n      this.handleVisibilityChange();\n    }\n  }\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.layout_local_setting !== this.props.layout_local_setting) {\n      const layout = layoutFromWindow(nextProps.layout_local_setting);\n\n      if (layout !== this.props.layout) {\n        this.handleLayoutChange.cancel();\n        this.props.dispatch(changeLayout(layout));\n      } else {\n        this.handleLayoutChange();\n      }\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.props.unreadNotifications != prevProps.unreadNotifications ||\n        this.props.showFaviconBadge != prevProps.showFaviconBadge) {\n      if (this.favicon) {\n        try {\n          this.favicon.badge(this.props.showFaviconBadge ? this.props.unreadNotifications : 0);\n        } catch (err) {\n          console.error(err);\n        }\n      }\n    }\n  }\n\n  componentWillUnmount () {\n    if (this.visibilityChange !== undefined) {\n      document.removeEventListener(this.visibilityChange, this.handleVisibilityChange);\n    }\n\n    window.removeEventListener('beforeunload', this.handleBeforeUnload);\n    window.removeEventListener('resize', this.handleResize);\n\n    document.removeEventListener('dragenter', this.handleDragEnter);\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragleave', this.handleDragLeave);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  setRef = c => {\n    this.node = c;\n  };\n\n  handleHotkeyNew = e => {\n    e.preventDefault();\n\n    const element = this.node.querySelector('.compose-form__autosuggest-wrapper textarea');\n\n    if (element) {\n      element.focus();\n    }\n  };\n\n  handleHotkeySearch = e => {\n    e.preventDefault();\n\n    const element = this.node.querySelector('.search__input');\n\n    if (element) {\n      element.focus();\n    }\n  };\n\n  handleHotkeyForceNew = e => {\n    this.handleHotkeyNew(e);\n    this.props.dispatch(resetCompose());\n  };\n\n  handleHotkeyToggleComposeSpoilers = e => {\n    e.preventDefault();\n    this.props.dispatch(changeComposeSpoilerness());\n  };\n\n  handleHotkeyFocusColumn = e => {\n    const index  = (e.key * 1) + 1; // First child is drawer, skip that\n    const column = this.node.querySelector(`.column:nth-child(${index})`);\n    if (!column) return;\n    const container = column.querySelector('.scrollable');\n\n    if (container) {\n      const status = container.querySelector('.focusable');\n\n      if (status) {\n        if (container.scrollTop > status.offsetTop) {\n          status.scrollIntoView(true);\n        }\n        status.focus();\n      }\n    }\n  };\n\n  handleHotkeyBack = () => {\n    // if history is exhausted, or we would leave mastodon, just go to root.\n    if (window.history.state) {\n      this.props.history.goBack();\n    } else {\n      this.props.history.push('/');\n    }\n  };\n\n  setHotkeysRef = c => {\n    this.hotkeys = c;\n  };\n\n  handleHotkeyToggleHelp = () => {\n    if (this.props.location.pathname === '/keyboard-shortcuts') {\n      this.props.history.goBack();\n    } else {\n      this.props.history.push('/keyboard-shortcuts');\n    }\n  };\n\n  handleHotkeyGoToHome = () => {\n    this.props.history.push('/home');\n  };\n\n  handleHotkeyGoToNotifications = () => {\n    this.props.history.push('/notifications');\n  };\n\n  handleHotkeyGoToLocal = () => {\n    this.props.history.push('/public/local');\n  };\n\n  handleHotkeyGoToFederated = () => {\n    this.props.history.push('/public');\n  };\n\n  handleHotkeyGoToDirect = () => {\n    this.props.history.push('/conversations');\n  };\n\n  handleHotkeyGoToStart = () => {\n    this.props.history.push('/getting-started');\n  };\n\n  handleHotkeyGoToFavourites = () => {\n    this.props.history.push('/favourites');\n  };\n\n  handleHotkeyGoToPinned = () => {\n    this.props.history.push('/pinned');\n  };\n\n  handleHotkeyGoToProfile = () => {\n    this.props.history.push(`/@${this.props.username}`);\n  };\n\n  handleHotkeyGoToBlocked = () => {\n    this.props.history.push('/blocks');\n  };\n\n  handleHotkeyGoToMuted = () => {\n    this.props.history.push('/mutes');\n  };\n\n  handleHotkeyGoToRequests = () => {\n    this.props.history.push('/follow_requests');\n  };\n\n  render () {\n    const { draggingOver } = this.state;\n    const { children, isWide, navbarUnder, location, dropdownMenuIsOpen, layout, moved } = this.props;\n\n    const columnsClass = layout => {\n      switch (layout) {\n      case 'single':\n        return 'single-column';\n      case 'multiple':\n        return 'multi-columns';\n      default:\n        return 'auto-columns';\n      }\n    };\n\n    const className = classNames('ui', columnsClass(layout), {\n      'wide': isWide,\n      'system-font': this.props.systemFontUi,\n      'navbar-under': navbarUnder,\n      'hicolor-privacy-icons': this.props.hicolorPrivacyIcons,\n    });\n\n    const handlers = {\n      help: this.handleHotkeyToggleHelp,\n      new: this.handleHotkeyNew,\n      search: this.handleHotkeySearch,\n      forceNew: this.handleHotkeyForceNew,\n      toggleComposeSpoilers: this.handleHotkeyToggleComposeSpoilers,\n      focusColumn: this.handleHotkeyFocusColumn,\n      back: this.handleHotkeyBack,\n      goToHome: this.handleHotkeyGoToHome,\n      goToNotifications: this.handleHotkeyGoToNotifications,\n      goToLocal: this.handleHotkeyGoToLocal,\n      goToFederated: this.handleHotkeyGoToFederated,\n      goToDirect: this.handleHotkeyGoToDirect,\n      goToStart: this.handleHotkeyGoToStart,\n      goToFavourites: this.handleHotkeyGoToFavourites,\n      goToPinned: this.handleHotkeyGoToPinned,\n      goToProfile: this.handleHotkeyGoToProfile,\n      goToBlocked: this.handleHotkeyGoToBlocked,\n      goToMuted: this.handleHotkeyGoToMuted,\n      goToRequests: this.handleHotkeyGoToRequests,\n    };\n\n    return (\n      <HotKeys keyMap={keyMap} handlers={handlers} ref={this.setHotkeysRef} attach={window} focused>\n        <div className={className} ref={this.setRef} style={{ pointerEvents: dropdownMenuIsOpen ? 'none' : null }}>\n          {moved && (<div className='flash-message alert'>\n            <FormattedMessage\n              id='moved_to_warning'\n              defaultMessage='This account is marked as moved to {moved_to_link}, and may thus not accept new follows.'\n              values={{ moved_to_link: (\n                <PermaLink href={moved.get('url')} to={`/@${moved.get('acct')}`}>\n                  @{moved.get('acct')}\n                </PermaLink>\n              ) }}\n            />\n          </div>)}\n\n          <Header />\n\n          <SwitchingColumnsArea location={location} mobile={layout === 'mobile' || layout === 'single-column'} navbarUnder={navbarUnder}>\n            {children}\n          </SwitchingColumnsArea>\n\n          {layout !== 'mobile' && <PictureInPicture />}\n          <NotificationsContainer />\n          <LoadingBarContainer className='loading-bar' />\n          <ModalContainer />\n          <UploadArea active={draggingOver} onClose={this.closeUploadModal} />\n        </div>\n      </HotKeys>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport { source_url } from 'flavours/glitch/initial_state';\nimport { preferencesLink } from 'flavours/glitch/utils/backend_links';\nimport StackTrace from 'stacktrace-js';\nimport { Helmet } from 'react-helmet';\n\nexport default class ErrorBoundary extends React.PureComponent {\n\n  static propTypes = {\n    children: PropTypes.node,\n  };\n\n  state = {\n    hasError: false,\n    errorMessage: undefined,\n    stackTrace: undefined,\n    mappedStackTrace: undefined,\n    componentStack: undefined,\n  };\n\n  componentDidCatch(error, info) {\n    this.setState({\n      hasError: true,\n      errorMessage: error.toString(),\n      stackTrace: error.stack,\n      componentStack: info && info.componentStack,\n      mappedStackTrace: undefined,\n    });\n\n    StackTrace.fromError(error).then((stackframes) => {\n      this.setState({\n        mappedStackTrace: stackframes.map((sf) => sf.toString()).join('\\n'),\n      });\n    }).catch(() => {\n      this.setState({\n        mappedStackTrace: undefined,\n      });\n    });\n  }\n\n  handleReload(e) {\n    e.preventDefault();\n    window.location.reload();\n  }\n\n  render() {\n    const { hasError, errorMessage, stackTrace, mappedStackTrace, componentStack } = this.state;\n\n    if (!hasError) return this.props.children;\n\n    const likelyBrowserAddonIssue = errorMessage && errorMessage.includes('NotFoundError');\n\n    let debugInfo = '';\n    if (stackTrace) {\n      debugInfo += 'Stack trace\\n-----------\\n\\n```\\n' + errorMessage + '\\n' + stackTrace.toString() + '\\n```';\n    }\n    if (mappedStackTrace) {\n      debugInfo += 'Mapped stack trace\\n-----------\\n\\n```\\n' + errorMessage + '\\n' + mappedStackTrace.toString() + '\\n```';\n    }\n    if (componentStack) {\n      if (debugInfo) {\n        debugInfo += '\\n\\n\\n';\n      }\n      debugInfo += 'React component stack\\n---------------------\\n\\n```\\n' + componentStack.toString() + '\\n```';\n    }\n\n    let issueTracker = source_url;\n    if (source_url.match(/^https:\\/\\/github\\.com\\/[^/]+\\/[^/]+\\/?$/)) {\n      issueTracker = source_url + '/issues';\n    }\n\n    return (\n      <div tabIndex='-1'>\n        <div className='error-boundary'>\n          <h1><FormattedMessage id='web_app_crash.title' defaultMessage=\"We're sorry, but something went wrong with the Mastodon app.\" /></h1>\n          <p>\n            <FormattedMessage id='web_app_crash.content' defaultMessage='You could try any of the following:' />\n          </p>\n          <ul>\n            { likelyBrowserAddonIssue && (\n              <li>\n                <FormattedMessage\n                  id='web_app_crash.disable_addons'\n                  defaultMessage='Disable browser add-ons or built-in translation tools'\n                />\n              </li>\n            ) }\n            <li>\n              <FormattedMessage\n                id='web_app_crash.report_issue'\n                defaultMessage='Report a bug in the {issuetracker}'\n                values={{ issuetracker: <a href={issueTracker} rel='noopener noreferrer' target='_blank'><FormattedMessage id='web_app_crash.issue_tracker' defaultMessage='issue tracker' /></a> }}\n              />\n              { debugInfo !== '' && (\n                <details>\n                  <summary><FormattedMessage id='web_app_crash.debug_info' defaultMessage='Debug information' /></summary>\n                  <textarea\n                    className='web_app_crash-stacktrace'\n                    value={debugInfo}\n                    rows='10'\n                    readOnly\n                  />\n                </details>\n              )}\n            </li>\n            <li>\n              <FormattedMessage\n                id='web_app_crash.reload_page'\n                defaultMessage='{reload} the current page'\n                values={{ reload: <a href='#' onClick={this.handleReload}><FormattedMessage id='web_app_crash.reload' defaultMessage='Reload' /></a> }}\n              />\n            </li>\n            { preferencesLink !== undefined && (\n              <li>\n                <FormattedMessage\n                  id='web_app_crash.change_your_settings'\n                  defaultMessage='Change your {settings}'\n                  values={{ settings: <a href={preferencesLink}><FormattedMessage id='web_app_crash.settings' defaultMessage='settings' /></a> }}\n                />\n              </li>\n            )}\n          </ul>\n        </div>\n\n        <Helmet>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </div>\n    );\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Helmet } from 'react-helmet';\nimport { IntlProvider, addLocaleData } from 'react-intl';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { ScrollContext } from 'react-router-scroll-4';\nimport configureStore from 'flavours/glitch/store/configureStore';\nimport UI from 'flavours/glitch/features/ui';\nimport { fetchCustomEmojis } from 'flavours/glitch/actions/custom_emojis';\nimport { hydrateStore } from 'flavours/glitch/actions/store';\nimport { checkDeprecatedLocalSettings } from 'flavours/glitch/actions/local_settings';\nimport { connectUserStream } from 'flavours/glitch/actions/streaming';\nimport ErrorBoundary from 'flavours/glitch/components/error_boundary';\nimport initialState, { title as siteTitle } from 'flavours/glitch/initial_state';\nimport { getLocale } from 'locales';\n\nconst { localeData, messages } = getLocale();\naddLocaleData(localeData);\n\nconst title = process.env.NODE_ENV === 'production' ? siteTitle : `${siteTitle} (Dev)`;\n\nexport const store = configureStore();\nconst hydrateAction = hydrateStore(initialState);\nstore.dispatch(hydrateAction);\n\n// check for deprecated local settings\nstore.dispatch(checkDeprecatedLocalSettings());\n\nif (initialState.meta.me) {\n  store.dispatch(fetchCustomEmojis());\n}\n\nconst createIdentityContext = state => ({\n  signedIn: !!state.meta.me,\n  accountId: state.meta.me,\n  disabledAccountId: state.meta.disabled_account_id,\n  accessToken: state.meta.access_token,\n  permissions: state.role ? state.role.permissions : 0,\n});\n\nexport default class Mastodon extends React.PureComponent {\n\n  static propTypes = {\n    locale: PropTypes.string.isRequired,\n  };\n\n  static childContextTypes = {\n    identity: PropTypes.shape({\n      signedIn: PropTypes.bool.isRequired,\n      accountId: PropTypes.string,\n      disabledAccountId: PropTypes.string,\n      accessToken: PropTypes.string,\n    }).isRequired,\n  };\n\n  identity = createIdentityContext(initialState);\n\n  getChildContext() {\n    return {\n      identity: this.identity,\n    };\n  }\n\n  componentDidMount() {\n    if (this.identity.signedIn) {\n      this.disconnect = store.dispatch(connectUserStream());\n    }\n  }\n\n  componentWillUnmount () {\n    if (this.disconnect) {\n      this.disconnect();\n      this.disconnect = null;\n    }\n  }\n\n  shouldUpdateScroll (_, { location }) {\n    return !(location.state?.mastodonModalKey);\n  }\n\n  render () {\n    const { locale } = this.props;\n\n    return (\n      <IntlProvider locale={locale} messages={messages}>\n        <ReduxProvider store={store}>\n          <ErrorBoundary>\n            <BrowserRouter>\n              <ScrollContext shouldUpdateScroll={this.shouldUpdateScroll}>\n                <Route path='/' component={UI} />\n              </ScrollContext>\n            </BrowserRouter>\n\n            <Helmet defaultTitle={title} titleTemplate={`%s - ${title}`} />\n          </ErrorBoundary>\n        </ReduxProvider>\n      </IntlProvider>\n    );\n  }\n\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { setupBrowserNotifications } from 'flavours/glitch/actions/notifications';\nimport Mastodon, { store } from 'flavours/glitch/containers/mastodon';\nimport { me } from 'flavours/glitch/initial_state';\nimport ready from 'flavours/glitch/ready';\n\nconst perf = require('flavours/glitch/performance');\n\n/**\n * @returns {Promise<void>}\n */\nfunction main() {\n  perf.start('main()');\n\n  return ready(async () => {\n    const mountNode = document.getElementById('mastodon');\n    const props = JSON.parse(mountNode.getAttribute('data-props'));\n\n    ReactDOM.render(<Mastodon {...props} />, mountNode);\n    store.dispatch(setupBrowserNotifications());\n\n    if (process.env.NODE_ENV === 'production' && me && 'serviceWorker' in navigator) {\n      const { Workbox } = await import('workbox-window');\n      const wb = new Workbox('/sw.js');\n      /** @type {ServiceWorkerRegistration} */\n      let registration;\n\n      try {\n        registration = await wb.register();\n      } catch (err) {\n        console.error(err);\n      }\n\n      if (registration) {\n        const registerPushNotifications = await import('flavours/glitch/actions/push_notifications');\n\n        store.dispatch(registerPushNotifications.register());\n      }\n    }\n\n    perf.stop('main()');\n  });\n}\n\nexport default main;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport default class Button extends React.PureComponent {\n\n  static propTypes = {\n    text: PropTypes.node,\n    onClick: PropTypes.func,\n    disabled: PropTypes.bool,\n    block: PropTypes.bool,\n    secondary: PropTypes.bool,\n    className: PropTypes.string,\n    title: PropTypes.string,\n    children: PropTypes.node,\n  };\n\n  handleClick = (e) => {\n    if (!this.props.disabled) {\n      this.props.onClick(e);\n    }\n  };\n\n  setRef = (c) => {\n    this.node = c;\n  };\n\n  focus() {\n    this.node.focus();\n  }\n\n  render () {\n    let attrs = {\n      className: classNames('button', this.props.className, {\n        'button-secondary': this.props.secondary,\n        'button--block': this.props.block,\n      }),\n      disabled: this.props.disabled,\n      onClick: this.handleClick,\n      ref: this.setRef,\n    };\n\n    if (this.props.title) attrs.title = this.props.title;\n\n    return (\n      <button {...attrs}>\n        {this.props.text || this.props.children}\n      </button>\n    );\n  }\n\n}\n","export function EmojiPicker () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/emoji_picker\" */'flavours/glitch/features/emoji/emoji_picker');\n}\n\nexport function Compose () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/compose\" */'flavours/glitch/features/compose');\n}\n\nexport function Notifications () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/notifications\" */'flavours/glitch/features/notifications');\n}\n\nexport function HomeTimeline () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/home_timeline\" */'flavours/glitch/features/home_timeline');\n}\n\nexport function PublicTimeline () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/public_timeline\" */'flavours/glitch/features/public_timeline');\n}\n\nexport function CommunityTimeline () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/community_timeline\" */'flavours/glitch/features/community_timeline');\n}\n\nexport function HashtagTimeline () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/hashtag_timeline\" */'flavours/glitch/features/hashtag_timeline');\n}\n\nexport function ListTimeline () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/list_timeline\" */'flavours/glitch/features/list_timeline');\n}\n\nexport function Lists () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/lists\" */'flavours/glitch/features/lists');\n}\n\nexport function ListEditor () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/list_editor\" */'flavours/glitch/features/list_editor');\n}\n\nexport function PinnedAccountsEditor () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/pinned_accounts_editor\" */'flavours/glitch/features/pinned_accounts_editor');\n}\n\nexport function DirectTimeline() {\n  return import(/* webpackChunkName: \"flavours/glitch/async/direct_timeline\" */'flavours/glitch/features/direct_timeline');\n}\n\nexport function Status () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/status\" */'flavours/glitch/features/status');\n}\n\nexport function GettingStarted () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/getting_started\" */'flavours/glitch/features/getting_started');\n}\n\nexport function KeyboardShortcuts () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/keyboard_shortcuts\" */'flavours/glitch/features/keyboard_shortcuts');\n}\n\nexport function PinnedStatuses () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/pinned_statuses\" */'flavours/glitch/features/pinned_statuses');\n}\n\nexport function AccountTimeline () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/account_timeline\" */'flavours/glitch/features/account_timeline');\n}\n\nexport function AccountGallery () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/account_gallery\" */'flavours/glitch/features/account_gallery');\n}\n\nexport function Followers () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/followers\" */'flavours/glitch/features/followers');\n}\n\nexport function Following () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/following\" */'flavours/glitch/features/following');\n}\n\nexport function Reblogs () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/reblogs\" */'flavours/glitch/features/reblogs');\n}\n\nexport function Favourites () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/favourites\" */'flavours/glitch/features/favourites');\n}\n\nexport function FollowRequests () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/follow_requests\" */'flavours/glitch/features/follow_requests');\n}\n\nexport function GenericNotFound () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/generic_not_found\" */'flavours/glitch/features/generic_not_found');\n}\n\nexport function FavouritedStatuses () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/favourited_statuses\" */'flavours/glitch/features/favourited_statuses');\n}\n\nexport function FollowedTags () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/followed_tags\" */'flavours/glitch/features/followed_tags');\n}\n\nexport function BookmarkedStatuses () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/bookmarked_statuses\" */'flavours/glitch/features/bookmarked_statuses');\n}\n\nexport function Blocks () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/blocks\" */'flavours/glitch/features/blocks');\n}\n\nexport function DomainBlocks () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/domain_blocks\" */'flavours/glitch/features/domain_blocks');\n}\n\nexport function Mutes () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/mutes\" */'flavours/glitch/features/mutes');\n}\n\nexport function OnboardingModal () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/onboarding_modal\" */'flavours/glitch/features/ui/components/onboarding_modal');\n}\n\nexport function MuteModal () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/mute_modal\" */'flavours/glitch/features/ui/components/mute_modal');\n}\n\nexport function BlockModal () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/block_modal\" */'flavours/glitch/features/ui/components/block_modal');\n}\n\nexport function ReportModal () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/report_modal\" */'flavours/glitch/features/ui/components/report_modal');\n}\n\nexport function SettingsModal () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/settings_modal\" */'flavours/glitch/features/local_settings');\n}\n\nexport function MediaGallery () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/media_gallery\" */'flavours/glitch/components/media_gallery');\n}\n\nexport function Video () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/video\" */'flavours/glitch/features/video');\n}\n\nexport function Audio () {\n  return import(/* webpackChunkName: \"features/glitch/async/audio\" */'flavours/glitch/features/audio');\n}\n\nexport function EmbedModal () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/embed_modal\" */'flavours/glitch/features/ui/components/embed_modal');\n}\n\nexport function GettingStartedMisc () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/getting_started_misc\" */'flavours/glitch/features/getting_started_misc');\n}\n\nexport function ListAdder () {\n  return import(/* webpackChunkName: \"features/glitch/async/list_adder\" */'flavours/glitch/features/list_adder');\n}\n\nexport function Tesseract () {\n  return import(/*webpackChunkName: \"tesseract\" */'tesseract.js');\n}\n\nexport function Directory () {\n  return import(/* webpackChunkName: \"features/glitch/async/directory\" */'flavours/glitch/features/directory');\n}\n\nexport function FollowRecommendations () {\n  return import(/* webpackChunkName: \"features/glitch/async/follow_recommendations\" */'flavours/glitch/features/follow_recommendations');\n}\n\nexport function CompareHistoryModal () {\n  return import(/*webpackChunkName: \"flavours/glitch/async/compare_history_modal\" */'flavours/glitch/features/ui/components/compare_history_modal');\n}\n\nexport function FilterModal () {\n  return import(/*webpackChunkName: \"flavours/glitch/async/filter_modal\" */'flavours/glitch/features/ui/components/filter_modal');\n}\n\nexport function Explore () {\n  return import(/* webpackChunkName: \"flavours/glitch/async/explore\" */'flavours/glitch/features/explore');\n}\n\nexport function InteractionModal () {\n  return import(/*webpackChunkName: \"flavours/glitch/async/modals/interaction_modal\" */'flavours/glitch/features/interaction_modal');\n}\n\nexport function SubscribedLanguagesModal () {\n  return import(/*webpackChunkName: \"flavours/glitch/async/modals/subscribed_languages_modal\" */'flavours/glitch/features/subscribed_languages_modal');\n}\n\nexport function ClosedRegistrationsModal () {\n  return import(/*webpackChunkName: \"flavours/glitch/async/modals/closed_registrations_modal\" */'flavours/glitch/features/closed_registrations_modal');\n}\n\nexport function About () {\n  return import(/*webpackChunkName: \"features/glitch/async/about\" */'flavours/glitch/features/about');\n}\n\nexport function PrivacyPolicy () {\n  return import(/*webpackChunkName: \"features/glitch/async/privacy_policy\" */'flavours/glitch/features/privacy_policy');\n}\n","import api, { getLinks } from '../api';\nimport { importAccount, importFetchedAccount, importFetchedAccounts } from './importer';\n\nexport const ACCOUNT_FETCH_REQUEST = 'ACCOUNT_FETCH_REQUEST';\nexport const ACCOUNT_FETCH_SUCCESS = 'ACCOUNT_FETCH_SUCCESS';\nexport const ACCOUNT_FETCH_FAIL    = 'ACCOUNT_FETCH_FAIL';\n\nexport const ACCOUNT_LOOKUP_REQUEST = 'ACCOUNT_LOOKUP_REQUEST';\nexport const ACCOUNT_LOOKUP_SUCCESS = 'ACCOUNT_LOOKUP_SUCCESS';\nexport const ACCOUNT_LOOKUP_FAIL    = 'ACCOUNT_LOOKUP_FAIL';\n\nexport const ACCOUNT_FOLLOW_REQUEST = 'ACCOUNT_FOLLOW_REQUEST';\nexport const ACCOUNT_FOLLOW_SUCCESS = 'ACCOUNT_FOLLOW_SUCCESS';\nexport const ACCOUNT_FOLLOW_FAIL    = 'ACCOUNT_FOLLOW_FAIL';\n\nexport const ACCOUNT_UNFOLLOW_REQUEST = 'ACCOUNT_UNFOLLOW_REQUEST';\nexport const ACCOUNT_UNFOLLOW_SUCCESS = 'ACCOUNT_UNFOLLOW_SUCCESS';\nexport const ACCOUNT_UNFOLLOW_FAIL    = 'ACCOUNT_UNFOLLOW_FAIL';\n\nexport const ACCOUNT_BLOCK_REQUEST = 'ACCOUNT_BLOCK_REQUEST';\nexport const ACCOUNT_BLOCK_SUCCESS = 'ACCOUNT_BLOCK_SUCCESS';\nexport const ACCOUNT_BLOCK_FAIL    = 'ACCOUNT_BLOCK_FAIL';\n\nexport const ACCOUNT_UNBLOCK_REQUEST = 'ACCOUNT_UNBLOCK_REQUEST';\nexport const ACCOUNT_UNBLOCK_SUCCESS = 'ACCOUNT_UNBLOCK_SUCCESS';\nexport const ACCOUNT_UNBLOCK_FAIL    = 'ACCOUNT_UNBLOCK_FAIL';\n\nexport const ACCOUNT_MUTE_REQUEST = 'ACCOUNT_MUTE_REQUEST';\nexport const ACCOUNT_MUTE_SUCCESS = 'ACCOUNT_MUTE_SUCCESS';\nexport const ACCOUNT_MUTE_FAIL    = 'ACCOUNT_MUTE_FAIL';\n\nexport const ACCOUNT_UNMUTE_REQUEST = 'ACCOUNT_UNMUTE_REQUEST';\nexport const ACCOUNT_UNMUTE_SUCCESS = 'ACCOUNT_UNMUTE_SUCCESS';\nexport const ACCOUNT_UNMUTE_FAIL    = 'ACCOUNT_UNMUTE_FAIL';\n\nexport const ACCOUNT_PIN_REQUEST = 'ACCOUNT_PIN_REQUEST';\nexport const ACCOUNT_PIN_SUCCESS = 'ACCOUNT_PIN_SUCCESS';\nexport const ACCOUNT_PIN_FAIL    = 'ACCOUNT_PIN_FAIL';\n\nexport const ACCOUNT_UNPIN_REQUEST = 'ACCOUNT_UNPIN_REQUEST';\nexport const ACCOUNT_UNPIN_SUCCESS = 'ACCOUNT_UNPIN_SUCCESS';\nexport const ACCOUNT_UNPIN_FAIL    = 'ACCOUNT_UNPIN_FAIL';\n\nexport const FOLLOWERS_FETCH_REQUEST = 'FOLLOWERS_FETCH_REQUEST';\nexport const FOLLOWERS_FETCH_SUCCESS = 'FOLLOWERS_FETCH_SUCCESS';\nexport const FOLLOWERS_FETCH_FAIL    = 'FOLLOWERS_FETCH_FAIL';\n\nexport const FOLLOWERS_EXPAND_REQUEST = 'FOLLOWERS_EXPAND_REQUEST';\nexport const FOLLOWERS_EXPAND_SUCCESS = 'FOLLOWERS_EXPAND_SUCCESS';\nexport const FOLLOWERS_EXPAND_FAIL    = 'FOLLOWERS_EXPAND_FAIL';\n\nexport const FOLLOWING_FETCH_REQUEST = 'FOLLOWING_FETCH_REQUEST';\nexport const FOLLOWING_FETCH_SUCCESS = 'FOLLOWING_FETCH_SUCCESS';\nexport const FOLLOWING_FETCH_FAIL    = 'FOLLOWING_FETCH_FAIL';\n\nexport const FOLLOWING_EXPAND_REQUEST = 'FOLLOWING_EXPAND_REQUEST';\nexport const FOLLOWING_EXPAND_SUCCESS = 'FOLLOWING_EXPAND_SUCCESS';\nexport const FOLLOWING_EXPAND_FAIL    = 'FOLLOWING_EXPAND_FAIL';\n\nexport const RELATIONSHIPS_FETCH_REQUEST = 'RELATIONSHIPS_FETCH_REQUEST';\nexport const RELATIONSHIPS_FETCH_SUCCESS = 'RELATIONSHIPS_FETCH_SUCCESS';\nexport const RELATIONSHIPS_FETCH_FAIL    = 'RELATIONSHIPS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_FETCH_REQUEST = 'FOLLOW_REQUESTS_FETCH_REQUEST';\nexport const FOLLOW_REQUESTS_FETCH_SUCCESS = 'FOLLOW_REQUESTS_FETCH_SUCCESS';\nexport const FOLLOW_REQUESTS_FETCH_FAIL    = 'FOLLOW_REQUESTS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_EXPAND_REQUEST = 'FOLLOW_REQUESTS_EXPAND_REQUEST';\nexport const FOLLOW_REQUESTS_EXPAND_SUCCESS = 'FOLLOW_REQUESTS_EXPAND_SUCCESS';\nexport const FOLLOW_REQUESTS_EXPAND_FAIL    = 'FOLLOW_REQUESTS_EXPAND_FAIL';\n\nexport const FOLLOW_REQUEST_AUTHORIZE_REQUEST = 'FOLLOW_REQUEST_AUTHORIZE_REQUEST';\nexport const FOLLOW_REQUEST_AUTHORIZE_SUCCESS = 'FOLLOW_REQUEST_AUTHORIZE_SUCCESS';\nexport const FOLLOW_REQUEST_AUTHORIZE_FAIL    = 'FOLLOW_REQUEST_AUTHORIZE_FAIL';\n\nexport const FOLLOW_REQUEST_REJECT_REQUEST = 'FOLLOW_REQUEST_REJECT_REQUEST';\nexport const FOLLOW_REQUEST_REJECT_SUCCESS = 'FOLLOW_REQUEST_REJECT_SUCCESS';\nexport const FOLLOW_REQUEST_REJECT_FAIL    = 'FOLLOW_REQUEST_REJECT_FAIL';\n\nexport const PINNED_ACCOUNTS_FETCH_REQUEST = 'PINNED_ACCOUNTS_FETCH_REQUEST';\nexport const PINNED_ACCOUNTS_FETCH_SUCCESS = 'PINNED_ACCOUNTS_FETCH_SUCCESS';\nexport const PINNED_ACCOUNTS_FETCH_FAIL    = 'PINNED_ACCOUNTS_FETCH_FAIL';\n\nexport const PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_READY  = 'PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_READY';\nexport const PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR  = 'PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR';\nexport const PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE = 'PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE';\n\nexport const PINNED_ACCOUNTS_EDITOR_RESET = 'PINNED_ACCOUNTS_EDITOR_RESET';\n\n\nexport const ACCOUNT_REVEAL = 'ACCOUNT_REVEAL';\n\nexport function fetchAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchRelationships([id]));\n\n    if (getState().getIn(['accounts', id], null) !== null) {\n      return;\n    }\n\n    dispatch(fetchAccountRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}`).then(response => {\n      dispatch(importFetchedAccount(response.data));\n    }).then(() => {\n      dispatch(fetchAccountSuccess());\n    }).catch(error => {\n      dispatch(fetchAccountFail(id, error));\n    });\n  };\n}\n\nexport const lookupAccount = acct => (dispatch, getState) => {\n  dispatch(lookupAccountRequest(acct));\n\n  api(getState).get('/api/v1/accounts/lookup', { params: { acct } }).then(response => {\n    dispatch(fetchRelationships([response.data.id]));\n    dispatch(importFetchedAccount(response.data));\n    dispatch(lookupAccountSuccess());\n  }).catch(error => {\n    dispatch(lookupAccountFail(acct, error));\n  });\n};\n\nexport const lookupAccountRequest = (acct) => ({\n  type: ACCOUNT_LOOKUP_REQUEST,\n  acct,\n});\n\nexport const lookupAccountSuccess = () => ({\n  type: ACCOUNT_LOOKUP_SUCCESS,\n});\n\nexport const lookupAccountFail = (acct, error) => ({\n  type: ACCOUNT_LOOKUP_FAIL,\n  acct,\n  error,\n  skipAlert: true,\n});\n\nexport function fetchAccountRequest(id) {\n  return {\n    type: ACCOUNT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchAccountSuccess() {\n  return {\n    type: ACCOUNT_FETCH_SUCCESS,\n  };\n}\n\nexport function fetchAccountFail(id, error) {\n  return {\n    type: ACCOUNT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\nexport function followAccount(id, options = { reblogs: true }) {\n  return (dispatch, getState) => {\n    const alreadyFollowing = getState().getIn(['relationships', id, 'following']);\n    const locked = getState().getIn(['accounts', id, 'locked'], false);\n\n    dispatch(followAccountRequest(id, locked));\n\n    api(getState).post(`/api/v1/accounts/${id}/follow`, options).then(response => {\n      dispatch(followAccountSuccess(response.data, alreadyFollowing));\n    }).catch(error => {\n      dispatch(followAccountFail(error, locked));\n    });\n  };\n}\n\nexport function unfollowAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unfollowAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unfollow`).then(response => {\n      dispatch(unfollowAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(unfollowAccountFail(error));\n    });\n  };\n}\n\nexport function followAccountRequest(id, locked) {\n  return {\n    type: ACCOUNT_FOLLOW_REQUEST,\n    id,\n    locked,\n    skipLoading: true,\n  };\n}\n\nexport function followAccountSuccess(relationship, alreadyFollowing) {\n  return {\n    type: ACCOUNT_FOLLOW_SUCCESS,\n    relationship,\n    alreadyFollowing,\n    skipLoading: true,\n  };\n}\n\nexport function followAccountFail(error, locked) {\n  return {\n    type: ACCOUNT_FOLLOW_FAIL,\n    error,\n    locked,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNFOLLOW_REQUEST,\n    id,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_UNFOLLOW_SUCCESS,\n    relationship,\n    statuses,\n    skipLoading: true,\n  };\n}\n\nexport function unfollowAccountFail(error) {\n  return {\n    type: ACCOUNT_UNFOLLOW_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function blockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(blockAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/block`).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(blockAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(blockAccountFail(id, error));\n    });\n  };\n}\n\nexport function unblockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unblockAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unblock`).then(response => {\n      dispatch(unblockAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unblockAccountFail(id, error));\n    });\n  };\n}\n\nexport function blockAccountRequest(id) {\n  return {\n    type: ACCOUNT_BLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function blockAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_BLOCK_SUCCESS,\n    relationship,\n    statuses,\n  };\n}\n\nexport function blockAccountFail(error) {\n  return {\n    type: ACCOUNT_BLOCK_FAIL,\n    error,\n  };\n}\n\nexport function unblockAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNBLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function unblockAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNBLOCK_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unblockAccountFail(error) {\n  return {\n    type: ACCOUNT_UNBLOCK_FAIL,\n    error,\n  };\n}\n\n\nexport function muteAccount(id, notifications, duration=0) {\n  return (dispatch, getState) => {\n    dispatch(muteAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/mute`, { notifications, duration }).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(muteAccountSuccess(response.data, getState().get('statuses')));\n    }).catch(error => {\n      dispatch(muteAccountFail(id, error));\n    });\n  };\n}\n\nexport function unmuteAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unmuteAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unmute`).then(response => {\n      dispatch(unmuteAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unmuteAccountFail(id, error));\n    });\n  };\n}\n\nexport function muteAccountRequest(id) {\n  return {\n    type: ACCOUNT_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteAccountSuccess(relationship, statuses) {\n  return {\n    type: ACCOUNT_MUTE_SUCCESS,\n    relationship,\n    statuses,\n  };\n}\n\nexport function muteAccountFail(error) {\n  return {\n    type: ACCOUNT_MUTE_FAIL,\n    error,\n  };\n}\n\nexport function unmuteAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNMUTE_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unmuteAccountFail(error) {\n  return {\n    type: ACCOUNT_UNMUTE_FAIL,\n    error,\n  };\n}\n\n\nexport function fetchFollowers(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowersRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}/followers`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowersFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowers(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'followers', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowersRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowersFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFollowing(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowingRequest(id));\n\n    api(getState).get(`/api/v1/accounts/${id}/following`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowingFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowingRequest(id) {\n  return {\n    type: FOLLOWING_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowing(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'following', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowingRequest(id));\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowingFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowingRequest(id) {\n  return {\n    type: FOLLOWING_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchRelationships(accountIds) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const loadedRelationships = state.get('relationships');\n    const newAccountIds = accountIds.filter(id => loadedRelationships.get(id, null) === null);\n    const signedIn = !!state.getIn(['meta', 'me']);\n\n    if (!signedIn || newAccountIds.length === 0) {\n      return;\n    }\n\n    dispatch(fetchRelationshipsRequest(newAccountIds));\n\n    api(getState).get(`/api/v1/accounts/relationships?${newAccountIds.map(id => `id[]=${id}`).join('&')}`).then(response => {\n      dispatch(fetchRelationshipsSuccess(response.data));\n    }).catch(error => {\n      dispatch(fetchRelationshipsFail(error));\n    });\n  };\n}\n\nexport function fetchRelationshipsRequest(ids) {\n  return {\n    type: RELATIONSHIPS_FETCH_REQUEST,\n    ids,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsSuccess(relationships) {\n  return {\n    type: RELATIONSHIPS_FETCH_SUCCESS,\n    relationships,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsFail(error) {\n  return {\n    type: RELATIONSHIPS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipNotFound: true,\n  };\n}\n\nexport function fetchFollowRequests() {\n  return (dispatch, getState) => {\n    dispatch(fetchFollowRequestsRequest());\n\n    api(getState).get('/api/v1/follow_requests').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(fetchFollowRequestsFail(error)));\n  };\n}\n\nexport function fetchFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowRequests() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'follow_requests', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowRequestsRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(expandFollowRequestsFail(error)));\n  };\n}\n\nexport function expandFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function authorizeFollowRequest(id) {\n  return (dispatch, getState) => {\n    dispatch(authorizeFollowRequestRequest(id));\n\n    api(getState)\n      .post(`/api/v1/follow_requests/${id}/authorize`)\n      .then(() => dispatch(authorizeFollowRequestSuccess(id)))\n      .catch(error => dispatch(authorizeFollowRequestFail(id, error)));\n  };\n}\n\nexport function authorizeFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_REQUEST,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestSuccess(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_SUCCESS,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_FAIL,\n    id,\n    error,\n  };\n}\n\n\nexport function rejectFollowRequest(id) {\n  return (dispatch, getState) => {\n    dispatch(rejectFollowRequestRequest(id));\n\n    api(getState)\n      .post(`/api/v1/follow_requests/${id}/reject`)\n      .then(() => dispatch(rejectFollowRequestSuccess(id)))\n      .catch(error => dispatch(rejectFollowRequestFail(id, error)));\n  };\n}\n\nexport function rejectFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_REQUEST,\n    id,\n  };\n}\n\nexport function rejectFollowRequestSuccess(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_SUCCESS,\n    id,\n  };\n}\n\nexport function rejectFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pinAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(pinAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/pin`).then(response => {\n      dispatch(pinAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(pinAccountFail(error));\n    });\n  };\n}\n\nexport function unpinAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unpinAccountRequest(id));\n\n    api(getState).post(`/api/v1/accounts/${id}/unpin`).then(response => {\n      dispatch(unpinAccountSuccess(response.data));\n    }).catch(error => {\n      dispatch(unpinAccountFail(error));\n    });\n  };\n}\n\nexport function pinAccountRequest(id) {\n  return {\n    type: ACCOUNT_PIN_REQUEST,\n    id,\n  };\n}\n\nexport function pinAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_PIN_SUCCESS,\n    relationship,\n  };\n}\n\nexport function pinAccountFail(error) {\n  return {\n    type: ACCOUNT_PIN_FAIL,\n    error,\n  };\n}\n\nexport function unpinAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNPIN_REQUEST,\n    id,\n  };\n}\n\nexport function unpinAccountSuccess(relationship) {\n  return {\n    type: ACCOUNT_UNPIN_SUCCESS,\n    relationship,\n  };\n}\n\nexport function unpinAccountFail(error) {\n  return {\n    type: ACCOUNT_UNPIN_FAIL,\n    error,\n  };\n}\n\nexport const revealAccount = id => ({\n  type: ACCOUNT_REVEAL,\n  id,\n});\n\nexport function fetchPinnedAccounts() {\n  return (dispatch, getState) => {\n    dispatch(fetchPinnedAccountsRequest());\n\n    api(getState).get('/api/v1/endorsements', { params: { limit: 0 } }).then(response => {\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchPinnedAccountsSuccess(response.data));\n    }).catch(err => dispatch(fetchPinnedAccountsFail(err)));\n  };\n}\n\nexport function fetchPinnedAccountsRequest() {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedAccountsSuccess(accounts, next) {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchPinnedAccountsFail(error) {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function fetchPinnedAccountsSuggestions(q) {\n  return (dispatch, getState) => {\n    const params = {\n      q,\n      resolve: false,\n      limit: 4,\n      following: true,\n    };\n\n    api(getState).get('/api/v1/accounts/search', { params }).then(response => {\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchPinnedAccountsSuggestionsReady(q, response.data));\n    });\n  };\n}\n\nexport function fetchPinnedAccountsSuggestionsReady(query, accounts) {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_READY,\n    query,\n    accounts,\n  };\n}\n\nexport function clearPinnedAccountsSuggestions() {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR,\n  };\n}\n\nexport function changePinnedAccountsSuggestions(value) {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE,\n    value,\n  };\n}\n\nexport function resetPinnedAccountsEditor() {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_RESET,\n  };\n}\n\n","/**\n * @license MIT\n * @fileOverview Favico animations\n * @author Miroslav Magda, http://blog.ejci.net\n * @version 0.3.10\n */\n\n/**\n * Create new favico instance\n * @param {Object} Options\n * @return {Object} Favico object\n * @example\n * var favico = new Favico({\n *    bgColor : '#d00',\n *    textColor : '#fff',\n *    fontFamily : 'sans-serif',\n *    fontStyle : 'bold',\n *    position : 'down',\n *    type : 'circle',\n *    animation : 'slide',\n *    dataUrl: function(url){},\n *    win: top\n * });\n */\n(function () {\n  var Favico = function (opt) {\n    'use strict';\n\n    opt = opt ? opt : {};\n    var _def = {\n      bgColor: '#d00',\n      textColor: '#fff',\n      fontFamily: 'sans-serif',\n      //Arial,Verdana,Times New Roman,serif,sans-serif,...\n      fontStyle: 'bold',\n      //normal,italic,oblique,bold,bolder,lighter,100,200,300,400,500,600,700,800,900\n      type: 'circle',\n      position: 'down',\n      // down, up, left, leftup (upleft)\n      animation: 'slide',\n      elementId: false,\n      dataUrl: false,\n      win: window\n    };\n    var _opt, _orig, _h, _w, _canvas, _context, _img, _ready, _lastBadge, _running, _readyCb, _stop, _browser, _animTimeout, _drawTimeout, _doc;\n    _browser = {};\n    _browser.ff = typeof InstallTrigger != 'undefined';\n    _browser.chrome = !!window.chrome;\n    _browser.opera = !!window.opera || navigator.userAgent.indexOf('Opera') >= 0;\n    _browser.ie = /*@cc_on!@*/false;\n    _browser.safari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n    _browser.supported = _browser.chrome || _browser.ff || _browser.opera;\n    var _queue = [];\n    _readyCb = function () {};\n    _ready = _stop = false;\n    /**\n     * Initialize favico\n     */\n    var init = function () {\n      //merge initial options\n      _opt = merge(_def, opt);\n      _opt.bgColor = hexToRgb(_opt.bgColor);\n      _opt.textColor = hexToRgb(_opt.textColor);\n      _opt.position = _opt.position.toLowerCase();\n      _opt.animation = animation.types['' + _opt.animation] ? _opt.animation : _def.animation;\n      _doc = _opt.win.document;\n      var isUp = _opt.position.indexOf('up') > -1;\n      var isLeft = _opt.position.indexOf('left') > -1;\n\n      //transform animation\n      if (isUp || isLeft) {\n        for (var i = 0; i < animation.types['' + _opt.animation].length; i++) {\n          var step = animation.types['' + _opt.animation][i];\n          if (isUp) {\n            if (step.y < 0.6) {\n              step.y = step.y - 0.4;\n            } else {\n              step.y = step.y - 2 * step.y + (1 - step.w);\n            }\n          }\n          if (isLeft) {\n            if (step.x < 0.6) {\n              step.x = step.x - 0.4;\n            } else {\n              step.x = step.x - 2 * step.x + (1 - step.h);\n            }\n          }\n          animation.types['' + _opt.animation][i] = step;\n        }\n      }\n      _opt.type = type['' + _opt.type] ? _opt.type : _def.type;\n      _orig = link.getIcon();\n      //create temp canvas\n      _canvas = document.createElement('canvas');\n      //create temp image\n      _img = document.createElement('img');\n      if (_orig.hasAttribute('href')) {\n        _img.setAttribute('crossOrigin', 'anonymous');\n        //get width/height\n        _img.onload = function () {\n          _h = _img.height > 0 ? _img.height : 32;\n          _w = _img.width > 0 ? _img.width : 32;\n          _canvas.height = _h;\n          _canvas.width = _w;\n          _context = _canvas.getContext('2d');\n          icon.ready();\n        };\n        _img.setAttribute('src', _orig.getAttribute('href'));\n      } else {\n        _img.onload = function () {\n          _h = 32;\n          _w = 32;\n          _img.height = _h;\n          _img.width = _w;\n          _canvas.height = _h;\n          _canvas.width = _w;\n          _context = _canvas.getContext('2d');\n          icon.ready();\n        };\n        _img.setAttribute('src', '');\n      }\n    };\n    /**\n     * Icon namespace\n     */\n    var icon = {};\n    /**\n     * Icon is ready (reset icon) and start animation (if ther is any)\n     */\n    icon.ready = function () {\n      _ready = true;\n      icon.reset();\n      _readyCb();\n    };\n    /**\n     * Reset icon to default state\n     */\n    icon.reset = function () {\n      //reset\n      if (!_ready) {\n        return;\n      }\n      _queue = [];\n      _lastBadge = false;\n      _running = false;\n      _context.clearRect(0, 0, _w, _h);\n      _context.drawImage(_img, 0, 0, _w, _h);\n      //_stop=true;\n      link.setIcon(_canvas);\n      //webcam('stop');\n      //video('stop');\n      window.clearTimeout(_animTimeout);\n      window.clearTimeout(_drawTimeout);\n    };\n    /**\n     * Start animation\n     */\n    icon.start = function () {\n      if (!_ready || _running) {\n        return;\n      }\n      var finished = function () {\n        _lastBadge = _queue[0];\n        _running = false;\n        if (_queue.length > 0) {\n          _queue.shift();\n          icon.start();\n        } else {}\n      };\n      if (_queue.length > 0) {\n        _running = true;\n        var run = function () {\n          // apply options for this animation\n          ['type', 'animation', 'bgColor', 'textColor', 'fontFamily', 'fontStyle'].forEach(function (a) {\n            if (a in _queue[0].options) {\n              _opt[a] = _queue[0].options[a];\n            }\n          });\n          animation.run(_queue[0].options, function () {\n            finished();\n          }, false);\n        };\n        if (_lastBadge) {\n          animation.run(_lastBadge.options, function () {\n            run();\n          }, true);\n        } else {\n          run();\n        }\n      }\n    };\n\n    /**\n     * Badge types\n     */\n    var type = {};\n    var options = function (opt) {\n      opt.n = typeof opt.n === 'number' ? Math.abs(opt.n | 0) : opt.n;\n      opt.x = _w * opt.x;\n      opt.y = _h * opt.y;\n      opt.w = _w * opt.w;\n      opt.h = _h * opt.h;\n      opt.len = (\"\" + opt.n).length;\n      return opt;\n    };\n    /**\n     * Generate circle\n     * @param {Object} opt Badge options\n     */\n    type.circle = function (opt) {\n      opt = options(opt);\n      var more = false;\n      if (opt.len === 2) {\n        opt.x = opt.x - opt.w * 0.4;\n        opt.w = opt.w * 1.4;\n        more = true;\n      } else if (opt.len >= 3) {\n        opt.x = opt.x - opt.w * 0.65;\n        opt.w = opt.w * 1.65;\n        more = true;\n      }\n      _context.clearRect(0, 0, _w, _h);\n      _context.drawImage(_img, 0, 0, _w, _h);\n      _context.beginPath();\n      _context.font = _opt.fontStyle + \" \" + Math.floor(opt.h * (opt.n > 99 ? 0.85 : 1)) + \"px \" + _opt.fontFamily;\n      _context.textAlign = 'center';\n      if (more) {\n        _context.moveTo(opt.x + opt.w / 2, opt.y);\n        _context.lineTo(opt.x + opt.w - opt.h / 2, opt.y);\n        _context.quadraticCurveTo(opt.x + opt.w, opt.y, opt.x + opt.w, opt.y + opt.h / 2);\n        _context.lineTo(opt.x + opt.w, opt.y + opt.h - opt.h / 2);\n        _context.quadraticCurveTo(opt.x + opt.w, opt.y + opt.h, opt.x + opt.w - opt.h / 2, opt.y + opt.h);\n        _context.lineTo(opt.x + opt.h / 2, opt.y + opt.h);\n        _context.quadraticCurveTo(opt.x, opt.y + opt.h, opt.x, opt.y + opt.h - opt.h / 2);\n        _context.lineTo(opt.x, opt.y + opt.h / 2);\n        _context.quadraticCurveTo(opt.x, opt.y, opt.x + opt.h / 2, opt.y);\n      } else {\n        _context.arc(opt.x + opt.w / 2, opt.y + opt.h / 2, opt.h / 2, 0, 2 * Math.PI);\n      }\n      _context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n      _context.fill();\n      _context.closePath();\n      _context.beginPath();\n      _context.stroke();\n      _context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n      //_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n      if (typeof opt.n === 'number' && opt.n > 999) {\n        _context.fillText((opt.n > 9999 ? 9 : Math.floor(opt.n / 1000)) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n      } else {\n        _context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n      }\n      _context.closePath();\n    };\n    /**\n     * Generate rectangle\n     * @param {Object} opt Badge options\n     */\n    type.rectangle = function (opt) {\n      opt = options(opt);\n      var more = false;\n      if (opt.len === 2) {\n        opt.x = opt.x - opt.w * 0.4;\n        opt.w = opt.w * 1.4;\n        more = true;\n      } else if (opt.len >= 3) {\n        opt.x = opt.x - opt.w * 0.65;\n        opt.w = opt.w * 1.65;\n        more = true;\n      }\n      _context.clearRect(0, 0, _w, _h);\n      _context.drawImage(_img, 0, 0, _w, _h);\n      _context.beginPath();\n      _context.font = _opt.fontStyle + \" \" + Math.floor(opt.h * (opt.n > 99 ? 0.9 : 1)) + \"px \" + _opt.fontFamily;\n      _context.textAlign = 'center';\n      _context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n      _context.fillRect(opt.x, opt.y, opt.w, opt.h);\n      _context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n      //_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n      if (typeof opt.n === 'number' && opt.n > 999) {\n        _context.fillText((opt.n > 9999 ? 9 : Math.floor(opt.n / 1000)) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n      } else {\n        _context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n      }\n      _context.closePath();\n    };\n\n    /**\n     * Set badge\n     */\n    var badge = function (number, opts) {\n      opts = (typeof opts === 'string' ? {\n        animation: opts\n      } : opts) || {};\n      _readyCb = function () {\n        try {\n          if (typeof number === 'number' ? number > 0 : number !== '') {\n            var q = {\n              type: 'badge',\n              options: {\n                n: number\n              }\n            };\n            if ('animation' in opts && animation.types['' + opts.animation]) {\n              q.options.animation = '' + opts.animation;\n            }\n            if ('type' in opts && type['' + opts.type]) {\n              q.options.type = '' + opts.type;\n            }\n            ['bgColor', 'textColor'].forEach(function (o) {\n              if (o in opts) {\n                q.options[o] = hexToRgb(opts[o]);\n              }\n            });\n            ['fontStyle', 'fontFamily'].forEach(function (o) {\n              if (o in opts) {\n                q.options[o] = opts[o];\n              }\n            });\n            _queue.push(q);\n            if (_queue.length > 100) {\n              throw new Error('Too many badges requests in queue.');\n            }\n            icon.start();\n          } else {\n            icon.reset();\n          }\n        } catch (e) {\n          throw new Error('Error setting badge. Message: ' + e.message);\n        }\n      };\n      if (_ready) {\n        _readyCb();\n      }\n    };\n\n    /**\n     * Set image as icon\n     */\n    var image = function (imageElement) {\n      _readyCb = function () {\n        try {\n          var w = imageElement.width;\n          var h = imageElement.height;\n          var newImg = document.createElement('img');\n          var ratio = w / _w < h / _h ? w / _w : h / _h;\n          newImg.setAttribute('crossOrigin', 'anonymous');\n          newImg.onload = function () {\n            _context.clearRect(0, 0, _w, _h);\n            _context.drawImage(newImg, 0, 0, _w, _h);\n            link.setIcon(_canvas);\n          };\n          newImg.setAttribute('src', imageElement.getAttribute('src'));\n          newImg.height = h / ratio;\n          newImg.width = w / ratio;\n        } catch (e) {\n          throw new Error('Error setting image. Message: ' + e.message);\n        }\n      };\n      if (_ready) {\n        _readyCb();\n      }\n    };\n    /**\n     * Set video as icon\n     */\n    var video = function (videoElement) {\n      _readyCb = function () {\n        try {\n          if (videoElement === 'stop') {\n            _stop = true;\n            icon.reset();\n            _stop = false;\n            return;\n          }\n          //var w = videoElement.width;\n          //var h = videoElement.height;\n          //var ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n          videoElement.addEventListener('play', function () {\n            drawVideo(this);\n          }, false);\n        } catch (e) {\n          throw new Error('Error setting video. Message: ' + e.message);\n        }\n      };\n      if (_ready) {\n        _readyCb();\n      }\n    };\n    /**\n     * Set video as icon\n     */\n    var webcam = function (action) {\n      //UR\n      if (!window.URL || !window.URL.createObjectURL) {\n        window.URL = window.URL || {};\n        window.URL.createObjectURL = function (obj) {\n          return obj;\n        };\n      }\n      if (_browser.supported) {\n        var newVideo = false;\n        navigator.getUserMedia = navigator.getUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n        _readyCb = function () {\n          try {\n            if (action === 'stop') {\n              _stop = true;\n              icon.reset();\n              _stop = false;\n              return;\n            }\n            newVideo = document.createElement('video');\n            newVideo.width = _w;\n            newVideo.height = _h;\n            navigator.getUserMedia({\n              video: true,\n              audio: false\n            }, function (stream) {\n              newVideo.src = URL.createObjectURL(stream);\n              newVideo.play();\n              drawVideo(newVideo);\n            }, function () {});\n          } catch (e) {\n            throw new Error('Error setting webcam. Message: ' + e.message);\n          }\n        };\n        if (_ready) {\n          _readyCb();\n        }\n      }\n    };\n\n    /**\n     * Draw video to context and repeat :)\n     */\n    function drawVideo(video) {\n      if (video.paused || video.ended || _stop) {\n        return false;\n      }\n      //nasty hack for FF webcam (Thanks to Julian wirko, kontakt@redsunmedia.pl)\n      try {\n        _context.clearRect(0, 0, _w, _h);\n        _context.drawImage(video, 0, 0, _w, _h);\n      } catch (e) {}\n      _drawTimeout = setTimeout(function () {\n        drawVideo(video);\n      }, animation.duration);\n      link.setIcon(_canvas);\n    }\n    var link = {};\n    /**\n     * Get icon from HEAD tag or create a new <link> element\n     */\n    link.getIcon = function () {\n      var elm = false;\n      //get link element\n      var getLink = function () {\n        var link = _doc.getElementsByTagName('head')[0].getElementsByTagName('link');\n        for (var l = link.length, i = l - 1; i >= 0; i--) {\n          if (/(^|\\s)icon(\\s|$)/i.test(link[i].getAttribute('rel'))) {\n            return link[i];\n          }\n        }\n        return false;\n      };\n      if (_opt.element) {\n        elm = _opt.element;\n      } else if (_opt.elementId) {\n        //if img element identified by elementId\n        elm = _doc.getElementById(_opt.elementId);\n        elm.setAttribute('href', elm.getAttribute('src'));\n      } else {\n        //if link element\n        elm = getLink();\n        if (elm === false) {\n          elm = _doc.createElement('link');\n          elm.setAttribute('rel', 'icon');\n          _doc.getElementsByTagName('head')[0].appendChild(elm);\n        }\n      }\n      elm.setAttribute('type', 'image/png');\n      return elm;\n    };\n    link.setIcon = function (canvas) {\n      var url = canvas.toDataURL('image/png');\n      if (_opt.dataUrl) {\n        //if using custom exporter\n        _opt.dataUrl(url);\n      }\n      if (_opt.element) {\n        _opt.element.setAttribute('href', url);\n        _opt.element.setAttribute('src', url);\n      } else if (_opt.elementId) {\n        //if is attached to element (image)\n        var elm = _doc.getElementById(_opt.elementId);\n        elm.setAttribute('href', url);\n        elm.setAttribute('src', url);\n      } else {\n        //if is attached to fav icon\n        if (_browser.ff || _browser.opera) {\n          //for FF we need to \"recreate\" element, atach to dom and remove old <link>\n          //var originalType = _orig.getAttribute('rel');\n          var old = _orig;\n          _orig = _doc.createElement('link');\n          //_orig.setAttribute('rel', originalType);\n          if (_browser.opera) {\n            _orig.setAttribute('rel', 'icon');\n          }\n          _orig.setAttribute('rel', 'icon');\n          _orig.setAttribute('type', 'image/png');\n          _doc.getElementsByTagName('head')[0].appendChild(_orig);\n          _orig.setAttribute('href', url);\n          if (old.parentNode) {\n            old.parentNode.removeChild(old);\n          }\n        } else {\n          _orig.setAttribute('href', url);\n        }\n      }\n    };\n\n    //http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb#answer-5624139\n    //HEX to RGB convertor\n    function hexToRgb(hex) {\n      var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n      hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n      return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n      } : false;\n    }\n\n    /**\n     * Merge options\n     */\n    function merge(def, opt) {\n      var mergedOpt = {};\n      var attrname;\n      for (attrname in def) {\n        mergedOpt[attrname] = def[attrname];\n      }\n      for (attrname in opt) {\n        mergedOpt[attrname] = opt[attrname];\n      }\n      return mergedOpt;\n    }\n\n    /**\n     * Cross-browser page visibility shim\n     * http://stackoverflow.com/questions/12536562/detect-whether-a-window-is-visible\n     */\n    function isPageHidden() {\n      return _doc.hidden || _doc.msHidden || _doc.webkitHidden || _doc.mozHidden;\n    }\n\n    /**\n     * @namespace animation\n     */\n    var animation = {};\n    /**\n     * Animation \"frame\" duration\n     */\n    animation.duration = 40;\n    /**\n     * Animation types (none,fade,pop,slide)\n     */\n    animation.types = {};\n    animation.types.fade = [{\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.0\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.1\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.2\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.3\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.4\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.5\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.6\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.7\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.8\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 0.9\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 1.0\n    }];\n    animation.types.none = [{\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }];\n    animation.types.pop = [{\n      x: 1,\n      y: 1,\n      w: 0,\n      h: 0,\n      o: 1\n    }, {\n      x: 0.9,\n      y: 0.9,\n      w: 0.1,\n      h: 0.1,\n      o: 1\n    }, {\n      x: 0.8,\n      y: 0.8,\n      w: 0.2,\n      h: 0.2,\n      o: 1\n    }, {\n      x: 0.7,\n      y: 0.7,\n      w: 0.3,\n      h: 0.3,\n      o: 1\n    }, {\n      x: 0.6,\n      y: 0.6,\n      w: 0.4,\n      h: 0.4,\n      o: 1\n    }, {\n      x: 0.5,\n      y: 0.5,\n      w: 0.5,\n      h: 0.5,\n      o: 1\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }];\n    animation.types.popFade = [{\n      x: 0.75,\n      y: 0.75,\n      w: 0,\n      h: 0,\n      o: 0\n    }, {\n      x: 0.65,\n      y: 0.65,\n      w: 0.1,\n      h: 0.1,\n      o: 0.2\n    }, {\n      x: 0.6,\n      y: 0.6,\n      w: 0.2,\n      h: 0.2,\n      o: 0.4\n    }, {\n      x: 0.55,\n      y: 0.55,\n      w: 0.3,\n      h: 0.3,\n      o: 0.6\n    }, {\n      x: 0.50,\n      y: 0.50,\n      w: 0.4,\n      h: 0.4,\n      o: 0.8\n    }, {\n      x: 0.45,\n      y: 0.45,\n      w: 0.5,\n      h: 0.5,\n      o: 0.9\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }];\n    animation.types.slide = [{\n      x: 0.4,\n      y: 1,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }, {\n      x: 0.4,\n      y: 0.9,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }, {\n      x: 0.4,\n      y: 0.9,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }, {\n      x: 0.4,\n      y: 0.8,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }, {\n      x: 0.4,\n      y: 0.7,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }, {\n      x: 0.4,\n      y: 0.6,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }, {\n      x: 0.4,\n      y: 0.5,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }, {\n      x: 0.4,\n      y: 0.4,\n      w: 0.6,\n      h: 0.6,\n      o: 1\n    }];\n    /**\n     * Run animation\n     * @param {Object} opt Animation options\n     * @param {Object} cb Callabak after all steps are done\n     * @param {Object} revert Reverse order? true|false\n     * @param {Object} step Optional step number (frame bumber)\n     */\n    animation.run = function (opt, cb, revert, step) {\n      var animationType = animation.types[isPageHidden() ? 'none' : _opt.animation];\n      if (revert === true) {\n        step = typeof step !== 'undefined' ? step : animationType.length - 1;\n      } else {\n        step = typeof step !== 'undefined' ? step : 0;\n      }\n      cb = cb ? cb : function () {};\n      if (step < animationType.length && step >= 0) {\n        type[_opt.type](merge(opt, animationType[step]));\n        _animTimeout = setTimeout(function () {\n          if (revert) {\n            step = step - 1;\n          } else {\n            step = step + 1;\n          }\n          animation.run(opt, cb, revert, step);\n        }, animation.duration);\n        link.setIcon(_canvas);\n      } else {\n        cb();\n        return;\n      }\n    };\n    //auto init\n    init();\n    return {\n      badge: badge,\n      video: video,\n      image: image,\n      webcam: webcam,\n      reset: icon.reset,\n      browser: {\n        supported: _browser.supported\n      }\n    };\n  };\n\n  // AMD / RequireJS\n  if (typeof define !== 'undefined' && define.amd) {\n    define([], function () {\n      return Favico;\n    });\n  }\n  // CommonJS\n  else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = Favico;\n  }\n  // included directly via <script> tag\n  else {\n    this.Favico = Favico;\n  }\n})();","//\n// Tools for performance debugging, only enabled in development mode.\n// Open up Chrome Dev Tools, then Timeline, then User Timing to see output.\n// Also see config/webpack/loaders/mark.js for the webpack loader marks.\n//\n\nlet marky;\n\nif (process.env.NODE_ENV === 'development') {\n  if (typeof performance !== 'undefined' && performance.setResourceTimingBufferSize) {\n    // Increase Firefox's performance entry limit; otherwise it's capped to 150.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1331135\n    performance.setResourceTimingBufferSize(Infinity);\n  }\n  marky = require('marky');\n  // allows us to easily do e.g. ReactPerf.printWasted() while debugging\n  //window.ReactPerf = require('react-addons-perf');\n  //window.ReactPerf.start();\n}\n\nexport function start(name) {\n  if (process.env.NODE_ENV === 'development') {\n    marky.mark(name);\n  }\n}\n\nexport function stop(name) {\n  if (process.env.NODE_ENV === 'development') {\n    marky.stop(name);\n  }\n}\n","import { Iterable, fromJS } from 'immutable';\nimport { hydrateCompose } from './compose';\nimport { importFetchedAccounts } from './importer';\nimport { saveSettings } from './settings';\n\nexport const STORE_HYDRATE = 'STORE_HYDRATE';\nexport const STORE_HYDRATE_LAZY = 'STORE_HYDRATE_LAZY';\n\nconst convertState = rawState =>\n  fromJS(rawState, (k, v) =>\n    Iterable.isIndexed(v) ? v.toList() : v.toMap());\n\nconst applyMigrations = (state) => {\n  return state.withMutations(state => {\n    // Migrate glitch-soc local-only Show unread marker setting to Mastodon's setting\n    if (state.getIn(['local_settings', 'notifications', 'show_unread']) !== undefined) {\n      // Only change if the Mastodon setting does not deviate from default\n      if (state.getIn(['settings', 'notifications', 'showUnread']) !== false) {\n        state.setIn(['settings', 'notifications', 'showUnread'], state.getIn(['local_settings', 'notifications', 'show_unread']));\n      }\n      state.removeIn(['local_settings', 'notifications', 'show_unread']);\n    }\n  });\n};\n\nexport function hydrateStore(rawState) {\n  return dispatch => {\n    const state = applyMigrations(convertState(rawState));\n\n    dispatch({\n      type: STORE_HYDRATE,\n      state,\n    });\n\n    dispatch(hydrateCompose());\n    dispatch(importFetchedAccounts(Object.values(rawState.accounts)));\n    dispatch(saveSettings());\n  };\n}\n","import api from '../api';\n\nimport { deleteFromTimelines } from './timelines';\nimport { importFetchedStatus, importFetchedStatuses } from './importer';\nimport { ensureComposeIsVisible, setComposeToStatus } from './compose';\n\nexport const STATUS_FETCH_REQUEST = 'STATUS_FETCH_REQUEST';\nexport const STATUS_FETCH_SUCCESS = 'STATUS_FETCH_SUCCESS';\nexport const STATUS_FETCH_FAIL    = 'STATUS_FETCH_FAIL';\n\nexport const STATUS_DELETE_REQUEST = 'STATUS_DELETE_REQUEST';\nexport const STATUS_DELETE_SUCCESS = 'STATUS_DELETE_SUCCESS';\nexport const STATUS_DELETE_FAIL    = 'STATUS_DELETE_FAIL';\n\nexport const CONTEXT_FETCH_REQUEST = 'CONTEXT_FETCH_REQUEST';\nexport const CONTEXT_FETCH_SUCCESS = 'CONTEXT_FETCH_SUCCESS';\nexport const CONTEXT_FETCH_FAIL    = 'CONTEXT_FETCH_FAIL';\n\nexport const STATUS_MUTE_REQUEST = 'STATUS_MUTE_REQUEST';\nexport const STATUS_MUTE_SUCCESS = 'STATUS_MUTE_SUCCESS';\nexport const STATUS_MUTE_FAIL    = 'STATUS_MUTE_FAIL';\n\nexport const STATUS_UNMUTE_REQUEST = 'STATUS_UNMUTE_REQUEST';\nexport const STATUS_UNMUTE_SUCCESS = 'STATUS_UNMUTE_SUCCESS';\nexport const STATUS_UNMUTE_FAIL    = 'STATUS_UNMUTE_FAIL';\n\nexport const STATUS_REVEAL   = 'STATUS_REVEAL';\nexport const STATUS_HIDE     = 'STATUS_HIDE';\nexport const STATUS_COLLAPSE = 'STATUS_COLLAPSE';\n\nexport const REDRAFT = 'REDRAFT';\n\nexport const STATUS_FETCH_SOURCE_REQUEST = 'STATUS_FETCH_SOURCE_REQUEST';\nexport const STATUS_FETCH_SOURCE_SUCCESS = 'STATUS_FETCH_SOURCE_SUCCESS';\nexport const STATUS_FETCH_SOURCE_FAIL    = 'STATUS_FETCH_SOURCE_FAIL';\n\nexport const STATUS_TRANSLATE_REQUEST = 'STATUS_TRANSLATE_REQUEST';\nexport const STATUS_TRANSLATE_SUCCESS = 'STATUS_TRANSLATE_SUCCESS';\nexport const STATUS_TRANSLATE_FAIL    = 'STATUS_TRANSLATE_FAIL';\nexport const STATUS_TRANSLATE_UNDO    = 'STATUS_TRANSLATE_UNDO';\n\nexport function fetchStatusRequest(id, skipLoading) {\n  return {\n    type: STATUS_FETCH_REQUEST,\n    id,\n    skipLoading,\n  };\n}\n\nexport function fetchStatus(id, forceFetch = false) {\n  return (dispatch, getState) => {\n    const skipLoading = !forceFetch && getState().getIn(['statuses', id], null) !== null;\n\n    dispatch(fetchContext(id));\n\n    if (skipLoading) {\n      return;\n    }\n\n    dispatch(fetchStatusRequest(id, skipLoading));\n\n    api(getState).get(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(fetchStatusSuccess(skipLoading));\n    }).catch(error => {\n      dispatch(fetchStatusFail(id, error, skipLoading));\n    });\n  };\n}\n\nexport function fetchStatusSuccess(skipLoading) {\n  return {\n    type: STATUS_FETCH_SUCCESS,\n    skipLoading,\n  };\n}\n\nexport function fetchStatusFail(id, error, skipLoading) {\n  return {\n    type: STATUS_FETCH_FAIL,\n    id,\n    error,\n    skipLoading,\n    skipAlert: true,\n  };\n}\n\nexport function redraft(status, raw_text, content_type) {\n  return {\n    type: REDRAFT,\n    status,\n    raw_text,\n    content_type,\n  };\n}\n\nexport const editStatus = (id, routerHistory) => (dispatch, getState) => {\n  let status = getState().getIn(['statuses', id]);\n\n  if (status.get('poll')) {\n    status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n  }\n\n  dispatch(fetchStatusSourceRequest());\n\n  api(getState).get(`/api/v1/statuses/${id}/source`).then(response => {\n    dispatch(fetchStatusSourceSuccess());\n    ensureComposeIsVisible(getState, routerHistory);\n    dispatch(setComposeToStatus(status, response.data.text, response.data.spoiler_text, response.data.content_type));\n  }).catch(error => {\n    dispatch(fetchStatusSourceFail(error));\n  });\n};\n\nexport const fetchStatusSourceRequest = () => ({\n  type: STATUS_FETCH_SOURCE_REQUEST,\n});\n\nexport const fetchStatusSourceSuccess = () => ({\n  type: STATUS_FETCH_SOURCE_SUCCESS,\n});\n\nexport const fetchStatusSourceFail = error => ({\n  type: STATUS_FETCH_SOURCE_FAIL,\n  error,\n});\n\nexport function deleteStatus(id, routerHistory, withRedraft = false) {\n  return (dispatch, getState) => {\n    let status = getState().getIn(['statuses', id]);\n\n    if (status.get('poll')) {\n      status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n    }\n\n    dispatch(deleteStatusRequest(id));\n\n    api(getState).delete(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(deleteStatusSuccess(id));\n      dispatch(deleteFromTimelines(id));\n\n      if (withRedraft) {\n        dispatch(redraft(status, response.data.text, response.data.content_type));\n\n        ensureComposeIsVisible(getState, routerHistory);\n      }\n    }).catch(error => {\n      dispatch(deleteStatusFail(id, error));\n    });\n  };\n}\n\nexport function deleteStatusRequest(id) {\n  return {\n    type: STATUS_DELETE_REQUEST,\n    id: id,\n  };\n}\n\nexport function deleteStatusSuccess(id) {\n  return {\n    type: STATUS_DELETE_SUCCESS,\n    id: id,\n  };\n}\n\nexport function deleteStatusFail(id, error) {\n  return {\n    type: STATUS_DELETE_FAIL,\n    id: id,\n    error: error,\n  };\n}\n\nexport const updateStatus = status => dispatch =>\n  dispatch(importFetchedStatus(status));\n\nexport function fetchContext(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchContextRequest(id));\n\n    api(getState).get(`/api/v1/statuses/${id}/context`).then(response => {\n      dispatch(importFetchedStatuses(response.data.ancestors.concat(response.data.descendants)));\n      dispatch(fetchContextSuccess(id, response.data.ancestors, response.data.descendants));\n\n    }).catch(error => {\n      if (error.response && error.response.status === 404) {\n        dispatch(deleteFromTimelines(id));\n      }\n\n      dispatch(fetchContextFail(id, error));\n    });\n  };\n}\n\nexport function fetchContextRequest(id) {\n  return {\n    type: CONTEXT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchContextSuccess(id, ancestors, descendants) {\n  return {\n    type: CONTEXT_FETCH_SUCCESS,\n    id,\n    ancestors,\n    descendants,\n    statuses: ancestors.concat(descendants),\n  };\n}\n\nexport function fetchContextFail(id, error) {\n  return {\n    type: CONTEXT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\nexport function muteStatus(id) {\n  return (dispatch, getState) => {\n    dispatch(muteStatusRequest(id));\n\n    api(getState).post(`/api/v1/statuses/${id}/mute`).then(() => {\n      dispatch(muteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(muteStatusFail(id, error));\n    });\n  };\n}\n\nexport function muteStatusRequest(id) {\n  return {\n    type: STATUS_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteStatusSuccess(id) {\n  return {\n    type: STATUS_MUTE_SUCCESS,\n    id,\n  };\n}\n\nexport function muteStatusFail(id, error) {\n  return {\n    type: STATUS_MUTE_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function unmuteStatus(id) {\n  return (dispatch, getState) => {\n    dispatch(unmuteStatusRequest(id));\n\n    api(getState).post(`/api/v1/statuses/${id}/unmute`).then(() => {\n      dispatch(unmuteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(unmuteStatusFail(id, error));\n    });\n  };\n}\n\nexport function unmuteStatusRequest(id) {\n  return {\n    type: STATUS_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteStatusSuccess(id) {\n  return {\n    type: STATUS_UNMUTE_SUCCESS,\n    id,\n  };\n}\n\nexport function unmuteStatusFail(id, error) {\n  return {\n    type: STATUS_UNMUTE_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function hideStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_HIDE,\n    ids,\n  };\n}\n\nexport function revealStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_REVEAL,\n    ids,\n  };\n}\n\nexport function toggleStatusCollapse(id, isCollapsed) {\n  return {\n    type: STATUS_COLLAPSE,\n    id,\n    isCollapsed,\n  };\n}\n\nexport const translateStatus = id => (dispatch, getState) => {\n  dispatch(translateStatusRequest(id));\n\n  api(getState).post(`/api/v1/statuses/${id}/translate`).then(response => {\n    dispatch(translateStatusSuccess(id, response.data));\n  }).catch(error => {\n    dispatch(translateStatusFail(id, error));\n  });\n};\n\nexport const translateStatusRequest = id => ({\n  type: STATUS_TRANSLATE_REQUEST,\n  id,\n});\n\nexport const translateStatusSuccess = (id, translation) => ({\n  type: STATUS_TRANSLATE_SUCCESS,\n  id,\n  translation,\n});\n\nexport const translateStatusFail = (id, error) => ({\n  type: STATUS_TRANSLATE_FAIL,\n  id,\n  error,\n});\n\nexport const undoStatusTranslation = id => ({\n  type: STATUS_TRANSLATE_UNDO,\n  id,\n});\n","import api, { getLinks } from '../api';\nimport { importFetchedStatuses } from './importer';\n\nexport const TRENDS_TAGS_FETCH_REQUEST = 'TRENDS_TAGS_FETCH_REQUEST';\nexport const TRENDS_TAGS_FETCH_SUCCESS = 'TRENDS_TAGS_FETCH_SUCCESS';\nexport const TRENDS_TAGS_FETCH_FAIL    = 'TRENDS_TAGS_FETCH_FAIL';\n\nexport const TRENDS_LINKS_FETCH_REQUEST = 'TRENDS_LINKS_FETCH_REQUEST';\nexport const TRENDS_LINKS_FETCH_SUCCESS = 'TRENDS_LINKS_FETCH_SUCCESS';\nexport const TRENDS_LINKS_FETCH_FAIL    = 'TRENDS_LINKS_FETCH_FAIL';\n\nexport const TRENDS_STATUSES_FETCH_REQUEST = 'TRENDS_STATUSES_FETCH_REQUEST';\nexport const TRENDS_STATUSES_FETCH_SUCCESS = 'TRENDS_STATUSES_FETCH_SUCCESS';\nexport const TRENDS_STATUSES_FETCH_FAIL    = 'TRENDS_STATUSES_FETCH_FAIL';\n\nexport const TRENDS_STATUSES_EXPAND_REQUEST = 'TRENDS_STATUSES_EXPAND_REQUEST';\nexport const TRENDS_STATUSES_EXPAND_SUCCESS = 'TRENDS_STATUSES_EXPAND_SUCCESS';\nexport const TRENDS_STATUSES_EXPAND_FAIL    = 'TRENDS_STATUSES_EXPAND_FAIL';\n\nexport const fetchTrendingHashtags = () => (dispatch, getState) => {\n  dispatch(fetchTrendingHashtagsRequest());\n\n  api(getState)\n    .get('/api/v1/trends/tags')\n    .then(({ data }) => dispatch(fetchTrendingHashtagsSuccess(data)))\n    .catch(err => dispatch(fetchTrendingHashtagsFail(err)));\n};\n\nexport const fetchTrendingHashtagsRequest = () => ({\n  type: TRENDS_TAGS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingHashtagsSuccess = trends => ({\n  type: TRENDS_TAGS_FETCH_SUCCESS,\n  trends,\n  skipLoading: true,\n});\n\nexport const fetchTrendingHashtagsFail = error => ({\n  type: TRENDS_TAGS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const fetchTrendingLinks = () => (dispatch, getState) => {\n  dispatch(fetchTrendingLinksRequest());\n\n  api(getState)\n    .get('/api/v1/trends/links')\n    .then(({ data }) => dispatch(fetchTrendingLinksSuccess(data)))\n    .catch(err => dispatch(fetchTrendingLinksFail(err)));\n};\n\nexport const fetchTrendingLinksRequest = () => ({\n  type: TRENDS_LINKS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingLinksSuccess = trends => ({\n  type: TRENDS_LINKS_FETCH_SUCCESS,\n  trends,\n  skipLoading: true,\n});\n\nexport const fetchTrendingLinksFail = error => ({\n  type: TRENDS_LINKS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const fetchTrendingStatuses = () => (dispatch, getState) => {\n  if (getState().getIn(['status_lists', 'trending', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchTrendingStatusesRequest());\n\n  api(getState).get('/api/v1/trends/statuses').then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedStatuses(response.data));\n    dispatch(fetchTrendingStatusesSuccess(response.data, next ? next.uri : null));\n  }).catch(err => dispatch(fetchTrendingStatusesFail(err)));\n};\n\nexport const fetchTrendingStatusesRequest = () => ({\n  type: TRENDS_STATUSES_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingStatusesSuccess = (statuses, next) => ({\n  type: TRENDS_STATUSES_FETCH_SUCCESS,\n  statuses,\n  next,\n  skipLoading: true,\n});\n\nexport const fetchTrendingStatusesFail = error => ({\n  type: TRENDS_STATUSES_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\n\nexport const expandTrendingStatuses = () => (dispatch, getState) => {\n  const url = getState().getIn(['status_lists', 'trending', 'next'], null);\n\n  if (url === null || getState().getIn(['status_lists', 'trending', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(expandTrendingStatusesRequest());\n\n  api(getState).get(url).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedStatuses(response.data));\n    dispatch(expandTrendingStatusesSuccess(response.data, next ? next.uri : null));\n  }).catch(error => {\n    dispatch(expandTrendingStatusesFail(error));\n  });\n};\n\nexport const expandTrendingStatusesRequest = () => ({\n  type: TRENDS_STATUSES_EXPAND_REQUEST,\n});\n\nexport const expandTrendingStatusesSuccess = (statuses, next) => ({\n  type: TRENDS_STATUSES_EXPAND_SUCCESS,\n  statuses,\n  next,\n});\n\nexport const expandTrendingStatusesFail = error => ({\n  type: TRENDS_STATUSES_EXPAND_FAIL,\n  error,\n});\n","import api, { getLinks } from '../api';\n\nexport const DOMAIN_BLOCK_REQUEST = 'DOMAIN_BLOCK_REQUEST';\nexport const DOMAIN_BLOCK_SUCCESS = 'DOMAIN_BLOCK_SUCCESS';\nexport const DOMAIN_BLOCK_FAIL    = 'DOMAIN_BLOCK_FAIL';\n\nexport const DOMAIN_UNBLOCK_REQUEST = 'DOMAIN_UNBLOCK_REQUEST';\nexport const DOMAIN_UNBLOCK_SUCCESS = 'DOMAIN_UNBLOCK_SUCCESS';\nexport const DOMAIN_UNBLOCK_FAIL    = 'DOMAIN_UNBLOCK_FAIL';\n\nexport const DOMAIN_BLOCKS_FETCH_REQUEST = 'DOMAIN_BLOCKS_FETCH_REQUEST';\nexport const DOMAIN_BLOCKS_FETCH_SUCCESS = 'DOMAIN_BLOCKS_FETCH_SUCCESS';\nexport const DOMAIN_BLOCKS_FETCH_FAIL    = 'DOMAIN_BLOCKS_FETCH_FAIL';\n\nexport const DOMAIN_BLOCKS_EXPAND_REQUEST = 'DOMAIN_BLOCKS_EXPAND_REQUEST';\nexport const DOMAIN_BLOCKS_EXPAND_SUCCESS = 'DOMAIN_BLOCKS_EXPAND_SUCCESS';\nexport const DOMAIN_BLOCKS_EXPAND_FAIL    = 'DOMAIN_BLOCKS_EXPAND_FAIL';\n\nexport function blockDomain(domain) {\n  return (dispatch, getState) => {\n    dispatch(blockDomainRequest(domain));\n\n    api(getState).post('/api/v1/domain_blocks', { domain }).then(() => {\n      const at_domain = '@' + domain;\n      const accounts = getState().get('accounts').filter(item => item.get('acct').endsWith(at_domain)).valueSeq().map(item => item.get('id'));\n\n      dispatch(blockDomainSuccess(domain, accounts));\n    }).catch(err => {\n      dispatch(blockDomainFail(domain, err));\n    });\n  };\n}\n\nexport function blockDomainRequest(domain) {\n  return {\n    type: DOMAIN_BLOCK_REQUEST,\n    domain,\n  };\n}\n\nexport function blockDomainSuccess(domain, accounts) {\n  return {\n    type: DOMAIN_BLOCK_SUCCESS,\n    domain,\n    accounts,\n  };\n}\n\nexport function blockDomainFail(domain, error) {\n  return {\n    type: DOMAIN_BLOCK_FAIL,\n    domain,\n    error,\n  };\n}\n\nexport function unblockDomain(domain) {\n  return (dispatch, getState) => {\n    dispatch(unblockDomainRequest(domain));\n\n    api(getState).delete('/api/v1/domain_blocks', { params: { domain } }).then(() => {\n      const at_domain = '@' + domain;\n      const accounts = getState().get('accounts').filter(item => item.get('acct').endsWith(at_domain)).valueSeq().map(item => item.get('id'));\n      dispatch(unblockDomainSuccess(domain, accounts));\n    }).catch(err => {\n      dispatch(unblockDomainFail(domain, err));\n    });\n  };\n}\n\nexport function unblockDomainRequest(domain) {\n  return {\n    type: DOMAIN_UNBLOCK_REQUEST,\n    domain,\n  };\n}\n\nexport function unblockDomainSuccess(domain, accounts) {\n  return {\n    type: DOMAIN_UNBLOCK_SUCCESS,\n    domain,\n    accounts,\n  };\n}\n\nexport function unblockDomainFail(domain, error) {\n  return {\n    type: DOMAIN_UNBLOCK_FAIL,\n    domain,\n    error,\n  };\n}\n\nexport function fetchDomainBlocks() {\n  return (dispatch, getState) => {\n    dispatch(fetchDomainBlocksRequest());\n\n    api(getState).get('/api/v1/domain_blocks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(fetchDomainBlocksSuccess(response.data, next ? next.uri : null));\n    }).catch(err => {\n      dispatch(fetchDomainBlocksFail(err));\n    });\n  };\n}\n\nexport function fetchDomainBlocksRequest() {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchDomainBlocksSuccess(domains, next) {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_SUCCESS,\n    domains,\n    next,\n  };\n}\n\nexport function fetchDomainBlocksFail(error) {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandDomainBlocks() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['domain_lists', 'blocks', 'next']);\n\n    if (!url) {\n      return;\n    }\n\n    dispatch(expandDomainBlocksRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(expandDomainBlocksSuccess(response.data, next ? next.uri : null));\n    }).catch(err => {\n      dispatch(expandDomainBlocksFail(err));\n    });\n  };\n}\n\nexport function expandDomainBlocksRequest() {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandDomainBlocksSuccess(domains, next) {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_SUCCESS,\n    domains,\n    next,\n  };\n}\n\nexport function expandDomainBlocksFail(error) {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_FAIL,\n    error,\n  };\n}\n","import api, { getLinks } from '../api';\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\nimport { openModal } from 'flavours/glitch/actions/modal';\n\nexport const MUTES_FETCH_REQUEST = 'MUTES_FETCH_REQUEST';\nexport const MUTES_FETCH_SUCCESS = 'MUTES_FETCH_SUCCESS';\nexport const MUTES_FETCH_FAIL    = 'MUTES_FETCH_FAIL';\n\nexport const MUTES_EXPAND_REQUEST = 'MUTES_EXPAND_REQUEST';\nexport const MUTES_EXPAND_SUCCESS = 'MUTES_EXPAND_SUCCESS';\nexport const MUTES_EXPAND_FAIL    = 'MUTES_EXPAND_FAIL';\n\nexport const MUTES_INIT_MODAL = 'MUTES_INIT_MODAL';\nexport const MUTES_TOGGLE_HIDE_NOTIFICATIONS = 'MUTES_TOGGLE_HIDE_NOTIFICATIONS';\nexport const MUTES_CHANGE_DURATION = 'MUTES_CHANGE_DURATION';\n\nexport function fetchMutes() {\n  return (dispatch, getState) => {\n    dispatch(fetchMutesRequest());\n\n    api(getState).get('/api/v1/mutes').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchMutesSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(fetchMutesFail(error)));\n  };\n}\n\nexport function fetchMutesRequest() {\n  return {\n    type: MUTES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchMutesSuccess(accounts, next) {\n  return {\n    type: MUTES_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchMutesFail(error) {\n  return {\n    type: MUTES_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandMutes() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'mutes', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandMutesRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandMutesSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandMutesFail(error)));\n  };\n}\n\nexport function expandMutesRequest() {\n  return {\n    type: MUTES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandMutesSuccess(accounts, next) {\n  return {\n    type: MUTES_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandMutesFail(error) {\n  return {\n    type: MUTES_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function initMuteModal(account) {\n  return dispatch => {\n    dispatch({\n      type: MUTES_INIT_MODAL,\n      account,\n    });\n\n    dispatch(openModal('MUTE'));\n  };\n}\n\nexport function toggleHideNotifications() {\n  return dispatch => {\n    dispatch({ type: MUTES_TOGGLE_HIDE_NOTIFICATIONS });\n  };\n}\n\nexport function changeMuteDuration(duration) {\n  return dispatch => {\n    dispatch({\n      type: MUTES_CHANGE_DURATION,\n      duration,\n    });\n  };\n}\n","import api, { getLinks } from '../api';\n\nexport const HASHTAG_FETCH_REQUEST = 'HASHTAG_FETCH_REQUEST';\nexport const HASHTAG_FETCH_SUCCESS = 'HASHTAG_FETCH_SUCCESS';\nexport const HASHTAG_FETCH_FAIL    = 'HASHTAG_FETCH_FAIL';\n\nexport const FOLLOWED_HASHTAGS_FETCH_REQUEST = 'FOLLOWED_HASHTAGS_FETCH_REQUEST';\nexport const FOLLOWED_HASHTAGS_FETCH_SUCCESS = 'FOLLOWED_HASHTAGS_FETCH_SUCCESS';\nexport const FOLLOWED_HASHTAGS_FETCH_FAIL    = 'FOLLOWED_HASHTAGS_FETCH_FAIL';\n\nexport const FOLLOWED_HASHTAGS_EXPAND_REQUEST = 'FOLLOWED_HASHTAGS_EXPAND_REQUEST';\nexport const FOLLOWED_HASHTAGS_EXPAND_SUCCESS = 'FOLLOWED_HASHTAGS_EXPAND_SUCCESS';\nexport const FOLLOWED_HASHTAGS_EXPAND_FAIL    = 'FOLLOWED_HASHTAGS_EXPAND_FAIL';\n\nexport const HASHTAG_FOLLOW_REQUEST = 'HASHTAG_FOLLOW_REQUEST';\nexport const HASHTAG_FOLLOW_SUCCESS = 'HASHTAG_FOLLOW_SUCCESS';\nexport const HASHTAG_FOLLOW_FAIL    = 'HASHTAG_FOLLOW_FAIL';\n\nexport const HASHTAG_UNFOLLOW_REQUEST = 'HASHTAG_UNFOLLOW_REQUEST';\nexport const HASHTAG_UNFOLLOW_SUCCESS = 'HASHTAG_UNFOLLOW_SUCCESS';\nexport const HASHTAG_UNFOLLOW_FAIL    = 'HASHTAG_UNFOLLOW_FAIL';\n\nexport const fetchHashtag = name => (dispatch, getState) => {\n  dispatch(fetchHashtagRequest());\n\n  api(getState).get(`/api/v1/tags/${name}`).then(({ data }) => {\n    dispatch(fetchHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(fetchHashtagFail(err));\n  });\n};\n\nexport const fetchHashtagRequest = () => ({\n  type: HASHTAG_FETCH_REQUEST,\n});\n\nexport const fetchHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_FETCH_SUCCESS,\n  name,\n  tag,\n});\n\nexport const fetchHashtagFail = error => ({\n  type: HASHTAG_FETCH_FAIL,\n  error,\n});\n\nexport const fetchFollowedHashtags = () => (dispatch, getState) => {\n  dispatch(fetchFollowedHashtagsRequest());\n\n  api(getState).get('/api/v1/followed_tags').then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(fetchFollowedHashtagsSuccess(response.data, next ? next.uri : null));\n  }).catch(err => {\n    dispatch(fetchFollowedHashtagsFail(err));\n  });\n};\n\nexport function fetchFollowedHashtagsRequest() {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowedHashtagsSuccess(followed_tags, next) {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_SUCCESS,\n    followed_tags,\n    next,\n  };\n}\n\nexport function fetchFollowedHashtagsFail(error) {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowedHashtags() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['followed_tags', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowedHashtagsRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(expandFollowedHashtagsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandFollowedHashtagsFail(error));\n    });\n  };\n}\n\nexport function expandFollowedHashtagsRequest() {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowedHashtagsSuccess(followed_tags, next) {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_SUCCESS,\n    followed_tags,\n    next,\n  };\n}\n\nexport function expandFollowedHashtagsFail(error) {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport const followHashtag = name => (dispatch, getState) => {\n  dispatch(followHashtagRequest(name));\n\n  api(getState).post(`/api/v1/tags/${name}/follow`).then(({ data }) => {\n    dispatch(followHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(followHashtagFail(name, err));\n  });\n};\n\nexport const followHashtagRequest = name => ({\n  type: HASHTAG_FOLLOW_REQUEST,\n  name,\n});\n\nexport const followHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_FOLLOW_SUCCESS,\n  name,\n  tag,\n});\n\nexport const followHashtagFail = (name, error) => ({\n  type: HASHTAG_FOLLOW_FAIL,\n  name,\n  error,\n});\n\nexport const unfollowHashtag = name => (dispatch, getState) => {\n  dispatch(unfollowHashtagRequest(name));\n\n  api(getState).post(`/api/v1/tags/${name}/unfollow`).then(({ data }) => {\n    dispatch(unfollowHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(unfollowHashtagFail(name, err));\n  });\n};\n\nexport const unfollowHashtagRequest = name => ({\n  type: HASHTAG_UNFOLLOW_REQUEST,\n  name,\n});\n\nexport const unfollowHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_UNFOLLOW_SUCCESS,\n  name,\n  tag,\n});\n\nexport const unfollowHashtagFail = (name, error) => ({\n  type: HASHTAG_UNFOLLOW_FAIL,\n  name,\n  error,\n});\n","import api from '../api';\nimport { normalizeAnnouncement } from './importer/normalizer';\n\nexport const ANNOUNCEMENTS_FETCH_REQUEST = 'ANNOUNCEMENTS_FETCH_REQUEST';\nexport const ANNOUNCEMENTS_FETCH_SUCCESS = 'ANNOUNCEMENTS_FETCH_SUCCESS';\nexport const ANNOUNCEMENTS_FETCH_FAIL    = 'ANNOUNCEMENTS_FETCH_FAIL';\nexport const ANNOUNCEMENTS_UPDATE        = 'ANNOUNCEMENTS_UPDATE';\nexport const ANNOUNCEMENTS_DELETE        = 'ANNOUNCEMENTS_DELETE';\n\nexport const ANNOUNCEMENTS_DISMISS_REQUEST = 'ANNOUNCEMENTS_DISMISS_REQUEST';\nexport const ANNOUNCEMENTS_DISMISS_SUCCESS = 'ANNOUNCEMENTS_DISMISS_SUCCESS';\nexport const ANNOUNCEMENTS_DISMISS_FAIL    = 'ANNOUNCEMENTS_DISMISS_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_ADD_REQUEST = 'ANNOUNCEMENTS_REACTION_ADD_REQUEST';\nexport const ANNOUNCEMENTS_REACTION_ADD_SUCCESS = 'ANNOUNCEMENTS_REACTION_ADD_SUCCESS';\nexport const ANNOUNCEMENTS_REACTION_ADD_FAIL    = 'ANNOUNCEMENTS_REACTION_ADD_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_REMOVE_REQUEST = 'ANNOUNCEMENTS_REACTION_REMOVE_REQUEST';\nexport const ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS = 'ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS';\nexport const ANNOUNCEMENTS_REACTION_REMOVE_FAIL    = 'ANNOUNCEMENTS_REACTION_REMOVE_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_UPDATE = 'ANNOUNCEMENTS_REACTION_UPDATE';\n\nexport const ANNOUNCEMENTS_TOGGLE_SHOW = 'ANNOUNCEMENTS_TOGGLE_SHOW';\n\nconst noOp = () => {};\n\nexport const fetchAnnouncements = (done = noOp) => (dispatch, getState) => {\n  dispatch(fetchAnnouncementsRequest());\n\n  api(getState).get('/api/v1/announcements').then(response => {\n    dispatch(fetchAnnouncementsSuccess(response.data.map(x => normalizeAnnouncement(x))));\n  }).catch(error => {\n    dispatch(fetchAnnouncementsFail(error));\n  }).finally(() => {\n    done();\n  });\n};\n\nexport const fetchAnnouncementsRequest = () => ({\n  type: ANNOUNCEMENTS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchAnnouncementsSuccess = announcements => ({\n  type: ANNOUNCEMENTS_FETCH_SUCCESS,\n  announcements,\n  skipLoading: true,\n});\n\nexport const fetchAnnouncementsFail= error => ({\n  type: ANNOUNCEMENTS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const updateAnnouncements = announcement => ({\n  type: ANNOUNCEMENTS_UPDATE,\n  announcement: normalizeAnnouncement(announcement),\n});\n\nexport const dismissAnnouncement = announcementId => (dispatch, getState) => {\n  dispatch(dismissAnnouncementRequest(announcementId));\n\n  api(getState).post(`/api/v1/announcements/${announcementId}/dismiss`).then(() => {\n    dispatch(dismissAnnouncementSuccess(announcementId));\n  }).catch(error => {\n    dispatch(dismissAnnouncementFail(announcementId, error));\n  });\n};\n\nexport const dismissAnnouncementRequest = announcementId => ({\n  type: ANNOUNCEMENTS_DISMISS_REQUEST,\n  id: announcementId,\n});\n\nexport const dismissAnnouncementSuccess = announcementId => ({\n  type: ANNOUNCEMENTS_DISMISS_SUCCESS,\n  id: announcementId,\n});\n\nexport const dismissAnnouncementFail = (announcementId, error) => ({\n  type: ANNOUNCEMENTS_DISMISS_FAIL,\n  id: announcementId,\n  error,\n});\n\nexport const addReaction = (announcementId, name) => (dispatch, getState) => {\n  const announcement = getState().getIn(['announcements', 'items']).find(x => x.get('id') === announcementId);\n\n  let alreadyAdded = false;\n\n  if (announcement) {\n    const reaction = announcement.get('reactions').find(x => x.get('name') === name);\n    if (reaction && reaction.get('me')) {\n      alreadyAdded = true;\n    }\n  }\n\n  if (!alreadyAdded) {\n    dispatch(addReactionRequest(announcementId, name, alreadyAdded));\n  }\n\n  api(getState).put(`/api/v1/announcements/${announcementId}/reactions/${encodeURIComponent(name)}`).then(() => {\n    dispatch(addReactionSuccess(announcementId, name, alreadyAdded));\n  }).catch(err => {\n    if (!alreadyAdded) {\n      dispatch(addReactionFail(announcementId, name, err));\n    }\n  });\n};\n\nexport const addReactionRequest = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_REQUEST,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const addReactionSuccess = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_SUCCESS,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const addReactionFail = (announcementId, name, error) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_FAIL,\n  id: announcementId,\n  name,\n  error,\n  skipLoading: true,\n});\n\nexport const removeReaction = (announcementId, name) => (dispatch, getState) => {\n  dispatch(removeReactionRequest(announcementId, name));\n\n  api(getState).delete(`/api/v1/announcements/${announcementId}/reactions/${encodeURIComponent(name)}`).then(() => {\n    dispatch(removeReactionSuccess(announcementId, name));\n  }).catch(err => {\n    dispatch(removeReactionFail(announcementId, name, err));\n  });\n};\n\nexport const removeReactionRequest = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_REQUEST,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const removeReactionSuccess = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const removeReactionFail = (announcementId, name, error) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_FAIL,\n  id: announcementId,\n  name,\n  error,\n  skipLoading: true,\n});\n\nexport const updateReaction = reaction => ({\n  type: ANNOUNCEMENTS_REACTION_UPDATE,\n  reaction,\n});\n\nexport const toggleShowAnnouncements = () => ({\n  type: ANNOUNCEMENTS_TOGGLE_SHOW,\n});\n\nexport const deleteAnnouncement = id => ({\n  type: ANNOUNCEMENTS_DELETE,\n  id,\n});\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { autoPlayGif } from 'flavours/glitch/initial_state';\nimport Skeleton from 'flavours/glitch/components/skeleton';\n\nexport default class DisplayName extends React.PureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.map,\n    className: PropTypes.string,\n    inline: PropTypes.bool,\n    localDomain: PropTypes.string,\n    others: ImmutablePropTypes.list,\n    handleClick: PropTypes.func,\n  };\n\n  handleMouseEnter = ({ currentTarget }) => {\n    if (autoPlayGif) {\n      return;\n    }\n\n    const emojis = currentTarget.querySelectorAll('.custom-emoji');\n\n    for (var i = 0; i < emojis.length; i++) {\n      let emoji = emojis[i];\n      emoji.src = emoji.getAttribute('data-original');\n    }\n  };\n\n  handleMouseLeave = ({ currentTarget }) => {\n    if (autoPlayGif) {\n      return;\n    }\n\n    const emojis = currentTarget.querySelectorAll('.custom-emoji');\n\n    for (var i = 0; i < emojis.length; i++) {\n      let emoji = emojis[i];\n      emoji.src = emoji.getAttribute('data-static');\n    }\n  };\n\n  render() {\n    const { account, className, inline, localDomain, others, onAccountClick } = this.props;\n\n    const computedClass = classNames('display-name', { inline }, className);\n\n    let displayName, suffix;\n    let acct;\n\n    if (account) {\n      acct = account.get('acct');\n\n      if (acct.indexOf('@') === -1 && localDomain) {\n        acct = `${acct}@${localDomain}`;\n      }\n    }\n\n    if (others && others.size > 0) {\n      displayName = others.take(2).map(a => (\n        <a\n          href={a.get('url')}\n          target='_blank'\n          onClick={(e) => onAccountClick(a.get('acct'), e)}\n          title={`@${a.get('acct')}`}\n          rel='noopener noreferrer'\n        >\n          <bdi key={a.get('id')}>\n            <strong className='display-name__html' dangerouslySetInnerHTML={{ __html: a.get('display_name_html') }} />\n          </bdi>\n        </a>\n      )).reduce((prev, cur) => [prev, ', ', cur]);\n\n      if (others.size - 2 > 0) {\n        displayName.push(` +${others.size - 2}`);\n      }\n\n      suffix = (\n        <a href={account.get('url')} target='_blank' onClick={(e) => onAccountClick(account.get('acct'), e)} rel='noopener noreferrer'>\n          <span className='display-name__account'>@{acct}</span>\n        </a>\n      );\n    } else if (account) {\n      displayName = <bdi><strong className='display-name__html' dangerouslySetInnerHTML={{ __html: account.get('display_name_html') }} /></bdi>;\n      suffix      = <span className='display-name__account'>@{acct}</span>;\n    } else {\n      displayName = <bdi><strong className='display-name__html'><Skeleton width='10ch' /></strong></bdi>;\n      suffix = <span className='display-name__account'><Skeleton width='7ch' /></span>;\n    }\n\n    return (\n      <span className={computedClass} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave}>\n        {displayName}\n        {inline ? ' ' : null}\n        {suffix}\n      </span>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { autoPlayGif } from 'flavours/glitch/initial_state';\nimport classNames from 'classnames';\n\nexport default class Avatar extends React.PureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.map,\n    className: PropTypes.string,\n    size: PropTypes.number.isRequired,\n    style: PropTypes.object,\n    inline: PropTypes.bool,\n    animate: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    animate: autoPlayGif,\n    size: 20,\n    inline: false,\n  };\n\n  state = {\n    hovering: false,\n  };\n\n  handleMouseEnter = () => {\n    if (this.props.animate) return;\n    this.setState({ hovering: true });\n  };\n\n  handleMouseLeave = () => {\n    if (this.props.animate) return;\n    this.setState({ hovering: false });\n  };\n\n  render () {\n    const {\n      account,\n      animate,\n      className,\n      inline,\n      size,\n    } = this.props;\n    const { hovering } = this.state;\n\n    const style = {\n      ...this.props.style,\n      width: `${size}px`,\n      height: `${size}px`,\n      backgroundSize: `${size}px ${size}px`,\n    };\n\n    if (account) {\n      const src = account.get('avatar');\n      const staticSrc = account.get('avatar_static');\n\n      if (hovering || animate) {\n        style.backgroundImage = `url(${src})`;\n      } else {\n        style.backgroundImage = `url(${staticSrc})`;\n      }\n    }\n\n    return (\n      <div\n        className={classNames('account__avatar', { 'account__avatar-inline': inline }, className)}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n        style={style}\n        data-avatar-of={account && `@${account.get('acct')}`}\n        role='img'\n        aria-label={account?.get('acct')}\n      />\n    );\n  }\n\n}\n","// @ts-check\n\nimport { supportsPassiveEvents } from 'detect-passive-events';\nimport { forceSingleColumn } from 'flavours/glitch/initial_state';\n\nconst LAYOUT_BREAKPOINT = 630;\n\n/**\n * @param {number} width\n * @returns {boolean}\n */\nexport const isMobile = width => width <= LAYOUT_BREAKPOINT;\n\n/**\n * @param {string} layout_local_setting\n * @returns {string}\n */\nexport const layoutFromWindow = (layout_local_setting) => {\n  switch (layout_local_setting) {\n  case 'multiple':\n    return 'multi-column';\n  case 'single':\n    if (isMobile(window.innerWidth)) {\n      return 'mobile';\n    } else {\n      return 'single-column';\n    }\n  default:\n    if (isMobile(window.innerWidth)) {\n      return 'mobile';\n    } else if (forceSingleColumn) {\n      return 'single-column';\n    } else {\n      return 'multi-column';\n    }\n  }\n};\n\nconst iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\nconst listenerOptions = supportsPassiveEvents ? { passive: true } : false;\n\nlet userTouching = false;\n\nconst touchListener = () => {\n  userTouching = true;\n\n  window.removeEventListener('touchstart', touchListener, listenerOptions);\n};\n\nwindow.addEventListener('touchstart', touchListener, listenerOptions);\n\nexport const isUserTouching = () => userTouching;\n\nexport const isIOS = () => iOS;\n","import api from '../api';\nimport { importFetchedAccount } from './importer';\n\nexport const SERVER_FETCH_REQUEST = 'Server_FETCH_REQUEST';\nexport const SERVER_FETCH_SUCCESS = 'Server_FETCH_SUCCESS';\nexport const SERVER_FETCH_FAIL    = 'Server_FETCH_FAIL';\n\nexport const EXTENDED_DESCRIPTION_REQUEST = 'EXTENDED_DESCRIPTION_REQUEST';\nexport const EXTENDED_DESCRIPTION_SUCCESS = 'EXTENDED_DESCRIPTION_SUCCESS';\nexport const EXTENDED_DESCRIPTION_FAIL    = 'EXTENDED_DESCRIPTION_FAIL';\n\nexport const SERVER_DOMAIN_BLOCKS_FETCH_REQUEST = 'SERVER_DOMAIN_BLOCKS_FETCH_REQUEST';\nexport const SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS = 'SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS';\nexport const SERVER_DOMAIN_BLOCKS_FETCH_FAIL    = 'SERVER_DOMAIN_BLOCKS_FETCH_FAIL';\n\nexport const fetchServer = () => (dispatch, getState) => {\n  dispatch(fetchServerRequest());\n\n  api(getState)\n    .get('/api/v2/instance').then(({ data }) => {\n      if (data.contact.account) dispatch(importFetchedAccount(data.contact.account));\n      dispatch(fetchServerSuccess(data));\n    }).catch(err => dispatch(fetchServerFail(err)));\n};\n\nconst fetchServerRequest = () => ({\n  type: SERVER_FETCH_REQUEST,\n});\n\nconst fetchServerSuccess = server => ({\n  type: SERVER_FETCH_SUCCESS,\n  server,\n});\n\nconst fetchServerFail = error => ({\n  type: SERVER_FETCH_FAIL,\n  error,\n});\n\nexport const fetchExtendedDescription = () => (dispatch, getState) => {\n  dispatch(fetchExtendedDescriptionRequest());\n\n  api(getState)\n    .get('/api/v1/instance/extended_description')\n    .then(({ data }) => dispatch(fetchExtendedDescriptionSuccess(data)))\n    .catch(err => dispatch(fetchExtendedDescriptionFail(err)));\n};\n\nconst fetchExtendedDescriptionRequest = () => ({\n  type: EXTENDED_DESCRIPTION_REQUEST,\n});\n\nconst fetchExtendedDescriptionSuccess = description => ({\n  type: EXTENDED_DESCRIPTION_SUCCESS,\n  description,\n});\n\nconst fetchExtendedDescriptionFail = error => ({\n  type: EXTENDED_DESCRIPTION_FAIL,\n  error,\n});\n\nexport const fetchDomainBlocks = () => (dispatch, getState) => {\n  dispatch(fetchDomainBlocksRequest());\n\n  api(getState)\n    .get('/api/v1/instance/domain_blocks')\n    .then(({ data }) => dispatch(fetchDomainBlocksSuccess(true, data)))\n    .catch(err => {\n      if (err.response.status === 404) {\n        dispatch(fetchDomainBlocksSuccess(false, []));\n      } else {\n        dispatch(fetchDomainBlocksFail(err));\n      }\n    });\n};\n\nconst fetchDomainBlocksRequest = () => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_REQUEST,\n});\n\nconst fetchDomainBlocksSuccess = (isAvailable, blocks) => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS,\n  isAvailable,\n  blocks,\n});\n\nconst fetchDomainBlocksFail = error => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_FAIL,\n  error,\n});\n","import api, { getLinks } from '../api';\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\nimport { openModal } from './modal';\n\nexport const BLOCKS_FETCH_REQUEST = 'BLOCKS_FETCH_REQUEST';\nexport const BLOCKS_FETCH_SUCCESS = 'BLOCKS_FETCH_SUCCESS';\nexport const BLOCKS_FETCH_FAIL    = 'BLOCKS_FETCH_FAIL';\n\nexport const BLOCKS_EXPAND_REQUEST = 'BLOCKS_EXPAND_REQUEST';\nexport const BLOCKS_EXPAND_SUCCESS = 'BLOCKS_EXPAND_SUCCESS';\nexport const BLOCKS_EXPAND_FAIL    = 'BLOCKS_EXPAND_FAIL';\n\nexport const BLOCKS_INIT_MODAL = 'BLOCKS_INIT_MODAL';\n\nexport function fetchBlocks() {\n  return (dispatch, getState) => {\n    dispatch(fetchBlocksRequest());\n\n    api(getState).get('/api/v1/blocks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchBlocksSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(fetchBlocksFail(error)));\n  };\n}\n\nexport function fetchBlocksRequest() {\n  return {\n    type: BLOCKS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchBlocksSuccess(accounts, next) {\n  return {\n    type: BLOCKS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchBlocksFail(error) {\n  return {\n    type: BLOCKS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandBlocks() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'blocks', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandBlocksRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandBlocksSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandBlocksFail(error)));\n  };\n}\n\nexport function expandBlocksRequest() {\n  return {\n    type: BLOCKS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandBlocksSuccess(accounts, next) {\n  return {\n    type: BLOCKS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandBlocksFail(error) {\n  return {\n    type: BLOCKS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function initBlockModal(account) {\n  return dispatch => {\n    dispatch({\n      type: BLOCKS_INIT_MODAL,\n      account,\n    });\n\n    dispatch(openModal('BLOCK'));\n  };\n}\n","import api from '../api';\n\nexport const ACCOUNT_NOTE_SUBMIT_REQUEST = 'ACCOUNT_NOTE_SUBMIT_REQUEST';\nexport const ACCOUNT_NOTE_SUBMIT_SUCCESS = 'ACCOUNT_NOTE_SUBMIT_SUCCESS';\nexport const ACCOUNT_NOTE_SUBMIT_FAIL    = 'ACCOUNT_NOTE_SUBMIT_FAIL';\n\nexport const ACCOUNT_NOTE_INIT_EDIT = 'ACCOUNT_NOTE_INIT_EDIT';\nexport const ACCOUNT_NOTE_CANCEL    = 'ACCOUNT_NOTE_CANCEL';\n\nexport const ACCOUNT_NOTE_CHANGE_COMMENT = 'ACCOUNT_NOTE_CHANGE_COMMENT';\n\nexport function submitAccountNote() {\n  return (dispatch, getState) => {\n    dispatch(submitAccountNoteRequest());\n\n    const id = getState().getIn(['account_notes', 'edit', 'account_id']);\n\n    api(getState).post(`/api/v1/accounts/${id}/note`, {\n      comment: getState().getIn(['account_notes', 'edit', 'comment']),\n    }).then(response => {\n      dispatch(submitAccountNoteSuccess(response.data));\n    }).catch(error => dispatch(submitAccountNoteFail(error)));\n  };\n}\n\nexport function submitAccountNoteRequest() {\n  return {\n    type: ACCOUNT_NOTE_SUBMIT_REQUEST,\n  };\n}\n\nexport function submitAccountNoteSuccess(relationship) {\n  return {\n    type: ACCOUNT_NOTE_SUBMIT_SUCCESS,\n    relationship,\n  };\n}\n\nexport function submitAccountNoteFail(error) {\n  return {\n    type: ACCOUNT_NOTE_SUBMIT_FAIL,\n    error,\n  };\n}\n\nexport function initEditAccountNote(account) {\n  return (dispatch, getState) => {\n    const comment = getState().getIn(['relationships', account.get('id'), 'note']);\n\n    dispatch({\n      type: ACCOUNT_NOTE_INIT_EDIT,\n      account,\n      comment,\n    });\n  };\n}\n\nexport function cancelAccountNote() {\n  return {\n    type: ACCOUNT_NOTE_CANCEL,\n  };\n}\n\nexport function changeAccountNoteComment(comment) {\n  return {\n    type: ACCOUNT_NOTE_CHANGE_COMMENT,\n    comment,\n  };\n}\n","import api, { getLinks } from '../api';\nimport {\n  importFetchedAccounts,\n  importFetchedStatuses,\n  importFetchedStatus,\n} from './importer';\n\nexport const CONVERSATIONS_MOUNT   = 'CONVERSATIONS_MOUNT';\nexport const CONVERSATIONS_UNMOUNT = 'CONVERSATIONS_UNMOUNT';\n\nexport const CONVERSATIONS_FETCH_REQUEST = 'CONVERSATIONS_FETCH_REQUEST';\nexport const CONVERSATIONS_FETCH_SUCCESS = 'CONVERSATIONS_FETCH_SUCCESS';\nexport const CONVERSATIONS_FETCH_FAIL    = 'CONVERSATIONS_FETCH_FAIL';\nexport const CONVERSATIONS_UPDATE        = 'CONVERSATIONS_UPDATE';\n\nexport const CONVERSATIONS_READ = 'CONVERSATIONS_READ';\n\nexport const CONVERSATIONS_DELETE_REQUEST = 'CONVERSATIONS_DELETE_REQUEST';\nexport const CONVERSATIONS_DELETE_SUCCESS = 'CONVERSATIONS_DELETE_SUCCESS';\nexport const CONVERSATIONS_DELETE_FAIL    = 'CONVERSATIONS_DELETE_FAIL';\n\nexport const mountConversations = () => ({\n  type: CONVERSATIONS_MOUNT,\n});\n\nexport const unmountConversations = () => ({\n  type: CONVERSATIONS_UNMOUNT,\n});\n\nexport const markConversationRead = conversationId => (dispatch, getState) => {\n  dispatch({\n    type: CONVERSATIONS_READ,\n    id: conversationId,\n  });\n\n  api(getState).post(`/api/v1/conversations/${conversationId}/read`);\n};\n\nexport const expandConversations = ({ maxId } = {}) => (dispatch, getState) => {\n  dispatch(expandConversationsRequest());\n\n  const params = { max_id: maxId };\n\n  if (!maxId) {\n    params.since_id = getState().getIn(['conversations', 'items', 0, 'last_status']);\n  }\n\n  const isLoadingRecent = !!params.since_id;\n\n  api(getState).get('/api/v1/conversations', { params })\n    .then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data.reduce((aggr, item) => aggr.concat(item.accounts), [])));\n      dispatch(importFetchedStatuses(response.data.map(item => item.last_status).filter(x => !!x)));\n      dispatch(expandConversationsSuccess(response.data, next ? next.uri : null, isLoadingRecent));\n    })\n    .catch(err => dispatch(expandConversationsFail(err)));\n};\n\nexport const expandConversationsRequest = () => ({\n  type: CONVERSATIONS_FETCH_REQUEST,\n});\n\nexport const expandConversationsSuccess = (conversations, next, isLoadingRecent) => ({\n  type: CONVERSATIONS_FETCH_SUCCESS,\n  conversations,\n  next,\n  isLoadingRecent,\n});\n\nexport const expandConversationsFail = error => ({\n  type: CONVERSATIONS_FETCH_FAIL,\n  error,\n});\n\nexport const updateConversations = conversation => dispatch => {\n  dispatch(importFetchedAccounts(conversation.accounts));\n\n  if (conversation.last_status) {\n    dispatch(importFetchedStatus(conversation.last_status));\n  }\n\n  dispatch({\n    type: CONVERSATIONS_UPDATE,\n    conversation,\n  });\n};\n\nexport const deleteConversation = conversationId => (dispatch, getState) => {\n  dispatch(deleteConversationRequest(conversationId));\n\n  api(getState).delete(`/api/v1/conversations/${conversationId}`)\n    .then(() => dispatch(deleteConversationSuccess(conversationId)))\n    .catch(error => dispatch(deleteConversationFail(conversationId, error)));\n};\n\nexport const deleteConversationRequest = id => ({\n  type: CONVERSATIONS_DELETE_REQUEST,\n  id,\n});\n\nexport const deleteConversationSuccess = id => ({\n  type: CONVERSATIONS_DELETE_SUCCESS,\n  id,\n});\n\nexport const deleteConversationFail = (id, error) => ({\n  type: CONVERSATIONS_DELETE_FAIL,\n  id,\n  error,\n});\n","import api from '../api';\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatuses } from './importer';\n\nexport const SEARCH_CHANGE = 'SEARCH_CHANGE';\nexport const SEARCH_CLEAR  = 'SEARCH_CLEAR';\nexport const SEARCH_SHOW   = 'SEARCH_SHOW';\n\nexport const SEARCH_FETCH_REQUEST = 'SEARCH_FETCH_REQUEST';\nexport const SEARCH_FETCH_SUCCESS = 'SEARCH_FETCH_SUCCESS';\nexport const SEARCH_FETCH_FAIL    = 'SEARCH_FETCH_FAIL';\n\nexport const SEARCH_EXPAND_REQUEST = 'SEARCH_EXPAND_REQUEST';\nexport const SEARCH_EXPAND_SUCCESS = 'SEARCH_EXPAND_SUCCESS';\nexport const SEARCH_EXPAND_FAIL    = 'SEARCH_EXPAND_FAIL';\n\nexport function changeSearch(value) {\n  return {\n    type: SEARCH_CHANGE,\n    value,\n  };\n}\n\nexport function clearSearch() {\n  return {\n    type: SEARCH_CLEAR,\n  };\n}\n\nexport function submitSearch() {\n  return (dispatch, getState) => {\n    const value    = getState().getIn(['search', 'value']);\n    const signedIn = !!getState().getIn(['meta', 'me']);\n\n    if (value.length === 0) {\n      dispatch(fetchSearchSuccess({ accounts: [], statuses: [], hashtags: [] }, ''));\n      return;\n    }\n\n    dispatch(fetchSearchRequest());\n\n    api(getState).get('/api/v2/search', {\n      params: {\n        q: value,\n        resolve: signedIn,\n        limit: 10,\n      },\n    }).then(response => {\n      if (response.data.accounts) {\n        dispatch(importFetchedAccounts(response.data.accounts));\n      }\n\n      if (response.data.statuses) {\n        dispatch(importFetchedStatuses(response.data.statuses));\n      }\n\n      dispatch(fetchSearchSuccess(response.data, value));\n      dispatch(fetchRelationships(response.data.accounts.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchSearchFail(error));\n    });\n  };\n}\n\nexport function fetchSearchRequest() {\n  return {\n    type: SEARCH_FETCH_REQUEST,\n  };\n}\n\nexport function fetchSearchSuccess(results, searchTerm) {\n  return {\n    type: SEARCH_FETCH_SUCCESS,\n    results,\n    searchTerm,\n  };\n}\n\nexport function fetchSearchFail(error) {\n  return {\n    type: SEARCH_FETCH_FAIL,\n    error,\n  };\n}\n\nexport const expandSearch = type => (dispatch, getState) => {\n  const value  = getState().getIn(['search', 'value']);\n  const offset = getState().getIn(['search', 'results', type]).size;\n\n  dispatch(expandSearchRequest());\n\n  api(getState).get('/api/v2/search', {\n    params: {\n      q: value,\n      type,\n      offset,\n    },\n  }).then(({ data }) => {\n    if (data.accounts) {\n      dispatch(importFetchedAccounts(data.accounts));\n    }\n\n    if (data.statuses) {\n      dispatch(importFetchedStatuses(data.statuses));\n    }\n\n    dispatch(expandSearchSuccess(data, value, type));\n    dispatch(fetchRelationships(data.accounts.map(item => item.id)));\n  }).catch(error => {\n    dispatch(expandSearchFail(error));\n  });\n};\n\nexport const expandSearchRequest = () => ({\n  type: SEARCH_EXPAND_REQUEST,\n});\n\nexport const expandSearchSuccess = (results, searchTerm, searchType) => ({\n  type: SEARCH_EXPAND_SUCCESS,\n  results,\n  searchTerm,\n  searchType,\n});\n\nexport const expandSearchFail = error => ({\n  type: SEARCH_EXPAND_FAIL,\n  error,\n});\n\nexport const showSearch = () => ({\n  type: SEARCH_SHOW,\n});\n","import api from '../api';\nimport { importFetchedAccounts } from './importer';\nimport { fetchRelationships } from './accounts';\n\nexport const DIRECTORY_FETCH_REQUEST = 'DIRECTORY_FETCH_REQUEST';\nexport const DIRECTORY_FETCH_SUCCESS = 'DIRECTORY_FETCH_SUCCESS';\nexport const DIRECTORY_FETCH_FAIL    = 'DIRECTORY_FETCH_FAIL';\n\nexport const DIRECTORY_EXPAND_REQUEST = 'DIRECTORY_EXPAND_REQUEST';\nexport const DIRECTORY_EXPAND_SUCCESS = 'DIRECTORY_EXPAND_SUCCESS';\nexport const DIRECTORY_EXPAND_FAIL    = 'DIRECTORY_EXPAND_FAIL';\n\nexport const fetchDirectory = params => (dispatch, getState) => {\n  dispatch(fetchDirectoryRequest());\n\n  api(getState).get('/api/v1/directory', { params: { ...params, limit: 20 } }).then(({ data }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchDirectorySuccess(data));\n    dispatch(fetchRelationships(data.map(x => x.id)));\n  }).catch(error => dispatch(fetchDirectoryFail(error)));\n};\n\nexport const fetchDirectoryRequest = () => ({\n  type: DIRECTORY_FETCH_REQUEST,\n});\n\nexport const fetchDirectorySuccess = accounts => ({\n  type: DIRECTORY_FETCH_SUCCESS,\n  accounts,\n});\n\nexport const fetchDirectoryFail = error => ({\n  type: DIRECTORY_FETCH_FAIL,\n  error,\n});\n\nexport const expandDirectory = params => (dispatch, getState) => {\n  dispatch(expandDirectoryRequest());\n\n  const loadedItems = getState().getIn(['user_lists', 'directory', 'items']).size;\n\n  api(getState).get('/api/v1/directory', { params: { ...params, offset: loadedItems, limit: 20 } }).then(({ data }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(expandDirectorySuccess(data));\n    dispatch(fetchRelationships(data.map(x => x.id)));\n  }).catch(error => dispatch(expandDirectoryFail(error)));\n};\n\nexport const expandDirectoryRequest = () => ({\n  type: DIRECTORY_EXPAND_REQUEST,\n});\n\nexport const expandDirectorySuccess = accounts => ({\n  type: DIRECTORY_EXPAND_SUCCESS,\n  accounts,\n});\n\nexport const expandDirectoryFail = error => ({\n  type: DIRECTORY_EXPAND_FAIL,\n  error,\n});\n","import api, { getLinks } from '../api';\nimport { importFetchedStatuses } from './importer';\n\nexport const FAVOURITED_STATUSES_FETCH_REQUEST = 'FAVOURITED_STATUSES_FETCH_REQUEST';\nexport const FAVOURITED_STATUSES_FETCH_SUCCESS = 'FAVOURITED_STATUSES_FETCH_SUCCESS';\nexport const FAVOURITED_STATUSES_FETCH_FAIL    = 'FAVOURITED_STATUSES_FETCH_FAIL';\n\nexport const FAVOURITED_STATUSES_EXPAND_REQUEST = 'FAVOURITED_STATUSES_EXPAND_REQUEST';\nexport const FAVOURITED_STATUSES_EXPAND_SUCCESS = 'FAVOURITED_STATUSES_EXPAND_SUCCESS';\nexport const FAVOURITED_STATUSES_EXPAND_FAIL    = 'FAVOURITED_STATUSES_EXPAND_FAIL';\n\nexport function fetchFavouritedStatuses() {\n  return (dispatch, getState) => {\n    if (getState().getIn(['status_lists', 'favourites', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(fetchFavouritedStatusesRequest());\n\n    api(getState).get('/api/v1/favourites').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchFavouritedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(fetchFavouritedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchFavouritedStatusesRequest() {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchFavouritedStatusesSuccess(statuses, next) {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n    skipLoading: true,\n  };\n}\n\nexport function fetchFavouritedStatusesFail(error) {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function expandFavouritedStatuses() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['status_lists', 'favourites', 'next'], null);\n\n    if (url === null || getState().getIn(['status_lists', 'favourites', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(expandFavouritedStatusesRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandFavouritedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandFavouritedStatusesFail(error));\n    });\n  };\n}\n\nexport function expandFavouritedStatusesRequest() {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFavouritedStatusesSuccess(statuses, next) {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function expandFavouritedStatusesFail(error) {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_FAIL,\n    error,\n  };\n}\n","import api, { getLinks } from '../api';\nimport { importFetchedStatuses } from './importer';\n\nexport const BOOKMARKED_STATUSES_FETCH_REQUEST = 'BOOKMARKED_STATUSES_FETCH_REQUEST';\nexport const BOOKMARKED_STATUSES_FETCH_SUCCESS = 'BOOKMARKED_STATUSES_FETCH_SUCCESS';\nexport const BOOKMARKED_STATUSES_FETCH_FAIL    = 'BOOKMARKED_STATUSES_FETCH_FAIL';\n\nexport const BOOKMARKED_STATUSES_EXPAND_REQUEST = 'BOOKMARKED_STATUSES_EXPAND_REQUEST';\nexport const BOOKMARKED_STATUSES_EXPAND_SUCCESS = 'BOOKMARKED_STATUSES_EXPAND_SUCCESS';\nexport const BOOKMARKED_STATUSES_EXPAND_FAIL    = 'BOOKMARKED_STATUSES_EXPAND_FAIL';\n\nexport function fetchBookmarkedStatuses() {\n  return (dispatch, getState) => {\n    if (getState().getIn(['status_lists', 'bookmarks', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(fetchBookmarkedStatusesRequest());\n\n    api(getState).get('/api/v1/bookmarks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchBookmarkedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(fetchBookmarkedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchBookmarkedStatusesRequest() {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchBookmarkedStatusesSuccess(statuses, next) {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function fetchBookmarkedStatusesFail(error) {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandBookmarkedStatuses() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['status_lists', 'bookmarks', 'next'], null);\n\n    if (url === null || getState().getIn(['status_lists', 'bookmarks', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(expandBookmarkedStatusesRequest());\n\n    api(getState).get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandBookmarkedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandBookmarkedStatusesFail(error));\n    });\n  };\n}\n\nexport function expandBookmarkedStatusesRequest() {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandBookmarkedStatusesSuccess(statuses, next) {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function expandBookmarkedStatusesFail(error) {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_FAIL,\n    error,\n  };\n}\n","export const preferencesLink = '/settings/preferences';\nexport const profileLink = '/settings/profile';\nexport const signOutLink = '/auth/sign_out';\nexport const privacyPolicyLink = '/privacy-policy';\nexport const accountAdminLink = (id) => `/admin/accounts/${id}`;\nexport const statusAdminLink = (account_id, status_id) => `/admin/accounts/${account_id}/statuses/${status_id}`;\nexport const filterEditLink = (id) => `/filters/${id}/edit`;\nexport const relationshipsLink = '/relationships';\nexport const securityLink = '/auth/edit';\nexport const preferenceLink = (setting_name) => {\n  switch (setting_name) {\n  case 'user_setting_expand_spoilers':\n  case 'user_setting_disable_swiping':\n    return `/settings/preferences/appearance#${setting_name}`;\n  default:\n    return preferencesLink;\n  }\n};\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport Permalink from './permalink';\nimport classnames from 'classnames';\nimport Icon from 'flavours/glitch/components/icon';\nimport { autoPlayGif, languages as preloadedLanguages, translationEnabled } from 'flavours/glitch/initial_state';\nimport { decode as decodeIDNA } from 'flavours/glitch/utils/idna';\n\nconst textMatchesTarget = (text, origin, host) => {\n  return (text === origin || text === host\n          || text.startsWith(origin + '/') || text.startsWith(host + '/')\n          || 'www.' + text === host || ('www.' + text).startsWith(host + '/'));\n};\n\nconst isLinkMisleading = (link) => {\n  let linkTextParts = [];\n\n  // Reconstruct visible text, as we do not have much control over how links\n  // from remote software look, and we can't rely on `innerText` because the\n  // `invisible` class does not set `display` to `none`.\n\n  const walk = (node) => {\n    switch (node.nodeType) {\n    case Node.TEXT_NODE:\n      linkTextParts.push(node.textContent);\n      break;\n    case Node.ELEMENT_NODE:\n      if (node.classList.contains('invisible')) return;\n      const children = node.childNodes;\n      for (let i = 0; i < children.length; i++) {\n        walk(children[i]);\n      }\n      break;\n    }\n  };\n\n  walk(link);\n\n  const linkText = linkTextParts.join('');\n  const targetURL = new URL(link.href);\n\n  if (targetURL.protocol === 'magnet:') {\n    return !linkText.startsWith('magnet:');\n  }\n\n  if (targetURL.protocol === 'xmpp:') {\n    return !(linkText === targetURL.href || 'xmpp:' + linkText === targetURL.href);\n  }\n\n  // The following may not work with international domain names\n  if (textMatchesTarget(linkText, targetURL.origin, targetURL.host) || textMatchesTarget(linkText.toLowerCase(), targetURL.origin, targetURL.host)) {\n    return false;\n  }\n\n  // The link hasn't been recognized, maybe it features an international domain name\n  const hostname = decodeIDNA(targetURL.hostname).normalize('NFKC');\n  const host = targetURL.host.replace(targetURL.hostname, hostname);\n  const origin = targetURL.origin.replace(targetURL.host, host);\n  const text = linkText.normalize('NFKC');\n  return !(textMatchesTarget(text, origin, host) || textMatchesTarget(text.toLowerCase(), origin, host));\n};\n\nclass TranslateButton extends React.PureComponent {\n\n  static propTypes = {\n    translation: ImmutablePropTypes.map,\n    onClick: PropTypes.func,\n  };\n\n  render () {\n    const { translation, onClick } = this.props;\n\n    if (translation) {\n      const language     = preloadedLanguages.find(lang => lang[0] === translation.get('detected_source_language'));\n      const languageName = language ? language[2] : translation.get('detected_source_language');\n      const provider     = translation.get('provider');\n\n      return (\n        <div className='translate-button'>\n          <div className='translate-button__meta'>\n            <FormattedMessage id='status.translated_from_with' defaultMessage='Translated from {lang} using {provider}' values={{ lang: languageName, provider }} />\n          </div>\n\n          <button className='link-button' onClick={onClick}>\n            <FormattedMessage id='status.show_original' defaultMessage='Show original' />\n          </button>\n        </div>\n      );\n    }\n\n    return (\n      <button className='status__content__read-more-button' onClick={onClick}>\n        <FormattedMessage id='status.translate' defaultMessage='Translate' />\n      </button>\n    );\n  }\n\n}\n\nexport default @injectIntl\nclass StatusContent extends React.PureComponent {\n\n  static contextTypes = {\n    identity: PropTypes.object,\n  };\n\n  static propTypes = {\n    status: ImmutablePropTypes.map.isRequired,\n    expanded: PropTypes.bool,\n    collapsed: PropTypes.bool,\n    onExpandedToggle: PropTypes.func,\n    onTranslate: PropTypes.func,\n    media: PropTypes.node,\n    extraMedia: PropTypes.node,\n    mediaIcons: PropTypes.arrayOf(PropTypes.string),\n    parseClick: PropTypes.func,\n    disabled: PropTypes.bool,\n    onUpdate: PropTypes.func,\n    tagLinks: PropTypes.bool,\n    rewriteMentions: PropTypes.string,\n    intl: PropTypes.object,\n    zoomEmojisOnHover: PropTypes.bool.isRequired,\n  };\n\n  static defaultProps = {\n    tagLinks: true,\n    rewriteMentions: 'no',\n  };\n\n  state = {\n    hidden: true,\n  };\n\n  _updateStatusLinks () {\n    const node = this.contentsNode;\n    const { tagLinks, rewriteMentions } = this.props;\n\n    if (!node) {\n      return;\n    }\n\n    const links = node.querySelectorAll('a');\n\n    for (var i = 0; i < links.length; ++i) {\n      let link = links[i];\n      if (link.classList.contains('status-link')) {\n        continue;\n      }\n      link.classList.add('status-link');\n\n      let mention = this.props.status.get('mentions').find(item => link.href === item.get('url'));\n\n      if (mention) {\n        link.addEventListener('click', this.onMentionClick.bind(this, mention), false);\n        link.setAttribute('title', mention.get('acct'));\n        if (rewriteMentions !== 'no') {\n          while (link.firstChild) link.removeChild(link.firstChild);\n          link.appendChild(document.createTextNode('@'));\n          const acctSpan = document.createElement('span');\n          acctSpan.textContent = rewriteMentions === 'acct' ? mention.get('acct') : mention.get('username');\n          link.appendChild(acctSpan);\n        }\n      } else if (link.textContent[0] === '#' || (link.previousSibling && link.previousSibling.textContent && link.previousSibling.textContent[link.previousSibling.textContent.length - 1] === '#')) {\n        link.addEventListener('click', this.onHashtagClick.bind(this, link.text), false);\n      } else {\n        link.addEventListener('click', this.onLinkClick.bind(this), false);\n        link.setAttribute('title', link.href);\n        link.classList.add('unhandled-link');\n\n        link.setAttribute('target', '_blank');\n        link.setAttribute('rel', 'noopener nofollow noreferrer');\n\n        try {\n          if (tagLinks && isLinkMisleading(link)) {\n            // Add a tag besides the link to display its origin\n\n            const url = new URL(link.href);\n            const tag = document.createElement('span');\n            tag.classList.add('link-origin-tag');\n            switch (url.protocol) {\n            case 'xmpp:':\n              tag.textContent = `[${url.href}]`;\n              break;\n            case 'magnet:':\n              tag.textContent = '(magnet)';\n              break;\n            default:\n              tag.textContent = `[${url.host}]`;\n            }\n            link.insertAdjacentText('beforeend', ' ');\n            link.insertAdjacentElement('beforeend', tag);\n          }\n        } catch (e) {\n          // The URL is invalid, remove the href just to be safe\n          if (tagLinks && e instanceof TypeError) link.removeAttribute('href');\n        }\n      }\n    }\n  }\n\n  handleMouseEnter = ({ currentTarget }) => {\n    if (autoPlayGif) {\n      return;\n    }\n\n    const emojis = currentTarget.querySelectorAll('.custom-emoji');\n\n    for (var i = 0; i < emojis.length; i++) {\n      let emoji = emojis[i];\n      emoji.src = emoji.getAttribute('data-original');\n    }\n  };\n\n  handleMouseLeave = ({ currentTarget }) => {\n    if (autoPlayGif) {\n      return;\n    }\n\n    const emojis = currentTarget.querySelectorAll('.custom-emoji');\n\n    for (var i = 0; i < emojis.length; i++) {\n      let emoji = emojis[i];\n      emoji.src = emoji.getAttribute('data-static');\n    }\n  };\n\n  componentDidMount () {\n    this._updateStatusLinks();\n  }\n\n  componentDidUpdate () {\n    this._updateStatusLinks();\n    if (this.props.onUpdate) this.props.onUpdate();\n  }\n\n  onLinkClick = (e) => {\n    if (this.props.collapsed) {\n      if (this.props.parseClick) this.props.parseClick(e);\n    }\n  };\n\n  onMentionClick = (mention, e) => {\n    if (this.props.parseClick) {\n      this.props.parseClick(e, `/@${mention.get('acct')}`);\n    }\n  };\n\n  onHashtagClick = (hashtag, e) => {\n    hashtag = hashtag.replace(/^#/, '');\n\n    if (this.props.parseClick) {\n      this.props.parseClick(e, `/tags/${hashtag}`);\n    }\n  };\n\n  handleMouseDown = (e) => {\n    this.startXY = [e.clientX, e.clientY];\n  };\n\n  handleMouseUp = (e) => {\n    const { parseClick, disabled } = this.props;\n\n    if (disabled || !this.startXY) {\n      return;\n    }\n\n    const [ startX, startY ] = this.startXY;\n    const [ deltaX, deltaY ] = [Math.abs(e.clientX - startX), Math.abs(e.clientY - startY)];\n\n    let element = e.target;\n    while (element !== e.currentTarget) {\n      if (['button', 'video', 'a', 'label', 'canvas'].includes(element.localName) || element.getAttribute('role') === 'button') {\n        return;\n      }\n      element = element.parentNode;\n    }\n\n    if (deltaX + deltaY < 5 && e.button === 0 && parseClick) {\n      parseClick(e);\n    }\n\n    this.startXY = null;\n  };\n\n  handleSpoilerClick = (e) => {\n    e.preventDefault();\n\n    if (this.props.onExpandedToggle) {\n      this.props.onExpandedToggle();\n    } else {\n      this.setState({ hidden: !this.state.hidden });\n    }\n  };\n\n  handleTranslate = () => {\n    this.props.onTranslate();\n  };\n\n  setContentsRef = (c) => {\n    this.contentsNode = c;\n  };\n\n  render () {\n    const {\n      status,\n      media,\n      extraMedia,\n      mediaIcons,\n      parseClick,\n      disabled,\n      tagLinks,\n      rewriteMentions,\n      intl,\n      zoomEmojisOnHover,\n    } = this.props;\n\n    const hidden = this.props.onExpandedToggle ? !this.props.expanded : this.state.hidden;\n    const renderTranslate = this.props.onTranslate && status.get('translatable');\n\n    const content = { __html: status.get('translation') ? status.getIn(['translation', 'content']) : status.get('contentHtml') };\n    const spoilerContent = { __html: status.get('spoilerHtml') };\n    const lang = status.get('translation') ? intl.locale : status.get('language');\n    const classNames = classnames('status__content', {\n      'status__content--with-action': parseClick && !disabled,\n      'status__content--with-spoiler': status.get('spoiler_text').length > 0,\n      'status__content--zoom-emojis-on-hover': zoomEmojisOnHover,\n    });\n    const textClassNames = classnames('status__content__text translate', {\n      'status__content--zoom-emojis-on-hover': zoomEmojisOnHover,\n    });\n\n\n    const translateButton = renderTranslate && (\n      <TranslateButton onClick={this.handleTranslate} translation={status.get('translation')} />\n    );\n\n    if (status.get('spoiler_text').length > 0) {\n      let mentionsPlaceholder = '';\n\n      const mentionLinks = status.get('mentions').map(item => (\n        <Permalink\n          to={`/@${item.get('acct')}`}\n          href={item.get('url')}\n          key={item.get('id')}\n          className='mention'\n        >\n          @<span>{item.get('username')}</span>\n        </Permalink>\n      )).reduce((aggregate, item) => [...aggregate, item, ' '], []);\n\n      let toggleText = null;\n      if (hidden) {\n        toggleText = [\n          <FormattedMessage\n            id='status.show_more'\n            defaultMessage='Show more'\n            key='0'\n          />,\n        ];\n        if (mediaIcons) {\n          mediaIcons.forEach((mediaIcon, idx) => {\n            toggleText.push(\n              <Icon\n                fixedWidth\n                className='status__content__spoiler-icon'\n                id={mediaIcon}\n                aria-hidden='true'\n                key={`icon-${idx}`}\n              />,\n            );\n          });\n        }\n      } else {\n        toggleText = (\n          <FormattedMessage\n            id='status.show_less'\n            defaultMessage='Show less'\n            key='0'\n          />\n        );\n      }\n\n      if (hidden) {\n        mentionsPlaceholder = <div>{mentionLinks}</div>;\n      }\n\n      return (\n        <div className={classNames} tabIndex='0' onMouseDown={this.handleMouseDown} onMouseUp={this.handleMouseUp}>\n          <p\n            style={{ marginBottom: hidden && status.get('mentions').isEmpty() ? '0px' : null }}\n          >\n            <span dangerouslySetInnerHTML={spoilerContent} className='translate' lang={lang} />\n            {' '}\n            <button type='button' className='status__content__spoiler-link' onClick={this.handleSpoilerClick} aria-expanded={!hidden}>\n              {toggleText}\n            </button>\n          </p>\n\n          {mentionsPlaceholder}\n\n          <div className={`status__content__spoiler ${!hidden ? 'status__content__spoiler--visible' : ''}`}>\n            <div\n              ref={this.setContentsRef}\n              key={`contents-${tagLinks}`}\n              tabIndex={!hidden ? 0 : null}\n              dangerouslySetInnerHTML={content}\n              className={textClassNames}\n              onMouseEnter={this.handleMouseEnter}\n              onMouseLeave={this.handleMouseLeave}\n              lang={lang}\n            />\n            {!hidden && translateButton}\n            {media}\n          </div>\n\n          {extraMedia}\n        </div>\n      );\n    } else if (parseClick) {\n      return (\n        <div\n          className={classNames}\n          onMouseDown={this.handleMouseDown}\n          onMouseUp={this.handleMouseUp}\n          tabIndex='0'\n        >\n          <div\n            ref={this.setContentsRef}\n            key={`contents-${tagLinks}-${rewriteMentions}`}\n            dangerouslySetInnerHTML={content}\n            className={textClassNames}\n            tabIndex='0'\n            onMouseEnter={this.handleMouseEnter}\n            onMouseLeave={this.handleMouseLeave}\n            lang={lang}\n          />\n          {translateButton}\n          {media}\n          {extraMedia}\n        </div>\n      );\n    } else {\n      return (\n        <div\n          className={'status__content'}\n          tabIndex='0'\n        >\n          <div\n            ref={this.setContentsRef}\n            key={`contents-${tagLinks}`}\n            className={textClassNames}\n            dangerouslySetInnerHTML={content}\n            tabIndex='0'\n            onMouseEnter={this.handleMouseEnter}\n            onMouseLeave={this.handleMouseLeave}\n            lang={lang}\n          />\n          {translateButton}\n          {media}\n          {extraMedia}\n        </div>\n      );\n    }\n  }\n\n}\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\nimport Icon from 'flavours/glitch/components/icon';\n\nconst filename = url => url.split('/').pop().split('#')[0].split('?')[0];\n\nexport default class AttachmentList extends ImmutablePureComponent {\n\n  static propTypes = {\n    media: ImmutablePropTypes.list.isRequired,\n    compact: PropTypes.bool,\n  };\n\n  render () {\n    const { media, compact } = this.props;\n\n    return (\n      <div className={classNames('attachment-list', { compact })}>\n        {!compact && (\n          <div className='attachment-list__icon'>\n            <Icon id='link' />\n          </div>\n        )}\n\n        <ul className='attachment-list__list'>\n          {media.map(attachment => {\n            const displayUrl = attachment.get('remote_url') || attachment.get('url');\n\n            return (\n              <li key={attachment.get('id')}>\n                <a href={displayUrl} target='_blank' rel='noopener noreferrer'>\n                  {compact && <Icon id='link' />}\n                  {compact && ' ' }\n                  {displayUrl ? filename(displayUrl) : <FormattedMessage id='attachments_list.unprocessed' defaultMessage='(unprocessed)' />}\n                </a>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n\n}\n","import { saveSettings } from './settings';\n\nexport const COLUMN_ADD           = 'COLUMN_ADD';\nexport const COLUMN_REMOVE        = 'COLUMN_REMOVE';\nexport const COLUMN_MOVE          = 'COLUMN_MOVE';\nexport const COLUMN_PARAMS_CHANGE = 'COLUMN_PARAMS_CHANGE';\n\nexport function addColumn(id, params) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_ADD,\n      id,\n      params,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function removeColumn(uuid) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_REMOVE,\n      uuid,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function moveColumn(uuid, direction) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_MOVE,\n      uuid,\n      direction,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function changeColumnParams(uuid, path, value) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_PARAMS_CHANGE,\n      uuid,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","import { expandSpoilers, disableSwiping } from 'flavours/glitch/initial_state';\nimport { openModal } from './modal';\n\nexport const LOCAL_SETTING_CHANGE = 'LOCAL_SETTING_CHANGE';\nexport const LOCAL_SETTING_DELETE = 'LOCAL_SETTING_DELETE';\n\nexport function checkDeprecatedLocalSettings() {\n  return (dispatch, getState) => {\n    const local_auto_unfold = getState().getIn(['local_settings', 'content_warnings', 'auto_unfold']);\n    const local_swipe_to_change_columns = getState().getIn(['local_settings', 'swipe_to_change_columns']);\n    let changed_settings = [];\n\n    if (local_auto_unfold !== null && local_auto_unfold !== undefined) {\n      if (local_auto_unfold === expandSpoilers) {\n        dispatch(deleteLocalSetting(['content_warnings', 'auto_unfold']));\n      } else {\n        changed_settings.push('user_setting_expand_spoilers');\n      }\n    }\n\n    if (local_swipe_to_change_columns !== null && local_swipe_to_change_columns !== undefined) {\n      if (local_swipe_to_change_columns === !disableSwiping) {\n        dispatch(deleteLocalSetting(['swipe_to_change_columns']));\n      } else {\n        changed_settings.push('user_setting_disable_swiping');\n      }\n    }\n\n    if (changed_settings.length > 0) {\n      dispatch(openModal('DEPRECATED_SETTINGS', {\n        settings: changed_settings,\n        onConfirm: () => dispatch(clearDeprecatedLocalSettings()),\n      }));\n    }\n  };\n}\n\nexport function clearDeprecatedLocalSettings() {\n  return (dispatch) => {\n    dispatch(deleteLocalSetting(['content_warnings', 'auto_unfold']));\n    dispatch(deleteLocalSetting(['swipe_to_change_columns']));\n  };\n}\n\nexport function changeLocalSetting(key, value) {\n  return dispatch => {\n    dispatch({\n      type: LOCAL_SETTING_CHANGE,\n      key,\n      value,\n    });\n\n    dispatch(saveLocalSettings());\n  };\n}\n\nexport function deleteLocalSetting(key) {\n  return dispatch => {\n    dispatch({\n      type: LOCAL_SETTING_DELETE,\n      key,\n    });\n\n    dispatch(saveLocalSettings());\n  };\n}\n\n//  __TODO :__\n//  Right now `saveLocalSettings()` doesn't keep track of which user\n//  is currently signed in, but it might be better to give each user\n//  their *own* local settings.\nexport function saveLocalSettings() {\n  return (_, getState) => {\n    const localSettings = getState().get('local_settings').toJS();\n    localStorage.setItem('mastodon-settings', JSON.stringify(localSettings));\n  };\n}\n","export default __webpack_public_path__ + \"media/flavours/glitch/images/logo_warn_glitch-68f2721071b15e54520ac713d29675cf.svg\";","import api from '../api';\nimport { importFetchedAccounts } from './importer';\nimport { fetchRelationships } from './accounts';\n\nexport const SUGGESTIONS_FETCH_REQUEST = 'SUGGESTIONS_FETCH_REQUEST';\nexport const SUGGESTIONS_FETCH_SUCCESS = 'SUGGESTIONS_FETCH_SUCCESS';\nexport const SUGGESTIONS_FETCH_FAIL    = 'SUGGESTIONS_FETCH_FAIL';\n\nexport const SUGGESTIONS_DISMISS = 'SUGGESTIONS_DISMISS';\n\nexport function fetchSuggestions(withRelationships = false) {\n  return (dispatch, getState) => {\n    dispatch(fetchSuggestionsRequest());\n\n    api(getState).get('/api/v2/suggestions', { params: { limit: 20 } }).then(response => {\n      dispatch(importFetchedAccounts(response.data.map(x => x.account)));\n      dispatch(fetchSuggestionsSuccess(response.data));\n\n      if (withRelationships) {\n        dispatch(fetchRelationships(response.data.map(item => item.account.id)));\n      }\n    }).catch(error => dispatch(fetchSuggestionsFail(error)));\n  };\n}\n\nexport function fetchSuggestionsRequest() {\n  return {\n    type: SUGGESTIONS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchSuggestionsSuccess(suggestions) {\n  return {\n    type: SUGGESTIONS_FETCH_SUCCESS,\n    suggestions,\n    skipLoading: true,\n  };\n}\n\nexport function fetchSuggestionsFail(error) {\n  return {\n    type: SUGGESTIONS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipAlert: true,\n  };\n}\n\nexport const dismissSuggestion = accountId => (dispatch, getState) => {\n  dispatch({\n    type: SUGGESTIONS_DISMISS,\n    id: accountId,\n  });\n\n  api(getState).delete(`/api/v1/suggestions/${accountId}`).then(() => {\n    dispatch(fetchSuggestionsRequest());\n\n    api(getState).get('/api/v2/suggestions').then(response => {\n      dispatch(importFetchedAccounts(response.data.map(x => x.account)));\n      dispatch(fetchSuggestionsSuccess(response.data));\n    }).catch(error => dispatch(fetchSuggestionsFail(error)));\n  }).catch(() => {});\n};\n","export const SET_BROWSER_SUPPORT = 'PUSH_NOTIFICATIONS_SET_BROWSER_SUPPORT';\nexport const SET_SUBSCRIPTION = 'PUSH_NOTIFICATIONS_SET_SUBSCRIPTION';\nexport const CLEAR_SUBSCRIPTION = 'PUSH_NOTIFICATIONS_CLEAR_SUBSCRIPTION';\nexport const SET_ALERTS = 'PUSH_NOTIFICATIONS_SET_ALERTS';\n\nexport function setBrowserSupport (value) {\n  return {\n    type: SET_BROWSER_SUPPORT,\n    value,\n  };\n}\n\nexport function setSubscription (subscription) {\n  return {\n    type: SET_SUBSCRIPTION,\n    subscription,\n  };\n}\n\nexport function clearSubscription () {\n  return {\n    type: CLEAR_SUBSCRIPTION,\n  };\n}\n\nexport function setAlerts (path, value) {\n  return dispatch => {\n    dispatch({\n      type: SET_ALERTS,\n      path,\n      value,\n    });\n  };\n}\n","import api from '../../api';\nimport { pushNotificationsSetting } from '../../settings';\nimport { setBrowserSupport, setSubscription, clearSubscription } from './setter';\n\n// Taken from https://www.npmjs.com/package/web-push\nconst urlBase64ToUint8Array = (base64String) => {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n};\n\nconst getApplicationServerKey = () => document.querySelector('[name=\"applicationServerKey\"]').getAttribute('content');\n\nconst getRegistration = () => navigator.serviceWorker.ready;\n\nconst getPushSubscription = (registration) =>\n  registration.pushManager.getSubscription()\n    .then(subscription => ({ registration, subscription }));\n\nconst subscribe = (registration) =>\n  registration.pushManager.subscribe({\n    userVisibleOnly: true,\n    applicationServerKey: urlBase64ToUint8Array(getApplicationServerKey()),\n  });\n\nconst unsubscribe = ({ registration, subscription }) =>\n  subscription ? subscription.unsubscribe().then(() => registration) : registration;\n\nconst sendSubscriptionToBackend = (getState, subscription, me) => {\n  const params = { subscription };\n\n  if (me) {\n    const data = pushNotificationsSetting.get(me);\n    if (data) {\n      params.data = data;\n    }\n  }\n\n  return api(getState).post('/api/web/push_subscriptions', params).then(response => response.data);\n};\n\n// Last one checks for payload support: https://web-push-book.gauntface.com/chapter-06/01-non-standards-browsers/#no-payload\nconst supportsPushNotifications = ('serviceWorker' in navigator && 'PushManager' in window && 'getKey' in PushSubscription.prototype);\n\nexport function register () {\n  return (dispatch, getState) => {\n    dispatch(setBrowserSupport(supportsPushNotifications));\n    const me = getState().getIn(['meta', 'me']);\n\n    if (supportsPushNotifications) {\n      if (!getApplicationServerKey()) {\n        console.error('The VAPID public key is not set. You will not be able to receive Web Push Notifications.');\n        return;\n      }\n\n      getRegistration()\n        .then(getPushSubscription)\n        .then(({ registration, subscription }) => {\n          if (subscription !== null) {\n            // We have a subscription, check if it is still valid\n            const currentServerKey = (new Uint8Array(subscription.options.applicationServerKey)).toString();\n            const subscriptionServerKey = urlBase64ToUint8Array(getApplicationServerKey()).toString();\n            const serverEndpoint = getState().getIn(['push_notifications', 'subscription', 'endpoint']);\n\n            // If the VAPID public key did not change and the endpoint corresponds\n            // to the endpoint saved in the backend, the subscription is valid\n            if (subscriptionServerKey === currentServerKey && subscription.endpoint === serverEndpoint) {\n              return subscription;\n            } else {\n              // Something went wrong, try to subscribe again\n              return unsubscribe({ registration, subscription }).then(subscribe).then(\n                subscription => sendSubscriptionToBackend(getState, subscription, me));\n            }\n          }\n\n          // No subscription, try to subscribe\n          return subscribe(registration).then(\n            subscription => sendSubscriptionToBackend(getState, subscription, me));\n        })\n        .then(subscription => {\n          // If we got a PushSubscription (and not a subscription object from the backend)\n          // it means that the backend subscription is valid (and was set during hydration)\n          if (!(subscription instanceof PushSubscription)) {\n            dispatch(setSubscription(subscription));\n            if (me) {\n              pushNotificationsSetting.set(me, { alerts: subscription.alerts });\n            }\n          }\n        })\n        .catch(error => {\n          if (error.code === 20 && error.name === 'AbortError') {\n            console.warn('Your browser supports Web Push Notifications, but does not seem to implement the VAPID protocol.');\n          } else if (error.code === 5 && error.name === 'InvalidCharacterError') {\n            console.error('The VAPID public key seems to be invalid:', getApplicationServerKey());\n          }\n\n          // Clear alerts and hide UI settings\n          dispatch(clearSubscription());\n          if (me) {\n            pushNotificationsSetting.remove(me);\n          }\n\n          return getRegistration()\n            .then(getPushSubscription)\n            .then(unsubscribe);\n        })\n        .catch(console.warn);\n    } else {\n      console.warn('Your browser does not support Web Push Notifications.');\n    }\n  };\n}\n\nexport function saveSettings() {\n  return (_, getState) => {\n    const state = getState().get('push_notifications');\n    const subscription = state.get('subscription');\n    const alerts = state.get('alerts');\n    const data = { alerts };\n\n    api(getState).put(`/api/web/push_subscriptions/${subscription.get('id')}`, {\n      data,\n    }).then(() => {\n      const me = getState().getIn(['meta', 'me']);\n      if (me) {\n        pushNotificationsSetting.set(me, data);\n      }\n    }).catch(console.warn);\n  };\n}\n","import { setAlerts } from './setter';\nimport { saveSettings } from './registerer';\n\nexport function changeAlerts(path, value) {\n  return dispatch => {\n    dispatch(setAlerts(path, value));\n    dispatch(saveSettings());\n  };\n}\n\nexport {\n  CLEAR_SUBSCRIPTION,\n  SET_BROWSER_SUPPORT,\n  SET_SUBSCRIPTION,\n  SET_ALERTS,\n} from './setter';\nexport { register } from './registerer';\n","import api from '../api';\nimport { importFetchedAccounts } from './importer';\nimport { showAlertForError } from './alerts';\n\nexport const LIST_FETCH_REQUEST = 'LIST_FETCH_REQUEST';\nexport const LIST_FETCH_SUCCESS = 'LIST_FETCH_SUCCESS';\nexport const LIST_FETCH_FAIL    = 'LIST_FETCH_FAIL';\n\nexport const LISTS_FETCH_REQUEST = 'LISTS_FETCH_REQUEST';\nexport const LISTS_FETCH_SUCCESS = 'LISTS_FETCH_SUCCESS';\nexport const LISTS_FETCH_FAIL    = 'LISTS_FETCH_FAIL';\n\nexport const LIST_EDITOR_TITLE_CHANGE = 'LIST_EDITOR_TITLE_CHANGE';\nexport const LIST_EDITOR_RESET        = 'LIST_EDITOR_RESET';\nexport const LIST_EDITOR_SETUP        = 'LIST_EDITOR_SETUP';\n\nexport const LIST_CREATE_REQUEST = 'LIST_CREATE_REQUEST';\nexport const LIST_CREATE_SUCCESS = 'LIST_CREATE_SUCCESS';\nexport const LIST_CREATE_FAIL    = 'LIST_CREATE_FAIL';\n\nexport const LIST_UPDATE_REQUEST = 'LIST_UPDATE_REQUEST';\nexport const LIST_UPDATE_SUCCESS = 'LIST_UPDATE_SUCCESS';\nexport const LIST_UPDATE_FAIL    = 'LIST_UPDATE_FAIL';\n\nexport const LIST_DELETE_REQUEST = 'LIST_DELETE_REQUEST';\nexport const LIST_DELETE_SUCCESS = 'LIST_DELETE_SUCCESS';\nexport const LIST_DELETE_FAIL    = 'LIST_DELETE_FAIL';\n\nexport const LIST_ACCOUNTS_FETCH_REQUEST = 'LIST_ACCOUNTS_FETCH_REQUEST';\nexport const LIST_ACCOUNTS_FETCH_SUCCESS = 'LIST_ACCOUNTS_FETCH_SUCCESS';\nexport const LIST_ACCOUNTS_FETCH_FAIL    = 'LIST_ACCOUNTS_FETCH_FAIL';\n\nexport const LIST_EDITOR_SUGGESTIONS_CHANGE = 'LIST_EDITOR_SUGGESTIONS_CHANGE';\nexport const LIST_EDITOR_SUGGESTIONS_READY  = 'LIST_EDITOR_SUGGESTIONS_READY';\nexport const LIST_EDITOR_SUGGESTIONS_CLEAR  = 'LIST_EDITOR_SUGGESTIONS_CLEAR';\n\nexport const LIST_EDITOR_ADD_REQUEST = 'LIST_EDITOR_ADD_REQUEST';\nexport const LIST_EDITOR_ADD_SUCCESS = 'LIST_EDITOR_ADD_SUCCESS';\nexport const LIST_EDITOR_ADD_FAIL    = 'LIST_EDITOR_ADD_FAIL';\n\nexport const LIST_EDITOR_REMOVE_REQUEST = 'LIST_EDITOR_REMOVE_REQUEST';\nexport const LIST_EDITOR_REMOVE_SUCCESS = 'LIST_EDITOR_REMOVE_SUCCESS';\nexport const LIST_EDITOR_REMOVE_FAIL    = 'LIST_EDITOR_REMOVE_FAIL';\n\nexport const LIST_ADDER_RESET = 'LIST_ADDER_RESET';\nexport const LIST_ADDER_SETUP = 'LIST_ADDER_SETUP';\n\nexport const LIST_ADDER_LISTS_FETCH_REQUEST = 'LIST_ADDER_LISTS_FETCH_REQUEST';\nexport const LIST_ADDER_LISTS_FETCH_SUCCESS = 'LIST_ADDER_LISTS_FETCH_SUCCESS';\nexport const LIST_ADDER_LISTS_FETCH_FAIL    = 'LIST_ADDER_LISTS_FETCH_FAIL';\n\nexport const fetchList = id => (dispatch, getState) => {\n  if (getState().getIn(['lists', id])) {\n    return;\n  }\n\n  dispatch(fetchListRequest(id));\n\n  api(getState).get(`/api/v1/lists/${id}`)\n    .then(({ data }) => dispatch(fetchListSuccess(data)))\n    .catch(err => dispatch(fetchListFail(id, err)));\n};\n\nexport const fetchListRequest = id => ({\n  type: LIST_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchListSuccess = list => ({\n  type: LIST_FETCH_SUCCESS,\n  list,\n});\n\nexport const fetchListFail = (id, error) => ({\n  type: LIST_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const fetchLists = () => (dispatch, getState) => {\n  dispatch(fetchListsRequest());\n\n  api(getState).get('/api/v1/lists')\n    .then(({ data }) => dispatch(fetchListsSuccess(data)))\n    .catch(err => dispatch(fetchListsFail(err)));\n};\n\nexport const fetchListsRequest = () => ({\n  type: LISTS_FETCH_REQUEST,\n});\n\nexport const fetchListsSuccess = lists => ({\n  type: LISTS_FETCH_SUCCESS,\n  lists,\n});\n\nexport const fetchListsFail = error => ({\n  type: LISTS_FETCH_FAIL,\n  error,\n});\n\nexport const submitListEditor = shouldReset => (dispatch, getState) => {\n  const listId = getState().getIn(['listEditor', 'listId']);\n  const title  = getState().getIn(['listEditor', 'title']);\n\n  if (listId === null) {\n    dispatch(createList(title, shouldReset));\n  } else {\n    dispatch(updateList(listId, title, shouldReset));\n  }\n};\n\nexport const setupListEditor = listId => (dispatch, getState) => {\n  dispatch({\n    type: LIST_EDITOR_SETUP,\n    list: getState().getIn(['lists', listId]),\n  });\n\n  dispatch(fetchListAccounts(listId));\n};\n\nexport const changeListEditorTitle = value => ({\n  type: LIST_EDITOR_TITLE_CHANGE,\n  value,\n});\n\nexport const createList = (title, shouldReset) => (dispatch, getState) => {\n  dispatch(createListRequest());\n\n  api(getState).post('/api/v1/lists', { title }).then(({ data }) => {\n    dispatch(createListSuccess(data));\n\n    if (shouldReset) {\n      dispatch(resetListEditor());\n    }\n  }).catch(err => dispatch(createListFail(err)));\n};\n\nexport const createListRequest = () => ({\n  type: LIST_CREATE_REQUEST,\n});\n\nexport const createListSuccess = list => ({\n  type: LIST_CREATE_SUCCESS,\n  list,\n});\n\nexport const createListFail = error => ({\n  type: LIST_CREATE_FAIL,\n  error,\n});\n\nexport const updateList = (id, title, shouldReset, replies_policy) => (dispatch, getState) => {\n  dispatch(updateListRequest(id));\n\n  api(getState).put(`/api/v1/lists/${id}`, { title, replies_policy }).then(({ data }) => {\n    dispatch(updateListSuccess(data));\n\n    if (shouldReset) {\n      dispatch(resetListEditor());\n    }\n  }).catch(err => dispatch(updateListFail(id, err)));\n};\n\nexport const updateListRequest = id => ({\n  type: LIST_UPDATE_REQUEST,\n  id,\n});\n\nexport const updateListSuccess = list => ({\n  type: LIST_UPDATE_SUCCESS,\n  list,\n});\n\nexport const updateListFail = (id, error) => ({\n  type: LIST_UPDATE_FAIL,\n  id,\n  error,\n});\n\nexport const resetListEditor = () => ({\n  type: LIST_EDITOR_RESET,\n});\n\nexport const deleteList = id => (dispatch, getState) => {\n  dispatch(deleteListRequest(id));\n\n  api(getState).delete(`/api/v1/lists/${id}`)\n    .then(() => dispatch(deleteListSuccess(id)))\n    .catch(err => dispatch(deleteListFail(id, err)));\n};\n\nexport const deleteListRequest = id => ({\n  type: LIST_DELETE_REQUEST,\n  id,\n});\n\nexport const deleteListSuccess = id => ({\n  type: LIST_DELETE_SUCCESS,\n  id,\n});\n\nexport const deleteListFail = (id, error) => ({\n  type: LIST_DELETE_FAIL,\n  id,\n  error,\n});\n\nexport const fetchListAccounts = listId => (dispatch, getState) => {\n  dispatch(fetchListAccountsRequest(listId));\n\n  api(getState).get(`/api/v1/lists/${listId}/accounts`, { params: { limit: 0 } }).then(({ data }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchListAccountsSuccess(listId, data));\n  }).catch(err => dispatch(fetchListAccountsFail(listId, err)));\n};\n\nexport const fetchListAccountsRequest = id => ({\n  type: LIST_ACCOUNTS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchListAccountsSuccess = (id, accounts, next) => ({\n  type: LIST_ACCOUNTS_FETCH_SUCCESS,\n  id,\n  accounts,\n  next,\n});\n\nexport const fetchListAccountsFail = (id, error) => ({\n  type: LIST_ACCOUNTS_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const fetchListSuggestions = q => (dispatch, getState) => {\n  const params = {\n    q,\n    resolve: false,\n    limit: 4,\n    following: true,\n  };\n\n  api(getState).get('/api/v1/accounts/search', { params }).then(({ data }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchListSuggestionsReady(q, data));\n  }).catch(error => dispatch(showAlertForError(error)));\n};\n\nexport const fetchListSuggestionsReady = (query, accounts) => ({\n  type: LIST_EDITOR_SUGGESTIONS_READY,\n  query,\n  accounts,\n});\n\nexport const clearListSuggestions = () => ({\n  type: LIST_EDITOR_SUGGESTIONS_CLEAR,\n});\n\nexport const changeListSuggestions = value => ({\n  type: LIST_EDITOR_SUGGESTIONS_CHANGE,\n  value,\n});\n\nexport const addToListEditor = accountId => (dispatch, getState) => {\n  dispatch(addToList(getState().getIn(['listEditor', 'listId']), accountId));\n};\n\nexport const addToList = (listId, accountId) => (dispatch, getState) => {\n  dispatch(addToListRequest(listId, accountId));\n\n  api(getState).post(`/api/v1/lists/${listId}/accounts`, { account_ids: [accountId] })\n    .then(() => dispatch(addToListSuccess(listId, accountId)))\n    .catch(err => dispatch(addToListFail(listId, accountId, err)));\n};\n\nexport const addToListRequest = (listId, accountId) => ({\n  type: LIST_EDITOR_ADD_REQUEST,\n  listId,\n  accountId,\n});\n\nexport const addToListSuccess = (listId, accountId) => ({\n  type: LIST_EDITOR_ADD_SUCCESS,\n  listId,\n  accountId,\n});\n\nexport const addToListFail = (listId, accountId, error) => ({\n  type: LIST_EDITOR_ADD_FAIL,\n  listId,\n  accountId,\n  error,\n});\n\nexport const removeFromListEditor = accountId => (dispatch, getState) => {\n  dispatch(removeFromList(getState().getIn(['listEditor', 'listId']), accountId));\n};\n\nexport const removeFromList = (listId, accountId) => (dispatch, getState) => {\n  dispatch(removeFromListRequest(listId, accountId));\n\n  api(getState).delete(`/api/v1/lists/${listId}/accounts`, { params: { account_ids: [accountId] } })\n    .then(() => dispatch(removeFromListSuccess(listId, accountId)))\n    .catch(err => dispatch(removeFromListFail(listId, accountId, err)));\n};\n\nexport const removeFromListRequest = (listId, accountId) => ({\n  type: LIST_EDITOR_REMOVE_REQUEST,\n  listId,\n  accountId,\n});\n\nexport const removeFromListSuccess = (listId, accountId) => ({\n  type: LIST_EDITOR_REMOVE_SUCCESS,\n  listId,\n  accountId,\n});\n\nexport const removeFromListFail = (listId, accountId, error) => ({\n  type: LIST_EDITOR_REMOVE_FAIL,\n  listId,\n  accountId,\n  error,\n});\n\nexport const resetListAdder = () => ({\n  type: LIST_ADDER_RESET,\n});\n\nexport const setupListAdder = accountId => (dispatch, getState) => {\n  dispatch({\n    type: LIST_ADDER_SETUP,\n    account: getState().getIn(['accounts', accountId]),\n  });\n  dispatch(fetchLists());\n  dispatch(fetchAccountLists(accountId));\n};\n\nexport const fetchAccountLists = accountId => (dispatch, getState) => {\n  dispatch(fetchAccountListsRequest(accountId));\n\n  api(getState).get(`/api/v1/accounts/${accountId}/lists`)\n    .then(({ data }) => dispatch(fetchAccountListsSuccess(accountId, data)))\n    .catch(err => dispatch(fetchAccountListsFail(accountId, err)));\n};\n\nexport const fetchAccountListsRequest = id => ({\n  type:LIST_ADDER_LISTS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchAccountListsSuccess = (id, lists) => ({\n  type: LIST_ADDER_LISTS_FETCH_SUCCESS,\n  id,\n  lists,\n});\n\nexport const fetchAccountListsFail = (id, err) => ({\n  type: LIST_ADDER_LISTS_FETCH_FAIL,\n  id,\n  err,\n});\n\nexport const addToListAdder = listId => (dispatch, getState) => {\n  dispatch(addToList(listId, getState().getIn(['listAdder', 'accountId'])));\n};\n\nexport const removeFromListAdder = listId => (dispatch, getState) => {\n  dispatch(removeFromList(listId, getState().getIn(['listAdder', 'accountId'])));\n};\n\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result;\n}\nmodule.exports = toKey;","//  Package imports  //\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport Icon from 'flavours/glitch/components/icon';\n\nconst messages = defineMessages({\n  public: { id: 'privacy.public.short', defaultMessage: 'Public' },\n  unlisted: { id: 'privacy.unlisted.short', defaultMessage: 'Unlisted' },\n  private: { id: 'privacy.private.short', defaultMessage: 'Followers-only' },\n  direct: { id: 'privacy.direct.short', defaultMessage: 'Mentioned people only' },\n});\n\nexport default @injectIntl\nclass VisibilityIcon extends ImmutablePureComponent {\n\n  static propTypes = {\n    visibility: PropTypes.string,\n    intl: PropTypes.object.isRequired,\n    withLabel: PropTypes.bool,\n  };\n\n  render() {\n    const { withLabel, visibility, intl } = this.props;\n\n    const visibilityIcon = {\n      public: 'globe',\n      unlisted: 'unlock',\n      private: 'lock',\n      direct: 'envelope',\n    }[visibility];\n\n    const label = intl.formatMessage(messages[visibility]);\n\n    const icon = (<Icon\n      className='status__visibility-icon'\n      fixedWidth\n      id={visibilityIcon}\n      title={label}\n      aria-hidden='true'\n    />);\n\n    if (withLabel) {\n      return (<span style={{ whiteSpace: 'nowrap' }}>{icon} {label}</span>);\n    } else {\n      return icon;\n    }\n  }\n\n}\n","import { saveSettings } from './settings';\n\nexport const LANGUAGE_USE = 'LANGUAGE_USE';\n\nexport const useLanguage = language => dispatch => {\n  dispatch({\n    type: LANGUAGE_USE,\n    language,\n  });\n\n  dispatch(saveSettings());\n};\n","export const order = ['public', 'unlisted', 'private', 'direct'];\n\nexport function privacyPreference (a, b) {\n  return order[Math.max(order.indexOf(a), order.indexOf(b), 0)];\n}\n","import api from '../api';\n\nexport const CUSTOM_EMOJIS_FETCH_REQUEST = 'CUSTOM_EMOJIS_FETCH_REQUEST';\nexport const CUSTOM_EMOJIS_FETCH_SUCCESS = 'CUSTOM_EMOJIS_FETCH_SUCCESS';\nexport const CUSTOM_EMOJIS_FETCH_FAIL = 'CUSTOM_EMOJIS_FETCH_FAIL';\n\nexport function fetchCustomEmojis() {\n  return (dispatch, getState) => {\n    dispatch(fetchCustomEmojisRequest());\n\n    api(getState).get('/api/v1/custom_emojis').then(response => {\n      dispatch(fetchCustomEmojisSuccess(response.data));\n    }).catch(error => {\n      dispatch(fetchCustomEmojisFail(error));\n    });\n  };\n}\n\nexport function fetchCustomEmojisRequest() {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchCustomEmojisSuccess(custom_emojis) {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_SUCCESS,\n    custom_emojis,\n    skipLoading: true,\n  };\n}\n\nexport function fetchCustomEmojisFail(error) {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Motion from '../../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport Icon from 'flavours/glitch/components/icon';\nimport { FormattedMessage } from 'react-intl';\n\nexport default class UploadProgress extends React.PureComponent {\n\n  static propTypes = {\n    active: PropTypes.bool,\n    progress: PropTypes.number,\n    isProcessing: PropTypes.bool,\n  };\n\n  render () {\n    const { active, progress, isProcessing } = this.props;\n\n    if (!active) {\n      return null;\n    }\n\n    let message;\n\n    if (isProcessing) {\n      message = <FormattedMessage id='upload_progress.processing' defaultMessage='Processing' />;\n    } else {\n      message = <FormattedMessage id='upload_progress.label' defaultMessage='Uploading' />;\n    }\n\n    return (\n      <div className='upload-progress'>\n        <div className='upload-progress__icon'>\n          <Icon id='upload' />\n        </div>\n\n        <div className='upload-progress__message'>\n          {message}\n\n          <div className='upload-progress__backdrop'>\n            <Motion defaultStyle={{ width: 0 }} style={{ width: spring(progress) }}>\n              {({ width }) =>\n                <div className='upload-progress__tracker' style={{ width: `${width}%` }} />\n              }\n            </Motion>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport Dropdown from './dropdown';\n\nconst messages = defineMessages({\n  public_short: { id: 'privacy.public.short', defaultMessage: 'Public' },\n  public_long: { id: 'privacy.public.long', defaultMessage: 'Visible for all' },\n  unlisted_short: { id: 'privacy.unlisted.short', defaultMessage: 'Unlisted' },\n  unlisted_long: { id: 'privacy.unlisted.long', defaultMessage: 'Visible for all, but opted-out of discovery features' },\n  private_short: { id: 'privacy.private.short', defaultMessage: 'Followers only' },\n  private_long: { id: 'privacy.private.long', defaultMessage: 'Visible for followers only' },\n  direct_short: { id: 'privacy.direct.short', defaultMessage: 'Only people I mention' },\n  direct_long: { id: 'privacy.direct.long', defaultMessage: 'Visible for mentioned users only' },\n  change_privacy: { id: 'privacy.change', defaultMessage: 'Adjust status privacy' },\n});\n\nexport default @injectIntl\nclass PrivacyDropdown extends React.PureComponent {\n\n  static propTypes = {\n    isUserTouching: PropTypes.func,\n    onModalOpen: PropTypes.func,\n    onModalClose: PropTypes.func,\n    value: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired,\n    noDirect: PropTypes.bool,\n    container: PropTypes.func,\n    disabled: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { value, onChange, onModalOpen, onModalClose, disabled, noDirect, container, isUserTouching, intl: { formatMessage } } = this.props;\n\n    //  We predefine our privacy items so that we can easily pick the\n    //  dropdown icon later.\n    const privacyItems = {\n      direct: {\n        icon: 'envelope',\n        meta: formatMessage(messages.direct_long),\n        name: 'direct',\n        text: formatMessage(messages.direct_short),\n      },\n      private: {\n        icon: 'lock',\n        meta: formatMessage(messages.private_long),\n        name: 'private',\n        text: formatMessage(messages.private_short),\n      },\n      public: {\n        icon: 'globe',\n        meta: formatMessage(messages.public_long),\n        name: 'public',\n        text: formatMessage(messages.public_short),\n      },\n      unlisted: {\n        icon: 'unlock',\n        meta: formatMessage(messages.unlisted_long),\n        name: 'unlisted',\n        text: formatMessage(messages.unlisted_short),\n      },\n    };\n\n    const items = [privacyItems.public, privacyItems.unlisted, privacyItems.private];\n\n    if (!noDirect) {\n      items.push(privacyItems.direct);\n    }\n\n    return (\n      <Dropdown\n        disabled={disabled}\n        icon={(privacyItems[value] || {}).icon}\n        items={items}\n        onChange={onChange}\n        isUserTouching={isUserTouching}\n        onModalClose={onModalClose}\n        onModalOpen={onModalOpen}\n        title={formatMessage(messages.change_privacy)}\n        container={container}\n        value={value}\n      />\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { length } from 'stringz';\n\nexport default class CharacterCounter extends React.PureComponent {\n\n  static propTypes = {\n    text: PropTypes.string.isRequired,\n    max: PropTypes.number.isRequired,\n  };\n\n  checkRemainingText (diff) {\n    if (diff < 0) {\n      return <span className='character-counter character-counter--over'>{diff}</span>;\n    }\n\n    return <span className='character-counter'>{diff}</span>;\n  }\n\n  render () {\n    const diff = this.props.max - length(this.props.text);\n    return this.checkRemainingText(diff);\n  }\n\n}\n","// Handles browser quirks, based on\n// https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API/Using_the_Notifications_API\n\nconst checkNotificationPromise = () => {\n  try {\n    // eslint-disable-next-line promise/catch-or-return, promise/valid-params\n    Notification.requestPermission().then();\n  } catch(e) {\n    return false;\n  }\n\n  return true;\n};\n\nconst handlePermission = (permission, callback) => {\n  // Whatever the user answers, we make sure Chrome stores the information\n  if(!('permission' in Notification)) {\n    Notification.permission = permission;\n  }\n\n  callback(Notification.permission);\n};\n\nexport const requestNotificationPermission = (callback) => {\n  if (checkNotificationPromise()) {\n    Notification.requestPermission().then((permission) => handlePermission(permission, callback)).catch(console.warn);\n  } else {\n    Notification.requestPermission((permission) => handlePermission(permission, callback));\n  }\n};\n","import api, { getLinks } from '../api';\nimport IntlMessageFormat from 'intl-messageformat';\nimport { fetchFollowRequests, fetchRelationships } from './accounts';\nimport {\n  importFetchedAccount,\n  importFetchedAccounts,\n  importFetchedStatus,\n  importFetchedStatuses,\n} from './importer';\nimport { submitMarkers } from './markers';\nimport { saveSettings } from './settings';\nimport { defineMessages } from 'react-intl';\nimport { List as ImmutableList } from 'immutable';\nimport { unescapeHTML } from 'flavours/glitch/utils/html';\nimport { usePendingItems as preferPendingItems } from 'flavours/glitch/initial_state';\nimport compareId from 'flavours/glitch/compare_id';\nimport { requestNotificationPermission } from 'flavours/glitch/utils/notifications';\n\nexport const NOTIFICATIONS_UPDATE = 'NOTIFICATIONS_UPDATE';\nexport const NOTIFICATIONS_UPDATE_NOOP = 'NOTIFICATIONS_UPDATE_NOOP';\n\n// tracking the notif cleaning request\nexport const NOTIFICATIONS_DELETE_MARKED_REQUEST = 'NOTIFICATIONS_DELETE_MARKED_REQUEST';\nexport const NOTIFICATIONS_DELETE_MARKED_SUCCESS = 'NOTIFICATIONS_DELETE_MARKED_SUCCESS';\nexport const NOTIFICATIONS_DELETE_MARKED_FAIL = 'NOTIFICATIONS_DELETE_MARKED_FAIL';\nexport const NOTIFICATIONS_MARK_ALL_FOR_DELETE = 'NOTIFICATIONS_MARK_ALL_FOR_DELETE';\nexport const NOTIFICATIONS_ENTER_CLEARING_MODE = 'NOTIFICATIONS_ENTER_CLEARING_MODE'; // arg: yes\n// Unmark notifications (when the cleaning mode is left)\nexport const NOTIFICATIONS_UNMARK_ALL_FOR_DELETE = 'NOTIFICATIONS_UNMARK_ALL_FOR_DELETE';\n// Mark one for delete\nexport const NOTIFICATION_MARK_FOR_DELETE = 'NOTIFICATION_MARK_FOR_DELETE';\n\nexport const NOTIFICATIONS_EXPAND_REQUEST = 'NOTIFICATIONS_EXPAND_REQUEST';\nexport const NOTIFICATIONS_EXPAND_SUCCESS = 'NOTIFICATIONS_EXPAND_SUCCESS';\nexport const NOTIFICATIONS_EXPAND_FAIL    = 'NOTIFICATIONS_EXPAND_FAIL';\n\nexport const NOTIFICATIONS_FILTER_SET = 'NOTIFICATIONS_FILTER_SET';\n\nexport const NOTIFICATIONS_CLEAR        = 'NOTIFICATIONS_CLEAR';\nexport const NOTIFICATIONS_SCROLL_TOP   = 'NOTIFICATIONS_SCROLL_TOP';\nexport const NOTIFICATIONS_LOAD_PENDING = 'NOTIFICATIONS_LOAD_PENDING';\n\nexport const NOTIFICATIONS_MOUNT   = 'NOTIFICATIONS_MOUNT';\nexport const NOTIFICATIONS_UNMOUNT = 'NOTIFICATIONS_UNMOUNT';\n\nexport const NOTIFICATIONS_SET_VISIBILITY = 'NOTIFICATIONS_SET_VISIBILITY';\n\nexport const NOTIFICATIONS_MARK_AS_READ = 'NOTIFICATIONS_MARK_AS_READ';\n\nexport const NOTIFICATIONS_SET_BROWSER_SUPPORT    = 'NOTIFICATIONS_SET_BROWSER_SUPPORT';\nexport const NOTIFICATIONS_SET_BROWSER_PERMISSION = 'NOTIFICATIONS_SET_BROWSER_PERMISSION';\n\ndefineMessages({\n  mention: { id: 'notification.mention', defaultMessage: '{name} mentioned you' },\n});\n\nconst fetchRelatedRelationships = (dispatch, notifications) => {\n  const accountIds = notifications.filter(item => ['follow', 'follow_request', 'admin.sign_up'].indexOf(item.type) !== -1).map(item => item.account.id);\n\n  if (accountIds > 0) {\n    dispatch(fetchRelationships(accountIds));\n  }\n};\n\nexport const loadPending = () => ({\n  type: NOTIFICATIONS_LOAD_PENDING,\n});\n\nexport function updateNotifications(notification, intlMessages, intlLocale) {\n  return (dispatch, getState) => {\n    const activeFilter = getState().getIn(['settings', 'notifications', 'quickFilter', 'active']);\n    const showInColumn = activeFilter === 'all' ? getState().getIn(['settings', 'notifications', 'shows', notification.type], true) : activeFilter === notification.type;\n    const showAlert    = getState().getIn(['settings', 'notifications', 'alerts', notification.type], true);\n    const playSound    = getState().getIn(['settings', 'notifications', 'sounds', notification.type], true);\n\n    let filtered = false;\n\n    if (['mention', 'status'].includes(notification.type) && notification.status.filtered) {\n      const filters = notification.status.filtered.filter(result => result.filter.context.includes('notifications'));\n\n      if (filters.some(result => result.filter.filter_action === 'hide')) {\n        return;\n      }\n\n      filtered = filters.length > 0;\n    }\n\n    if (['follow_request'].includes(notification.type)) {\n      dispatch(fetchFollowRequests());\n    }\n\n    dispatch(submitMarkers());\n\n    if (showInColumn) {\n      dispatch(importFetchedAccount(notification.account));\n\n      if (notification.status) {\n        dispatch(importFetchedStatus(notification.status));\n      }\n\n      if (notification.report) {\n        dispatch(importFetchedAccount(notification.report.target_account));\n      }\n\n      dispatch({\n        type: NOTIFICATIONS_UPDATE,\n        notification,\n        usePendingItems: preferPendingItems,\n        meta: (playSound && !filtered) ? { sound: 'boop' } : undefined,\n      });\n\n      fetchRelatedRelationships(dispatch, [notification]);\n    } else if (playSound && !filtered) {\n      dispatch({\n        type: NOTIFICATIONS_UPDATE_NOOP,\n        meta: { sound: 'boop' },\n      });\n    }\n\n    // Desktop notifications\n    if (typeof window.Notification !== 'undefined' && showAlert && !filtered) {\n      const title = new IntlMessageFormat(intlMessages[`notification.${notification.type}`], intlLocale).format({ name: notification.account.display_name.length > 0 ? notification.account.display_name : notification.account.username });\n      const body  = (notification.status && notification.status.spoiler_text.length > 0) ? notification.status.spoiler_text : unescapeHTML(notification.status ? notification.status.content : '');\n\n      const notify = new Notification(title, { body, icon: notification.account.avatar, tag: notification.id });\n      notify.addEventListener('click', () => {\n        window.focus();\n        notify.close();\n      });\n    }\n  };\n}\n\nconst excludeTypesFromSettings = state => state.getIn(['settings', 'notifications', 'shows']).filter(enabled => !enabled).keySeq().toJS();\n\n\nconst excludeTypesFromFilter = filter => {\n  const allTypes = ImmutableList([\n    'follow',\n    'follow_request',\n    'favourite',\n    'reaction',\n    'reblog',\n    'mention',\n    'poll',\n    'status',\n    'update',\n    'admin.sign_up',\n    'admin.report',\n  ]);\n\n  return allTypes.filterNot(item => item === filter).toJS();\n};\n\nconst noOp = () => {};\n\nlet expandNotificationsController = new AbortController();\n\nexport function expandNotifications({ maxId, forceLoad } = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const activeFilter = getState().getIn(['settings', 'notifications', 'quickFilter', 'active']);\n    const notifications = getState().get('notifications');\n    const isLoadingMore = !!maxId;\n\n    if (notifications.get('isLoading')) {\n      if (forceLoad) {\n        expandNotificationsController.abort();\n        expandNotificationsController = new AbortController();\n      } else {\n        done();\n        return;\n      }\n    }\n\n    const params = {\n      max_id: maxId,\n      exclude_types: activeFilter === 'all'\n        ? excludeTypesFromSettings(getState())\n        : excludeTypesFromFilter(activeFilter),\n    };\n\n    if (!params.max_id && (notifications.get('items', ImmutableList()).size + notifications.get('pendingItems', ImmutableList()).size) > 0) {\n      const a = notifications.getIn(['pendingItems', 0, 'id']);\n      const b = notifications.getIn(['items', 0, 'id']);\n\n      if (a && b && compareId(a, b) > 0) {\n        params.since_id = a;\n      } else {\n        params.since_id = b || a;\n      }\n    }\n\n    const isLoadingRecent = !!params.since_id;\n\n    dispatch(expandNotificationsRequest(isLoadingMore));\n\n    api(getState).get('/api/v1/notifications', { params, signal: expandNotificationsController.signal }).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data.map(item => item.account)));\n      dispatch(importFetchedStatuses(response.data.map(item => item.status).filter(status => !!status)));\n      dispatch(importFetchedAccounts(response.data.filter(item => item.report).map(item => item.report.target_account)));\n\n      dispatch(expandNotificationsSuccess(response.data, next ? next.uri : null, isLoadingMore, isLoadingRecent, isLoadingRecent && preferPendingItems));\n      fetchRelatedRelationships(dispatch, response.data);\n      dispatch(submitMarkers());\n    }).catch(error => {\n      dispatch(expandNotificationsFail(error, isLoadingMore));\n    }).finally(() => {\n      done();\n    });\n  };\n}\n\nexport function expandNotificationsRequest(isLoadingMore) {\n  return {\n    type: NOTIFICATIONS_EXPAND_REQUEST,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandNotificationsSuccess(notifications, next, isLoadingMore, isLoadingRecent, usePendingItems) {\n  return {\n    type: NOTIFICATIONS_EXPAND_SUCCESS,\n    notifications,\n    next,\n    isLoadingRecent: isLoadingRecent,\n    usePendingItems,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandNotificationsFail(error, isLoadingMore) {\n  return {\n    type: NOTIFICATIONS_EXPAND_FAIL,\n    error,\n    skipLoading: !isLoadingMore,\n    skipAlert: !isLoadingMore || error.name === 'AbortError',\n  };\n}\n\nexport function clearNotifications() {\n  return (dispatch, getState) => {\n    dispatch({\n      type: NOTIFICATIONS_CLEAR,\n    });\n\n    api(getState).post('/api/v1/notifications/clear');\n  };\n}\n\nexport function scrollTopNotifications(top) {\n  return {\n    type: NOTIFICATIONS_SCROLL_TOP,\n    top,\n  };\n}\n\nexport function deleteMarkedNotifications() {\n  return (dispatch, getState) => {\n    dispatch(deleteMarkedNotificationsRequest());\n\n    let ids = [];\n    getState().getIn(['notifications', 'items']).forEach((n) => {\n      if (n.get('markedForDelete')) {\n        ids.push(n.get('id'));\n      }\n    });\n\n    if (ids.length === 0) {\n      return;\n    }\n\n    api(getState).delete(`/api/v1/notifications/destroy_multiple?ids[]=${ids.join('&ids[]=')}`).then(() => {\n      dispatch(deleteMarkedNotificationsSuccess());\n    }).catch(error => {\n      console.error(error);\n      dispatch(deleteMarkedNotificationsFail(error));\n    });\n  };\n}\n\nexport function enterNotificationClearingMode(yes) {\n  return {\n    type: NOTIFICATIONS_ENTER_CLEARING_MODE,\n    yes: yes,\n  };\n}\n\nexport function markAllNotifications(yes) {\n  return {\n    type: NOTIFICATIONS_MARK_ALL_FOR_DELETE,\n    yes: yes, // true, false or null. null = invert\n  };\n}\n\nexport function deleteMarkedNotificationsRequest() {\n  return {\n    type: NOTIFICATIONS_DELETE_MARKED_REQUEST,\n  };\n}\n\nexport function deleteMarkedNotificationsFail() {\n  return {\n    type: NOTIFICATIONS_DELETE_MARKED_FAIL,\n  };\n}\n\nexport function markNotificationForDelete(id, yes) {\n  return {\n    type: NOTIFICATION_MARK_FOR_DELETE,\n    id: id,\n    yes: yes,\n  };\n}\n\nexport function deleteMarkedNotificationsSuccess() {\n  return {\n    type: NOTIFICATIONS_DELETE_MARKED_SUCCESS,\n  };\n}\n\nexport function mountNotifications() {\n  return {\n    type: NOTIFICATIONS_MOUNT,\n  };\n}\n\nexport function unmountNotifications() {\n  return {\n    type: NOTIFICATIONS_UNMOUNT,\n  };\n}\n\nexport function notificationsSetVisibility(visibility) {\n  return {\n    type: NOTIFICATIONS_SET_VISIBILITY,\n    visibility: visibility,\n  };\n}\n\nexport function setFilter (filterType) {\n  return dispatch => {\n    dispatch({\n      type: NOTIFICATIONS_FILTER_SET,\n      path: ['notifications', 'quickFilter', 'active'],\n      value: filterType,\n    });\n    dispatch(expandNotifications({ forceLoad: true }));\n    dispatch(saveSettings());\n  };\n}\n\nexport function markNotificationsAsRead() {\n  return {\n    type: NOTIFICATIONS_MARK_AS_READ,\n  };\n}\n\n// Browser support\nexport function setupBrowserNotifications() {\n  return dispatch => {\n    dispatch(setBrowserSupport('Notification' in window));\n    if ('Notification' in window) {\n      dispatch(setBrowserPermission(Notification.permission));\n    }\n\n    if ('Notification' in window && 'permissions' in navigator) {\n      navigator.permissions.query({ name: 'notifications' }).then((status) => {\n        status.onchange = () => dispatch(setBrowserPermission(Notification.permission));\n      }).catch(console.warn);\n    }\n  };\n}\n\nexport function requestBrowserPermission(callback = noOp) {\n  return dispatch => {\n    requestNotificationPermission((permission) => {\n      dispatch(setBrowserPermission(permission));\n      callback(permission);\n    });\n  };\n}\n\nexport function setBrowserSupport (value) {\n  return {\n    type: NOTIFICATIONS_SET_BROWSER_SUPPORT,\n    value,\n  };\n}\n\nexport function setBrowserPermission (value) {\n  return {\n    type: NOTIFICATIONS_SET_BROWSER_PERMISSION,\n    value,\n  };\n}\n","//  Package imports.\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport classNames from 'classnames';\n\n//  Components.\nimport Icon from 'flavours/glitch/components/icon';\n\n//  Utils.\nimport { withPassive } from 'flavours/glitch/utils/dom_helpers';\nimport { assignHandlers } from 'flavours/glitch/utils/react_helpers';\n\n//  The component.\nexport default class ComposerOptionsDropdownContent extends React.PureComponent {\n\n  static propTypes = {\n    items: PropTypes.arrayOf(PropTypes.shape({\n      icon: PropTypes.string,\n      meta: PropTypes.node,\n      name: PropTypes.string.isRequired,\n      text: PropTypes.node,\n    })),\n    onChange: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    style: PropTypes.object,\n    value: PropTypes.string,\n    renderItemContents: PropTypes.func,\n    openedViaKeyboard: PropTypes.bool,\n    closeOnChange: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    style: {},\n    closeOnChange: true,\n  };\n\n  state = {\n    value: this.props.openedViaKeyboard ? this.props.items[0].name : undefined,\n  };\n\n  //  When the document is clicked elsewhere, we close the dropdown.\n  handleDocumentClick = (e) => {\n    if (this.node && !this.node.contains(e.target)) {\n      this.props.onClose();\n    }\n  };\n\n  //  Stores our node in `this.node`.\n  setRef = (node) => {\n    this.node = node;\n  };\n\n  //  On mounting, we add our listeners.\n  componentDidMount () {\n    document.addEventListener('click', this.handleDocumentClick, false);\n    document.addEventListener('touchend', this.handleDocumentClick, withPassive);\n    if (this.focusedItem) {\n      this.focusedItem.focus({ preventScroll: true });\n    } else {\n      this.node.firstChild.focus({ preventScroll: true });\n    }\n  }\n\n  //  On unmounting, we remove our listeners.\n  componentWillUnmount () {\n    document.removeEventListener('click', this.handleDocumentClick, false);\n    document.removeEventListener('touchend', this.handleDocumentClick, withPassive);\n  }\n\n  handleClick = (e) => {\n    const i = Number(e.currentTarget.getAttribute('data-index'));\n\n    const {\n      onChange,\n      onClose,\n      closeOnChange,\n      items,\n    } = this.props;\n\n    const { name } = this.props.items[i];\n    e.preventDefault();  //  Prevents change in focus on click\n    if (closeOnChange) {\n      onClose();\n    }\n    onChange(name);\n  };\n\n  // Handle changes differently whether the dropdown is a list of options or actions\n  handleChange = (name) => {\n    if (this.props.value) {\n      this.props.onChange(name);\n    } else {\n      this.setState({ value: name });\n    }\n  };\n\n  handleKeyDown = (e) => {\n    const index = Number(e.currentTarget.getAttribute('data-index'));\n    const { items } = this.props;\n    let element = null;\n\n    switch(e.key) {\n    case 'Escape':\n      this.props.onClose();\n      break;\n    case 'Enter':\n    case ' ':\n      this.handleClick(e);\n      break;\n    case 'ArrowDown':\n      element = this.node.childNodes[index + 1] || this.node.firstChild;\n      break;\n    case 'ArrowUp':\n      element = this.node.childNodes[index - 1] || this.node.lastChild;\n      break;\n    case 'Tab':\n      if (e.shiftKey) {\n        element = this.node.childNodes[index - 1] || this.node.lastChild;\n      } else {\n        element = this.node.childNodes[index + 1] || this.node.firstChild;\n      }\n      break;\n    case 'Home':\n      element = this.node.firstChild;\n      break;\n    case 'End':\n      element = this.node.lastChild;\n      break;\n    }\n\n    if (element) {\n      element.focus();\n      this.handleChange(this.props.items[Number(element.getAttribute('data-index'))].name);\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  setFocusRef = c => {\n    this.focusedItem = c;\n  };\n\n  renderItem = (item, i) => {\n    const { name, icon, meta, text } = item;\n\n    const active = (name === (this.props.value || this.state.value));\n\n    const computedClass = classNames('privacy-dropdown__option', { active });\n\n    let contents = this.props.renderItemContents && this.props.renderItemContents(item, i);\n\n    if (!contents) {\n      contents = (\n        <React.Fragment>\n          {icon && <Icon className='icon' fixedWidth id={icon} />}\n\n          <div className='privacy-dropdown__option__content'>\n            <strong>{text}</strong>\n            {meta}\n          </div>\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <div\n        className={computedClass}\n        onClick={this.handleClick}\n        onKeyDown={this.handleKeyDown}\n        role='option'\n        tabIndex='0'\n        key={name}\n        data-index={i}\n        ref={active ? this.setFocusRef : null}\n      >\n        {contents}\n      </div>\n    );\n  };\n\n  //  Rendering.\n  render () {\n    const {\n      items,\n      onChange,\n      onClose,\n      style,\n    } = this.props;\n\n    //  The result.\n    return (\n      <div style={{ ...style }} role='listbox' ref={this.setRef}>\n        {!!items && items.map((item, i) => this.renderItem(item, i))}\n      </div>\n    );\n  }\n\n}\n","//  Package imports.\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Overlay from 'react-overlays/Overlay';\n\n//  Components.\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport DropdownMenu from './dropdown_menu';\n\n//  Utils.\nimport { assignHandlers } from 'flavours/glitch/utils/react_helpers';\n\n//  The component.\nexport default class ComposerOptionsDropdown extends React.PureComponent {\n\n  static propTypes = {\n    isUserTouching: PropTypes.func,\n    disabled: PropTypes.bool,\n    icon: PropTypes.string,\n    items: PropTypes.arrayOf(PropTypes.shape({\n      icon: PropTypes.string,\n      meta: PropTypes.string,\n      name: PropTypes.string.isRequired,\n      text: PropTypes.string,\n    })).isRequired,\n    onModalOpen: PropTypes.func,\n    onModalClose: PropTypes.func,\n    title: PropTypes.string,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    container: PropTypes.func,\n    renderItemContents: PropTypes.func,\n    closeOnChange: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    closeOnChange: true,\n  };\n\n  state = {\n    open: false,\n    openedViaKeyboard: undefined,\n    placement: 'bottom',\n  };\n\n  //  Toggles opening and closing the dropdown.\n  handleToggle = ({ type }) => {\n    const { onModalOpen } = this.props;\n    const { open } = this.state;\n\n    if (this.props.isUserTouching && this.props.isUserTouching()) {\n      if (this.state.open) {\n        this.props.onModalClose();\n      } else {\n        const modal = this.handleMakeModal();\n        if (modal && onModalOpen) {\n          onModalOpen(modal);\n        }\n      }\n    } else {\n      if (this.state.open && this.activeElement) {\n        this.activeElement.focus({ preventScroll: true });\n      }\n      this.setState({ open: !this.state.open, openedViaKeyboard: type !== 'click' });\n    }\n  };\n\n  handleKeyDown = (e) => {\n    switch (e.key) {\n    case 'Escape':\n      this.handleClose();\n      break;\n    }\n  };\n\n  handleMouseDown = () => {\n    if (!this.state.open) {\n      this.activeElement = document.activeElement;\n    }\n  };\n\n  handleButtonKeyDown = (e) => {\n    switch(e.key) {\n    case ' ':\n    case 'Enter':\n      this.handleMouseDown();\n      break;\n    }\n  };\n\n  handleKeyPress = (e) => {\n    switch(e.key) {\n    case ' ':\n    case 'Enter':\n      this.handleToggle(e);\n      e.stopPropagation();\n      e.preventDefault();\n      break;\n    }\n  };\n\n  handleClose = () => {\n    if (this.state.open && this.activeElement) {\n      this.activeElement.focus({ preventScroll: true });\n    }\n    this.setState({ open: false });\n  };\n\n  handleItemClick = (e) => {\n    const {\n      items,\n      onChange,\n      onModalClose,\n      closeOnChange,\n    } = this.props;\n\n    const i = Number(e.currentTarget.getAttribute('data-index'));\n\n    const { name } = items[i];\n\n    e.preventDefault();  //  Prevents focus from changing\n    if (closeOnChange) onModalClose();\n    onChange(name);\n  };\n\n  //  Creates an action modal object.\n  handleMakeModal = () => {\n    const {\n      items,\n      onChange,\n      onModalOpen,\n      onModalClose,\n      value,\n    } = this.props;\n\n    //  Required props.\n    if (!(onChange && onModalOpen && onModalClose && items)) {\n      return null;\n    }\n\n    //  The object.\n    return {\n      renderItemContents: this.props.renderItemContents,\n      onClick: this.handleItemClick,\n      actions: items.map(\n        ({\n          name,\n          ...rest\n        }) => ({\n          ...rest,\n          active: value && name === value,\n          name,\n        }),\n      ),\n    };\n  };\n\n  setTargetRef = c => {\n    this.target = c;\n  };\n\n  findTarget = () => {\n    return this.target;\n  };\n\n  handleOverlayEnter = (state) => {\n    this.setState({ placement: state.placement });\n  };\n\n  //  Rendering.\n  render () {\n    const {\n      disabled,\n      title,\n      icon,\n      items,\n      onChange,\n      value,\n      container,\n      renderItemContents,\n      closeOnChange,\n    } = this.props;\n    const { open, placement } = this.state;\n\n    const active = value && items.findIndex(({ name }) => name === value) === (placement === 'bottom' ? 0 : (items.length - 1));\n\n    return (\n      <div\n        className={classNames('privacy-dropdown', placement, { active: open })}\n        onKeyDown={this.handleKeyDown}\n        ref={this.setTargetRef}\n      >\n        <div className={classNames('privacy-dropdown__value', { active })}>\n          <IconButton\n            active={open}\n            className='privacy-dropdown__value-icon'\n            disabled={disabled}\n            icon={icon}\n            inverted\n            onClick={this.handleToggle}\n            onMouseDown={this.handleMouseDown}\n            onKeyDown={this.handleButtonKeyDown}\n            onKeyPress={this.handleKeyPress}\n            size={18}\n            style={{\n              height: null,\n              lineHeight: '27px',\n            }}\n            title={title}\n          />\n        </div>\n\n        <Overlay\n          containerPadding={20}\n          placement={placement}\n          show={open}\n          flip\n          target={this.findTarget}\n          container={container}\n          popperConfig={{ strategy: 'fixed', onFirstUpdate: this.handleOverlayEnter }}\n        >\n          {({ props, placement }) => (\n            <div {...props}>\n              <div className={`dropdown-animation privacy-dropdown__dropdown ${placement}`}>\n                <DropdownMenu\n                  items={items}\n                  renderItemContents={renderItemContents}\n                  onChange={onChange}\n                  onClose={this.handleClose}\n                  value={value}\n                  openedViaKeyboard={this.state.openedViaKeyboard}\n                  closeOnChange={closeOnChange}\n                />\n              </div>\n            </div>\n          )}\n        </Overlay>\n      </div>\n    );\n  }\n\n}\n","import api from '../api';\n\nexport const FEATURED_TAGS_FETCH_REQUEST = 'FEATURED_TAGS_FETCH_REQUEST';\nexport const FEATURED_TAGS_FETCH_SUCCESS = 'FEATURED_TAGS_FETCH_SUCCESS';\nexport const FEATURED_TAGS_FETCH_FAIL    = 'FEATURED_TAGS_FETCH_FAIL';\n\nexport const fetchFeaturedTags = (id) => (dispatch, getState) => {\n  if (getState().getIn(['user_lists', 'featured_tags', id, 'items'])) {\n    return;\n  }\n\n  dispatch(fetchFeaturedTagsRequest(id));\n\n  api(getState).get(`/api/v1/accounts/${id}/featured_tags`)\n    .then(({ data }) => dispatch(fetchFeaturedTagsSuccess(id, data)))\n    .catch(err => dispatch(fetchFeaturedTagsFail(id, err)));\n};\n\nexport const fetchFeaturedTagsRequest = (id) => ({\n  type: FEATURED_TAGS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchFeaturedTagsSuccess = (id, tags) => ({\n  type: FEATURED_TAGS_FETCH_SUCCESS,\n  id,\n  tags,\n});\n\nexport const fetchFeaturedTagsFail = (id, error) => ({\n  type: FEATURED_TAGS_FETCH_FAIL,\n  id,\n  error,\n});\n","import api from '../api';\nimport { importFetchedAccounts } from './importer';\n\nexport const HISTORY_FETCH_REQUEST = 'HISTORY_FETCH_REQUEST';\nexport const HISTORY_FETCH_SUCCESS = 'HISTORY_FETCH_SUCCESS';\nexport const HISTORY_FETCH_FAIL    = 'HISTORY_FETCH_FAIL';\n\nexport const fetchHistory = statusId => (dispatch, getState) => {\n  const loading = getState().getIn(['history', statusId, 'loading']);\n\n  if (loading) {\n    return;\n  }\n\n  dispatch(fetchHistoryRequest(statusId));\n\n  api(getState).get(`/api/v1/statuses/${statusId}/history`).then(({ data }) => {\n    dispatch(importFetchedAccounts(data.map(x => x.account)));\n    dispatch(fetchHistorySuccess(statusId, data));\n  }).catch(error => dispatch(fetchHistoryFail(error)));\n};\n\nexport const fetchHistoryRequest = statusId => ({\n  type: HISTORY_FETCH_REQUEST,\n  statusId,\n});\n\nexport const fetchHistorySuccess = (statusId, history) => ({\n  type: HISTORY_FETCH_SUCCESS,\n  statusId,\n  history,\n});\n\nexport const fetchHistoryFail = error => ({\n  type: HISTORY_FETCH_FAIL,\n  error,\n});\n","var isArray = require('./isArray'),\n  isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n  reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' || value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);\n}\nmodule.exports = isKey;","// @ts-check\n\nexport const PICTURE_IN_PICTURE_DEPLOY = 'PICTURE_IN_PICTURE_DEPLOY';\nexport const PICTURE_IN_PICTURE_REMOVE = 'PICTURE_IN_PICTURE_REMOVE';\n\n/**\n * @typedef MediaProps\n * @property {string} src\n * @property {boolean} muted\n * @property {number} volume\n * @property {number} currentTime\n * @property {string} poster\n * @property {string} backgroundColor\n * @property {string} foregroundColor\n * @property {string} accentColor\n */\n\n/**\n * @param {string} statusId\n * @param {string} accountId\n * @param {string} playerType\n * @param {MediaProps} props\n * @return {object}\n */\nexport const deployPictureInPicture = (statusId, accountId, playerType, props) => {\n  return (dispatch, getState) => {\n    // Do not open a player for a toot that does not exist\n    if (getState().hasIn(['statuses', statusId])) {\n      dispatch({\n        type: PICTURE_IN_PICTURE_DEPLOY,\n        statusId,\n        accountId,\n        playerType,\n        props,\n      });\n    }\n  };\n};\n\n/*\n * @return {object}\n */\nexport const removePictureInPicture = () => ({\n  type: PICTURE_IN_PICTURE_REMOVE,\n});\n","export const DROPDOWN_MENU_OPEN = 'DROPDOWN_MENU_OPEN';\nexport const DROPDOWN_MENU_CLOSE = 'DROPDOWN_MENU_CLOSE';\n\nexport function openDropdownMenu(id, keyboard, scroll_key) {\n  return { type: DROPDOWN_MENU_OPEN, id, keyboard, scroll_key };\n}\n\nexport function closeDropdownMenu(id) {\n  return { type: DROPDOWN_MENU_CLOSE, id };\n}\n","export const HEIGHT_CACHE_SET = 'HEIGHT_CACHE_SET';\nexport const HEIGHT_CACHE_CLEAR = 'HEIGHT_CACHE_CLEAR';\n\nexport function setHeight (key, id, height) {\n  return {\n    type: HEIGHT_CACHE_SET,\n    key,\n    id,\n    height,\n  };\n}\n\nexport function clearHeight () {\n  return {\n    type: HEIGHT_CACHE_CLEAR,\n  };\n}\n","import api from '../api';\nimport { openModal } from './modal';\n\nexport const FILTERS_FETCH_REQUEST = 'FILTERS_FETCH_REQUEST';\nexport const FILTERS_FETCH_SUCCESS = 'FILTERS_FETCH_SUCCESS';\nexport const FILTERS_FETCH_FAIL    = 'FILTERS_FETCH_FAIL';\n\nexport const FILTERS_STATUS_CREATE_REQUEST = 'FILTERS_STATUS_CREATE_REQUEST';\nexport const FILTERS_STATUS_CREATE_SUCCESS = 'FILTERS_STATUS_CREATE_SUCCESS';\nexport const FILTERS_STATUS_CREATE_FAIL    = 'FILTERS_STATUS_CREATE_FAIL';\n\nexport const FILTERS_CREATE_REQUEST = 'FILTERS_CREATE_REQUEST';\nexport const FILTERS_CREATE_SUCCESS = 'FILTERS_CREATE_SUCCESS';\nexport const FILTERS_CREATE_FAIL    = 'FILTERS_CREATE_FAIL';\n\nexport const initAddFilter = (status, { contextType }) => dispatch =>\n  dispatch(openModal('FILTER', {\n    statusId: status?.get('id'),\n    contextType: contextType,\n  }));\n\nexport const fetchFilters = () => (dispatch, getState) => {\n  dispatch({\n    type: FILTERS_FETCH_REQUEST,\n    skipLoading: true,\n  });\n\n  api(getState)\n    .get('/api/v2/filters')\n    .then(({ data }) => dispatch({\n      type: FILTERS_FETCH_SUCCESS,\n      filters: data,\n      skipLoading: true,\n    }))\n    .catch(err => dispatch({\n      type: FILTERS_FETCH_FAIL,\n      err,\n      skipLoading: true,\n      skipAlert: true,\n    }));\n};\n\nexport const createFilterStatus = (params, onSuccess, onFail) => (dispatch, getState) => {\n  dispatch(createFilterStatusRequest());\n\n  api(getState).post(`/api/v2/filters/${params.filter_id}/statuses`, params).then(response => {\n    dispatch(createFilterStatusSuccess(response.data));\n    if (onSuccess) onSuccess();\n  }).catch(error => {\n    dispatch(createFilterStatusFail(error));\n    if (onFail) onFail();\n  });\n};\n\nexport const createFilterStatusRequest = () => ({\n  type: FILTERS_STATUS_CREATE_REQUEST,\n});\n\nexport const createFilterStatusSuccess = filter_status => ({\n  type: FILTERS_STATUS_CREATE_SUCCESS,\n  filter_status,\n});\n\nexport const createFilterStatusFail = error => ({\n  type: FILTERS_STATUS_CREATE_FAIL,\n  error,\n});\n\nexport const createFilter = (params, onSuccess, onFail) => (dispatch, getState) => {\n  dispatch(createFilterRequest());\n\n  api(getState).post('/api/v2/filters', params).then(response => {\n    dispatch(createFilterSuccess(response.data));\n    if (onSuccess) onSuccess(response.data);\n  }).catch(error => {\n    dispatch(createFilterFail(error));\n    if (onFail) onFail();\n  });\n};\n\nexport const createFilterRequest = () => ({\n  type: FILTERS_CREATE_REQUEST,\n});\n\nexport const createFilterSuccess = filter => ({\n  type: FILTERS_CREATE_SUCCESS,\n  filter,\n});\n\nexport const createFilterFail = error => ({\n  type: FILTERS_CREATE_FAIL,\n  error,\n});\n","//  Package imports.\nimport { supportsPassiveEvents } from 'detect-passive-events';\n\n//  This will either be a passive lister options object (if passive\n//  events are supported), or `false`.\nexport const withPassive = supportsPassiveEvents ? { passive: true } : false;\n\n//  Focuses the root element.\nexport function focusRoot () {\n  let e;\n  if (document && (e = document.querySelector('.ui')) && (e = e.parentElement)) {\n    e.focus();\n  }\n}\n","import React from 'react';\n\n// Copied from emoji-mart for consistency with emoji picker and since\n// they don't export the icons in the package\nexport const loupeIcon = (\n  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' width='13' height='13'>\n    <path d='M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z' />\n  </svg>\n);\n\nexport const deleteIcon = (\n  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' width='13' height='13'>\n    <path d='M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z' />\n  </svg>\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport const CircularProgress = ({ size, strokeWidth }) => {\n  const viewBox = `0 0 ${size} ${size}`;\n  const radius  = (size - strokeWidth) / 2;\n\n  return (\n    <svg width={size} heigh={size} viewBox={viewBox} className='circular-progress' role='progressbar'>\n      <circle\n        fill='none'\n        cx={size / 2}\n        cy={size / 2}\n        r={radius}\n        strokeWidth={`${strokeWidth}px`}\n      />\n    </svg>\n  );\n};\n\nCircularProgress.propTypes = {\n  size: PropTypes.number.isRequired,\n  strokeWidth: PropTypes.number.isRequired,\n};\n\nconst LoadingIndicator = () => (\n  <div className='loading-indicator'>\n    <CircularProgress size={50} strokeWidth={6} />\n  </div>\n);\n\nexport default LoadingIndicator;\n","import React, { Fragment } from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport Avatar from './avatar';\nimport DisplayName from './display_name';\nimport Permalink from './permalink';\nimport IconButton from './icon_button';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { me } from 'flavours/glitch/initial_state';\nimport RelativeTimestamp from './relative_timestamp';\nimport Skeleton from 'flavours/glitch/components/skeleton';\n\nconst messages = defineMessages({\n  follow: { id: 'account.follow', defaultMessage: 'Follow' },\n  unfollow: { id: 'account.unfollow', defaultMessage: 'Unfollow' },\n  requested: { id: 'account.requested', defaultMessage: 'Awaiting approval' },\n  unblock: { id: 'account.unblock', defaultMessage: 'Unblock @{name}' },\n  unmute: { id: 'account.unmute', defaultMessage: 'Unmute @{name}' },\n  mute_notifications: { id: 'account.mute_notifications', defaultMessage: 'Mute notifications from @{name}' },\n  unmute_notifications: { id: 'account.unmute_notifications', defaultMessage: 'Unmute notifications from @{name}' },\n  mute: { id: 'account.mute', defaultMessage: 'Mute @{name}' },\n  block: { id: 'account.block', defaultMessage: 'Block @{name}' },\n});\n\nexport default @injectIntl\nclass Account extends ImmutablePureComponent {\n\n  static propTypes = {\n    size: PropTypes.number,\n    account: ImmutablePropTypes.map,\n    onFollow: PropTypes.func.isRequired,\n    onBlock: PropTypes.func.isRequired,\n    onMute: PropTypes.func.isRequired,\n    onMuteNotifications: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    hidden: PropTypes.bool,\n    small: PropTypes.bool,\n    actionIcon: PropTypes.string,\n    actionTitle: PropTypes.string,\n    defaultAction: PropTypes.string,\n    onActionClick: PropTypes.func,\n  };\n\n  static defaultProps = {\n    size: 36,\n  };\n\n  handleFollow = () => {\n    this.props.onFollow(this.props.account);\n  };\n\n  handleBlock = () => {\n    this.props.onBlock(this.props.account);\n  };\n\n  handleMute = () => {\n    this.props.onMute(this.props.account);\n  };\n\n  handleMuteNotifications = () => {\n    this.props.onMuteNotifications(this.props.account, true);\n  };\n\n  handleUnmuteNotifications = () => {\n    this.props.onMuteNotifications(this.props.account, false);\n  };\n\n  handleAction = () => {\n    this.props.onActionClick(this.props.account);\n  };\n\n  render () {\n    const {\n      account,\n      hidden,\n      intl,\n      small,\n      onActionClick,\n      actionIcon,\n      actionTitle,\n      defaultAction,\n      size,\n    } = this.props;\n\n    if (!account) {\n      return (\n        <div className='account'>\n          <div className='account__wrapper'>\n            <div className='account__display-name'>\n              <div className='account__avatar-wrapper'><Skeleton width={36} height={36} /></div>\n              <DisplayName />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (hidden) {\n      return (\n        <Fragment>\n          {account.get('display_name')}\n          {account.get('username')}\n        </Fragment>\n      );\n    }\n\n    let buttons;\n\n    if (onActionClick) {\n      if (actionIcon) {\n        buttons = <IconButton icon={actionIcon} title={actionTitle} onClick={this.handleAction} />;\n      }\n    } else if (account.get('id') !== me && !small && account.get('relationship', null) !== null) {\n      const following = account.getIn(['relationship', 'following']);\n      const requested = account.getIn(['relationship', 'requested']);\n      const blocking  = account.getIn(['relationship', 'blocking']);\n      const muting  = account.getIn(['relationship', 'muting']);\n\n      if (requested) {\n        buttons = <IconButton disabled icon='hourglass' title={intl.formatMessage(messages.requested)} />;\n      } else if (blocking) {\n        buttons = <IconButton active icon='unlock' title={intl.formatMessage(messages.unblock, { name: account.get('username') })} onClick={this.handleBlock} />;\n      } else if (muting) {\n        let hidingNotificationsButton;\n        if (account.getIn(['relationship', 'muting_notifications'])) {\n          hidingNotificationsButton = <IconButton active icon='bell' title={intl.formatMessage(messages.unmute_notifications, { name: account.get('username') })} onClick={this.handleUnmuteNotifications} />;\n        } else {\n          hidingNotificationsButton = <IconButton active icon='bell-slash' title={intl.formatMessage(messages.mute_notifications, { name: account.get('username')  })} onClick={this.handleMuteNotifications} />;\n        }\n        buttons = (\n          <Fragment>\n            <IconButton active icon='volume-up' title={intl.formatMessage(messages.unmute, { name: account.get('username') })} onClick={this.handleMute} />\n            {hidingNotificationsButton}\n          </Fragment>\n        );\n      } else if (defaultAction === 'mute') {\n        buttons = <IconButton icon='volume-off' title={intl.formatMessage(messages.mute, { name: account.get('username') })} onClick={this.handleMute} />;\n      } else if (defaultAction === 'block') {\n        buttons = <IconButton icon='lock' title={intl.formatMessage(messages.block, { name: account.get('username') })} onClick={this.handleBlock} />;\n      } else if (!account.get('moved') || following) {\n        buttons = <IconButton icon={following ? 'user-times' : 'user-plus'} title={intl.formatMessage(following ? messages.unfollow : messages.follow)} onClick={this.handleFollow} active={following} />;\n      }\n    }\n\n    let mute_expires_at;\n    if (account.get('mute_expires_at')) {\n      mute_expires_at =  <div><RelativeTimestamp timestamp={account.get('mute_expires_at')} futureDate /></div>;\n    }\n\n    return small ? (\n      <Permalink\n        className='account small'\n        href={account.get('url')}\n        to={`/@${account.get('acct')}`}\n      >\n        <div className='account__avatar-wrapper'>\n          <Avatar\n            account={account}\n            size={24}\n          />\n        </div>\n        <DisplayName\n          account={account}\n          inline\n        />\n      </Permalink>\n    ) : (\n      <div className='account'>\n        <div className='account__wrapper'>\n          <Permalink key={account.get('id')} className='account__display-name' title={account.get('acct')} href={account.get('url')} to={`/@${account.get('acct')}`}>\n            <div className='account__avatar-wrapper'><Avatar account={account} size={size} /></div>\n            {mute_expires_at}\n            <DisplayName account={account} />\n          </Permalink>\n          {buttons ?\n            <div className='account__relationship'>\n              {buttons}\n            </div>\n            : null}\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport { makeGetAccount } from 'flavours/glitch/selectors';\nimport Account from 'flavours/glitch/components/account';\nimport {\n  followAccount,\n  unfollowAccount,\n  blockAccount,\n  unblockAccount,\n  muteAccount,\n  unmuteAccount,\n} from 'flavours/glitch/actions/accounts';\nimport { openModal } from 'flavours/glitch/actions/modal';\nimport { initMuteModal } from 'flavours/glitch/actions/mutes';\nimport { unfollowModal } from 'flavours/glitch/initial_state';\n\nconst messages = defineMessages({\n  unfollowConfirm: { id: 'confirmations.unfollow.confirm', defaultMessage: 'Unfollow' },\n});\n\nconst makeMapStateToProps = () => {\n  const getAccount = makeGetAccount();\n\n  const mapStateToProps = (state, props) => ({\n    account: getAccount(state, props.id),\n  });\n\n  return mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch, { intl }) => ({\n\n  onFollow (account) {\n    if (account.getIn(['relationship', 'following']) || account.getIn(['relationship', 'requested'])) {\n      if (unfollowModal) {\n        dispatch(openModal('CONFIRM', {\n          message: <FormattedMessage id='confirmations.unfollow.message' defaultMessage='Are you sure you want to unfollow {name}?' values={{ name: <strong>@{account.get('acct')}</strong> }} />,\n          confirm: intl.formatMessage(messages.unfollowConfirm),\n          onConfirm: () => dispatch(unfollowAccount(account.get('id'))),\n        }));\n      } else {\n        dispatch(unfollowAccount(account.get('id')));\n      }\n    } else {\n      dispatch(followAccount(account.get('id')));\n    }\n  },\n\n  onBlock (account) {\n    if (account.getIn(['relationship', 'blocking'])) {\n      dispatch(unblockAccount(account.get('id')));\n    } else {\n      dispatch(blockAccount(account.get('id')));\n    }\n  },\n\n  onMute (account) {\n    if (account.getIn(['relationship', 'muting'])) {\n      dispatch(unmuteAccount(account.get('id')));\n    } else {\n      dispatch(initMuteModal(account));\n    }\n  },\n\n\n  onMuteNotifications (account, notifications) {\n    dispatch(muteAccount(account.get('id'), notifications));\n  },\n});\n\nexport default injectIntl(connect(makeMapStateToProps, mapDispatchToProps)(Account));\n","import { ACCOUNT_IMPORT, ACCOUNTS_IMPORT } from '../actions/importer';\nimport { ACCOUNT_LOOKUP_FAIL } from '../actions/accounts';\nimport { Map as ImmutableMap } from 'immutable';\n\nexport const normalizeForLookup = str => str.toLowerCase();\n\nconst initialState = ImmutableMap();\n\nexport default function accountsMap(state = initialState, action) {\n  switch(action.type) {\n  case ACCOUNT_LOOKUP_FAIL:\n    return action.error?.response?.status === 404 ? state.set(normalizeForLookup(action.acct), null) : state;\n  case ACCOUNT_IMPORT:\n    return state.set(normalizeForLookup(action.account.acct), action.account.id);\n  case ACCOUNTS_IMPORT:\n    return state.withMutations(map => action.accounts.forEach(account => map.set(normalizeForLookup(account.acct), account.id)));\n  default:\n    return state;\n  }\n}\n","//  This function binds the given `handlers` to the `target`.\nexport function assignHandlers (target, handlers) {\n  if (!target || !handlers) {\n    return;\n  }\n\n  //  We just bind each handler to the `target`.\n  const handle = target.handlers = {};\n  Object.keys(handlers).forEach(\n    key => handle[key] = handlers[key].bind(target),\n  );\n}\n\n//  This function only returns the component if the result of calling\n//  `test` with `data` is `true`.  Useful with funciton binding.\nexport function conditionalRender (test, data, component) {\n  return test(data) ? component : null;\n}\n\n//  This object provides props to make the component not visible.\nexport const hiddenComponent = { style: { display: 'none' } };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport { EmojiPicker as EmojiPickerAsync } from '../../ui/util/async-components';\nimport Overlay from 'react-overlays/Overlay';\nimport classNames from 'classnames';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { supportsPassiveEvents } from 'detect-passive-events';\nimport { buildCustomEmojis, categoriesFromEmojis } from '../../emoji/emoji';\nimport { useSystemEmojiFont } from 'flavours/glitch/initial_state';\nimport { assetHost } from 'flavours/glitch/utils/config';\n\nconst messages = defineMessages({\n  emoji: { id: 'emoji_button.label', defaultMessage: 'Insert emoji' },\n  emoji_search: { id: 'emoji_button.search', defaultMessage: 'Search...' },\n  custom: { id: 'emoji_button.custom', defaultMessage: 'Custom' },\n  recent: { id: 'emoji_button.recent', defaultMessage: 'Frequently used' },\n  search_results: { id: 'emoji_button.search_results', defaultMessage: 'Search results' },\n  people: { id: 'emoji_button.people', defaultMessage: 'People' },\n  nature: { id: 'emoji_button.nature', defaultMessage: 'Nature' },\n  food: { id: 'emoji_button.food', defaultMessage: 'Food & Drink' },\n  activity: { id: 'emoji_button.activity', defaultMessage: 'Activity' },\n  travel: { id: 'emoji_button.travel', defaultMessage: 'Travel & Places' },\n  objects: { id: 'emoji_button.objects', defaultMessage: 'Objects' },\n  symbols: { id: 'emoji_button.symbols', defaultMessage: 'Symbols' },\n  flags: { id: 'emoji_button.flags', defaultMessage: 'Flags' },\n});\n\nlet EmojiPicker, Emoji; // load asynchronously\n\nconst listenerOptions = supportsPassiveEvents ? { passive: true } : false;\n\nconst backgroundImageFn = () => `${assetHost}/emoji/sheet_13.png`;\n\nconst notFoundFn = () => (\n  <div className='emoji-mart-no-results'>\n    <Emoji\n      emoji='sleuth_or_spy'\n      set='twitter'\n      size={32}\n      sheetSize={32}\n      backgroundImageFn={backgroundImageFn}\n    />\n\n    <div className='emoji-mart-no-results-label'>\n      <FormattedMessage id='emoji_button.not_found' defaultMessage='No matching emojis found' />\n    </div>\n  </div>\n);\n\nclass ModifierPickerMenu extends React.PureComponent {\n\n  static propTypes = {\n    active: PropTypes.bool,\n    onSelect: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  handleClick = e => {\n    this.props.onSelect(e.currentTarget.getAttribute('data-index') * 1);\n  };\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.active) {\n      this.attachListeners();\n    } else {\n      this.removeListeners();\n    }\n  }\n\n  componentWillUnmount () {\n    this.removeListeners();\n  }\n\n  handleDocumentClick = e => {\n    if (this.node && !this.node.contains(e.target)) {\n      this.props.onClose();\n    }\n  };\n\n  attachListeners () {\n    document.addEventListener('click', this.handleDocumentClick, false);\n    document.addEventListener('touchend', this.handleDocumentClick, listenerOptions);\n  }\n\n  removeListeners () {\n    document.removeEventListener('click', this.handleDocumentClick, false);\n    document.removeEventListener('touchend', this.handleDocumentClick, listenerOptions);\n  }\n\n  setRef = c => {\n    this.node = c;\n  };\n\n  render () {\n    const { active } = this.props;\n\n    return (\n      <div className='emoji-picker-dropdown__modifiers__menu' style={{ display: active ? 'block' : 'none' }} ref={this.setRef}>\n        <button onClick={this.handleClick} data-index={1}><Emoji emoji='fist' set='twitter' size={22} sheetSize={32} skin={1} backgroundImageFn={backgroundImageFn} native={useSystemEmojiFont} /></button>\n        <button onClick={this.handleClick} data-index={2}><Emoji emoji='fist' set='twitter' size={22} sheetSize={32} skin={2} backgroundImageFn={backgroundImageFn} native={useSystemEmojiFont} /></button>\n        <button onClick={this.handleClick} data-index={3}><Emoji emoji='fist' set='twitter' size={22} sheetSize={32} skin={3} backgroundImageFn={backgroundImageFn} native={useSystemEmojiFont} /></button>\n        <button onClick={this.handleClick} data-index={4}><Emoji emoji='fist' set='twitter' size={22} sheetSize={32} skin={4} backgroundImageFn={backgroundImageFn} native={useSystemEmojiFont} /></button>\n        <button onClick={this.handleClick} data-index={5}><Emoji emoji='fist' set='twitter' size={22} sheetSize={32} skin={5} backgroundImageFn={backgroundImageFn} native={useSystemEmojiFont} /></button>\n        <button onClick={this.handleClick} data-index={6}><Emoji emoji='fist' set='twitter' size={22} sheetSize={32} skin={6} backgroundImageFn={backgroundImageFn} native={useSystemEmojiFont} /></button>\n      </div>\n    );\n  }\n\n}\n\nclass ModifierPicker extends React.PureComponent {\n\n  static propTypes = {\n    active: PropTypes.bool,\n    modifier: PropTypes.number,\n    onChange: PropTypes.func,\n    onClose: PropTypes.func,\n    onOpen: PropTypes.func,\n  };\n\n  handleClick = () => {\n    if (this.props.active) {\n      this.props.onClose();\n    } else {\n      this.props.onOpen();\n    }\n  };\n\n  handleSelect = modifier => {\n    this.props.onChange(modifier);\n    this.props.onClose();\n  };\n\n  render () {\n    const { active, modifier } = this.props;\n\n    return (\n      <div className='emoji-picker-dropdown__modifiers'>\n        <Emoji emoji='fist' set='twitter' size={22} sheetSize={32} skin={modifier} onClick={this.handleClick} backgroundImageFn={backgroundImageFn} native={useSystemEmojiFont} />\n        <ModifierPickerMenu active={active} onSelect={this.handleSelect} onClose={this.props.onClose} />\n      </div>\n    );\n  }\n\n}\n\n@injectIntl\nclass EmojiPickerMenu extends React.PureComponent {\n\n  static propTypes = {\n    custom_emojis: ImmutablePropTypes.list,\n    frequentlyUsedEmojis: PropTypes.arrayOf(PropTypes.string),\n    loading: PropTypes.bool,\n    onClose: PropTypes.func.isRequired,\n    onPick: PropTypes.func.isRequired,\n    style: PropTypes.object,\n    intl: PropTypes.object.isRequired,\n    skinTone: PropTypes.number.isRequired,\n    onSkinTone: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    style: {},\n    loading: true,\n    frequentlyUsedEmojis: [],\n  };\n\n  state = {\n    modifierOpen: false,\n    readyToFocus: false,\n  };\n\n  handleDocumentClick = e => {\n    if (this.node && !this.node.contains(e.target)) {\n      this.props.onClose();\n    }\n  };\n\n  componentDidMount () {\n    document.addEventListener('click', this.handleDocumentClick, false);\n    document.addEventListener('touchend', this.handleDocumentClick, listenerOptions);\n\n    // Because of https://github.com/react-bootstrap/react-bootstrap/issues/2614 we need\n    // to wait for a frame before focusing\n    requestAnimationFrame(() => {\n      this.setState({ readyToFocus: true });\n      if (this.node) {\n        const element = this.node.querySelector('input[type=\"search\"]');\n        if (element) element.focus();\n      }\n    });\n  }\n\n  componentWillUnmount () {\n    document.removeEventListener('click', this.handleDocumentClick, false);\n    document.removeEventListener('touchend', this.handleDocumentClick, listenerOptions);\n  }\n\n  setRef = c => {\n    this.node = c;\n  };\n\n  getI18n = () => {\n    const { intl } = this.props;\n\n    return {\n      search: intl.formatMessage(messages.emoji_search),\n      categories: {\n        search: intl.formatMessage(messages.search_results),\n        recent: intl.formatMessage(messages.recent),\n        people: intl.formatMessage(messages.people),\n        nature: intl.formatMessage(messages.nature),\n        foods: intl.formatMessage(messages.food),\n        activity: intl.formatMessage(messages.activity),\n        places: intl.formatMessage(messages.travel),\n        objects: intl.formatMessage(messages.objects),\n        symbols: intl.formatMessage(messages.symbols),\n        flags: intl.formatMessage(messages.flags),\n        custom: intl.formatMessage(messages.custom),\n      },\n    };\n  };\n\n  handleClick = (emoji, event) => {\n    if (!emoji.native) {\n      emoji.native = emoji.colons;\n    }\n    if (!(event.ctrlKey || event.metaKey)) {\n      this.props.onClose();\n    }\n    this.props.onPick(emoji);\n  };\n\n  handleModifierOpen = () => {\n    this.setState({ modifierOpen: true });\n  };\n\n  handleModifierClose = () => {\n    this.setState({ modifierOpen: false });\n  };\n\n  handleModifierChange = modifier => {\n    this.props.onSkinTone(modifier);\n  };\n\n  render () {\n    const { loading, style, intl, custom_emojis, skinTone, frequentlyUsedEmojis } = this.props;\n\n    if (loading) {\n      return <div style={{ width: 299 }} />;\n    }\n\n    const title = intl.formatMessage(messages.emoji);\n\n    const { modifierOpen } = this.state;\n\n    const categoriesSort = [\n      'recent',\n      'people',\n      'nature',\n      'foods',\n      'activity',\n      'places',\n      'objects',\n      'symbols',\n      'flags',\n    ];\n\n    categoriesSort.splice(1, 0, ...Array.from(categoriesFromEmojis(custom_emojis)).sort());\n\n    return (\n      <div className={classNames('emoji-picker-dropdown__menu', { selecting: modifierOpen })} style={style} ref={this.setRef}>\n        <EmojiPicker\n          perLine={8}\n          emojiSize={22}\n          sheetSize={32}\n          custom={buildCustomEmojis(custom_emojis)}\n          color=''\n          emoji=''\n          set='twitter'\n          title={title}\n          i18n={this.getI18n()}\n          onClick={this.handleClick}\n          include={categoriesSort}\n          recent={frequentlyUsedEmojis}\n          skin={skinTone}\n          showPreview={false}\n          showSkinTones={false}\n          backgroundImageFn={backgroundImageFn}\n          notFound={notFoundFn}\n          autoFocus={this.state.readyToFocus}\n          emojiTooltip\n          native={useSystemEmojiFont}\n        />\n\n        <ModifierPicker\n          active={modifierOpen}\n          modifier={skinTone}\n          onOpen={this.handleModifierOpen}\n          onClose={this.handleModifierClose}\n          onChange={this.handleModifierChange}\n        />\n      </div>\n    );\n  }\n\n}\n\nexport default @injectIntl\nclass EmojiPickerDropdown extends React.PureComponent {\n\n  static propTypes = {\n    custom_emojis: ImmutablePropTypes.list,\n    frequentlyUsedEmojis: PropTypes.arrayOf(PropTypes.string),\n    intl: PropTypes.object.isRequired,\n    onPickEmoji: PropTypes.func.isRequired,\n    onSkinTone: PropTypes.func.isRequired,\n    skinTone: PropTypes.number.isRequired,\n    button: PropTypes.node,\n    disabled: PropTypes.bool,\n  };\n\n  state = {\n    active: false,\n    loading: false,\n  };\n\n  setRef = (c) => {\n    this.dropdown = c;\n  };\n\n  onShowDropdown = () => {\n    this.setState({ active: true });\n\n    if (!EmojiPicker) {\n      this.setState({ loading: true });\n\n      EmojiPickerAsync().then(EmojiMart => {\n        EmojiPicker = EmojiMart.Picker;\n        Emoji       = EmojiMart.Emoji;\n\n        this.setState({ loading: false });\n      }).catch(() => {\n        this.setState({ loading: false, active: false });\n      });\n    }\n  };\n\n  onHideDropdown = () => {\n    this.setState({ active: false });\n  };\n\n  onToggle = (e) => {\n    if (!this.state.disabled && !this.state.loading && (!e.key || e.key === 'Enter')) {\n      if (this.state.active) {\n        this.onHideDropdown();\n      } else {\n        this.onShowDropdown(e);\n      }\n    }\n  };\n\n  handleKeyDown = e => {\n    if (e.key === 'Escape') {\n      this.onHideDropdown();\n    }\n  };\n\n  setTargetRef = c => {\n    this.target = c;\n  };\n\n  findTarget = () => {\n    return this.target;\n  };\n\n  render () {\n    const { intl, onPickEmoji, onSkinTone, skinTone, frequentlyUsedEmojis, button } = this.props;\n    const title = intl.formatMessage(messages.emoji);\n    const { active, loading } = this.state;\n\n    return (\n      <div className='emoji-picker-dropdown' onKeyDown={this.handleKeyDown}>\n        <div ref={this.setTargetRef} className='emoji-button' title={title} aria-label={title} aria-expanded={active} role='button' onClick={this.onToggle} onKeyDown={this.onToggle} tabIndex={0}>\n          {button || <img\n            className={classNames('emojione', { 'pulse-loading': active && loading })}\n            alt=''\n            src={`${assetHost}/emoji/1f602.svg`}\n          />}\n        </div>\n\n        <Overlay show={active} placement={'bottom'} flip target={this.findTarget} popperConfig={{ strategy: 'fixed' }}>\n          {({ props, placement })=> (\n            <div {...props} style={{ ...props.style, width: 299 }}>\n              <div className={`dropdown-animation ${placement}`}>\n                <EmojiPickerMenu\n                  custom_emojis={this.props.custom_emojis}\n                  loading={loading}\n                  onClose={this.onHideDropdown}\n                  onPick={onPickEmoji}\n                  onSkinTone={onSkinTone}\n                  skinTone={skinTone}\n                  frequentlyUsedEmojis={frequentlyUsedEmojis}\n                />\n              </div>\n            </div>\n          )}\n        </Overlay>\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport EmojiPickerDropdown from '../components/emoji_picker_dropdown';\nimport { changeSetting } from 'flavours/glitch/actions/settings';\nimport { createSelector } from 'reselect';\nimport { Map as ImmutableMap } from 'immutable';\nimport { useEmoji } from 'flavours/glitch/actions/emojis';\n\nconst perLine = 8;\nconst lines   = 2;\n\nconst DEFAULTS = [\n  '+1',\n  'grinning',\n  'kissing_heart',\n  'heart_eyes',\n  'laughing',\n  'stuck_out_tongue_winking_eye',\n  'sweat_smile',\n  'joy',\n  'yum',\n  'disappointed',\n  'thinking_face',\n  'weary',\n  'sob',\n  'sunglasses',\n  'heart',\n  'ok_hand',\n];\n\nconst getFrequentlyUsedEmojis = createSelector([\n  state => state.getIn(['settings', 'frequentlyUsedEmojis'], ImmutableMap()),\n], emojiCounters => {\n  let emojis = emojiCounters\n    .keySeq()\n    .sort((a, b) => emojiCounters.get(a) - emojiCounters.get(b))\n    .reverse()\n    .slice(0, perLine * lines)\n    .toArray();\n\n  if (emojis.length < DEFAULTS.length) {\n    let uniqueDefaults = DEFAULTS.filter(emoji => !emojis.includes(emoji));\n    emojis = emojis.concat(uniqueDefaults.slice(0, DEFAULTS.length - emojis.length));\n  }\n\n  return emojis;\n});\n\nconst getCustomEmojis = createSelector([\n  state => state.get('custom_emojis'),\n], emojis => emojis.filter(e => e.get('visible_in_picker')).sort((a, b) => {\n  const aShort = a.get('shortcode').toLowerCase();\n  const bShort = b.get('shortcode').toLowerCase();\n\n  if (aShort < bShort) {\n    return -1;\n  } else if (aShort > bShort ) {\n    return 1;\n  } else {\n    return 0;\n  }\n}));\n\nconst mapStateToProps = state => ({\n  custom_emojis: getCustomEmojis(state),\n  skinTone: state.getIn(['settings', 'skinTone']),\n  frequentlyUsedEmojis: getFrequentlyUsedEmojis(state),\n});\n\nconst mapDispatchToProps = (dispatch, { onPickEmoji }) => ({\n  onSkinTone: skinTone => {\n    dispatch(changeSetting(['skinTone'], skinTone));\n  },\n\n  onPickEmoji: emoji => {\n    dispatch(useEmoji(emoji));\n\n    if (onPickEmoji) {\n      onPickEmoji(emoji);\n    }\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiPickerDropdown);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst emptyComponent = () => null;\nconst noop = () => { };\n\nclass Bundle extends React.Component {\n\n  static propTypes = {\n    fetchComponent: PropTypes.func.isRequired,\n    loading: PropTypes.func,\n    error: PropTypes.func,\n    children: PropTypes.func.isRequired,\n    renderDelay: PropTypes.number,\n    onFetch: PropTypes.func,\n    onFetchSuccess: PropTypes.func,\n    onFetchFail: PropTypes.func,\n  };\n\n  static defaultProps = {\n    loading: emptyComponent,\n    error: emptyComponent,\n    renderDelay: 0,\n    onFetch: noop,\n    onFetchSuccess: noop,\n    onFetchFail: noop,\n  };\n\n  static cache = {};\n\n  state = {\n    mod: undefined,\n    forceRender: false,\n  };\n\n  componentWillMount() {\n    this.load(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.fetchComponent !== this.props.fetchComponent) {\n      this.load(nextProps);\n    }\n  }\n\n  componentWillUnmount () {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  load = (props) => {\n    const { fetchComponent, onFetch, onFetchSuccess, onFetchFail, renderDelay } = props || this.props;\n\n    if (fetchComponent === undefined) {\n      this.setState({ mod: null });\n      return Promise.resolve();\n    }\n\n    onFetch();\n\n    if (Bundle.cache[fetchComponent.name]) {\n      const mod = Bundle.cache[fetchComponent.name];\n\n      this.setState({ mod: mod.default });\n      onFetchSuccess();\n      return Promise.resolve();\n    }\n\n    this.setState({ mod: undefined });\n\n    if (renderDelay !== 0) {\n      this.timestamp = new Date();\n      this.timeout = setTimeout(() => this.setState({ forceRender: true }), renderDelay);\n    }\n\n    return fetchComponent()\n      .then((mod) => {\n        Bundle.cache[fetchComponent.name] = mod;\n        this.setState({ mod: mod.default });\n        onFetchSuccess();\n      })\n      .catch((error) => {\n        this.setState({ mod: null });\n        onFetchFail(error);\n      });\n  };\n\n  render() {\n    const { loading: Loading, error: Error, children, renderDelay } = this.props;\n    const { mod, forceRender } = this.state;\n    const elapsed = this.timestamp ? (new Date() - this.timestamp) : renderDelay;\n\n    if (mod === undefined) {\n      return (elapsed >= renderDelay || forceRender) ? <Loading /> : null;\n    }\n\n    if (mod === null) {\n      return <Error onRetry={this.load} />;\n    }\n\n    return children(mod);\n  }\n\n}\n\nexport default Bundle;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\nmodule.exports = isStrictComparable;","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function (object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue && (srcValue !== undefined || key in Object(object));\n  };\n}\nmodule.exports = matchesStrictComparable;","var castPath = require('./_castPath'),\n  toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n  var index = 0,\n    length = path.length;\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return index && index == length ? object : undefined;\n}\nmodule.exports = baseGet;","var isArray = require('./isArray'),\n  isKey = require('./_isKey'),\n  stringToPath = require('./_stringToPath'),\n  toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\nmodule.exports = castPath;","import { connect } from 'react-redux';\n\nimport Bundle from '../components/bundle';\n\nimport { fetchBundleRequest, fetchBundleSuccess, fetchBundleFail } from 'flavours/glitch/actions/bundles';\n\nconst mapDispatchToProps = dispatch => ({\n  onFetch () {\n    dispatch(fetchBundleRequest());\n  },\n  onFetchSuccess () {\n    dispatch(fetchBundleSuccess());\n  },\n  onFetchFail (error) {\n    dispatch(fetchBundleFail(error));\n  },\n});\n\nexport default connect(null, mapDispatchToProps)(Bundle);\n","export const BUNDLE_FETCH_REQUEST = 'BUNDLE_FETCH_REQUEST';\nexport const BUNDLE_FETCH_SUCCESS = 'BUNDLE_FETCH_SUCCESS';\nexport const BUNDLE_FETCH_FAIL = 'BUNDLE_FETCH_FAIL';\n\nexport function fetchBundleRequest(skipLoading) {\n  return {\n    type: BUNDLE_FETCH_REQUEST,\n    skipLoading,\n  };\n}\n\nexport function fetchBundleSuccess(skipLoading) {\n  return {\n    type: BUNDLE_FETCH_SUCCESS,\n    skipLoading,\n  };\n}\n\nexport function fetchBundleFail(error, skipLoading) {\n  return {\n    type: BUNDLE_FETCH_FAIL,\n    error,\n    skipLoading,\n  };\n}\n","export const APP_LAYOUT_CHANGE = 'APP_LAYOUT_CHANGE';\n\nexport const changeLayout = layout => ({\n  type: APP_LAYOUT_CHANGE,\n  layout,\n});\n","import api from '../api';\nimport { importFetchedStatuses } from './importer';\n\nexport const PINNED_STATUSES_FETCH_REQUEST = 'PINNED_STATUSES_FETCH_REQUEST';\nexport const PINNED_STATUSES_FETCH_SUCCESS = 'PINNED_STATUSES_FETCH_SUCCESS';\nexport const PINNED_STATUSES_FETCH_FAIL = 'PINNED_STATUSES_FETCH_FAIL';\n\nimport { me } from 'flavours/glitch/initial_state';\n\nexport function fetchPinnedStatuses() {\n  return (dispatch, getState) => {\n    dispatch(fetchPinnedStatusesRequest());\n\n    api(getState).get(`/api/v1/accounts/${me}/statuses`, { params: { pinned: true } }).then(response => {\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchPinnedStatusesSuccess(response.data, null));\n    }).catch(error => {\n      dispatch(fetchPinnedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchPinnedStatusesRequest() {\n  return {\n    type: PINNED_STATUSES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedStatusesSuccess(statuses, next) {\n  return {\n    type: PINNED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function fetchPinnedStatusesFail(error) {\n  return {\n    type: PINNED_STATUSES_FETCH_FAIL,\n    error,\n  };\n}\n","import { connect } from 'react-redux';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport ComposeForm from '../components/compose_form';\nimport {\n  changeCompose,\n  changeComposeSpoilerText,\n  changeComposeSpoilerness,\n  changeComposeVisibility,\n  clearComposeSuggestions,\n  fetchComposeSuggestions,\n  insertEmojiCompose,\n  selectComposeSuggestion,\n  submitCompose,\n  uploadCompose,\n} from 'flavours/glitch/actions/compose';\nimport {\n  openModal,\n} from 'flavours/glitch/actions/modal';\nimport { changeLocalSetting } from 'flavours/glitch/actions/local_settings';\n\nimport { privacyPreference } from 'flavours/glitch/utils/privacy_preference';\n\nconst messages = defineMessages({\n  missingDescriptionMessage: {\n    id: 'confirmations.missing_media_description.message',\n    defaultMessage: 'At least one media attachment is lacking a description. Consider describing all media attachments for the visually impaired before sending your toot.',\n  },\n  missingDescriptionConfirm: {\n    id: 'confirmations.missing_media_description.confirm',\n    defaultMessage: 'Send anyway',\n  },\n  missingDescriptionEdit: {\n    id: 'confirmations.missing_media_description.edit',\n    defaultMessage: 'Edit media',\n  },\n});\n\n//  State mapping.\nfunction mapStateToProps (state) {\n  const spoilersAlwaysOn = state.getIn(['local_settings', 'always_show_spoilers_field']);\n  const inReplyTo = state.getIn(['compose', 'in_reply_to']);\n  const replyPrivacy = inReplyTo ? state.getIn(['statuses', inReplyTo, 'visibility']) : null;\n  const sideArmBasePrivacy = state.getIn(['local_settings', 'side_arm']);\n  const sideArmRestrictedPrivacy = replyPrivacy ? privacyPreference(replyPrivacy, sideArmBasePrivacy) : null;\n  let sideArmPrivacy = null;\n  switch (state.getIn(['local_settings', 'side_arm_reply_mode'])) {\n  case 'copy':\n    sideArmPrivacy = replyPrivacy;\n    break;\n  case 'restrict':\n    sideArmPrivacy = sideArmRestrictedPrivacy;\n    break;\n  }\n  sideArmPrivacy = sideArmPrivacy || sideArmBasePrivacy;\n  return {\n    advancedOptions: state.getIn(['compose', 'advanced_options']),\n    focusDate: state.getIn(['compose', 'focusDate']),\n    caretPosition: state.getIn(['compose', 'caretPosition']),\n    isSubmitting: state.getIn(['compose', 'is_submitting']),\n    isEditing: state.getIn(['compose', 'id']) !== null,\n    isChangingUpload: state.getIn(['compose', 'is_changing_upload']),\n    isUploading: state.getIn(['compose', 'is_uploading']),\n    layout: state.getIn(['local_settings', 'layout']),\n    media: state.getIn(['compose', 'media_attachments']),\n    preselectDate: state.getIn(['compose', 'preselectDate']),\n    privacy: state.getIn(['compose', 'privacy']),\n    sideArm: sideArmPrivacy,\n    sensitive: state.getIn(['compose', 'sensitive']),\n    showSearch: state.getIn(['search', 'submitted']) && !state.getIn(['search', 'hidden']),\n    spoiler: spoilersAlwaysOn || state.getIn(['compose', 'spoiler']),\n    spoilerText: state.getIn(['compose', 'spoiler_text']),\n    suggestions: state.getIn(['compose', 'suggestions']),\n    text: state.getIn(['compose', 'text']),\n    anyMedia: state.getIn(['compose', 'media_attachments']).size > 0,\n    spoilersAlwaysOn: spoilersAlwaysOn,\n    mediaDescriptionConfirmation: state.getIn(['local_settings', 'confirm_missing_media_description']),\n    preselectOnReply: state.getIn(['local_settings', 'preselect_on_reply']),\n    isInReply: state.getIn(['compose', 'in_reply_to']) !== null,\n    lang: state.getIn(['compose', 'language']),\n  };\n}\n\n//  Dispatch mapping.\nconst mapDispatchToProps = (dispatch, { intl }) => ({\n\n  onChange(text) {\n    dispatch(changeCompose(text));\n  },\n\n  onSubmit(routerHistory) {\n    dispatch(submitCompose(routerHistory));\n  },\n\n  onClearSuggestions() {\n    dispatch(clearComposeSuggestions());\n  },\n\n  onFetchSuggestions(token) {\n    dispatch(fetchComposeSuggestions(token));\n  },\n\n  onSuggestionSelected(position, token, suggestion, path) {\n    dispatch(selectComposeSuggestion(position, token, suggestion, path));\n  },\n\n  onChangeSpoilerText(text) {\n    dispatch(changeComposeSpoilerText(text));\n  },\n\n  onPaste(files) {\n    dispatch(uploadCompose(files));\n  },\n\n  onPickEmoji(position, emoji) {\n    dispatch(insertEmojiCompose(position, emoji));\n  },\n\n  onChangeSpoilerness() {\n    dispatch(changeComposeSpoilerness());\n  },\n\n  onChangeVisibility(value) {\n    dispatch(changeComposeVisibility(value));\n  },\n\n  onMediaDescriptionConfirm(routerHistory, mediaId, overriddenVisibility = null) {\n    dispatch(openModal('CONFIRM', {\n      message: intl.formatMessage(messages.missingDescriptionMessage),\n      confirm: intl.formatMessage(messages.missingDescriptionConfirm),\n      onConfirm: () => {\n        if (overriddenVisibility) {\n          dispatch(changeComposeVisibility(overriddenVisibility));\n        }\n        dispatch(submitCompose(routerHistory));\n      },\n      secondary: intl.formatMessage(messages.missingDescriptionEdit),\n      onSecondary: () => dispatch(openModal('FOCAL_POINT', { id: mediaId })),\n      onDoNotAsk: () => dispatch(changeLocalSetting(['confirm_missing_media_description'], false)),\n    }));\n  },\n\n});\n\nexport default injectIntl(connect(mapStateToProps, mapDispatchToProps)(ComposeForm));\n","//  Package imports.\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\n//  Components.\nimport AccountContainer from 'flavours/glitch/containers/account_container';\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport AttachmentList from 'flavours/glitch/components/attachment_list';\n\n//  Messages.\nconst messages = defineMessages({\n  cancel: {\n    defaultMessage: 'Cancel',\n    id: 'reply_indicator.cancel',\n  },\n});\n\n\nexport default @injectIntl\nclass ReplyIndicator extends ImmutablePureComponent {\n\n  static propTypes = {\n    status: ImmutablePropTypes.map,\n    intl: PropTypes.object.isRequired,\n    onCancel: PropTypes.func,\n  };\n\n  handleClick = () => {\n    const { onCancel } = this.props;\n    if (onCancel) {\n      onCancel();\n    }\n  };\n\n  //  Rendering.\n  render () {\n    const { status, intl } = this.props;\n\n    if (!status) {\n      return null;\n    }\n\n    const account     = status.get('account');\n    const content     = status.get('content');\n    const attachments = status.get('media_attachments');\n\n    //  The result.\n    return (\n      <article className='reply-indicator'>\n        <header className='reply-indicator__header'>\n          <IconButton\n            className='reply-indicator__cancel'\n            icon='times'\n            onClick={this.handleClick}\n            title={intl.formatMessage(messages.cancel)}\n            inverted\n          />\n          {account && (\n            <AccountContainer\n              id={account}\n              small\n            />\n          )}\n        </header>\n        <div\n          className='reply-indicator__content translate'\n          dangerouslySetInnerHTML={{ __html: content || '' }}\n        />\n        {attachments.size > 0 && (\n          <AttachmentList\n            compact\n            media={attachments}\n          />\n        )}\n      </article>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport { cancelReplyCompose } from 'flavours/glitch/actions/compose';\nimport ReplyIndicator from '../components/reply_indicator';\n\nconst makeMapStateToProps = () => {\n  const mapStateToProps = state => {\n    let statusId = state.getIn(['compose', 'id'], null);\n    let editing  = true;\n\n    if (statusId === null) {\n      statusId = state.getIn(['compose', 'in_reply_to']);\n      editing  = false;\n    }\n\n    return {\n      status: state.getIn(['statuses', statusId]),\n      editing,\n    };\n  };\n\n  return mapStateToProps;\n};\n\nconst mapDispatchToProps = dispatch => ({\n\n  onCancel () {\n    dispatch(cancelReplyCompose());\n  },\n\n});\n\nexport default connect(makeMapStateToProps, mapDispatchToProps)(ReplyIndicator);\n","import React from 'react';\nimport Avatar from 'flavours/glitch/components/avatar';\nimport DisplayName from 'flavours/glitch/components/display_name';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nexport default class AutosuggestAccount extends ImmutablePureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.map.isRequired,\n  };\n\n  render () {\n    const { account } = this.props;\n\n    return (\n      <div className='account small' title={account.get('acct')}>\n        <div className='account__avatar-wrapper'><Avatar account={account} size={24} /></div>\n        <DisplayName account={account} inline />\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport AutosuggestAccount from '../components/autosuggest_account';\nimport { makeGetAccount } from 'flavours/glitch/selectors';\n\nconst makeMapStateToProps = () => {\n  const getAccount = makeGetAccount();\n\n  const mapStateToProps = (state, { id }) => ({\n    account: getAccount(state, id),\n  });\n\n  return mapStateToProps;\n};\n\nexport default connect(makeMapStateToProps)(AutosuggestAccount);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport unicodeMapping from 'flavours/glitch/features/emoji/emoji_unicode_mapping_light';\n\nimport { assetHost } from 'flavours/glitch/utils/config';\n\nexport default class AutosuggestEmoji extends React.PureComponent {\n\n  static propTypes = {\n    emoji: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { emoji } = this.props;\n    let url;\n\n    if (emoji.custom) {\n      url = emoji.imageUrl;\n    } else {\n      const mapping = unicodeMapping[emoji.native] || unicodeMapping[emoji.native.replace(/\\uFE0F$/, '')];\n\n      if (!mapping) {\n        return null;\n      }\n\n      url = `${assetHost}/emoji/${mapping.filename}.svg`;\n    }\n\n    return (\n      <div className='emoji'>\n        <img\n          className='emojione'\n          src={url}\n          alt={emoji.native || emoji.colons}\n        />\n\n        {emoji.colons}\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ShortNumber from 'flavours/glitch/components/short_number';\nimport { FormattedMessage } from 'react-intl';\n\nexport default class AutosuggestHashtag extends React.PureComponent {\n\n  static propTypes = {\n    tag: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      url: PropTypes.string,\n      history: PropTypes.array,\n    }).isRequired,\n  };\n\n  render() {\n    const { tag } = this.props;\n    const weeklyUses = tag.history && (\n      <ShortNumber\n        value={tag.history.reduce((total, day) => total + day.uses * 1, 0)}\n      />\n    );\n\n    return (\n      <div className='autosuggest-hashtag'>\n        <div className='autosuggest-hashtag__name'>\n          #<strong>{tag.name}</strong>\n        </div>\n        {tag.history !== undefined && (\n          <div className='autosuggest-hashtag__uses'>\n            <FormattedMessage\n              id='autosuggest_hashtag.per_week'\n              defaultMessage='{count} per week'\n              values={{ count: weeklyUses }}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport AutosuggestAccountContainer from 'flavours/glitch/features/compose/containers/autosuggest_account_container';\nimport AutosuggestEmoji from './autosuggest_emoji';\nimport AutosuggestHashtag from './autosuggest_hashtag';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport Textarea from 'react-textarea-autosize';\nimport classNames from 'classnames';\n\nconst textAtCursorMatchesToken = (str, caretPosition) => {\n  let word;\n\n  let left  = str.slice(0, caretPosition).search(/[^\\s\\u200B]+$/);\n  let right = str.slice(caretPosition).search(/[\\s\\u200B]/);\n\n  if (right < 0) {\n    word = str.slice(left);\n  } else {\n    word = str.slice(left, right + caretPosition);\n  }\n\n  if (!word || word.trim().length < 3 || ['@', ':', '#'].indexOf(word[0]) === -1) {\n    return [null, null];\n  }\n\n  word = word.trim().toLowerCase();\n\n  if (word.length > 0) {\n    return [left, word];\n  } else {\n    return [null, null];\n  }\n};\n\nexport default class AutosuggestTextarea extends ImmutablePureComponent {\n\n  static propTypes = {\n    value: PropTypes.string,\n    suggestions: ImmutablePropTypes.list,\n    disabled: PropTypes.bool,\n    placeholder: PropTypes.string,\n    onSuggestionSelected: PropTypes.func.isRequired,\n    onSuggestionsClearRequested: PropTypes.func.isRequired,\n    onSuggestionsFetchRequested: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onKeyUp: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onPaste: PropTypes.func.isRequired,\n    autoFocus: PropTypes.bool,\n    lang: PropTypes.string,\n  };\n\n  static defaultProps = {\n    autoFocus: true,\n  };\n\n  state = {\n    suggestionsHidden: true,\n    focused: false,\n    selectedSuggestion: 0,\n    lastToken: null,\n    tokenStart: 0,\n  };\n\n  onChange = (e) => {\n    const [ tokenStart, token ] = textAtCursorMatchesToken(e.target.value, e.target.selectionStart);\n\n    if (token !== null && this.state.lastToken !== token) {\n      this.setState({ lastToken: token, selectedSuggestion: 0, tokenStart });\n      this.props.onSuggestionsFetchRequested(token);\n    } else if (token === null) {\n      this.setState({ lastToken: null });\n      this.props.onSuggestionsClearRequested();\n    }\n\n    this.props.onChange(e);\n  };\n\n  onKeyDown = (e) => {\n    const { suggestions, disabled } = this.props;\n    const { selectedSuggestion, suggestionsHidden } = this.state;\n\n    if (disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (e.which === 229 || e.isComposing) {\n      // Ignore key events during text composition\n      // e.key may be a name of the physical key even in this case (e.x. Safari / Chrome on Mac)\n      return;\n    }\n\n    switch(e.key) {\n    case 'Escape':\n      if (suggestions.size === 0 || suggestionsHidden) {\n        document.querySelector('.ui').parentElement.focus();\n      } else {\n        e.preventDefault();\n        this.setState({ suggestionsHidden: true });\n      }\n\n      break;\n    case 'ArrowDown':\n      if (suggestions.size > 0 && !suggestionsHidden) {\n        e.preventDefault();\n        this.setState({ selectedSuggestion: Math.min(selectedSuggestion + 1, suggestions.size - 1) });\n      }\n\n      break;\n    case 'ArrowUp':\n      if (suggestions.size > 0 && !suggestionsHidden) {\n        e.preventDefault();\n        this.setState({ selectedSuggestion: Math.max(selectedSuggestion - 1, 0) });\n      }\n\n      break;\n    case 'Enter':\n    case 'Tab':\n      // Select suggestion\n      if (this.state.lastToken !== null && suggestions.size > 0 && !suggestionsHidden) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.props.onSuggestionSelected(this.state.tokenStart, this.state.lastToken, suggestions.get(selectedSuggestion));\n      }\n\n      break;\n    }\n\n    if (e.defaultPrevented || !this.props.onKeyDown) {\n      return;\n    }\n\n    this.props.onKeyDown(e);\n  };\n\n  onBlur = () => {\n    this.setState({ suggestionsHidden: true, focused: false });\n  };\n\n  onFocus = (e) => {\n    this.setState({ focused: true });\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n  };\n\n  onSuggestionClick = (e) => {\n    const suggestion = this.props.suggestions.get(e.currentTarget.getAttribute('data-index'));\n    e.preventDefault();\n    this.props.onSuggestionSelected(this.state.tokenStart, this.state.lastToken, suggestion);\n    this.textarea.focus();\n  };\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.suggestions !== this.props.suggestions && nextProps.suggestions.size > 0 && this.state.suggestionsHidden && this.state.focused) {\n      this.setState({ suggestionsHidden: false });\n    }\n  }\n\n  setTextarea = (c) => {\n    this.textarea = c;\n  };\n\n  onPaste = (e) => {\n    if (e.clipboardData && e.clipboardData.files.length === 1) {\n      this.props.onPaste(e.clipboardData.files);\n      e.preventDefault();\n    }\n  };\n\n  renderSuggestion = (suggestion, i) => {\n    const { selectedSuggestion } = this.state;\n    let inner, key;\n\n    if (suggestion.type === 'emoji') {\n      inner = <AutosuggestEmoji emoji={suggestion} />;\n      key   = suggestion.id;\n    } else if (suggestion.type === 'hashtag') {\n      inner = <AutosuggestHashtag tag={suggestion} />;\n      key   = suggestion.name;\n    } else if (suggestion.type === 'account') {\n      inner = <AutosuggestAccountContainer id={suggestion.id} />;\n      key   = suggestion.id;\n    }\n\n    return (\n      <div role='button' tabIndex='0' key={key} data-index={i} className={classNames('autosuggest-textarea__suggestions__item', { selected: i === selectedSuggestion })} onMouseDown={this.onSuggestionClick}>\n        {inner}\n      </div>\n    );\n  };\n\n  render () {\n    const { value, suggestions, disabled, placeholder, onKeyUp, autoFocus, lang, children } = this.props;\n    const { suggestionsHidden } = this.state;\n\n    return [\n      <div className='compose-form__autosuggest-wrapper' key='autosuggest-wrapper'>\n        <div className='autosuggest-textarea'>\n          <label>\n            <span style={{ display: 'none' }}>{placeholder}</span>\n\n            <Textarea\n              ref={this.setTextarea}\n              className='autosuggest-textarea__textarea'\n              disabled={disabled}\n              placeholder={placeholder}\n              autoFocus={autoFocus}\n              value={value}\n              onChange={this.onChange}\n              onKeyDown={this.onKeyDown}\n              onKeyUp={onKeyUp}\n              onFocus={this.onFocus}\n              onBlur={this.onBlur}\n              onPaste={this.onPaste}\n              dir='auto'\n              aria-autocomplete='list'\n              lang={lang}\n            />\n          </label>\n        </div>\n        {children}\n      </div>,\n\n      <div className='autosuggest-textarea__suggestions-wrapper' key='suggestions-wrapper'>\n        <div className={`autosuggest-textarea__suggestions ${suggestionsHidden || suggestions.isEmpty() ? '' : 'autosuggest-textarea__suggestions--visible'}`}>\n          {suggestions.map(this.renderSuggestion)}\n        </div>\n      </div>,\n    ];\n  }\n\n}\n","import React from 'react';\nimport AutosuggestAccountContainer from 'flavours/glitch/features/compose/containers/autosuggest_account_container';\nimport AutosuggestEmoji from './autosuggest_emoji';\nimport AutosuggestHashtag from './autosuggest_hashtag';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport classNames from 'classnames';\n\nconst textAtCursorMatchesToken = (str, caretPosition, searchTokens) => {\n  let word;\n\n  let left  = str.slice(0, caretPosition).search(/[^\\s\\u200B]+$/);\n  let right = str.slice(caretPosition).search(/[\\s\\u200B]/);\n\n  if (right < 0) {\n    word = str.slice(left);\n  } else {\n    word = str.slice(left, right + caretPosition);\n  }\n\n  if (!word || word.trim().length < 3 || searchTokens.indexOf(word[0]) === -1) {\n    return [null, null];\n  }\n\n  word = word.trim().toLowerCase();\n\n  if (word.length > 0) {\n    return [left, word];\n  } else {\n    return [null, null];\n  }\n};\n\nexport default class AutosuggestInput extends ImmutablePureComponent {\n\n  static propTypes = {\n    value: PropTypes.string,\n    suggestions: ImmutablePropTypes.list,\n    disabled: PropTypes.bool,\n    placeholder: PropTypes.string,\n    onSuggestionSelected: PropTypes.func.isRequired,\n    onSuggestionsClearRequested: PropTypes.func.isRequired,\n    onSuggestionsFetchRequested: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onKeyUp: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    autoFocus: PropTypes.bool,\n    className: PropTypes.string,\n    id: PropTypes.string,\n    searchTokens: PropTypes.arrayOf(PropTypes.string),\n    maxLength: PropTypes.number,\n    lang: PropTypes.string,\n    spellCheck: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    autoFocus: true,\n    searchTokens: ['@', ':', '#'],\n  };\n\n  state = {\n    suggestionsHidden: true,\n    focused: false,\n    selectedSuggestion: 0,\n    lastToken: null,\n    tokenStart: 0,\n  };\n\n  onChange = (e) => {\n    const [ tokenStart, token ] = textAtCursorMatchesToken(e.target.value, e.target.selectionStart, this.props.searchTokens);\n\n    if (token !== null && this.state.lastToken !== token) {\n      this.setState({ lastToken: token, selectedSuggestion: 0, tokenStart });\n      this.props.onSuggestionsFetchRequested(token);\n    } else if (token === null) {\n      this.setState({ lastToken: null });\n      this.props.onSuggestionsClearRequested();\n    }\n\n    this.props.onChange(e);\n  };\n\n  onKeyDown = (e) => {\n    const { suggestions, disabled } = this.props;\n    const { selectedSuggestion, suggestionsHidden } = this.state;\n\n    if (disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (e.which === 229 || e.isComposing) {\n      // Ignore key events during text composition\n      // e.key may be a name of the physical key even in this case (e.x. Safari / Chrome on Mac)\n      return;\n    }\n\n    switch(e.key) {\n    case 'Escape':\n      if (suggestions.size === 0 || suggestionsHidden) {\n        document.querySelector('.ui').parentElement.focus();\n      } else {\n        e.preventDefault();\n        this.setState({ suggestionsHidden: true });\n      }\n\n      break;\n    case 'ArrowDown':\n      if (suggestions.size > 0 && !suggestionsHidden) {\n        e.preventDefault();\n        this.setState({ selectedSuggestion: Math.min(selectedSuggestion + 1, suggestions.size - 1) });\n      }\n\n      break;\n    case 'ArrowUp':\n      if (suggestions.size > 0 && !suggestionsHidden) {\n        e.preventDefault();\n        this.setState({ selectedSuggestion: Math.max(selectedSuggestion - 1, 0) });\n      }\n\n      break;\n    case 'Enter':\n    case 'Tab':\n      // Select suggestion\n      if (this.state.lastToken !== null && suggestions.size > 0 && !suggestionsHidden) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.props.onSuggestionSelected(this.state.tokenStart, this.state.lastToken, suggestions.get(selectedSuggestion));\n      }\n\n      break;\n    }\n\n    if (e.defaultPrevented || !this.props.onKeyDown) {\n      return;\n    }\n\n    this.props.onKeyDown(e);\n  };\n\n  onBlur = () => {\n    this.setState({ suggestionsHidden: true, focused: false });\n  };\n\n  onFocus = () => {\n    this.setState({ focused: true });\n  };\n\n  onSuggestionClick = (e) => {\n    const suggestion = this.props.suggestions.get(e.currentTarget.getAttribute('data-index'));\n    e.preventDefault();\n    this.props.onSuggestionSelected(this.state.tokenStart, this.state.lastToken, suggestion);\n    this.input.focus();\n  };\n\n  componentWillReceiveProps (nextProps) {\n    if (nextProps.suggestions !== this.props.suggestions && nextProps.suggestions.size > 0 && this.state.suggestionsHidden && this.state.focused) {\n      this.setState({ suggestionsHidden: false });\n    }\n  }\n\n  setInput = (c) => {\n    this.input = c;\n  };\n\n  renderSuggestion = (suggestion, i) => {\n    const { selectedSuggestion } = this.state;\n    let inner, key;\n\n    if (suggestion.type === 'emoji') {\n      inner = <AutosuggestEmoji emoji={suggestion} />;\n      key   = suggestion.id;\n    } else if (suggestion.type ==='hashtag') {\n      inner = <AutosuggestHashtag tag={suggestion} />;\n      key   = suggestion.name;\n    } else if (suggestion.type === 'account') {\n      inner = <AutosuggestAccountContainer id={suggestion.id} />;\n      key   = suggestion.id;\n    }\n\n    return (\n      <div role='button' tabIndex='0' key={key} data-index={i} className={classNames('autosuggest-textarea__suggestions__item', { selected: i === selectedSuggestion })} onMouseDown={this.onSuggestionClick}>\n        {inner}\n      </div>\n    );\n  };\n\n  render () {\n    const { value, suggestions, disabled, placeholder, onKeyUp, autoFocus, className, id, maxLength, lang, spellCheck } = this.props;\n    const { suggestionsHidden } = this.state;\n\n    return (\n      <div className='autosuggest-input'>\n        <label>\n          <span style={{ display: 'none' }}>{placeholder}</span>\n\n          <input\n            type='text'\n            ref={this.setInput}\n            disabled={disabled}\n            placeholder={placeholder}\n            autoFocus={autoFocus}\n            value={value}\n            onChange={this.onChange}\n            onKeyDown={this.onKeyDown}\n            onKeyUp={onKeyUp}\n            onFocus={this.onFocus}\n            onBlur={this.onBlur}\n            dir='auto'\n            aria-autocomplete='list'\n            id={id}\n            className={className}\n            maxLength={maxLength}\n            lang={lang}\n            spellCheck={spellCheck}\n          />\n        </label>\n\n        <div className={`autosuggest-textarea__suggestions ${suggestionsHidden || suggestions.isEmpty() ? '' : 'autosuggest-textarea__suggestions--visible'}`}>\n          {suggestions.map(this.renderSuggestion)}\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport Icon from 'flavours/glitch/components/icon';\nimport AutosuggestInput from 'flavours/glitch/components/autosuggest_input';\nimport classNames from 'classnames';\nimport { pollLimits } from 'flavours/glitch/initial_state';\n\nconst messages = defineMessages({\n  option_placeholder: { id: 'compose_form.poll.option_placeholder', defaultMessage: 'Choice {number}' },\n  add_option: { id: 'compose_form.poll.add_option', defaultMessage: 'Add a choice' },\n  remove_option: { id: 'compose_form.poll.remove_option', defaultMessage: 'Remove this choice' },\n  poll_duration: { id: 'compose_form.poll.duration', defaultMessage: 'Poll duration' },\n  single_choice: { id: 'compose_form.poll.single_choice', defaultMessage: 'Allow one choice' },\n  multiple_choices: { id: 'compose_form.poll.multiple_choices', defaultMessage: 'Allow multiple choices' },\n  minutes: { id: 'intervals.full.minutes', defaultMessage: '{number, plural, one {# minute} other {# minutes}}' },\n  hours: { id: 'intervals.full.hours', defaultMessage: '{number, plural, one {# hour} other {# hours}}' },\n  days: { id: 'intervals.full.days', defaultMessage: '{number, plural, one {# day} other {# days}}' },\n});\n\n@injectIntl\nclass Option extends React.PureComponent {\n\n  static propTypes = {\n    title: PropTypes.string.isRequired,\n    lang: PropTypes.string,\n    index: PropTypes.number.isRequired,\n    isPollMultiple: PropTypes.bool,\n    autoFocus: PropTypes.bool,\n    onChange: PropTypes.func.isRequired,\n    onRemove: PropTypes.func.isRequired,\n    suggestions: ImmutablePropTypes.list,\n    onClearSuggestions: PropTypes.func.isRequired,\n    onFetchSuggestions: PropTypes.func.isRequired,\n    onSuggestionSelected: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  handleOptionTitleChange = e => {\n    this.props.onChange(this.props.index, e.target.value);\n  };\n\n  handleOptionRemove = () => {\n    this.props.onRemove(this.props.index);\n  };\n\n  onSuggestionsClearRequested = () => {\n    this.props.onClearSuggestions();\n  };\n\n  onSuggestionsFetchRequested = (token) => {\n    this.props.onFetchSuggestions(token);\n  };\n\n  onSuggestionSelected = (tokenStart, token, value) => {\n    this.props.onSuggestionSelected(tokenStart, token, value, ['poll', 'options', this.props.index]);\n  };\n\n  render () {\n    const { isPollMultiple, title, lang, index, autoFocus, intl } = this.props;\n\n    return (\n      <li>\n        <label className='poll__option editable'>\n          <span className={classNames('poll__input', { checkbox: isPollMultiple })} />\n\n          <AutosuggestInput\n            placeholder={intl.formatMessage(messages.option_placeholder, { number: index + 1 })}\n            maxLength={pollLimits.max_option_chars}\n            value={title}\n            lang={lang}\n            spellCheck\n            onChange={this.handleOptionTitleChange}\n            suggestions={this.props.suggestions}\n            onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n            onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n            onSuggestionSelected={this.onSuggestionSelected}\n            searchTokens={[':']}\n            autoFocus={autoFocus}\n          />\n        </label>\n\n        <div className='poll__cancel'>\n          <IconButton disabled={index <= 1} title={intl.formatMessage(messages.remove_option)} icon='times' onClick={this.handleOptionRemove} />\n        </div>\n      </li>\n    );\n  }\n\n}\n\nexport default\n@injectIntl\nclass PollForm extends ImmutablePureComponent {\n\n  static propTypes = {\n    options: ImmutablePropTypes.list,\n    lang: PropTypes.string,\n    expiresIn: PropTypes.number,\n    isMultiple: PropTypes.bool,\n    onChangeOption: PropTypes.func.isRequired,\n    onAddOption: PropTypes.func.isRequired,\n    onRemoveOption: PropTypes.func.isRequired,\n    onChangeSettings: PropTypes.func.isRequired,\n    suggestions: ImmutablePropTypes.list,\n    onClearSuggestions: PropTypes.func.isRequired,\n    onFetchSuggestions: PropTypes.func.isRequired,\n    onSuggestionSelected: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  handleAddOption = () => {\n    this.props.onAddOption('');\n  };\n\n  handleSelectDuration = e => {\n    this.props.onChangeSettings(e.target.value, this.props.isMultiple);\n  };\n\n  handleSelectMultiple = e => {\n    this.props.onChangeSettings(this.props.expiresIn, e.target.value === 'true');\n  };\n\n  render () {\n    const { options, lang, expiresIn, isMultiple, onChangeOption, onRemoveOption, intl, ...other } = this.props;\n\n    if (!options) {\n      return null;\n    }\n\n    const autoFocusIndex = options.indexOf('');\n\n    return (\n      <div className='compose-form__poll-wrapper'>\n        <ul>\n          {options.map((title, i) => <Option title={title} lang={lang} key={i} index={i} onChange={onChangeOption} onRemove={onRemoveOption} isPollMultiple={isMultiple} autoFocus={i === autoFocusIndex} {...other} />)}\n          {options.size < pollLimits.max_options && (\n            <label className='poll__text editable'>\n              <span className={classNames('poll__input')} style={{ opacity: 0 }} />\n              <button className='button button-secondary' onClick={this.handleAddOption}><Icon id='plus' /> <FormattedMessage {...messages.add_option} /></button>\n            </label>\n          )}\n        </ul>\n\n        <div className='poll__footer'>\n          <select value={isMultiple ? 'true' : 'false'} onChange={this.handleSelectMultiple}>\n            <option value='false'>{intl.formatMessage(messages.single_choice)}</option>\n            <option value='true'>{intl.formatMessage(messages.multiple_choices)}</option>\n          </select>\n\n          {/* eslint-disable-next-line jsx-a11y/no-onchange */}\n          <select value={expiresIn} onChange={this.handleSelectDuration}>\n            <option value={300}>{intl.formatMessage(messages.minutes, { number: 5 })}</option>\n            <option value={1800}>{intl.formatMessage(messages.minutes, { number: 30 })}</option>\n            <option value={3600}>{intl.formatMessage(messages.hours, { number: 1 })}</option>\n            <option value={21600}>{intl.formatMessage(messages.hours, { number: 6 })}</option>\n            <option value={43200}>{intl.formatMessage(messages.hours, { number: 12 })}</option>\n            <option value={86400}>{intl.formatMessage(messages.days, { number: 1 })}</option>\n            <option value={259200}>{intl.formatMessage(messages.days, { number: 3 })}</option>\n            <option value={604800}>{intl.formatMessage(messages.days, { number: 7 })}</option>\n          </select>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport PollForm from '../components/poll_form';\nimport {\n  addPollOption,\n  removePollOption,\n  changePollOption,\n  changePollSettings,\n  clearComposeSuggestions,\n  fetchComposeSuggestions,\n  selectComposeSuggestion,\n} from 'flavours/glitch/actions/compose';\n\nconst mapStateToProps = state => ({\n  suggestions: state.getIn(['compose', 'suggestions']),\n  options: state.getIn(['compose', 'poll', 'options']),\n  lang: state.getIn(['compose', 'language']),\n  expiresIn: state.getIn(['compose', 'poll', 'expires_in']),\n  isMultiple: state.getIn(['compose', 'poll', 'multiple']),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onAddOption(title) {\n    dispatch(addPollOption(title));\n  },\n\n  onRemoveOption(index) {\n    dispatch(removePollOption(index));\n  },\n\n  onChangeOption(index, title) {\n    dispatch(changePollOption(index, title));\n  },\n\n  onChangeSettings(expiresIn, isMultiple) {\n    dispatch(changePollSettings(expiresIn, isMultiple));\n  },\n\n  onClearSuggestions () {\n    dispatch(clearComposeSuggestions());\n  },\n\n  onFetchSuggestions (token) {\n    dispatch(fetchComposeSuggestions(token));\n  },\n\n  onSuggestionSelected (position, token, accountId, path) {\n    dispatch(selectComposeSuggestion(position, token, accountId, path));\n  },\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PollForm);\n","import { connect } from 'react-redux';\nimport UploadProgress from '../components/upload_progress';\n\nconst mapStateToProps = state => ({\n  active: state.getIn(['compose', 'is_uploading']),\n  progress: state.getIn(['compose', 'progress']),\n  isProcessing: state.getIn(['compose', 'is_processing']),\n});\n\nexport default connect(mapStateToProps)(UploadProgress);\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport Motion from '../../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { FormattedMessage } from 'react-intl';\nimport Icon from 'flavours/glitch/components/icon';\nimport { isUserTouching } from 'flavours/glitch/is_mobile';\n\nexport default class Upload extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    media: ImmutablePropTypes.map.isRequired,\n    onUndo: PropTypes.func.isRequired,\n    onOpenFocalPoint: PropTypes.func.isRequired,\n  };\n\n  handleUndoClick = e => {\n    e.stopPropagation();\n    this.props.onUndo(this.props.media.get('id'));\n  };\n\n  handleFocalPointClick = e => {\n    e.stopPropagation();\n    this.props.onOpenFocalPoint(this.props.media.get('id'));\n  };\n\n  render () {\n    const { media } = this.props;\n\n    if (!media) {\n      return null;\n    }\n\n    const focusX = media.getIn(['meta', 'focus', 'x']);\n    const focusY = media.getIn(['meta', 'focus', 'y']);\n    const x = ((focusX /  2) + .5) * 100;\n    const y = ((focusY / -2) + .5) * 100;\n\n    return (\n      <div className='compose-form__upload' tabIndex='0' role='button'>\n        <Motion defaultStyle={{ scale: 0.8 }} style={{ scale: spring(1, { stiffness: 180, damping: 12 }) }}>\n          {({ scale }) => (\n            <div className='compose-form__upload-thumbnail' style={{ transform: `scale(${scale})`, backgroundImage: `url(${media.get('preview_url')})`, backgroundPosition: `${x}% ${y}%` }}>\n              <div className='compose-form__upload__actions'>\n                <button type='button' className='icon-button' onClick={this.handleUndoClick}><Icon id='times' /> <FormattedMessage id='upload_form.undo' defaultMessage='Delete' /></button>\n                <button type='button' className='icon-button' onClick={this.handleFocalPointClick}><Icon id='pencil' /> <FormattedMessage id='upload_form.edit' defaultMessage='Edit' /></button>\n              </div>\n\n              {(media.get('description') || '').length === 0 && (\n                <div className='compose-form__upload__warning'>\n                  <button type='button' className='icon-button' onClick={this.handleFocalPointClick}><Icon id='info-circle' /> <FormattedMessage id='upload_form.description_missing' defaultMessage='No description added' /></button>\n                </div>\n              )}\n            </div>\n          )}\n        </Motion>\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport Upload from '../components/upload';\nimport { undoUploadCompose, initMediaEditModal, submitCompose } from 'flavours/glitch/actions/compose';\n\nconst mapStateToProps = (state, { id }) => ({\n  media: state.getIn(['compose', 'media_attachments']).find(item => item.get('id') === id),\n});\n\nconst mapDispatchToProps = dispatch => ({\n\n  onUndo: id => {\n    dispatch(undoUploadCompose(id));\n  },\n\n  onOpenFocalPoint: id => {\n    dispatch(initMediaEditModal(id));\n  },\n\n  onSubmit (router) {\n    dispatch(submitCompose(router));\n  },\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Upload);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { changeComposeSensitivity } from 'flavours/glitch/actions/compose';\nimport { injectIntl, defineMessages, FormattedMessage } from 'react-intl';\n\nconst messages = defineMessages({\n  marked: {\n    id: 'compose_form.sensitive.marked',\n    defaultMessage: '{count, plural, one {Media is marked as sensitive} other {Media is marked as sensitive}}',\n  },\n  unmarked: {\n    id: 'compose_form.sensitive.unmarked',\n    defaultMessage: '{count, plural, one {Media is not marked as sensitive} other {Media is not marked as sensitive}}',\n  },\n});\n\nconst mapStateToProps = state => {\n  const spoilersAlwaysOn = state.getIn(['local_settings', 'always_show_spoilers_field']);\n  const spoilerText = state.getIn(['compose', 'spoiler_text']);\n  return {\n    active: state.getIn(['compose', 'sensitive']) || (spoilersAlwaysOn && spoilerText && spoilerText.length > 0),\n    disabled: state.getIn(['compose', 'spoiler']),\n    mediaCount: state.getIn(['compose', 'media_attachments']).size,\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n\n  onClick () {\n    dispatch(changeComposeSensitivity());\n  },\n\n});\n\nclass SensitiveButton extends React.PureComponent {\n\n  static propTypes = {\n    active: PropTypes.bool,\n    disabled: PropTypes.bool,\n    mediaCount: PropTypes.number,\n    onClick: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { active, disabled, mediaCount, onClick, intl } = this.props;\n\n    return (\n      <div className='compose-form__sensitive-button'>\n        <label className={classNames('icon-button', { active })} title={intl.formatMessage(active ? messages.marked : messages.unmarked, { count: mediaCount })}>\n          <input\n            name='mark-sensitive'\n            type='checkbox'\n            checked={active}\n            onChange={onClick}\n            disabled={disabled}\n          />\n\n          <span className={classNames('checkbox', { active })} />\n\n          <FormattedMessage\n            id='compose_form.sensitive.hide'\n            defaultMessage='{count, plural, one {Mark media as sensitive} other {Mark media as sensitive}}'\n            values={{ count: mediaCount }}\n          />\n        </label>\n      </div>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(injectIntl(SensitiveButton));\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport UploadProgressContainer from '../containers/upload_progress_container';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport UploadContainer from '../containers/upload_container';\nimport SensitiveButtonContainer from '../containers/sensitive_button_container';\n\nexport default class UploadForm extends ImmutablePureComponent {\n\n  static propTypes = {\n    mediaIds: ImmutablePropTypes.list.isRequired,\n  };\n\n  render () {\n    const { mediaIds } = this.props;\n\n    return (\n      <div className='compose-form__upload-wrapper'>\n        <UploadProgressContainer />\n\n        {mediaIds.size > 0 && (\n          <div className='compose-form__uploads-wrapper'>\n            {mediaIds.map(id => (\n              <UploadContainer id={id} key={id} />\n            ))}\n          </div>\n        )}\n\n        {!mediaIds.isEmpty() && <SensitiveButtonContainer />}\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport UploadForm from '../components/upload_form';\n\nconst mapStateToProps = state => ({\n  mediaIds: state.getIn(['compose', 'media_attachments']).map(item => item.get('id')),\n});\n\nexport default connect(mapStateToProps)(UploadForm);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Motion from '../../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\n\nexport default class Warning extends React.PureComponent {\n\n  static propTypes = {\n    message: PropTypes.node.isRequired,\n  };\n\n  render () {\n    const { message } = this.props;\n\n    return (\n      <Motion defaultStyle={{ opacity: 0, scaleX: 0.85, scaleY: 0.75 }} style={{ opacity: spring(1, { damping: 35, stiffness: 400 }), scaleX: spring(1, { damping: 35, stiffness: 400 }), scaleY: spring(1, { damping: 35, stiffness: 400 }) }}>\n        {({ opacity, scaleX, scaleY }) => (\n          <div className='compose-form__warning' style={{ opacity: opacity, transform: `scale(${scaleX}, ${scaleY})` }}>\n            {message}\n          </div>\n        )}\n      </Motion>\n    );\n  }\n\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport Warning from '../components/warning';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport { me } from 'flavours/glitch/initial_state';\nimport { profileLink, termsLink } from 'flavours/glitch/utils/backend_links';\n\nconst buildHashtagRE = () => {\n  try {\n    const HASHTAG_SEPARATORS = '_\\\\u00b7\\\\u200c';\n    const ALPHA = '\\\\p{L}\\\\p{M}';\n    const WORD = '\\\\p{L}\\\\p{M}\\\\p{N}\\\\p{Pc}';\n    return new RegExp(\n      '(?:^|[^\\\\/\\\\)\\\\w])#((' +\n      '[' + WORD + '_]' +\n      '[' + WORD + HASHTAG_SEPARATORS + ']*' +\n      '[' + ALPHA + HASHTAG_SEPARATORS + ']' +\n      '[' + WORD + HASHTAG_SEPARATORS +']*' +\n      '[' + WORD + '_]' +\n      ')|(' +\n      '[' + WORD + '_]*' +\n      '[' + ALPHA + ']' +\n      '[' + WORD + '_]*' +\n      '))', 'iu',\n    );\n  } catch {\n    return /(?:^|[^/)\\w])#(\\w*[a-zA-Z]\\w*)/i;\n  }\n};\n\nconst APPROX_HASHTAG_RE = buildHashtagRE();\n\nconst mapStateToProps = state => ({\n  needsLockWarning: state.getIn(['compose', 'privacy']) === 'private' && !state.getIn(['accounts', me, 'locked']),\n  hashtagWarning: state.getIn(['compose', 'privacy']) !== 'public' && APPROX_HASHTAG_RE.test(state.getIn(['compose', 'text'])),\n  directMessageWarning: state.getIn(['compose', 'privacy']) === 'direct',\n});\n\nconst WarningWrapper = ({ needsLockWarning, hashtagWarning, directMessageWarning }) => {\n  if (needsLockWarning) {\n    return <Warning message={<FormattedMessage id='compose_form.lock_disclaimer' defaultMessage='Your account is not {locked}. Anyone can follow you to view your follower-only posts.' values={{ locked: <a href={profileLink}><FormattedMessage id='compose_form.lock_disclaimer.lock' defaultMessage='locked' /></a> }} />} />;\n  }\n\n  if (hashtagWarning) {\n    return <Warning message={<FormattedMessage id='compose_form.hashtag_warning' defaultMessage=\"This post won't be listed under any hashtag as it is unlisted. Only public posts can be searched by hashtag.\" />} />;\n  }\n\n  if (directMessageWarning) {\n    const message = (\n      <span>\n        <FormattedMessage id='compose_form.encryption_warning' defaultMessage='Posts on Mastodon are not end-to-end encrypted. Do not share any dangerous information over Mastodon.' /> {!!termsLink && <a href={termsLink} target='_blank'><FormattedMessage id='compose_form.direct_message_warning_learn_more' defaultMessage='Learn more' /></a>}\n      </span>\n    );\n\n    return <Warning message={message} />;\n  }\n\n  return null;\n};\n\nWarningWrapper.propTypes = {\n  needsLockWarning: PropTypes.bool,\n  hashtagWarning: PropTypes.bool,\n  directMessageWarning: PropTypes.bool,\n};\n\nexport default connect(mapStateToProps)(WarningWrapper);\n","import regexSupplant from 'twitter-text/dist/lib/regexSupplant';\nimport validUrlPrecedingChars from 'twitter-text/dist/regexp/validUrlPrecedingChars';\nimport validDomain from 'twitter-text/dist/regexp/validDomain';\nimport validPortNumber from 'twitter-text/dist/regexp/validPortNumber';\nimport validUrlPath from 'twitter-text/dist/regexp/validUrlPath';\nimport validUrlQueryChars from 'twitter-text/dist/regexp/validUrlQueryChars';\nimport validUrlQueryEndingChars from 'twitter-text/dist/regexp/validUrlQueryEndingChars';\n\n// The difference with twitter-text's extractURL is that the protocol isn't\n// optional.\n\nexport const urlRegex = regexSupplant(\n  '('                                                          + // $1 URL\n    '(#{validUrlPrecedingChars})'                              + // $2\n    '(https?:\\\\/\\\\/)'                                          + // $3 Protocol\n    '(#{validDomain})'                                         + // $4 Domain(s)\n    '(?::(#{validPortNumber}))?'                               + // $5 Port number (optional)\n    '(\\\\/#{validUrlPath}*)?'                                   + // $6 URL Path\n    '(\\\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?'  + // $7 Query String\n  ')',\n  {\n    validUrlPrecedingChars,\n    validDomain,\n    validPortNumber,\n    validUrlPath,\n    validUrlQueryChars,\n    validUrlQueryEndingChars,\n  },\n  'gi',\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst iconStyle = {\n  height: null,\n  lineHeight: '27px',\n  width: `${18 * 1.28571429}px`,\n};\n\nexport default class TextIconButton extends React.PureComponent {\n\n  static propTypes = {\n    label: PropTypes.string.isRequired,\n    title: PropTypes.string,\n    active: PropTypes.bool,\n    onClick: PropTypes.func.isRequired,\n    ariaControls: PropTypes.string,\n  };\n\n  render () {\n    const { label, title, active, ariaControls } = this.props;\n\n    return (\n      <button\n        title={title}\n        aria-label={title}\n        className={`text-icon-button ${active ? 'active' : ''}`}\n        aria-expanded={active}\n        onClick={this.props.onClick}\n        aria-controls={ariaControls}\n        style={iconStyle}\n      >\n        {label}\n      </button>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport { isUserTouching } from 'flavours/glitch/is_mobile';\nimport { openModal, closeModal } from 'flavours/glitch/actions/modal';\nimport Dropdown from '../components/dropdown';\n\nconst mapDispatchToProps = dispatch => ({\n  isUserTouching,\n  onModalOpen: props => dispatch(openModal('ACTIONS', props)),\n  onModalClose: () => dispatch(closeModal()),\n});\n\nexport default connect(null, mapDispatchToProps)(Dropdown);\n","import { connect } from 'react-redux';\nimport PrivacyDropdown from '../components/privacy_dropdown';\nimport { changeComposeVisibility } from 'flavours/glitch/actions/compose';\nimport { openModal, closeModal } from 'flavours/glitch/actions/modal';\nimport { isUserTouching } from 'flavours/glitch/is_mobile';\n\nconst mapStateToProps = state => ({\n  value: state.getIn(['compose', 'privacy']),\n});\n\nconst mapDispatchToProps = dispatch => ({\n\n  onChange (value) {\n    dispatch(changeComposeVisibility(value));\n  },\n\n  isUserTouching,\n  onModalOpen: props => dispatch(openModal('ACTIONS', props)),\n  onModalClose: () => dispatch(closeModal()),\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PrivacyDropdown);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, defineMessages } from 'react-intl';\nimport TextIconButton from './text_icon_button';\nimport Overlay from 'react-overlays/Overlay';\nimport { supportsPassiveEvents } from 'detect-passive-events';\nimport classNames from 'classnames';\nimport { languages as preloadedLanguages } from 'flavours/glitch/initial_state';\nimport { loupeIcon, deleteIcon } from 'flavours/glitch/utils/icons';\nimport fuzzysort from 'fuzzysort';\n\nconst messages = defineMessages({\n  changeLanguage: { id: 'compose.language.change', defaultMessage: 'Change language' },\n  search: { id: 'compose.language.search', defaultMessage: 'Search languages...' },\n  clear: { id: 'emoji_button.clear', defaultMessage: 'Clear' },\n});\n\nconst listenerOptions = supportsPassiveEvents ? { passive: true } : false;\n\nclass LanguageDropdownMenu extends React.PureComponent {\n\n  static propTypes = {\n    value: PropTypes.string.isRequired,\n    frequentlyUsedLanguages: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onClose: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n    languages: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),\n    intl: PropTypes.object,\n  };\n\n  static defaultProps = {\n    languages: preloadedLanguages,\n  };\n\n  state = {\n    searchValue: '',\n  };\n\n  handleDocumentClick = e => {\n    if (this.node && !this.node.contains(e.target)) {\n      this.props.onClose();\n    }\n  };\n\n  componentDidMount () {\n    document.addEventListener('click', this.handleDocumentClick, false);\n    document.addEventListener('touchend', this.handleDocumentClick, listenerOptions);\n\n    // Because of https://github.com/react-bootstrap/react-bootstrap/issues/2614 we need\n    // to wait for a frame before focusing\n    requestAnimationFrame(() => {\n      if (this.node) {\n        const element = this.node.querySelector('input[type=\"search\"]');\n        if (element) element.focus();\n      }\n    });\n  }\n\n  componentWillUnmount () {\n    document.removeEventListener('click', this.handleDocumentClick, false);\n    document.removeEventListener('touchend', this.handleDocumentClick, listenerOptions);\n  }\n\n  setRef = c => {\n    this.node = c;\n  };\n\n  setListRef = c => {\n    this.listNode = c;\n  };\n\n  handleSearchChange = ({ target }) => {\n    this.setState({ searchValue: target.value });\n  };\n\n  search () {\n    const { languages, value, frequentlyUsedLanguages } = this.props;\n    const { searchValue } = this.state;\n\n    if (searchValue === '') {\n      return [...languages].sort((a, b) => {\n        // Push current selection to the top of the list\n\n        if (a[0] === value) {\n          return -1;\n        } else if (b[0] === value) {\n          return 1;\n        } else {\n          // Sort according to frequently used languages\n\n          const indexOfA = frequentlyUsedLanguages.indexOf(a[0]);\n          const indexOfB = frequentlyUsedLanguages.indexOf(b[0]);\n\n          return ((indexOfA > -1 ? indexOfA : Infinity) - (indexOfB > -1 ? indexOfB : Infinity));\n        }\n      });\n    }\n\n    return fuzzysort.go(searchValue, languages, {\n      keys: ['0', '1', '2'],\n      limit: 5,\n      threshold: -10000,\n    }).map(result => result.obj);\n  }\n\n  frequentlyUsed () {\n    const { languages, value } = this.props;\n    const current = languages.find(lang => lang[0] === value);\n    const results = [];\n\n    if (current) {\n      results.push(current);\n    }\n\n    return results;\n  }\n\n  handleClick = e => {\n    const value = e.currentTarget.getAttribute('data-index');\n\n    e.preventDefault();\n\n    this.props.onClose();\n    this.props.onChange(value);\n  };\n\n  handleKeyDown = e => {\n    const { onClose } = this.props;\n    const index = Array.from(this.listNode.childNodes).findIndex(node => node === e.currentTarget);\n\n    let element = null;\n\n    switch(e.key) {\n    case 'Escape':\n      onClose();\n      break;\n    case 'Enter':\n      this.handleClick(e);\n      break;\n    case 'ArrowDown':\n      element = this.listNode.childNodes[index + 1] || this.listNode.firstChild;\n      break;\n    case 'ArrowUp':\n      element = this.listNode.childNodes[index - 1] || this.listNode.lastChild;\n      break;\n    case 'Tab':\n      if (e.shiftKey) {\n        element = this.listNode.childNodes[index - 1] || this.listNode.lastChild;\n      } else {\n        element = this.listNode.childNodes[index + 1] || this.listNode.firstChild;\n      }\n      break;\n    case 'Home':\n      element = this.listNode.firstChild;\n      break;\n    case 'End':\n      element = this.listNode.lastChild;\n      break;\n    }\n\n    if (element) {\n      element.focus();\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  handleSearchKeyDown = e => {\n    const { onChange, onClose } = this.props;\n    const { searchValue } = this.state;\n\n    let element = null;\n\n    switch(e.key) {\n    case 'Tab':\n    case 'ArrowDown':\n      element = this.listNode.firstChild;\n\n      if (element) {\n        element.focus();\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      break;\n    case 'Enter':\n      element = this.listNode.firstChild;\n\n      if (element) {\n        onChange(element.getAttribute('data-index'));\n        onClose();\n      }\n      break;\n    case 'Escape':\n      if (searchValue !== '') {\n        e.preventDefault();\n        this.handleClear();\n      }\n\n      break;\n    }\n  };\n\n  handleClear = () => {\n    this.setState({ searchValue: '' });\n  };\n\n  renderItem = lang => {\n    const { value } = this.props;\n\n    return (\n      <div key={lang[0]} role='option' tabIndex='0' data-index={lang[0]} className={classNames('language-dropdown__dropdown__results__item', { active: lang[0] === value })} aria-selected={lang[0] === value} onClick={this.handleClick} onKeyDown={this.handleKeyDown}>\n        <span className='language-dropdown__dropdown__results__item__native-name' lang={lang[0]}>{lang[2]}</span> <span className='language-dropdown__dropdown__results__item__common-name'>({lang[1]})</span>\n      </div>\n    );\n  };\n\n  render () {\n    const { intl } = this.props;\n    const { searchValue } = this.state;\n    const isSearching = searchValue !== '';\n    const results = this.search();\n\n    return (\n      <div ref={this.setRef}>\n        <div className='emoji-mart-search'>\n          <input type='search' value={searchValue} onChange={this.handleSearchChange} onKeyDown={this.handleSearchKeyDown} placeholder={intl.formatMessage(messages.search)} />\n          <button type='button' className='emoji-mart-search-icon' disabled={!isSearching} aria-label={intl.formatMessage(messages.clear)} onClick={this.handleClear}>{!isSearching ? loupeIcon : deleteIcon}</button>\n        </div>\n\n        <div className='language-dropdown__dropdown__results emoji-mart-scroll' role='listbox' ref={this.setListRef}>\n          {results.map(this.renderItem)}\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default @injectIntl\nclass LanguageDropdown extends React.PureComponent {\n\n  static propTypes = {\n    value: PropTypes.string,\n    frequentlyUsedLanguages: PropTypes.arrayOf(PropTypes.string),\n    intl: PropTypes.object.isRequired,\n    onChange: PropTypes.func,\n    onClose: PropTypes.func,\n  };\n\n  state = {\n    open: false,\n    placement: 'bottom',\n  };\n\n  handleToggle = () => {\n    if (this.state.open && this.activeElement) {\n      this.activeElement.focus({ preventScroll: true });\n    }\n\n    this.setState({ open: !this.state.open });\n  };\n\n  handleClose = () => {\n    const { value, onClose } = this.props;\n\n    if (this.state.open && this.activeElement) {\n      this.activeElement.focus({ preventScroll: true });\n    }\n\n    this.setState({ open: false });\n    onClose(value);\n  };\n\n  handleChange = value => {\n    const { onChange } = this.props;\n    onChange(value);\n  };\n\n  setTargetRef = c => {\n    this.target = c;\n  };\n\n  findTarget = () => {\n    return this.target;\n  };\n\n  handleOverlayEnter = (state) => {\n    this.setState({ placement: state.placement });\n  };\n\n  render () {\n    const { value, intl, frequentlyUsedLanguages } = this.props;\n    const { open, placement } = this.state;\n\n    return (\n      <div className={classNames('privacy-dropdown', placement, { active: open })}>\n        <div className='privacy-dropdown__value' ref={this.setTargetRef} >\n          <TextIconButton\n            className='privacy-dropdown__value-icon'\n            label={value && value.toUpperCase()}\n            title={intl.formatMessage(messages.changeLanguage)}\n            active={open}\n            onClick={this.handleToggle}\n          />\n        </div>\n\n        <Overlay show={open} placement={'bottom'} flip target={this.findTarget} popperConfig={{ strategy: 'fixed', onFirstUpdate: this.handleOverlayEnter }}>\n          {({ props, placement }) => (\n            <div {...props}>\n              <div className={`dropdown-animation language-dropdown__dropdown ${placement}`} >\n                <LanguageDropdownMenu\n                  value={value}\n                  frequentlyUsedLanguages={frequentlyUsedLanguages}\n                  onClose={this.handleClose}\n                  onChange={this.handleChange}\n                  intl={intl}\n                />\n              </div>\n            </div>\n          )}\n        </Overlay>\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport LanguageDropdown from '../components/language_dropdown';\nimport { changeComposeLanguage } from 'flavours/glitch/actions/compose';\nimport { useLanguage } from 'flavours/glitch/actions/languages';\nimport { createSelector } from 'reselect';\nimport { Map as ImmutableMap } from 'immutable';\n\nconst getFrequentlyUsedLanguages = createSelector([\n  state => state.getIn(['settings', 'frequentlyUsedLanguages'], ImmutableMap()),\n], languageCounters => (\n  languageCounters.keySeq()\n    .sort((a, b) => languageCounters.get(a) - languageCounters.get(b))\n    .reverse()\n    .toArray()\n));\n\nconst mapStateToProps = state => ({\n  frequentlyUsedLanguages: getFrequentlyUsedLanguages(state),\n  value: state.getIn(['compose', 'language']),\n});\n\nconst mapDispatchToProps = dispatch => ({\n\n  onChange (value) {\n    dispatch(changeComposeLanguage(value));\n  },\n\n  onClose (value) {\n    dispatch(useLanguage(value));\n  },\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LanguageDropdown);\n","//  Package imports.\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport spring from 'react-motion/lib/spring';\nimport Toggle from 'react-toggle';\nimport { connect } from 'react-redux';\n\n//  Components.\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport TextIconButton from './text_icon_button';\nimport DropdownContainer from '../containers/dropdown_container';\nimport PrivacyDropdownContainer from '../containers/privacy_dropdown_container';\nimport LanguageDropdown from '../containers/language_dropdown_container';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\n//  Utils.\nimport Motion from '../../ui/util/optional_motion';\nimport { pollLimits } from 'flavours/glitch/initial_state';\n\n//  Messages.\nconst messages = defineMessages({\n  advanced_options_icon_title: {\n    defaultMessage: 'Advanced options',\n    id: 'advanced_options.icon_title',\n  },\n  attach: {\n    defaultMessage: 'Attach...',\n    id: 'compose.attach',\n  },\n  content_type: {\n    defaultMessage: 'Content type',\n    id: 'content-type.change',\n  },\n  doodle: {\n    defaultMessage: 'Draw something',\n    id: 'compose.attach.doodle',\n  },\n  html: {\n    defaultMessage: 'HTML',\n    id: 'compose.content-type.html',\n  },\n  local_only_long: {\n    defaultMessage: 'Do not post to other instances',\n    id: 'advanced_options.local-only.long',\n  },\n  local_only_short: {\n    defaultMessage: 'Local-only',\n    id: 'advanced_options.local-only.short',\n  },\n  markdown: {\n    defaultMessage: 'Markdown',\n    id: 'compose.content-type.markdown',\n  },\n  plain: {\n    defaultMessage: 'Plain text',\n    id: 'compose.content-type.plain',\n  },\n  spoiler: {\n    defaultMessage: 'Hide text behind warning',\n    id: 'compose_form.spoiler',\n  },\n  threaded_mode_long: {\n    defaultMessage: 'Automatically opens a reply on posting',\n    id: 'advanced_options.threaded_mode.long',\n  },\n  threaded_mode_short: {\n    defaultMessage: 'Threaded mode',\n    id: 'advanced_options.threaded_mode.short',\n  },\n  upload: {\n    defaultMessage: 'Upload a file',\n    id: 'compose.attach.upload',\n  },\n  add_poll: {\n    defaultMessage: 'Add a poll',\n    id: 'poll_button.add_poll',\n  },\n  remove_poll: {\n    defaultMessage: 'Remove poll',\n    id: 'poll_button.remove_poll',\n  },\n});\n\n@connect((state, { name }) => ({ checked: state.getIn(['compose', 'advanced_options', name]) }))\nclass ToggleOption extends ImmutablePureComponent {\n\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    checked: PropTypes.bool,\n    onChangeAdvancedOption: PropTypes.func.isRequired,\n  };\n\n  handleChange = () => {\n    this.props.onChangeAdvancedOption(this.props.name);\n  };\n\n  render() {\n    const { meta, text, checked } = this.props;\n\n    return (\n      <React.Fragment>\n        <Toggle checked={checked} onChange={this.handleChange} />\n\n        <div className='privacy-dropdown__option__content'>\n          <strong>{text}</strong>\n          {meta}\n        </div>\n      </React.Fragment>\n    );\n  }\n\n}\n\nexport default @injectIntl\nclass ComposerOptions extends ImmutablePureComponent {\n\n  static propTypes = {\n    acceptContentTypes: PropTypes.string,\n    advancedOptions: ImmutablePropTypes.map,\n    disabled: PropTypes.bool,\n    allowMedia: PropTypes.bool,\n    hasMedia: PropTypes.bool,\n    allowPoll: PropTypes.bool,\n    hasPoll: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n    onChangeAdvancedOption: PropTypes.func,\n    onChangeContentType: PropTypes.func,\n    onTogglePoll: PropTypes.func,\n    onDoodleOpen: PropTypes.func,\n    onToggleSpoiler: PropTypes.func,\n    onUpload: PropTypes.func,\n    contentType: PropTypes.string,\n    resetFileKey: PropTypes.number,\n    spoiler: PropTypes.bool,\n    showContentTypeChoice: PropTypes.bool,\n    isEditing: PropTypes.bool,\n  };\n\n  //  Handles file selection.\n  handleChangeFiles = ({ target: { files } }) => {\n    const { onUpload } = this.props;\n    if (files.length && onUpload) {\n      onUpload(files);\n    }\n  };\n\n  //  Handles attachment clicks.\n  handleClickAttach = (name) => {\n    const { fileElement } = this;\n    const { onDoodleOpen } = this.props;\n\n    //  We switch over the name of the option.\n    switch (name) {\n    case 'upload':\n      if (fileElement) {\n        fileElement.click();\n      }\n      return;\n    case 'doodle':\n      if (onDoodleOpen) {\n        onDoodleOpen();\n      }\n      return;\n    }\n  };\n\n  //  Handles a ref to the file input.\n  handleRefFileElement = (fileElement) => {\n    this.fileElement = fileElement;\n  };\n\n  renderToggleItemContents = (item) => {\n    const { onChangeAdvancedOption } = this.props;\n    const { name, meta, text } = item;\n\n    return <ToggleOption name={name} text={text} meta={meta} onChangeAdvancedOption={onChangeAdvancedOption} />;\n  };\n\n  //  Rendering.\n  render () {\n    const {\n      acceptContentTypes,\n      advancedOptions,\n      contentType,\n      disabled,\n      allowMedia,\n      hasMedia,\n      allowPoll,\n      hasPoll,\n      onChangeAdvancedOption,\n      onChangeContentType,\n      onTogglePoll,\n      onToggleSpoiler,\n      resetFileKey,\n      spoiler,\n      showContentTypeChoice,\n      isEditing,\n      intl: { formatMessage },\n    } = this.props;\n\n    const contentTypeItems = {\n      plain: {\n        icon: 'file-text',\n        name: 'text/plain',\n        text: formatMessage(messages.plain),\n      },\n      html: {\n        icon: 'code',\n        name: 'text/html',\n        text: formatMessage(messages.html),\n      },\n      markdown: {\n        icon: 'arrow-circle-down',\n        name: 'text/markdown',\n        text: formatMessage(messages.markdown),\n      },\n    };\n\n    //  The result.\n    return (\n      <div className='compose-form__buttons'>\n        <input\n          accept={acceptContentTypes}\n          disabled={disabled || !allowMedia}\n          key={resetFileKey}\n          onChange={this.handleChangeFiles}\n          ref={this.handleRefFileElement}\n          type='file'\n          multiple\n          style={{ display: 'none' }}\n        />\n        <DropdownContainer\n          disabled={disabled || !allowMedia}\n          icon='paperclip'\n          items={[\n            {\n              icon: 'cloud-upload',\n              name: 'upload',\n              text: formatMessage(messages.upload),\n            },\n            {\n              icon: 'paint-brush',\n              name: 'doodle',\n              text: formatMessage(messages.doodle),\n            },\n          ]}\n          onChange={this.handleClickAttach}\n          title={formatMessage(messages.attach)}\n        />\n        {!!pollLimits && (\n          <IconButton\n            active={hasPoll}\n            disabled={disabled || !allowPoll}\n            icon='tasks'\n            inverted\n            onClick={onTogglePoll}\n            size={18}\n            style={{\n              height: null,\n              lineHeight: null,\n            }}\n            title={formatMessage(hasPoll ? messages.remove_poll : messages.add_poll)}\n          />\n        )}\n        <hr />\n        <PrivacyDropdownContainer disabled={disabled || isEditing} />\n        {showContentTypeChoice && (\n          <DropdownContainer\n            disabled={disabled}\n            icon={(contentTypeItems[contentType.split('/')[1]] || {}).icon}\n            items={[\n              contentTypeItems.plain,\n              contentTypeItems.html,\n              contentTypeItems.markdown,\n            ]}\n            onChange={onChangeContentType}\n            title={formatMessage(messages.content_type)}\n            value={contentType}\n          />\n        )}\n        {onToggleSpoiler && (\n          <TextIconButton\n            active={spoiler}\n            ariaControls='glitch.composer.spoiler.input'\n            label='CW'\n            onClick={onToggleSpoiler}\n            title={formatMessage(messages.spoiler)}\n          />\n        )}\n        <LanguageDropdown />\n        <DropdownContainer\n          disabled={disabled || isEditing}\n          icon='ellipsis-h'\n          items={advancedOptions ? [\n            {\n              meta: formatMessage(messages.local_only_long),\n              name: 'do_not_federate',\n              text: formatMessage(messages.local_only_short),\n            },\n            {\n              meta: formatMessage(messages.threaded_mode_long),\n              name: 'threaded_mode',\n              text: formatMessage(messages.threaded_mode_short),\n            },\n          ] : null}\n          onChange={onChangeAdvancedOption}\n          renderItemContents={this.renderToggleItemContents}\n          title={formatMessage(messages.advanced_options_icon_title)}\n          closeOnChange={false}\n        />\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport Options from '../components/options';\nimport {\n  changeComposeAdvancedOption,\n  changeComposeContentType,\n  addPoll,\n  removePoll,\n} from 'flavours/glitch/actions/compose';\nimport { openModal } from 'flavours/glitch/actions/modal';\n\nfunction mapStateToProps (state) {\n  const spoilersAlwaysOn = state.getIn(['local_settings', 'always_show_spoilers_field']);\n  const poll = state.getIn(['compose', 'poll']);\n  const media = state.getIn(['compose', 'media_attachments']);\n  const pending_media = state.getIn(['compose', 'pending_media_attachments']);\n  return {\n    acceptContentTypes: state.getIn(['media_attachments', 'accept_content_types']).toArray().join(','),\n    resetFileKey: state.getIn(['compose', 'resetFileKey']),\n    hasPoll: !!poll,\n    allowMedia: !poll && (media ? media.size + pending_media < 4 && !media.some(item => ['video', 'audio'].includes(item.get('type'))) : pending_media < 4),\n    hasMedia: media && !!media.size,\n    allowPoll: !(media && !!media.size),\n    showContentTypeChoice: state.getIn(['local_settings', 'show_content_type_choice']),\n    contentType: state.getIn(['compose', 'content_type']),\n  };\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n\n  onChangeAdvancedOption(option, value) {\n    dispatch(changeComposeAdvancedOption(option, value));\n  },\n\n  onChangeContentType(value) {\n    dispatch(changeComposeContentType(value));\n  },\n\n  onTogglePoll() {\n    dispatch((_, getState) => {\n      if (getState().getIn(['compose', 'poll'])) {\n        dispatch(removePoll());\n      } else {\n        dispatch(addPoll());\n      }\n    });\n  },\n\n  onDoodleOpen() {\n    dispatch(openModal('DOODLE', { noEsc: true, noClose: true }));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Options);\n","//  Package imports.\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { length } from 'stringz';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\n//  Components.\nimport Button from 'flavours/glitch/components/button';\nimport Icon from 'flavours/glitch/components/icon';\n\n//  Utils.\nimport { maxChars } from 'flavours/glitch/initial_state';\n\n//  Messages.\nconst messages = defineMessages({\n  publish: {\n    defaultMessage: 'Publish',\n    id: 'compose_form.publish',\n  },\n  publishLoud: {\n    defaultMessage: '{publish}!',\n    id: 'compose_form.publish_loud',\n  },\n  saveChanges: { id: 'compose_form.save_changes', defaultMessage: 'Save changes' },\n});\n\nexport default @injectIntl\nclass Publisher extends ImmutablePureComponent {\n\n  static propTypes = {\n    countText: PropTypes.string,\n    disabled: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n    onSecondarySubmit: PropTypes.func,\n    onSubmit: PropTypes.func,\n    privacy: PropTypes.oneOf(['direct', 'private', 'unlisted', 'public']),\n    sideArm: PropTypes.oneOf(['none', 'direct', 'private', 'unlisted', 'public']),\n    isEditing: PropTypes.bool,\n  };\n\n  handleSubmit = () => {\n    this.props.onSubmit();\n  };\n\n  render () {\n    const { countText, disabled, intl, onSecondarySubmit, privacy, sideArm, isEditing } = this.props;\n\n    const diff = maxChars - length(countText || '');\n    const computedClass = classNames('compose-form__publish', {\n      disabled: disabled,\n      over: diff < 0,\n    });\n\n    const privacyIcons = { direct: 'envelope', private: 'lock', public: 'globe', unlisted: 'unlock' };\n\n    let publishText;\n    if (isEditing) {\n      publishText = intl.formatMessage(messages.saveChanges);\n    } else if (privacy === 'private' || privacy === 'direct') {\n      const iconId = privacyIcons[privacy];\n      publishText = (\n        <span>\n          <Icon id={iconId} /> {intl.formatMessage(messages.publish)}\n        </span>\n      );\n    } else {\n      publishText = privacy !== 'unlisted' ? intl.formatMessage(messages.publishLoud, { publish: intl.formatMessage(messages.publish) }) : intl.formatMessage(messages.publish);\n    }\n\n    return (\n      <div className={computedClass}>\n        {sideArm && !isEditing && sideArm !== 'none' ? (\n          <div className='compose-form__publish-button-wrapper'>\n            <Button\n              className='side_arm'\n              disabled={disabled}\n              onClick={onSecondarySubmit}\n              style={{ padding: null }}\n              text={<Icon id={privacyIcons[sideArm]} />}\n              title={`${intl.formatMessage(messages.publish)}: ${intl.formatMessage({ id: `privacy.${sideArm}.short` })}`}\n            />\n          </div>\n        ) : null}\n        <div className='compose-form__publish-button-wrapper'>\n          <Button\n            className='primary'\n            text={publishText}\n            title={`${intl.formatMessage(messages.publish)}: ${intl.formatMessage({ id: `privacy.${privacy}.short` })}`}\n            onClick={this.handleSubmit}\n            disabled={disabled}\n          />\n        </div>\n      </div>\n    );\n  }\n\n}\n","//  Package imports.\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\n//  Components.\nimport Icon from 'flavours/glitch/components/icon';\n\n//  Messages.\nconst messages = defineMessages({\n  localOnly: {\n    defaultMessage: 'This post is local-only',\n    id: 'advanced_options.local-only.tooltip',\n  },\n  threadedMode: {\n    defaultMessage: 'Threaded mode enabled',\n    id: 'advanced_options.threaded_mode.tooltip',\n  },\n});\n\n//  We use an array of tuples here instead of an object because it\n//  preserves order.\nconst iconMap = [\n  ['do_not_federate', 'home', messages.localOnly],\n  ['threaded_mode', 'comments', messages.threadedMode],\n];\n\nexport default @injectIntl\nclass TextareaIcons extends ImmutablePureComponent {\n\n  static propTypes = {\n    advancedOptions: ImmutablePropTypes.map,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { advancedOptions, intl } = this.props;\n    return (\n      <div className='compose-form__textarea-icons'>\n        {advancedOptions ? iconMap.map(\n          ([key, icon, message]) => advancedOptions.get(key) ? (\n            <span\n              className='textarea_icon'\n              key={key}\n              title={intl.formatMessage(message)}\n            >\n              <Icon\n                fixedWidth\n                id={icon}\n              />\n            </span>\n          ) : null,\n        ) : null}\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport ReplyIndicatorContainer from '../containers/reply_indicator_container';\nimport AutosuggestTextarea from '../../../components/autosuggest_textarea';\nimport AutosuggestInput from '../../../components/autosuggest_input';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport EmojiPickerDropdown from '../containers/emoji_picker_dropdown_container';\nimport PollFormContainer from '../containers/poll_form_container';\nimport UploadFormContainer from '../containers/upload_form_container';\nimport WarningContainer from '../containers/warning_container';\nimport { isMobile } from 'flavours/glitch/is_mobile';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { countableText } from '../util/counter';\nimport OptionsContainer from '../containers/options_container';\nimport Publisher from './publisher';\nimport TextareaIcons from './textarea_icons';\nimport { maxChars } from 'flavours/glitch/initial_state';\nimport CharacterCounter from './character_counter';\nimport { length } from 'stringz';\n\nconst messages = defineMessages({\n  placeholder: { id: 'compose_form.placeholder', defaultMessage: 'What is on your mind?' },\n  missingDescriptionMessage: {\n    id: 'confirmations.missing_media_description.message',\n    defaultMessage: 'At least one media attachment is lacking a description. Consider describing all media attachments for the visually impaired before sending your toot.',\n  },\n  missingDescriptionConfirm: {\n    id: 'confirmations.missing_media_description.confirm',\n    defaultMessage: 'Send anyway',\n  },\n  spoiler_placeholder: { id: 'compose_form.spoiler_placeholder', defaultMessage: 'Write your warning here' },\n});\n\nexport default @injectIntl\nclass ComposeForm extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    intl: PropTypes.object.isRequired,\n    text: PropTypes.string,\n    suggestions: ImmutablePropTypes.list,\n    spoiler: PropTypes.bool,\n    privacy: PropTypes.string,\n    spoilerText: PropTypes.string,\n    focusDate: PropTypes.instanceOf(Date),\n    caretPosition: PropTypes.number,\n    preselectDate: PropTypes.instanceOf(Date),\n    isSubmitting: PropTypes.bool,\n    isChangingUpload: PropTypes.bool,\n    isEditing: PropTypes.bool,\n    isUploading: PropTypes.bool,\n    onChange: PropTypes.func,\n    onSubmit: PropTypes.func,\n    onClearSuggestions: PropTypes.func,\n    onFetchSuggestions: PropTypes.func,\n    onSuggestionSelected: PropTypes.func,\n    onChangeSpoilerText: PropTypes.func,\n    onPaste: PropTypes.func,\n    onPickEmoji: PropTypes.func,\n    showSearch: PropTypes.bool,\n    anyMedia: PropTypes.bool,\n    isInReply: PropTypes.bool,\n    singleColumn: PropTypes.bool,\n    lang: PropTypes.string,\n\n    advancedOptions: ImmutablePropTypes.map,\n    layout: PropTypes.string,\n    media: ImmutablePropTypes.list,\n    sideArm: PropTypes.string,\n    sensitive: PropTypes.bool,\n    spoilersAlwaysOn: PropTypes.bool,\n    mediaDescriptionConfirmation: PropTypes.bool,\n    preselectOnReply: PropTypes.bool,\n    onChangeSpoilerness: PropTypes.func,\n    onChangeVisibility: PropTypes.func,\n    onPaste: PropTypes.func,\n    onMediaDescriptionConfirm: PropTypes.func,\n  };\n\n  static defaultProps = {\n    showSearch: false,\n  };\n\n  handleChange = (e) => {\n    this.props.onChange(e.target.value);\n  };\n\n  getFulltextForCharacterCounting = () => {\n    return [\n      this.props.spoiler? this.props.spoilerText: '',\n      countableText(this.props.text),\n      this.props.advancedOptions && this.props.advancedOptions.get('do_not_federate') ? ' ' : '',\n    ].join('');\n  };\n\n  canSubmit = () => {\n    const { isSubmitting, isChangingUpload, isUploading, anyMedia } = this.props;\n    const fulltext = this.getFulltextForCharacterCounting();\n\n    return !(isSubmitting || isUploading || isChangingUpload || length(fulltext) > maxChars || (!fulltext.trim().length && !anyMedia));\n  };\n\n  handleSubmit = (overriddenVisibility = null) => {\n    const {\n      onSubmit,\n      media,\n      mediaDescriptionConfirmation,\n      onMediaDescriptionConfirm,\n      onChangeVisibility,\n    } = this.props;\n\n    if (this.props.text !== this.textarea.value) {\n      // Something changed the text inside the textarea (e.g. browser extensions like Grammarly)\n      // Update the state to match the current text\n      this.props.onChange(this.textarea.value);\n    }\n\n    if (!this.canSubmit()) {\n      return;\n    }\n\n    // Submit unless there are media with missing descriptions\n    if (mediaDescriptionConfirmation && onMediaDescriptionConfirm && media && media.some(item => !item.get('description'))) {\n      const firstWithoutDescription = media.find(item => !item.get('description'));\n      onMediaDescriptionConfirm(this.context.router ? this.context.router.history : null, firstWithoutDescription.get('id'), overriddenVisibility);\n    } else if (onSubmit) {\n      if (onChangeVisibility && overriddenVisibility) {\n        onChangeVisibility(overriddenVisibility);\n      }\n      onSubmit(this.context.router ? this.context.router.history : null);\n    }\n  };\n\n  //  Changes the text value of the spoiler.\n  handleChangeSpoiler = ({ target: { value } }) => {\n    const { onChangeSpoilerText } = this.props;\n    if (onChangeSpoilerText) {\n      onChangeSpoilerText(value);\n    }\n  };\n\n  setRef = c => {\n    this.composeForm = c;\n  };\n\n  //  Inserts an emoji at the caret.\n  handleEmojiPick = (data) => {\n    const { textarea: { selectionStart } } = this;\n    const { onPickEmoji } = this.props;\n    if (onPickEmoji) {\n      onPickEmoji(selectionStart, data);\n    }\n  };\n\n  //  Handles the secondary submit button.\n  handleSecondarySubmit = () => {\n    const {\n      sideArm,\n    } = this.props;\n    this.handleSubmit(sideArm === 'none' ? null : sideArm);\n  };\n\n  //  Selects a suggestion from the autofill.\n  onSuggestionSelected = (tokenStart, token, value) => {\n    this.props.onSuggestionSelected(tokenStart, token, value, ['text']);\n  };\n\n  onSpoilerSuggestionSelected = (tokenStart, token, value) => {\n    this.props.onSuggestionSelected(tokenStart, token, value, ['spoiler_text']);\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13 && (e.ctrlKey || e.metaKey)) {\n      this.handleSubmit();\n    }\n\n    if (e.keyCode == 13 && e.altKey) {\n      this.handleSecondarySubmit();\n    }\n  };\n\n  //  Sets a reference to the textarea.\n  setAutosuggestTextarea = (textareaComponent) => {\n    if (textareaComponent) {\n      this.textarea = textareaComponent.textarea;\n    }\n  };\n\n  //  Sets a reference to the CW field.\n  handleRefSpoilerText = (spoilerComponent) => {\n    if (spoilerComponent) {\n      this.spoilerText = spoilerComponent.input;\n    }\n  };\n\n  handleFocus = () => {\n    if (this.composeForm && !this.props.singleColumn) {\n      const { left, right } = this.composeForm.getBoundingClientRect();\n      if (left < 0 || right > (window.innerWidth || document.documentElement.clientWidth)) {\n        this.composeForm.scrollIntoView();\n      }\n    }\n  };\n\n  componentDidMount () {\n    this._updateFocusAndSelection({ });\n  }\n\n  componentDidUpdate (prevProps) {\n    this._updateFocusAndSelection(prevProps);\n  }\n\n  //  This statement does several things:\n  //  - If we're beginning a reply, and,\n  //      - Replying to zero or one users, places the cursor at the end\n  //        of the textbox.\n  //      - Replying to more than one user, selects any usernames past\n  //        the first; this provides a convenient shortcut to drop\n  //        everyone else from the conversation.\n  _updateFocusAndSelection = (prevProps) => {\n    const {\n      textarea,\n      spoilerText,\n    } = this;\n    const {\n      focusDate,\n      caretPosition,\n      isSubmitting,\n      preselectDate,\n      text,\n      preselectOnReply,\n      singleColumn,\n    } = this.props;\n    let selectionEnd, selectionStart;\n\n    //  Caret/selection handling.\n    if (focusDate !== prevProps.focusDate) {\n      switch (true) {\n      case preselectDate !== prevProps.preselectDate && this.props.isInReply && preselectOnReply:\n        selectionStart = text.search(/\\s/) + 1;\n        selectionEnd = text.length;\n        break;\n      case !isNaN(caretPosition) && caretPosition !== null:\n        selectionStart = selectionEnd = caretPosition;\n        break;\n      default:\n        selectionStart = selectionEnd = text.length;\n      }\n      if (textarea) {\n        // Because of the wicg-inert polyfill, the activeElement may not be\n        // immediately selectable, we have to wait for observers to run, as\n        // described in https://github.com/WICG/inert#performance-and-gotchas\n        Promise.resolve().then(() => {\n          textarea.setSelectionRange(selectionStart, selectionEnd);\n          textarea.focus();\n          if (!singleColumn) textarea.scrollIntoView();\n        }).catch(console.error);\n      }\n\n    //  Refocuses the textarea after submitting.\n    } else if (textarea && prevProps.isSubmitting && !isSubmitting) {\n      textarea.focus();\n    } else if (this.props.spoiler !== prevProps.spoiler) {\n      if (this.props.spoiler) {\n        if (spoilerText) {\n          spoilerText.focus();\n        }\n      } else {\n        if (textarea) {\n          textarea.focus();\n        }\n      }\n    }\n  };\n\n\n  render () {\n    const {\n      handleEmojiPick,\n      handleSecondarySubmit,\n      handleSelect,\n      handleSubmit,\n      handleRefTextarea,\n    } = this;\n    const {\n      advancedOptions,\n      intl,\n      isSubmitting,\n      layout,\n      onChangeSpoilerness,\n      onChangeVisibility,\n      onClearSuggestions,\n      onFetchSuggestions,\n      onPaste,\n      privacy,\n      sensitive,\n      showSearch,\n      sideArm,\n      spoiler,\n      spoilerText,\n      suggestions,\n      spoilersAlwaysOn,\n      isEditing,\n    } = this.props;\n\n    const countText = this.getFulltextForCharacterCounting();\n\n    return (\n      <div className='compose-form'>\n        <WarningContainer />\n\n        <ReplyIndicatorContainer />\n\n        <div className={`spoiler-input ${spoiler ? 'spoiler-input--visible' : ''}`} ref={this.setRef} aria-hidden={!this.props.spoiler}>\n          <AutosuggestInput\n            placeholder={intl.formatMessage(messages.spoiler_placeholder)}\n            value={spoilerText}\n            onChange={this.handleChangeSpoiler}\n            onKeyDown={this.handleKeyDown}\n            disabled={!spoiler}\n            ref={this.handleRefSpoilerText}\n            suggestions={this.props.suggestions}\n            onSuggestionsFetchRequested={onFetchSuggestions}\n            onSuggestionsClearRequested={onClearSuggestions}\n            onSuggestionSelected={this.onSpoilerSuggestionSelected}\n            searchTokens={[':']}\n            id='glitch.composer.spoiler.input'\n            className='spoiler-input__input'\n            lang={this.props.lang}\n            autoFocus={false}\n            spellCheck\n          />\n        </div>\n\n        <AutosuggestTextarea\n          ref={this.setAutosuggestTextarea}\n          placeholder={intl.formatMessage(messages.placeholder)}\n          disabled={isSubmitting}\n          value={this.props.text}\n          onChange={this.handleChange}\n          onKeyDown={this.handleKeyDown}\n          suggestions={this.props.suggestions}\n          onFocus={this.handleFocus}\n          onSuggestionsFetchRequested={onFetchSuggestions}\n          onSuggestionsClearRequested={onClearSuggestions}\n          onSuggestionSelected={this.onSuggestionSelected}\n          onPaste={onPaste}\n          autoFocus={!showSearch && !isMobile(window.innerWidth, layout)}\n          lang={this.props.lang}\n        >\n          <EmojiPickerDropdown onPickEmoji={handleEmojiPick} />\n          <TextareaIcons advancedOptions={advancedOptions} />\n          <div className='compose-form__modifiers'>\n            <UploadFormContainer />\n            <PollFormContainer />\n          </div>\n        </AutosuggestTextarea>\n\n        <div className='compose-form__buttons-wrapper'>\n          <OptionsContainer\n            advancedOptions={advancedOptions}\n            disabled={isSubmitting}\n            onToggleSpoiler={spoilersAlwaysOn ? null : onChangeSpoilerness}\n            onUpload={onPaste}\n            isEditing={isEditing}\n            sensitive={sensitive || (spoilersAlwaysOn && spoilerText && spoilerText.length > 0)}\n            spoiler={spoilersAlwaysOn ? (spoilerText && spoilerText.length > 0) : spoiler}\n          />\n          <div className='character-counter__wrapper'>\n            <CharacterCounter text={countText} max={maxChars} />\n          </div>\n        </div>\n\n        <Publisher\n          countText={countText}\n          disabled={!this.canSubmit()}\n          isEditing={isEditing}\n          onSecondarySubmit={handleSecondarySubmit}\n          onSubmit={handleSubmit}\n          privacy={privacy}\n          sideArm={sideArm}\n        />\n      </div>\n    );\n  }\n\n}\n","import { urlRegex } from './url_regex';\n\nconst urlPlaceholder = '$2xxxxxxxxxxxxxxxxxxxxxxx';\n\nexport function countableText(inputText) {\n  return inputText\n    .replace(urlRegex, urlPlaceholder)\n    .replace(/(^|[^/\\w])@(([a-z0-9_]+)@[a-z0-9.-]+[a-z0-9]+)/ig, '$1@$3');\n}\n","import { injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { NotificationStack } from 'react-notification';\nimport { dismissAlert } from 'flavours/glitch/actions/alerts';\nimport { getAlerts } from 'flavours/glitch/selectors';\n\nconst mapStateToProps = (state, { intl }) => {\n  const notifications = getAlerts(state);\n\n  notifications.forEach(notification => ['title', 'message'].forEach(key => {\n    const value = notification[key];\n\n    if (typeof value === 'object') {\n      notification[key] = intl.formatMessage(value, notification[`${key}_values`]);\n    }\n  }));\n\n  return { notifications };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onDismiss: alert => {\n      dispatch(dismissAlert(alert));\n    },\n  };\n};\n\nexport default injectIntl(connect(mapStateToProps, mapDispatchToProps)(NotificationStack));\n","import { connect }    from 'react-redux';\nimport LoadingBar from 'react-redux-loading-bar';\n\nconst mapStateToProps = (state, ownProps) => ({\n  loading: state.get('loadingBar')[ownProps.scope || 'default'],\n});\n\nexport default connect(mapStateToProps)(LoadingBar.WrappedComponent);\n","var baseAssignValue = require('./_baseAssignValue'),\n  baseForOwn = require('./_baseForOwn'),\n  baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n  baseForOwn(object, function (value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\nmodule.exports = mapValues;","'use strict';\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar _mouse = require('./mouse.js');\nvar _mouse2 = _interopRequireDefault(_mouse);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar Atrament = function () {\n  function Atrament(selector, width, height, color) {\n    var _this = this;\n    _classCallCheck(this, Atrament);\n    if (!document) throw new Error('no DOM found');\n\n    // get canvas element\n    if (selector instanceof window.Node && selector.tagName === 'CANVAS') this.canvas = selector;else if (typeof selector === 'string') this.canvas = document.querySelector(selector);else throw new Error('can\\'t look for canvas based on \\'' + selector + '\\'');\n    if (!this.canvas) throw new Error('canvas not found');\n\n    // set external canvas params\n    this.canvas.width = width || 500;\n    this.canvas.height = height || 500;\n    this.canvas.style.cursor = 'crosshair';\n\n    // create a mouse object\n    this.mouse = new _mouse2.default();\n\n    // mousemove handler\n    var mouseMove = function mouseMove(e) {\n      e.preventDefault();\n      var rect = _this.canvas.getBoundingClientRect();\n      var position = e.changedTouches && e.changedTouches[0] || e;\n      var x = position.offsetX;\n      var y = position.offsetY;\n      if (typeof x === 'undefined') {\n        x = position.clientX + document.documentElement.scrollLeft - rect.left;\n      }\n      if (typeof y === 'undefined') {\n        y = position.clientY + document.documentElement.scrollTop - rect.top;\n      }\n\n      // draw if we should draw\n      if (_this.mouse.down) {\n        _this.draw(x, y);\n        if (!_this._dirty && (x !== _this.mouse.x || y !== _this.mouse.y)) {\n          _this._dirty = true;\n          _this.fireDirty();\n        }\n      } else {\n        _this.mouse.x = x;\n        _this.mouse.y = y;\n      }\n    };\n\n    // mousedown handler\n    var mouseDown = function mouseDown(mousePosition) {\n      mousePosition.preventDefault();\n      // update position just in case\n      mouseMove(mousePosition);\n\n      // if we are filling - fill and return\n      if (_this._mode === 'fill') {\n        _this.fill();\n        return;\n      }\n\n      // remember it\n      _this.mouse.px = _this.mouse.x;\n      _this.mouse.py = _this.mouse.y;\n      // begin drawing\n      _this.mouse.down = true;\n      _this.context.beginPath();\n      _this.context.moveTo(_this.mouse.px, _this.mouse.py);\n    };\n    var mouseUp = function mouseUp() {\n      _this.mouse.down = false;\n      // stop drawing\n      _this.context.closePath();\n    };\n\n    // attach listeners\n    this.canvas.addEventListener('mousemove', mouseMove);\n    this.canvas.addEventListener('mousedown', mouseDown);\n    document.addEventListener('mouseup', mouseUp);\n    this.canvas.addEventListener('touchstart', mouseDown);\n    this.canvas.addEventListener('touchend', mouseUp);\n    this.canvas.addEventListener('touchmove', mouseMove);\n\n    // helper for destroying Atrament (removing event listeners)\n    this.destroy = function () {\n      _this.clear();\n      _this.canvas.removeEventListener('mousemove', mouseMove);\n      _this.canvas.removeEventListener('mousedown', mouseDown);\n      document.removeEventListener('mouseup', mouseUp);\n      _this.canvas.removeEventListener('touchstart', mouseDown);\n      _this.canvas.removeEventListener('touchend', mouseUp);\n      _this.canvas.removeEventListener('touchmove', mouseMove);\n    };\n\n    // set internal canvas params\n    this.context = this.canvas.getContext('2d');\n    this.context.globalCompositeOperation = 'source-over';\n    this.context.globalAlpha = 1;\n    this.context.strokeStyle = color || 'rgba(0,0,0,1)';\n    this.context.lineCap = 'round';\n    this.context.lineJoin = 'round';\n    this.context.translate(0.5, 0.5);\n    this._filling = false;\n    this._fillStack = [];\n\n    // set drawing params\n    this.SMOOTHING_INIT = 0.85;\n    this.WEIGHT_SPREAD = 10;\n    this._smoothing = this.SMOOTHING_INIT;\n    this._maxWeight = 12;\n    this._thickness = 2;\n    this._targetThickness = 2;\n    this._weight = 2;\n    this._mode = 'draw';\n    this._adaptive = true;\n  }\n  _createClass(Atrament, [{\n    key: 'draw',\n    value: function draw(mX, mY) {\n      var mouse = this.mouse;\n      var context = this.context;\n\n      // calculate distance from previous point\n      var rawDist = Atrament.lineDistance(mX, mY, mouse.px, mouse.py);\n\n      // now, here we scale the initial smoothing factor by the raw distance\n      // this means that when the mouse moves fast, there is more smoothing\n      // and when we're drawing small detailed stuff, we have more control\n      // also we hard clip at 1\n      var smoothingFactor = Math.min(0.87, this._smoothing + (rawDist - 60) / 3000);\n\n      // calculate smoothed coordinates\n      mouse.x = mX - (mX - mouse.px) * smoothingFactor;\n      mouse.y = mY - (mY - mouse.py) * smoothingFactor;\n\n      // recalculate distance from previous point, this time relative to the smoothed coords\n      var dist = Atrament.lineDistance(mouse.x, mouse.y, mouse.px, mouse.py);\n      if (this._adaptive) {\n        // calculate target thickness based on the new distance\n        this._targetThickness = (dist - 1) / (50 - 1) * (this._maxWeight - this._weight) + this._weight;\n        // approach the target gradually\n        if (this._thickness > this._targetThickness) {\n          this._thickness -= 0.5;\n        } else if (this._thickness < this._targetThickness) {\n          this._thickness += 0.5;\n        }\n        // set line width\n        context.lineWidth = this._thickness;\n      } else {\n        // line width is equal to default weight\n        context.lineWidth = this._weight;\n      }\n\n      // draw using quad interpolation\n      context.quadraticCurveTo(mouse.px, mouse.py, mouse.x, mouse.y);\n      context.stroke();\n\n      // remember\n      mouse.px = mouse.x;\n      mouse.py = mouse.y;\n    }\n  }, {\n    key: 'fireDirty',\n    value: function fireDirty() {\n      var event = document.createEvent('Event');\n      event.initEvent('dirty', true, true);\n      this.canvas.dispatchEvent(event);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      if (!this.dirty) {\n        return;\n      }\n      this._dirty = false;\n      this.fireDirty();\n\n      // make sure we're in the right compositing mode, and erase everything\n      if (this.context.globalCompositeOperation === 'destination-out') {\n        this.mode = 'draw';\n        this.context.clearRect(-10, -10, this.canvas.width + 20, this.canvas.height + 20);\n        this.mode = 'erase';\n      } else {\n        this.context.clearRect(-10, -10, this.canvas.width + 20, this.canvas.height + 20);\n      }\n    }\n  }, {\n    key: 'toImage',\n    value: function toImage() {\n      return this.canvas.toDataURL();\n    }\n  }, {\n    key: 'fill',\n    value: function fill() {\n      var _this2 = this;\n      var mouse = this.mouse;\n      var context = this.context;\n      var startColor = Array.prototype.slice.call(context.getImageData(mouse.x, mouse.y, 1, 1).data, 0); // converting to Array because Safari 9\n\n      if (!this._filling) {\n        this.canvas.style.cursor = 'progress';\n        this._filling = true;\n        setTimeout(function () {\n          _this2._floodFill(mouse.x, mouse.y, startColor);\n        }, 100);\n      } else {\n        this._fillStack.push([mouse.x, mouse.y, startColor]);\n      }\n    }\n  }, {\n    key: '_floodFill',\n    value: function _floodFill(_startX, _startY, startColor) {\n      var _this3 = this;\n      var context = this.context;\n      var startX = Math.floor(_startX);\n      var startY = Math.floor(_startY);\n      var canvasWidth = context.canvas.width;\n      var canvasHeight = context.canvas.height;\n      var pixelStack = [[startX, startY]];\n      // hex needs to be trasformed to rgb since colorLayer accepts RGB\n      var fillColor = Atrament.hexToRgb(this.color);\n      // Need to save current context with colors, we will update it\n      var colorLayer = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\n      var alpha = Math.min(context.globalAlpha * 10 * 255, 255);\n      var colorPixel = Atrament.colorPixel.apply(Atrament, [colorLayer.data].concat(_toConsumableArray(fillColor), [startColor, alpha]));\n      var matchColor = Atrament.matchColor.apply(Atrament, [colorLayer.data].concat(_toConsumableArray(startColor)));\n      var matchFillColor = Atrament.matchColor.apply(Atrament, [colorLayer.data].concat([].concat(_toConsumableArray(fillColor), [255])));\n\n      // check if we're trying to fill with the same colour, if so, stop\n      if (matchFillColor((startY * context.canvas.width + startX) * 4)) {\n        this._filling = false;\n        setTimeout(function () {\n          _this3.canvas.style.cursor = 'crosshair';\n        }, 100);\n        return;\n      }\n      while (pixelStack.length) {\n        var newPos = pixelStack.pop();\n        var x = newPos[0];\n        var y = newPos[1];\n        var pixelPos = (y * canvasWidth + x) * 4;\n        while (y-- >= 0 && matchColor(pixelPos)) {\n          pixelPos -= canvasWidth * 4;\n        }\n        pixelPos += canvasWidth * 4;\n        ++y;\n        var reachLeft = false;\n        var reachRight = false;\n        while (y++ < canvasHeight - 1 && matchColor(pixelPos)) {\n          colorPixel(pixelPos);\n          if (x > 0) {\n            if (matchColor(pixelPos - 4)) {\n              if (!reachLeft) {\n                pixelStack.push([x - 1, y]);\n                reachLeft = true;\n              }\n            } else if (reachLeft) {\n              reachLeft = false;\n            }\n          }\n          if (x < canvasWidth - 1) {\n            if (matchColor(pixelPos + 4)) {\n              if (!reachRight) {\n                pixelStack.push([x + 1, y]);\n                reachRight = true;\n              }\n            } else if (reachRight) {\n              reachRight = false;\n            }\n          }\n          pixelPos += canvasWidth * 4;\n        }\n      }\n\n      // Update context with filled bucket!\n      context.putImageData(colorLayer, 0, 0);\n      if (this._fillStack.length) {\n        this._floodFill.apply(this, _toConsumableArray(this._fillStack.shift()));\n      } else {\n        this._filling = false;\n        setTimeout(function () {\n          _this3.canvas.style.cursor = 'crosshair';\n        }, 100);\n      }\n    }\n  }, {\n    key: 'color',\n    get: function get() {\n      return this.context.strokeStyle;\n    },\n    set: function set(c) {\n      if (typeof c !== 'string') throw new Error('wrong argument type');\n      this.context.strokeStyle = c;\n    }\n  }, {\n    key: 'weight',\n    get: function get() {\n      return this._weight;\n    },\n    set: function set(w) {\n      if (typeof w !== 'number') throw new Error('wrong argument type');\n      this._weight = w;\n      this._thickness = w;\n      this._targetThickness = w;\n      this._maxWeight = w + this.WEIGHT_SPREAD;\n    }\n  }, {\n    key: 'adaptiveStroke',\n    get: function get() {\n      return this._adaptive;\n    },\n    set: function set(s) {\n      this._adaptive = !!s;\n    }\n  }, {\n    key: 'mode',\n    get: function get() {\n      return this._mode;\n    },\n    set: function set(m) {\n      if (typeof m !== 'string') throw new Error('wrong argument type');\n      switch (m) {\n        case 'erase':\n          this._mode = 'erase';\n          this.context.globalCompositeOperation = 'destination-out';\n          break;\n        case 'fill':\n          this._mode = 'fill';\n          this.context.globalCompositeOperation = 'source-over';\n          break;\n        default:\n          this._mode = 'draw';\n          this.context.globalCompositeOperation = 'source-over';\n          break;\n      }\n    }\n  }, {\n    key: 'dirty',\n    get: function get() {\n      return !!this._dirty;\n    }\n  }, {\n    key: 'smoothing',\n    get: function get() {\n      return this._smoothing === this.SMOOTHING_INIT;\n    },\n    set: function set(s) {\n      if (typeof s !== 'boolean') throw new Error('wrong argument type');\n      this._smoothing = s ? this.SMOOTHING_INIT : 0;\n    }\n  }, {\n    key: 'opacity',\n    set: function set(o) {\n      if (typeof o !== 'number') throw new Error('wrong argument type');\n      // now, we need to scale this, because our drawing method means we don't just get uniform transparency all over the drawn line.\n      // so we scale it down a lot, meaning that it'll look nicely semi-transparent\n      // unless opacity is 1, then we should go full on to 1\n      if (o >= 1) this.context.globalAlpha = 1;else this.context.globalAlpha = o / 10;\n    }\n  }], [{\n    key: 'lineDistance',\n    value: function lineDistance(x1, y1, x2, y2) {\n      // calculate euclidean distance between (x1, y1) and (x2, y2)\n      var xs = Math.pow(x2 - x1, 2);\n      var ys = Math.pow(y2 - y1, 2);\n      return Math.sqrt(xs + ys);\n    }\n  }, {\n    key: 'hexToRgb',\n    value: function hexToRgb(hexColor) {\n      // Since input type color provides hex and ImageData accepts RGB need to transform\n      var m = hexColor.match(/^#?([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i);\n      return [parseInt(m[1], 16), parseInt(m[2], 16), parseInt(m[3], 16)];\n    }\n  }, {\n    key: 'matchColor',\n    value: function matchColor(data, compR, compG, compB, compA) {\n      return function (pixelPos) {\n        // Pixel color equals comp color?\n        var r = data[pixelPos];\n        var g = data[pixelPos + 1];\n        var b = data[pixelPos + 2];\n        var a = data[pixelPos + 3];\n        return r === compR && g === compG && b === compB && a === compA;\n      };\n    }\n  }, {\n    key: 'colorPixel',\n    value: function colorPixel(data, fillR, fillG, fillB, startColor, alpha) {\n      var matchColor = Atrament.matchColor.apply(Atrament, [data].concat(_toConsumableArray(startColor)));\n      return function (pixelPos) {\n        // Update fill color in matrix\n        data[pixelPos] = fillR;\n        data[pixelPos + 1] = fillG;\n        data[pixelPos + 2] = fillB;\n        data[pixelPos + 3] = alpha;\n        if (!matchColor(pixelPos + 4)) {\n          data[pixelPos + 4] = data[pixelPos + 4] * 0.01 + fillR * 0.99;\n          data[pixelPos + 4 + 1] = data[pixelPos + 4 + 1] * 0.01 + fillG * 0.99;\n          data[pixelPos + 4 + 2] = data[pixelPos + 4 + 2] * 0.01 + fillB * 0.99;\n          data[pixelPos + 4 + 3] = data[pixelPos + 4 + 3] * 0.01 + alpha * 0.99;\n        }\n        if (!matchColor(pixelPos - 4)) {\n          data[pixelPos - 4] = data[pixelPos - 4] * 0.01 + fillR * 0.99;\n          data[pixelPos - 4 + 1] = data[pixelPos - 4 + 1] * 0.01 + fillG * 0.99;\n          data[pixelPos - 4 + 2] = data[pixelPos - 4 + 2] * 0.01 + fillB * 0.99;\n          data[pixelPos - 4 + 3] = data[pixelPos - 4 + 3] * 0.01 + alpha * 0.99;\n        }\n      };\n    }\n  }]);\n  return Atrament;\n}();\n\n// for people who like functional programming\n\nfunction atrament(selector, width, height, color) {\n  return new Atrament(selector, width, height, color);\n}\nmodule.exports = atrament;\nmodule.exports.Atrament = Atrament;","import Immutable from 'immutable';\nimport {\n  DROPDOWN_MENU_OPEN,\n  DROPDOWN_MENU_CLOSE,\n} from '../actions/dropdown_menu';\n\nconst initialState = Immutable.Map({ openId: null, keyboard: false, scroll_key: null });\n\nexport default function dropdownMenu(state = initialState, action) {\n  switch (action.type) {\n  case DROPDOWN_MENU_OPEN:\n    return state.merge({ openId: action.id, keyboard: action.keyboard, scroll_key: action.scroll_key });\n  case DROPDOWN_MENU_CLOSE:\n    return state.get('openId') === action.id ? state.set('openId', null).set('scroll_key', null) : state;\n  default:\n    return state;\n  }\n}\n","import {\n  TIMELINE_UPDATE,\n  TIMELINE_DELETE,\n  TIMELINE_CLEAR,\n  TIMELINE_EXPAND_SUCCESS,\n  TIMELINE_EXPAND_REQUEST,\n  TIMELINE_EXPAND_FAIL,\n  TIMELINE_SCROLL_TOP,\n  TIMELINE_CONNECT,\n  TIMELINE_DISCONNECT,\n  TIMELINE_LOAD_PENDING,\n  TIMELINE_MARK_AS_PARTIAL,\n} from 'flavours/glitch/actions/timelines';\nimport {\n  ACCOUNT_BLOCK_SUCCESS,\n  ACCOUNT_MUTE_SUCCESS,\n  ACCOUNT_UNFOLLOW_SUCCESS,\n} from 'flavours/glitch/actions/accounts';\nimport { Map as ImmutableMap, List as ImmutableList, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\nimport compareId from '../compare_id';\n\nconst initialState = ImmutableMap();\n\nconst initialTimeline = ImmutableMap({\n  unread: 0,\n  online: false,\n  top: true,\n  isLoading: false,\n  hasMore: true,\n  pendingItems: ImmutableList(),\n  items: ImmutableList(),\n});\n\nconst expandNormalizedTimeline = (state, timeline, statuses, next, isPartial, isLoadingRecent, usePendingItems) => {\n  // This method is pretty tricky because:\n  // - existing items in the timeline might be out of order\n  // - the existing timeline may have gaps, most often explicitly noted with a `null` item\n  // - ideally, we don't want it to reorder existing items of the timeline\n  // - `statuses` may include items that are already included in the timeline\n  // - this function can be called either to fill in a gap, or load newer items\n\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    mMap.set('isLoading', false);\n    mMap.set('isPartial', isPartial);\n\n    if (!next && !isLoadingRecent) mMap.set('hasMore', false);\n\n    if (timeline.endsWith(':pinned')) {\n      mMap.set('items', statuses.map(status => status.get('id')));\n    } else if (!statuses.isEmpty()) {\n      usePendingItems = isLoadingRecent && (usePendingItems || !mMap.get('pendingItems').isEmpty());\n\n      mMap.update(usePendingItems ? 'pendingItems' : 'items', ImmutableList(), oldIds => {\n        const newIds = statuses.map(status => status.get('id'));\n\n        // Now this gets tricky, as we don't necessarily know for sure where the gap to fill is\n        // and some items in the timeline may not be properly ordered.\n\n        // However, we know that `newIds.last()` is the oldest item that was requested and that\n        // there is no hole between `newIds.last()` and `newIds.first()`.\n\n        // First, find the furthest (if properly sorted, oldest) item in the timeline that is\n        // newer than the oldest fetched one, as it's most likely that it delimits the gap.\n        // Start the gap *after* that item.\n        const lastIndex = oldIds.findLastIndex(id => id !== null && compareId(id, newIds.last()) >= 0) + 1;\n\n        // Then, try to find the furthest (if properly sorted, oldest) item in the timeline that\n        // is newer than the most recent fetched one, as it delimits a section comprised of only\n        // items older or within `newIds` (or that were deleted from the server, so should be removed\n        // anyway).\n        // Stop the gap *after* that item.\n        const firstIndex = oldIds.take(lastIndex).findLastIndex(id => id !== null && compareId(id, newIds.first()) > 0) + 1;\n\n        let insertedIds = ImmutableOrderedSet(newIds).withMutations(insertedIds => {\n          // It is possible, though unlikely, that the slice we are replacing contains items older\n          // than the elements we got from the API. Get them and add them back at the back of the\n          // slice.\n          const olderIds = oldIds.slice(firstIndex, lastIndex).filter(id => id !== null && compareId(id, newIds.last()) < 0);\n          insertedIds.union(olderIds);\n\n          // Make sure we aren't inserting duplicates\n          insertedIds.subtract(oldIds.take(firstIndex), oldIds.skip(lastIndex));\n        }).toList();\n\n        // Finally, insert a gap marker if the data is marked as partial by the server\n        if (isPartial && (firstIndex === 0 || oldIds.get(firstIndex - 1) !== null)) {\n          insertedIds = insertedIds.unshift(null);\n        }\n\n        return oldIds.take(firstIndex).concat(\n          insertedIds,\n          oldIds.skip(lastIndex),\n        );\n      });\n    }\n  }));\n};\n\nconst updateTimeline = (state, timeline, status, usePendingItems, filtered) => {\n  const top = state.getIn([timeline, 'top']);\n\n  if (usePendingItems || !state.getIn([timeline, 'pendingItems']).isEmpty()) {\n    if (state.getIn([timeline, 'pendingItems'], ImmutableList()).includes(status.get('id')) || state.getIn([timeline, 'items'], ImmutableList()).includes(status.get('id'))) {\n      return state;\n    }\n\n    state = state.update(timeline, initialTimeline, map => map.update('pendingItems', list => list.unshift(status.get('id'))));\n\n    if (!filtered) {\n      state = state.updateIn([timeline, 'unread'], unread => unread + 1);\n    }\n\n    return state;\n  }\n\n  const ids        = state.getIn([timeline, 'items'], ImmutableList());\n  const includesId = ids.includes(status.get('id'));\n  const unread     = state.getIn([timeline, 'unread'], 0);\n\n  if (includesId) {\n    return state;\n  }\n\n  let newIds = ids;\n\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    if (!top && !filtered) mMap.set('unread', unread + 1);\n    if (top && ids.size > 40) newIds = newIds.take(20);\n    mMap.set('items', newIds.unshift(status.get('id')));\n  }));\n};\n\nconst deleteStatus = (state, id, references, exclude_account = null) => {\n  state.keySeq().forEach(timeline => {\n    if (exclude_account === null || (timeline !== `account:${exclude_account}` && !timeline.startsWith(`account:${exclude_account}:`))) {\n      const helper = list => list.filterNot(item => item === id);\n      state = state.updateIn([timeline, 'items'], helper).updateIn([timeline, 'pendingItems'], helper);\n    }\n  });\n\n  // Remove reblogs of deleted status\n  references.forEach(ref => {\n    state = deleteStatus(state, ref, [], exclude_account);\n  });\n\n  return state;\n};\n\nconst clearTimeline = (state, timeline) => {\n  return state.set(timeline, initialTimeline);\n};\n\nconst filterTimelines = (state, relationship, statuses) => {\n  let references;\n\n  statuses.forEach(status => {\n    if (status.get('account') !== relationship.id) {\n      return;\n    }\n\n    references = statuses.filter(item => item.get('reblog') === status.get('id')).map(item => item.get('id'));\n    state      = deleteStatus(state, status.get('id'), references, relationship.id);\n  });\n\n  return state;\n};\n\nconst filterTimeline = (timeline, state, relationship, statuses) => {\n  const helper = list => list.filterNot(statusId => statuses.getIn([statusId, 'account']) === relationship.id);\n  return state.updateIn([timeline, 'items'], ImmutableList(), helper).updateIn([timeline, 'pendingItems'], ImmutableList(), helper);\n};\n\nconst updateTop = (state, timeline, top) => {\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    if (top) mMap.set('unread', mMap.get('pendingItems').size);\n    mMap.set('top', top);\n  }));\n};\n\nconst reconnectTimeline = (state, usePendingItems) => {\n  if (state.get('online')) {\n    return state;\n  }\n\n  return state.withMutations(mMap => {\n    mMap.update(usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(null) : items);\n    mMap.set('online', true);\n  });\n};\n\nexport default function timelines(state = initialState, action) {\n  switch(action.type) {\n  case TIMELINE_LOAD_PENDING:\n    return state.update(action.timeline, initialTimeline, map =>\n      map.update('items', list => map.get('pendingItems').concat(list.take(40))).set('pendingItems', ImmutableList()).set('unread', 0));\n  case TIMELINE_EXPAND_REQUEST:\n    return state.update(action.timeline, initialTimeline, map => map.set('isLoading', true));\n  case TIMELINE_EXPAND_FAIL:\n    return state.update(action.timeline, initialTimeline, map => map.set('isLoading', false));\n  case TIMELINE_EXPAND_SUCCESS:\n    return expandNormalizedTimeline(state, action.timeline, fromJS(action.statuses), action.next, action.partial, action.isLoadingRecent, action.usePendingItems);\n  case TIMELINE_UPDATE:\n    return updateTimeline(state, action.timeline, fromJS(action.status), action.usePendingItems, action.filtered);\n  case TIMELINE_DELETE:\n    return deleteStatus(state, action.id, action.references, action.reblogOf);\n  case TIMELINE_CLEAR:\n    return clearTimeline(state, action.timeline);\n  case ACCOUNT_BLOCK_SUCCESS:\n  case ACCOUNT_MUTE_SUCCESS:\n    return filterTimelines(state, action.relationship, action.statuses);\n  case ACCOUNT_UNFOLLOW_SUCCESS:\n    return filterTimeline('home', state, action.relationship, action.statuses);\n  case TIMELINE_SCROLL_TOP:\n    return updateTop(state, action.timeline, action.top);\n  case TIMELINE_CONNECT:\n    return state.update(action.timeline, initialTimeline, map => reconnectTimeline(map, action.usePendingItems));\n  case TIMELINE_DISCONNECT:\n    return state.update(\n      action.timeline,\n      initialTimeline,\n      map => map.set('online', false).update(action.usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(null) : items),\n    );\n  case TIMELINE_MARK_AS_PARTIAL:\n    return state.update(\n      action.timeline,\n      initialTimeline,\n      map => map.set('isPartial', true).set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('unread', 0),\n    );\n  default:\n    return state;\n  }\n}\n","import { STORE_HYDRATE } from 'flavours/glitch/actions/store';\nimport { APP_LAYOUT_CHANGE } from 'flavours/glitch/actions/app';\nimport { Map as ImmutableMap } from 'immutable';\nimport { layoutFromWindow } from 'flavours/glitch/is_mobile';\n\nconst initialState = ImmutableMap({\n  streaming_api_base_url: null,\n  access_token: null,\n  layout: layoutFromWindow(),\n  permissions: '0',\n});\n\nexport default function meta(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return state.merge(action.state.get('meta'))\n      .set('permissions', action.state.getIn(['role', 'permissions']))\n      .set('layout', layoutFromWindow(action.state.getIn(['local_settings', 'layout'])));\n  case APP_LAYOUT_CHANGE:\n    return state.set('layout', action.layout);\n  default:\n    return state;\n  }\n}\n","import {\n  ALERT_SHOW,\n  ALERT_DISMISS,\n  ALERT_CLEAR,\n} from 'flavours/glitch/actions/alerts';\nimport { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nconst initialState = ImmutableList([]);\n\nexport default function alerts(state = initialState, action) {\n  switch(action.type) {\n  case ALERT_SHOW:\n    return state.push(ImmutableMap({\n      key: state.size > 0 ? state.last().get('key') + 1 : 0,\n      title: action.title,\n      message: action.message,\n      message_values: action.message_values,\n    }));\n  case ALERT_DISMISS:\n    return state.filterNot(item => item.get('key') === action.alert.key);\n  case ALERT_CLEAR:\n    return state.clear();\n  default:\n    return state;\n  }\n}\n","import { MODAL_OPEN, MODAL_CLOSE } from 'flavours/glitch/actions/modal';\nimport { TIMELINE_DELETE } from 'flavours/glitch/actions/timelines';\nimport { COMPOSE_UPLOAD_CHANGE_SUCCESS } from 'flavours/glitch/actions/compose';\nimport { Stack as ImmutableStack, Map as ImmutableMap } from 'immutable';\n\nconst initialState = ImmutableMap({\n  ignoreFocus: false,\n  stack: ImmutableStack(),\n});\n\nconst popModal = (state, { modalType, ignoreFocus }) => {\n  if (modalType === undefined || modalType === state.getIn(['stack', 0, 'modalType'])) {\n    return state.set('ignoreFocus', !!ignoreFocus).update('stack', stack => stack.shift());\n  } else {\n    return state;\n  }\n};\n\nconst pushModal = (state, modalType, modalProps) => {\n  return state.withMutations(map => {\n    map.set('ignoreFocus', false);\n    map.update('stack', stack => stack.unshift(ImmutableMap({ modalType, modalProps })));\n  });\n};\n\nexport default function modal(state = initialState, action) {\n  switch(action.type) {\n  case MODAL_OPEN:\n    return pushModal(state, action.modalType, action.modalProps);\n  case MODAL_CLOSE:\n    return popModal(state, action);\n  case COMPOSE_UPLOAD_CHANGE_SUCCESS:\n    return popModal(state, { modalType: 'FOCAL_POINT', ignoreFocus: false });\n  case TIMELINE_DELETE:\n    return state.update('stack', stack => stack.filterNot((modal) => modal.get('modalProps').statusId === action.id));\n  default:\n    return state;\n  }\n}\n","import {\n  NOTIFICATIONS_UPDATE,\n} from '../actions/notifications';\nimport {\n  FOLLOWERS_FETCH_REQUEST,\n  FOLLOWERS_FETCH_SUCCESS,\n  FOLLOWERS_FETCH_FAIL,\n  FOLLOWERS_EXPAND_REQUEST,\n  FOLLOWERS_EXPAND_SUCCESS,\n  FOLLOWERS_EXPAND_FAIL,\n  FOLLOWING_FETCH_REQUEST,\n  FOLLOWING_FETCH_SUCCESS,\n  FOLLOWING_FETCH_FAIL,\n  FOLLOWING_EXPAND_REQUEST,\n  FOLLOWING_EXPAND_SUCCESS,\n  FOLLOWING_EXPAND_FAIL,\n  FOLLOW_REQUESTS_FETCH_REQUEST,\n  FOLLOW_REQUESTS_FETCH_SUCCESS,\n  FOLLOW_REQUESTS_FETCH_FAIL,\n  FOLLOW_REQUESTS_EXPAND_REQUEST,\n  FOLLOW_REQUESTS_EXPAND_SUCCESS,\n  FOLLOW_REQUESTS_EXPAND_FAIL,\n  FOLLOW_REQUEST_AUTHORIZE_SUCCESS,\n  FOLLOW_REQUEST_REJECT_SUCCESS,\n} from 'flavours/glitch/actions/accounts';\nimport {\n  REBLOGS_FETCH_SUCCESS,\n  FAVOURITES_FETCH_SUCCESS,\n} from 'flavours/glitch/actions/interactions';\nimport {\n  BLOCKS_FETCH_REQUEST,\n  BLOCKS_FETCH_SUCCESS,\n  BLOCKS_FETCH_FAIL,\n  BLOCKS_EXPAND_REQUEST,\n  BLOCKS_EXPAND_SUCCESS,\n  BLOCKS_EXPAND_FAIL,\n} from 'flavours/glitch/actions/blocks';\nimport {\n  MUTES_FETCH_REQUEST,\n  MUTES_FETCH_SUCCESS,\n  MUTES_FETCH_FAIL,\n  MUTES_EXPAND_REQUEST,\n  MUTES_EXPAND_SUCCESS,\n  MUTES_EXPAND_FAIL,\n} from 'flavours/glitch/actions/mutes';\nimport {\n  DIRECTORY_FETCH_REQUEST,\n  DIRECTORY_FETCH_SUCCESS,\n  DIRECTORY_FETCH_FAIL,\n  DIRECTORY_EXPAND_REQUEST,\n  DIRECTORY_EXPAND_SUCCESS,\n  DIRECTORY_EXPAND_FAIL,\n} from 'flavours/glitch/actions/directory';\nimport {\n  FEATURED_TAGS_FETCH_REQUEST,\n  FEATURED_TAGS_FETCH_SUCCESS,\n  FEATURED_TAGS_FETCH_FAIL,\n} from 'flavours/glitch/actions/featured_tags';\nimport { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nconst initialListState = ImmutableMap({\n  next: null,\n  isLoading: false,\n  items: ImmutableList(),\n});\n\nconst initialState = ImmutableMap({\n  followers: initialListState,\n  following: initialListState,\n  reblogged_by: initialListState,\n  favourited_by: initialListState,\n  follow_requests: initialListState,\n  blocks: initialListState,\n  mutes: initialListState,\n  featured_tags: initialListState,\n});\n\nconst normalizeList = (state, path, accounts, next) => {\n  return state.setIn(path, ImmutableMap({\n    next,\n    items: ImmutableList(accounts.map(item => item.id)),\n    isLoading: false,\n  }));\n};\n\nconst appendToList = (state, path, accounts, next) => {\n  return state.updateIn(path, map => {\n    return map.set('next', next).set('isLoading', false).update('items', list => list.concat(accounts.map(item => item.id)));\n  });\n};\n\nconst normalizeFollowRequest = (state, notification) => {\n  return state.updateIn(['follow_requests', 'items'], list => {\n    return list.filterNot(item => item === notification.account.id).unshift(notification.account.id);\n  });\n};\n\nconst normalizeFeaturedTag = (featuredTags, accountId) => {\n  const normalizeFeaturedTag = { ...featuredTags, accountId: accountId };\n  return fromJS(normalizeFeaturedTag);\n};\n\nconst normalizeFeaturedTags = (state, path, featuredTags, accountId) => {\n  return state.setIn(path, ImmutableMap({\n    items: ImmutableList(featuredTags.map(featuredTag => normalizeFeaturedTag(featuredTag, accountId)).sort((a, b) => b.get('statuses_count') - a.get('statuses_count'))),\n    isLoading: false,\n  }));\n};\n\nexport default function userLists(state = initialState, action) {\n  switch(action.type) {\n  case FOLLOWERS_FETCH_SUCCESS:\n    return normalizeList(state, ['followers', action.id], action.accounts, action.next);\n  case FOLLOWERS_EXPAND_SUCCESS:\n    return appendToList(state, ['followers', action.id], action.accounts, action.next);\n  case FOLLOWERS_FETCH_REQUEST:\n  case FOLLOWERS_EXPAND_REQUEST:\n    return state.setIn(['followers', action.id, 'isLoading'], true);\n  case FOLLOWERS_FETCH_FAIL:\n  case FOLLOWERS_EXPAND_FAIL:\n    return state.setIn(['followers', action.id, 'isLoading'], false);\n  case FOLLOWING_FETCH_SUCCESS:\n    return normalizeList(state, ['following', action.id], action.accounts, action.next);\n  case FOLLOWING_EXPAND_SUCCESS:\n    return appendToList(state, ['following', action.id], action.accounts, action.next);\n  case FOLLOWING_FETCH_REQUEST:\n  case FOLLOWING_EXPAND_REQUEST:\n    return state.setIn(['following', action.id, 'isLoading'], true);\n  case FOLLOWING_FETCH_FAIL:\n  case FOLLOWING_EXPAND_FAIL:\n    return state.setIn(['following', action.id, 'isLoading'], false);\n  case REBLOGS_FETCH_SUCCESS:\n    return state.setIn(['reblogged_by', action.id], ImmutableList(action.accounts.map(item => item.id)));\n  case FAVOURITES_FETCH_SUCCESS:\n    return state.setIn(['favourited_by', action.id], ImmutableList(action.accounts.map(item => item.id)));\n  case NOTIFICATIONS_UPDATE:\n    return action.notification.type === 'follow_request' ? normalizeFollowRequest(state, action.notification) : state;\n  case FOLLOW_REQUESTS_FETCH_SUCCESS:\n    return normalizeList(state, ['follow_requests'], action.accounts, action.next);\n  case FOLLOW_REQUESTS_EXPAND_SUCCESS:\n    return appendToList(state, ['follow_requests'], action.accounts, action.next);\n  case FOLLOW_REQUESTS_FETCH_REQUEST:\n  case FOLLOW_REQUESTS_EXPAND_REQUEST:\n    return state.setIn(['follow_requests', 'isLoading'], true);\n  case FOLLOW_REQUESTS_FETCH_FAIL:\n  case FOLLOW_REQUESTS_EXPAND_FAIL:\n    return state.setIn(['follow_requests', 'isLoading'], false);\n  case FOLLOW_REQUEST_AUTHORIZE_SUCCESS:\n  case FOLLOW_REQUEST_REJECT_SUCCESS:\n    return state.updateIn(['follow_requests', 'items'], list => list.filterNot(item => item === action.id));\n  case BLOCKS_FETCH_SUCCESS:\n    return normalizeList(state, ['blocks'], action.accounts, action.next);\n  case BLOCKS_EXPAND_SUCCESS:\n    return appendToList(state, ['blocks'], action.accounts, action.next);\n  case BLOCKS_FETCH_REQUEST:\n  case BLOCKS_EXPAND_REQUEST:\n    return state.setIn(['blocks', 'isLoading'], true);\n  case BLOCKS_FETCH_FAIL:\n  case BLOCKS_EXPAND_FAIL:\n    return state.setIn(['blocks', 'isLoading'], false);\n  case MUTES_FETCH_SUCCESS:\n    return normalizeList(state, ['mutes'], action.accounts, action.next);\n  case MUTES_EXPAND_SUCCESS:\n    return appendToList(state, ['mutes'], action.accounts, action.next);\n  case MUTES_FETCH_REQUEST:\n  case MUTES_EXPAND_REQUEST:\n    return state.setIn(['mutes', 'isLoading'], true);\n  case MUTES_FETCH_FAIL:\n  case MUTES_EXPAND_FAIL:\n    return state.setIn(['mutes', 'isLoading'], false);\n  case DIRECTORY_FETCH_SUCCESS:\n    return normalizeList(state, ['directory'], action.accounts, action.next);\n  case DIRECTORY_EXPAND_SUCCESS:\n    return appendToList(state, ['directory'], action.accounts, action.next);\n  case DIRECTORY_FETCH_REQUEST:\n  case DIRECTORY_EXPAND_REQUEST:\n    return state.setIn(['directory', 'isLoading'], true);\n  case DIRECTORY_FETCH_FAIL:\n  case DIRECTORY_EXPAND_FAIL:\n    return state.setIn(['directory', 'isLoading'], false);\n  case FEATURED_TAGS_FETCH_SUCCESS:\n    return normalizeFeaturedTags(state, ['featured_tags', action.id], action.tags, action.id);\n  case FEATURED_TAGS_FETCH_REQUEST:\n    return state.setIn(['featured_tags', action.id, 'isLoading'], true);\n  case FEATURED_TAGS_FETCH_FAIL:\n    return state.setIn(['featured_tags', action.id, 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import {\n  DOMAIN_BLOCKS_FETCH_SUCCESS,\n  DOMAIN_BLOCKS_EXPAND_SUCCESS,\n  DOMAIN_UNBLOCK_SUCCESS,\n} from '../actions/domain_blocks';\nimport { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet } from 'immutable';\n\nconst initialState = ImmutableMap({\n  blocks: ImmutableMap({\n    items: ImmutableOrderedSet(),\n  }),\n});\n\nexport default function domainLists(state = initialState, action) {\n  switch(action.type) {\n  case DOMAIN_BLOCKS_FETCH_SUCCESS:\n    return state.setIn(['blocks', 'items'], ImmutableOrderedSet(action.domains)).setIn(['blocks', 'next'], action.next);\n  case DOMAIN_BLOCKS_EXPAND_SUCCESS:\n    return state.updateIn(['blocks', 'items'], set => set.union(action.domains)).setIn(['blocks', 'next'], action.next);\n  case DOMAIN_UNBLOCK_SUCCESS:\n    return state.updateIn(['blocks', 'items'], set => set.delete(action.domain));\n  default:\n    return state;\n  }\n}\n","import { ACCOUNT_IMPORT, ACCOUNTS_IMPORT } from 'flavours/glitch/actions/importer';\nimport { ACCOUNT_REVEAL } from 'flavours/glitch/actions/accounts';\nimport { Map as ImmutableMap, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap();\n\nconst normalizeAccount = (state, account) => {\n  account = { ...account };\n\n  delete account.followers_count;\n  delete account.following_count;\n  delete account.statuses_count;\n\n  account.hidden = state.getIn([account.id, 'hidden']) === false ? false : account.limited;\n\n  return state.set(account.id, fromJS(account));\n};\n\nconst normalizeAccounts = (state, accounts) => {\n  accounts.forEach(account => {\n    state = normalizeAccount(state, account);\n  });\n\n  return state;\n};\n\nexport default function accounts(state = initialState, action) {\n  switch(action.type) {\n  case ACCOUNT_IMPORT:\n    return normalizeAccount(state, action.account);\n  case ACCOUNTS_IMPORT:\n    return normalizeAccounts(state, action.accounts);\n  case ACCOUNT_REVEAL:\n    return state.setIn([action.id, 'hidden'], false);\n  default:\n    return state;\n  }\n}\n","import {\n  ACCOUNT_FOLLOW_SUCCESS,\n  ACCOUNT_UNFOLLOW_SUCCESS,\n} from '../actions/accounts';\nimport { ACCOUNT_IMPORT, ACCOUNTS_IMPORT } from '../actions/importer';\nimport { Map as ImmutableMap, fromJS } from 'immutable';\n\nconst normalizeAccount = (state, account) => state.set(account.id, fromJS({\n  followers_count: account.followers_count,\n  following_count: account.following_count,\n  statuses_count: account.statuses_count,\n}));\n\nconst normalizeAccounts = (state, accounts) => {\n  accounts.forEach(account => {\n    state = normalizeAccount(state, account);\n  });\n\n  return state;\n};\n\nconst initialState = ImmutableMap();\n\nexport default function accountsCounters(state = initialState, action) {\n  switch(action.type) {\n  case ACCOUNT_IMPORT:\n    return normalizeAccount(state, action.account);\n  case ACCOUNTS_IMPORT:\n    return normalizeAccounts(state, action.accounts);\n  case ACCOUNT_FOLLOW_SUCCESS:\n    return action.alreadyFollowing ? state :\n      state.updateIn([action.relationship.id, 'followers_count'], num => num + 1);\n  case ACCOUNT_UNFOLLOW_SUCCESS:\n    return state.updateIn([action.relationship.id, 'followers_count'], num => Math.max(0, num - 1));\n  default:\n    return state;\n  }\n}\n","import {\n  REBLOG_REQUEST,\n  REBLOG_FAIL,\n  FAVOURITE_REQUEST,\n  FAVOURITE_FAIL,\n  UNFAVOURITE_SUCCESS,\n  BOOKMARK_REQUEST,\n  BOOKMARK_FAIL,\n  REACTION_UPDATE,\n  REACTION_ADD_FAIL,\n  REACTION_REMOVE_FAIL,\n  REACTION_ADD_REQUEST,\n  REACTION_REMOVE_REQUEST,\n} from 'flavours/glitch/actions/interactions';\nimport {\n  STATUS_MUTE_SUCCESS,\n  STATUS_UNMUTE_SUCCESS,\n  STATUS_REVEAL,\n  STATUS_HIDE,\n  STATUS_COLLAPSE,\n  STATUS_TRANSLATE_SUCCESS,\n  STATUS_TRANSLATE_UNDO,\n  STATUS_FETCH_REQUEST,\n  STATUS_FETCH_FAIL,\n} from 'flavours/glitch/actions/statuses';\nimport {\n  TIMELINE_DELETE,\n} from 'flavours/glitch/actions/timelines';\nimport { STATUS_IMPORT, STATUSES_IMPORT } from '../actions/importer';\nimport { Map as ImmutableMap, fromJS } from 'immutable';\n\nconst importStatus = (state, status) => state.set(status.id, fromJS(status));\n\nconst importStatuses = (state, statuses) =>\n  state.withMutations(mutable => statuses.forEach(status => importStatus(mutable, status)));\n\nconst deleteStatus = (state, id, references) => {\n  references.forEach(ref => {\n    state = deleteStatus(state, ref, []);\n  });\n\n  return state.delete(id);\n};\n\nconst updateReaction = (state, id, name, updater) => state.update(\n  id,\n  status => status.update(\n    'reactions',\n    reactions => {\n      const index = reactions.findIndex(reaction => reaction.get('name') === name);\n      if (index > -1) {\n        return reactions.update(index, reaction => updater(reaction));\n      } else {\n        return reactions.push(updater(fromJS({ name, count: 0 })));\n      }\n    },\n  ),\n);\n\nconst updateReactionCount = (state, reaction) => updateReaction(state, reaction.status_id, reaction.name, x => x.set('count', reaction.count));\n\n// The url parameter is only used when adding a new custom emoji reaction\n// (one that wasn't in the reactions list before) because we don't have its\n// URL yet.  In all other cases, it's undefined.\nconst addReaction = (state, id, name, url) => updateReaction(\n  state,\n  id,\n  name,\n  x => x.set('me', true)\n    .update('count', n => n + 1)\n    .update('url', old => old ? old : url)\n    .update('static_url', old => old ? old : url),\n);\n\nconst removeReaction = (state, id, name) => updateReaction(\n  state,\n  id,\n  name,\n  x => x.set('me', false).update('count', n => n - 1),\n);\n\nconst initialState = ImmutableMap();\n\nexport default function statuses(state = initialState, action) {\n  switch(action.type) {\n  case STATUS_FETCH_REQUEST:\n    return state.setIn([action.id, 'isLoading'], true);\n  case STATUS_FETCH_FAIL:\n    return state.delete(action.id);\n  case STATUS_IMPORT:\n    return importStatus(state, action.status);\n  case STATUSES_IMPORT:\n    return importStatuses(state, action.statuses);\n  case FAVOURITE_REQUEST:\n    return state.setIn([action.status.get('id'), 'favourited'], true);\n  case UNFAVOURITE_SUCCESS:\n    return state.updateIn([action.status.get('id'), 'favourites_count'], x => Math.max(0, x - 1));\n  case FAVOURITE_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'favourited'], false);\n  case BOOKMARK_REQUEST:\n    return state.setIn([action.status.get('id'), 'bookmarked'], true);\n  case BOOKMARK_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], false);\n  case REBLOG_REQUEST:\n    return state.setIn([action.status.get('id'), 'reblogged'], true);\n  case REBLOG_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'reblogged'], false);\n  case REACTION_UPDATE:\n    return updateReactionCount(state, action.reaction);\n  case REACTION_ADD_REQUEST:\n  case REACTION_REMOVE_FAIL:\n    return addReaction(state, action.id, action.name, action.url);\n  case REACTION_REMOVE_REQUEST:\n  case REACTION_ADD_FAIL:\n    return removeReaction(state, action.id, action.name);\n  case STATUS_MUTE_SUCCESS:\n    return state.setIn([action.id, 'muted'], true);\n  case STATUS_UNMUTE_SUCCESS:\n    return state.setIn([action.id, 'muted'], false);\n  case STATUS_REVEAL:\n    return state.withMutations(map => {\n      action.ids.forEach(id => {\n        if (!(state.get(id) === undefined)) {\n          map.setIn([id, 'hidden'], false);\n        }\n      });\n    });\n  case STATUS_HIDE:\n    return state.withMutations(map => {\n      action.ids.forEach(id => {\n        if (!(state.get(id) === undefined)) {\n          map.setIn([id, 'hidden'], true);\n        }\n      });\n    });\n  case STATUS_COLLAPSE:\n    return state.setIn([action.id, 'collapsed'], action.isCollapsed);\n  case TIMELINE_DELETE:\n    return deleteStatus(state, action.id, action.references);\n  case STATUS_TRANSLATE_SUCCESS:\n    return state.setIn([action.id, 'translation'], fromJS(action.translation));\n  case STATUS_TRANSLATE_UNDO:\n    return state.deleteIn([action.id, 'translation']);\n  default:\n    return state;\n  }\n}\n","import {\n  NOTIFICATIONS_UPDATE,\n} from '../actions/notifications';\nimport {\n  ACCOUNT_FOLLOW_SUCCESS,\n  ACCOUNT_FOLLOW_REQUEST,\n  ACCOUNT_FOLLOW_FAIL,\n  ACCOUNT_UNFOLLOW_SUCCESS,\n  ACCOUNT_UNFOLLOW_REQUEST,\n  ACCOUNT_UNFOLLOW_FAIL,\n  ACCOUNT_BLOCK_SUCCESS,\n  ACCOUNT_UNBLOCK_SUCCESS,\n  ACCOUNT_MUTE_SUCCESS,\n  ACCOUNT_UNMUTE_SUCCESS,\n  ACCOUNT_PIN_SUCCESS,\n  ACCOUNT_UNPIN_SUCCESS,\n  RELATIONSHIPS_FETCH_SUCCESS,\n  FOLLOW_REQUEST_AUTHORIZE_SUCCESS,\n  FOLLOW_REQUEST_REJECT_SUCCESS,\n} from 'flavours/glitch/actions/accounts';\nimport {\n  DOMAIN_BLOCK_SUCCESS,\n  DOMAIN_UNBLOCK_SUCCESS,\n} from 'flavours/glitch/actions/domain_blocks';\nimport {\n  ACCOUNT_NOTE_SUBMIT_SUCCESS,\n} from 'flavours/glitch/actions/account_notes';\nimport { Map as ImmutableMap, fromJS } from 'immutable';\n\nconst normalizeRelationship = (state, relationship) => state.set(relationship.id, fromJS(relationship));\n\nconst normalizeRelationships = (state, relationships) => {\n  relationships.forEach(relationship => {\n    state = normalizeRelationship(state, relationship);\n  });\n\n  return state;\n};\n\nconst setDomainBlocking = (state, accounts, blocking) => {\n  return state.withMutations(map => {\n    accounts.forEach(id => {\n      map.setIn([id, 'domain_blocking'], blocking);\n    });\n  });\n};\n\nconst initialState = ImmutableMap();\n\nexport default function relationships(state = initialState, action) {\n  switch(action.type) {\n  case FOLLOW_REQUEST_AUTHORIZE_SUCCESS:\n    return state.setIn([action.id, 'followed_by'], true).setIn([action.id, 'requested_by'], false);\n  case FOLLOW_REQUEST_REJECT_SUCCESS:\n    return state.setIn([action.id, 'followed_by'], false).setIn([action.id, 'requested_by'], false);\n  case NOTIFICATIONS_UPDATE:\n    return action.notification.type === 'follow_request' ? state.setIn([action.notification.account.id, 'requested_by'], true) : state;\n  case ACCOUNT_FOLLOW_REQUEST:\n    return state.getIn([action.id, 'following']) ? state : state.setIn([action.id, action.locked ? 'requested' : 'following'], true);\n  case ACCOUNT_FOLLOW_FAIL:\n    return state.setIn([action.id, action.locked ? 'requested' : 'following'], false);\n  case ACCOUNT_UNFOLLOW_REQUEST:\n    return state.setIn([action.id, 'following'], false);\n  case ACCOUNT_UNFOLLOW_FAIL:\n    return state.setIn([action.id, 'following'], true);\n  case ACCOUNT_FOLLOW_SUCCESS:\n  case ACCOUNT_UNFOLLOW_SUCCESS:\n  case ACCOUNT_BLOCK_SUCCESS:\n  case ACCOUNT_UNBLOCK_SUCCESS:\n  case ACCOUNT_MUTE_SUCCESS:\n  case ACCOUNT_UNMUTE_SUCCESS:\n  case ACCOUNT_PIN_SUCCESS:\n  case ACCOUNT_UNPIN_SUCCESS:\n  case ACCOUNT_NOTE_SUBMIT_SUCCESS:\n    return normalizeRelationship(state, action.relationship);\n  case RELATIONSHIPS_FETCH_SUCCESS:\n    return normalizeRelationships(state, action.relationships);\n  case DOMAIN_BLOCK_SUCCESS:\n    return setDomainBlocking(state, action.accounts, true);\n  case DOMAIN_UNBLOCK_SUCCESS:\n    return setDomainBlocking(state, action.accounts, false);\n  default:\n    return state;\n  }\n}\n","export default function uuid(a) {\n  return a ? (a^Math.random() * 16 >> a / 4).toString(16) : ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, uuid);\n}\n","import { SETTING_CHANGE, SETTING_SAVE } from 'flavours/glitch/actions/settings';\nimport { NOTIFICATIONS_FILTER_SET } from 'flavours/glitch/actions/notifications';\nimport { COLUMN_ADD, COLUMN_REMOVE, COLUMN_MOVE, COLUMN_PARAMS_CHANGE } from 'flavours/glitch/actions/columns';\nimport { STORE_HYDRATE } from 'flavours/glitch/actions/store';\nimport { EMOJI_USE } from 'flavours/glitch/actions/emojis';\nimport { LANGUAGE_USE } from 'flavours/glitch/actions/languages';\nimport { LIST_DELETE_SUCCESS, LIST_FETCH_FAIL } from '../actions/lists';\nimport { Map as ImmutableMap, fromJS } from 'immutable';\nimport uuid from '../uuid';\n\nconst initialState = ImmutableMap({\n  saved: true,\n\n  onboarded: false,\n  layout: 'auto',\n\n  skinTone: 1,\n\n  trends: ImmutableMap({\n    show: true,\n  }),\n\n  home: ImmutableMap({\n    shows: ImmutableMap({\n      reblog: true,\n      reply: true,\n      direct: true,\n    }),\n\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  notifications: ImmutableMap({\n    alerts: ImmutableMap({\n      follow: false,\n      follow_request: false,\n      favourite: false,\n      reaction: false,\n      reblog: false,\n      mention: false,\n      poll: false,\n      status: false,\n      update: false,\n      'admin.sign_up': false,\n      'admin.report': false,\n    }),\n\n    quickFilter: ImmutableMap({\n      active: 'all',\n      show: true,\n      advanced: false,\n    }),\n\n    dismissPermissionBanner: false,\n    showUnread: true,\n\n    shows: ImmutableMap({\n      follow: true,\n      follow_request: false,\n      favourite: true,\n      reblog: true,\n      reaction: true,\n      mention: true,\n      poll: true,\n      status: true,\n      update: true,\n      'admin.sign_up': true,\n      'admin.report': true,\n    }),\n\n    sounds: ImmutableMap({\n      follow: true,\n      follow_request: false,\n      favourite: true,\n      reblog: true,\n      reaction: true,\n      mention: true,\n      poll: true,\n      status: true,\n      update: true,\n      'admin.sign_up': true,\n      'admin.report': true,\n    }),\n\n    grouping: ImmutableMap({\n      reaction: true,\n      favourite: true,\n      reblog: true,\n    }),\n  }),\n\n  community: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  public: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  direct: ImmutableMap({\n    conversations: true,\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n});\n\nconst defaultColumns = fromJS([\n  { id: 'COMPOSE', uuid: uuid(), params: {} },\n  { id: 'HOME', uuid: uuid(), params: {} },\n  { id: 'NOTIFICATIONS', uuid: uuid(), params: {} },\n]);\n\nconst hydrate = (state, settings) => state.mergeDeep(settings).update('columns', (val = defaultColumns) => val);\n\nconst moveColumn = (state, uuid, direction) => {\n  const columns  = state.get('columns');\n  const index    = columns.findIndex(item => item.get('uuid') === uuid);\n  const newIndex = index + direction;\n\n  let newColumns;\n\n  newColumns = columns.splice(index, 1);\n  newColumns = newColumns.splice(newIndex, 0, columns.get(index));\n\n  return state\n    .set('columns', newColumns)\n    .set('saved', false);\n};\n\nconst changeColumnParams = (state, uuid, path, value) => {\n  const columns = state.get('columns');\n  const index   = columns.findIndex(item => item.get('uuid') === uuid);\n\n  const newColumns = columns.update(index, column => column.updateIn(['params', ...path], () => value));\n\n  return state\n    .set('columns', newColumns)\n    .set('saved', false);\n};\n\nconst updateFrequentEmojis = (state, emoji) => state.update('frequentlyUsedEmojis', ImmutableMap(), map => map.update(emoji.id, 0, count => count + 1)).set('saved', false);\n\nconst updateFrequentLanguages = (state, language) => state.update('frequentlyUsedLanguages', ImmutableMap(), map => map.update(language, 0, count => count + 1)).set('saved', false);\n\nconst filterDeadListColumns = (state, listId) => state.update('columns', columns => columns.filterNot(column => column.get('id') === 'LIST' && column.get('params').get('id') === listId));\n\nexport default function settings(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('settings'));\n  case NOTIFICATIONS_FILTER_SET:\n  case SETTING_CHANGE:\n    return state\n      .setIn(action.path, action.value)\n      .set('saved', false);\n  case COLUMN_ADD:\n    return state\n      .update('columns', list => list.push(fromJS({ id: action.id, uuid: uuid(), params: action.params })))\n      .set('saved', false);\n  case COLUMN_REMOVE:\n    return state\n      .update('columns', list => list.filterNot(item => item.get('uuid') === action.uuid))\n      .set('saved', false);\n  case COLUMN_MOVE:\n    return moveColumn(state, action.uuid, action.direction);\n  case COLUMN_PARAMS_CHANGE:\n    return changeColumnParams(state, action.uuid, action.path, action.value);\n  case EMOJI_USE:\n    return updateFrequentEmojis(state, action.emoji);\n  case LANGUAGE_USE:\n    return updateFrequentLanguages(state, action.language);\n  case SETTING_SAVE:\n    return state.set('saved', true);\n  case LIST_FETCH_FAIL:\n    return action.error.response.status === 404 ? filterDeadListColumns(state, action.id) : state;\n  case LIST_DELETE_SUCCESS:\n    return filterDeadListColumns(state, action.id);\n  default:\n    return state;\n  }\n}\n","//  Package imports.\nimport { Map as ImmutableMap } from 'immutable';\n\n//  Our imports.\nimport { STORE_HYDRATE } from 'flavours/glitch/actions/store';\nimport { LOCAL_SETTING_CHANGE, LOCAL_SETTING_DELETE } from 'flavours/glitch/actions/local_settings';\n\nconst initialState = ImmutableMap({\n  layout    : 'auto',\n  stretch   : true,\n  navbar_under : false,\n  side_arm  : 'none',\n  side_arm_reply_mode : 'keep',\n  show_reply_count : false,\n  zoom_emojis_on_hover : true,\n  always_show_spoilers_field: false,\n  confirm_missing_media_description: false,\n  confirm_boost_missing_media_description: false,\n  confirm_before_clearing_draft: true,\n  prepend_cw_re: true,\n  preselect_on_reply: true,\n  inline_preview_cards: true,\n  hicolor_privacy_icons: false,\n  show_content_type_choice: false,\n  tag_misleading_links: true,\n  rewrite_mentions: 'no',\n  content_warnings : ImmutableMap({\n    filter       : null,\n    media_outside: false,\n    shared_state : false,\n  }),\n  collapsed : ImmutableMap({\n    enabled     : true,\n    auto        : ImmutableMap({\n      all              : false,\n      notifications    : true,\n      lengthy          : true,\n      reblogs          : false,\n      replies          : false,\n      media            : false,\n      height           : 500,\n    }),\n    backgrounds : ImmutableMap({\n      user_backgrounds : false,\n      preview_images   : false,\n    }),\n    show_action_bar : true,\n  }),\n  media     : ImmutableMap({\n    letterbox        : true,\n    fullwidth        : true,\n    reveal_behind_cw : false,\n    pop_in_player    : true,\n    pop_in_position  : 'right',\n  }),\n  notifications : ImmutableMap({\n    favicon_badge : false,\n    tab_badge     : true,\n  }),\n  status_icons : ImmutableMap({\n    language:   true,\n    reply:      true,\n    local_only: true,\n    media:      true,\n    visibility: true,\n  }),\n});\n\nconst hydrate = (state, localSettings) => state.mergeDeep(localSettings);\n\nexport default function localSettings(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('local_settings'));\n  case LOCAL_SETTING_CHANGE:\n    return state.setIn(action.key, action.value);\n  case LOCAL_SETTING_DELETE:\n    return state.deleteIn(action.key);\n  default:\n    return state;\n  }\n}\n","import { STORE_HYDRATE } from 'flavours/glitch/actions/store';\nimport { SET_BROWSER_SUPPORT, SET_SUBSCRIPTION, CLEAR_SUBSCRIPTION, SET_ALERTS } from 'flavours/glitch/actions/push_notifications';\nimport Immutable from 'immutable';\n\nconst initialState = Immutable.Map({\n  subscription: null,\n  alerts: new Immutable.Map({\n    follow: false,\n    follow_request: false,\n    favourite: false,\n    reblog: false,\n    mention: false,\n    poll: false,\n  }),\n  isSubscribed: false,\n  browserSupport: false,\n});\n\nexport default function push_subscriptions(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE: {\n    const push_subscription = action.state.get('push_subscription');\n\n    if (push_subscription) {\n      return state\n        .set('subscription', new Immutable.Map({\n          id: push_subscription.get('id'),\n          endpoint: push_subscription.get('endpoint'),\n        }))\n        .set('alerts', push_subscription.get('alerts') || initialState.get('alerts'))\n        .set('isSubscribed', true);\n    }\n\n    return state;\n  }\n  case SET_SUBSCRIPTION:\n    return state\n      .set('subscription', new Immutable.Map({\n        id: action.subscription.id,\n        endpoint: action.subscription.endpoint,\n      }))\n      .set('alerts', new Immutable.Map(action.subscription.alerts))\n      .set('isSubscribed', true);\n  case SET_BROWSER_SUPPORT:\n    return state.set('browserSupport', action.value);\n  case CLEAR_SUBSCRIPTION:\n    return initialState;\n  case SET_ALERTS:\n    return state.setIn(action.path, action.value);\n  default:\n    return state;\n  }\n}\n","import {\n  FAVOURITED_STATUSES_FETCH_REQUEST,\n  FAVOURITED_STATUSES_FETCH_SUCCESS,\n  FAVOURITED_STATUSES_FETCH_FAIL,\n  FAVOURITED_STATUSES_EXPAND_REQUEST,\n  FAVOURITED_STATUSES_EXPAND_SUCCESS,\n  FAVOURITED_STATUSES_EXPAND_FAIL,\n} from 'flavours/glitch/actions/favourites';\nimport {\n  BOOKMARKED_STATUSES_FETCH_REQUEST,\n  BOOKMARKED_STATUSES_FETCH_SUCCESS,\n  BOOKMARKED_STATUSES_FETCH_FAIL,\n  BOOKMARKED_STATUSES_EXPAND_REQUEST,\n  BOOKMARKED_STATUSES_EXPAND_SUCCESS,\n  BOOKMARKED_STATUSES_EXPAND_FAIL,\n} from 'flavours/glitch/actions/bookmarks';\nimport {\n  PINNED_STATUSES_FETCH_SUCCESS,\n} from 'flavours/glitch/actions/pin_statuses';\nimport {\n  TRENDS_STATUSES_FETCH_REQUEST,\n  TRENDS_STATUSES_FETCH_SUCCESS,\n  TRENDS_STATUSES_FETCH_FAIL,\n  TRENDS_STATUSES_EXPAND_REQUEST,\n  TRENDS_STATUSES_EXPAND_SUCCESS,\n  TRENDS_STATUSES_EXPAND_FAIL,\n} from 'flavours/glitch/actions/trends';\nimport { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet } from 'immutable';\nimport {\n  FAVOURITE_SUCCESS,\n  UNFAVOURITE_SUCCESS,\n  BOOKMARK_SUCCESS,\n  UNBOOKMARK_SUCCESS,\n  PIN_SUCCESS,\n  UNPIN_SUCCESS,\n} from 'flavours/glitch/actions/interactions';\nimport {\n  ACCOUNT_BLOCK_SUCCESS,\n  ACCOUNT_MUTE_SUCCESS,\n} from 'flavours/glitch/actions/accounts';\n\nconst initialState = ImmutableMap({\n  favourites: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  bookmarks: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  pins: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  trending: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n});\n\nconst normalizeList = (state, listType, statuses, next) => {\n  return state.update(listType, listMap => listMap.withMutations(map => {\n    map.set('next', next);\n    map.set('loaded', true);\n    map.set('isLoading', false);\n    map.set('items', ImmutableOrderedSet(statuses.map(item => item.id)));\n  }));\n};\n\nconst appendToList = (state, listType, statuses, next) => {\n  return state.update(listType, listMap => listMap.withMutations(map => {\n    map.set('next', next);\n    map.set('isLoading', false);\n    map.set('items', map.get('items').union(statuses.map(item => item.id)));\n  }));\n};\n\nconst prependOneToList = (state, listType, status) => {\n  return state.updateIn([listType, 'items'], (list) => {\n    if (list.includes(status.get('id'))) {\n      return list;\n    } else {\n      return ImmutableOrderedSet([status.get('id')]).union(list);\n    }\n  });\n};\n\nconst removeOneFromList = (state, listType, status) => {\n  return state.updateIn([listType, 'items'], (list) => list.delete(status.get('id')));\n};\n\nexport default function statusLists(state = initialState, action) {\n  switch(action.type) {\n  case FAVOURITED_STATUSES_FETCH_REQUEST:\n  case FAVOURITED_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['favourites', 'isLoading'], true);\n  case FAVOURITED_STATUSES_FETCH_FAIL:\n  case FAVOURITED_STATUSES_EXPAND_FAIL:\n    return state.setIn(['favourites', 'isLoading'], false);\n  case FAVOURITED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'favourites', action.statuses, action.next);\n  case FAVOURITED_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'favourites', action.statuses, action.next);\n  case BOOKMARKED_STATUSES_FETCH_REQUEST:\n  case BOOKMARKED_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['bookmarks', 'isLoading'], true);\n  case BOOKMARKED_STATUSES_FETCH_FAIL:\n  case BOOKMARKED_STATUSES_EXPAND_FAIL:\n    return state.setIn(['bookmarks', 'isLoading'], false);\n  case BOOKMARKED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'bookmarks', action.statuses, action.next);\n  case BOOKMARKED_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'bookmarks', action.statuses, action.next);\n  case TRENDS_STATUSES_FETCH_REQUEST:\n  case TRENDS_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['trending', 'isLoading'], true);\n  case TRENDS_STATUSES_FETCH_FAIL:\n  case TRENDS_STATUSES_EXPAND_FAIL:\n    return state.setIn(['trending', 'isLoading'], false);\n  case TRENDS_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'trending', action.statuses, action.next);\n  case TRENDS_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'trending', action.statuses, action.next);\n  case FAVOURITE_SUCCESS:\n    return prependOneToList(state, 'favourites', action.status);\n  case UNFAVOURITE_SUCCESS:\n    return removeOneFromList(state, 'favourites', action.status);\n  case BOOKMARK_SUCCESS:\n    return prependOneToList(state, 'bookmarks', action.status);\n  case UNBOOKMARK_SUCCESS:\n    return removeOneFromList(state, 'bookmarks', action.status);\n  case PINNED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'pins', action.statuses, action.next);\n  case PIN_SUCCESS:\n    return prependOneToList(state, 'pins', action.status);\n  case UNPIN_SUCCESS:\n    return removeOneFromList(state, 'pins', action.status);\n  case ACCOUNT_BLOCK_SUCCESS:\n  case ACCOUNT_MUTE_SUCCESS:\n    return state.updateIn(['trending', 'items'], ImmutableOrderedSet(), list => list.filterNot(statusId => action.statuses.getIn([statusId, 'account']) === action.relationship.id));\n  default:\n    return state;\n  }\n}\n","import Immutable from 'immutable';\n\nimport {\n  MUTES_INIT_MODAL,\n  MUTES_TOGGLE_HIDE_NOTIFICATIONS,\n  MUTES_CHANGE_DURATION,\n} from 'flavours/glitch/actions/mutes';\n\nconst initialState = Immutable.Map({\n  new: Immutable.Map({\n    account: null,\n    notifications: true,\n    duration: 0,\n  }),\n});\n\nexport default function mutes(state = initialState, action) {\n  switch (action.type) {\n  case MUTES_INIT_MODAL:\n    return state.withMutations((state) => {\n      state.setIn(['new', 'account'], action.account);\n      state.setIn(['new', 'notifications'], true);\n    });\n  case MUTES_TOGGLE_HIDE_NOTIFICATIONS:\n    return state.updateIn(['new', 'notifications'], (old) => !old);\n  case MUTES_CHANGE_DURATION:\n    return state.setIn(['new', 'duration'], Number(action.duration));\n  default:\n    return state;\n  }\n}\n","import Immutable from 'immutable';\n\nimport {\n  BLOCKS_INIT_MODAL,\n} from '../actions/blocks';\n\nconst initialState = Immutable.Map({\n  new: Immutable.Map({\n    account_id: null,\n  }),\n});\n\nexport default function mutes(state = initialState, action) {\n  switch (action.type) {\n  case BLOCKS_INIT_MODAL:\n    return state.withMutations((state) => {\n      state.setIn(['new', 'account_id'], action.account.get('id'));\n    });\n  default:\n    return state;\n  }\n}\n","import {\n  SERVER_FETCH_REQUEST,\n  SERVER_FETCH_SUCCESS,\n  SERVER_FETCH_FAIL,\n  EXTENDED_DESCRIPTION_REQUEST,\n  EXTENDED_DESCRIPTION_SUCCESS,\n  EXTENDED_DESCRIPTION_FAIL,\n  SERVER_DOMAIN_BLOCKS_FETCH_REQUEST,\n  SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS,\n  SERVER_DOMAIN_BLOCKS_FETCH_FAIL,\n} from 'flavours/glitch/actions/server';\nimport { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap({\n  server: ImmutableMap({\n    isLoading: true,\n  }),\n\n  extendedDescription: ImmutableMap({\n    isLoading: true,\n  }),\n\n  domainBlocks: ImmutableMap({\n    isLoading: true,\n    isAvailable: true,\n    items: ImmutableList(),\n  }),\n});\n\nexport default function server(state = initialState, action) {\n  switch (action.type) {\n  case SERVER_FETCH_REQUEST:\n    return state.setIn(['server', 'isLoading'], true);\n  case SERVER_FETCH_SUCCESS:\n    return state.set('server', fromJS(action.server)).setIn(['server', 'isLoading'], false);\n  case SERVER_FETCH_FAIL:\n    return state.setIn(['server', 'isLoading'], false);\n  case EXTENDED_DESCRIPTION_REQUEST:\n    return state.setIn(['extendedDescription', 'isLoading'], true);\n  case EXTENDED_DESCRIPTION_SUCCESS:\n    return state.set('extendedDescription', fromJS(action.description)).setIn(['extendedDescription', 'isLoading'], false);\n  case EXTENDED_DESCRIPTION_FAIL:\n    return state.setIn(['extendedDescription', 'isLoading'], false);\n  case SERVER_DOMAIN_BLOCKS_FETCH_REQUEST:\n    return state.setIn(['domainBlocks', 'isLoading'], true);\n  case SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS:\n    return state.setIn(['domainBlocks', 'items'], fromJS(action.blocks)).setIn(['domainBlocks', 'isLoading'], false).setIn(['domainBlocks', 'isAvailable'], action.isAvailable);\n  case SERVER_DOMAIN_BLOCKS_FETCH_FAIL:\n    return state.setIn(['domainBlocks', 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import Immutable from 'immutable';\n\nimport {\n  BOOSTS_INIT_MODAL,\n  BOOSTS_CHANGE_PRIVACY,\n} from 'flavours/glitch/actions/boosts';\n\nconst initialState = Immutable.Map({\n  new: Immutable.Map({\n    privacy: 'public',\n  }),\n});\n\nexport default function mutes(state = initialState, action) {\n  switch (action.type) {\n  case BOOSTS_INIT_MODAL:\n    return state.withMutations((state) => {\n      state.setIn(['new', 'privacy'], action.privacy);\n    });\n  case BOOSTS_CHANGE_PRIVACY:\n    return state.setIn(['new', 'privacy'], action.privacy);\n  default:\n    return state;\n  }\n}\n","import {\n  ACCOUNT_BLOCK_SUCCESS,\n  ACCOUNT_MUTE_SUCCESS,\n} from 'flavours/glitch/actions/accounts';\nimport { CONTEXT_FETCH_SUCCESS } from 'flavours/glitch/actions/statuses';\nimport { TIMELINE_DELETE, TIMELINE_UPDATE } from 'flavours/glitch/actions/timelines';\nimport { Map as ImmutableMap, List as ImmutableList } from 'immutable';\nimport compareId from '../compare_id';\n\nconst initialState = ImmutableMap({\n  inReplyTos: ImmutableMap(),\n  replies: ImmutableMap(),\n});\n\nconst normalizeContext = (immutableState, id, ancestors, descendants) => immutableState.withMutations(state => {\n  state.update('inReplyTos', immutableAncestors => immutableAncestors.withMutations(inReplyTos => {\n    state.update('replies', immutableDescendants => immutableDescendants.withMutations(replies => {\n      function addReply({ id, in_reply_to_id }) {\n        if (in_reply_to_id && !inReplyTos.has(id)) {\n\n          replies.update(in_reply_to_id, ImmutableList(), siblings => {\n            const index = siblings.findLastIndex(sibling => compareId(sibling, id) < 0);\n            return siblings.insert(index + 1, id);\n          });\n\n          inReplyTos.set(id, in_reply_to_id);\n        }\n      }\n\n      // We know in_reply_to_id of statuses but `id` itself.\n      // So we assume that the status of the id replies to last ancestors.\n\n      ancestors.forEach(addReply);\n\n      if (ancestors[0]) {\n        addReply({ id, in_reply_to_id: ancestors[ancestors.length - 1].id });\n      }\n\n      descendants.forEach(addReply);\n    }));\n  }));\n});\n\nconst deleteFromContexts = (immutableState, ids) => immutableState.withMutations(state => {\n  state.update('inReplyTos', immutableAncestors => immutableAncestors.withMutations(inReplyTos => {\n    state.update('replies', immutableDescendants => immutableDescendants.withMutations(replies => {\n      ids.forEach(id => {\n        const inReplyToIdOfId = inReplyTos.get(id);\n        const repliesOfId = replies.get(id);\n        const siblings = replies.get(inReplyToIdOfId);\n\n        if (siblings) {\n          replies.set(inReplyToIdOfId, siblings.filterNot(sibling => sibling === id));\n        }\n\n\n        if (repliesOfId) {\n          repliesOfId.forEach(reply => inReplyTos.delete(reply));\n        }\n\n        inReplyTos.delete(id);\n        replies.delete(id);\n      });\n    }));\n  }));\n});\n\nconst filterContexts = (state, relationship, statuses) => {\n  const ownedStatusIds = statuses.filter(status => status.get('account') === relationship.id)\n    .map(status => status.get('id'));\n\n  return deleteFromContexts(state, ownedStatusIds);\n};\n\nconst updateContext = (state, status) => {\n  if (status.in_reply_to_id) {\n    return state.withMutations(mutable => {\n      const replies = mutable.getIn(['replies', status.in_reply_to_id], ImmutableList());\n\n      mutable.setIn(['inReplyTos', status.id], status.in_reply_to_id);\n\n      if (!replies.includes(status.id)) {\n        mutable.setIn(['replies', status.in_reply_to_id], replies.push(status.id));\n      }\n    });\n  }\n\n  return state;\n};\n\nexport default function replies(state = initialState, action) {\n  switch(action.type) {\n  case ACCOUNT_BLOCK_SUCCESS:\n  case ACCOUNT_MUTE_SUCCESS:\n    return filterContexts(state, action.relationship, action.statuses);\n  case CONTEXT_FETCH_SUCCESS:\n    return normalizeContext(state, action.id, action.ancestors, action.descendants);\n  case TIMELINE_DELETE:\n    return deleteFromContexts(state, [action.id]);\n  case TIMELINE_UPDATE:\n    return updateContext(state, action.status);\n  default:\n    return state;\n  }\n}\n","//  This function returns the new value unless it is `null` or\n//  `undefined`, in which case it returns the old one.\nexport function overwrite (oldVal, newVal) {\n  return newVal === null || typeof newVal === 'undefined' ? oldVal : newVal;\n}\n","import {\n  COMPOSE_MOUNT,\n  COMPOSE_UNMOUNT,\n  COMPOSE_CHANGE,\n  COMPOSE_CYCLE_ELEFRIEND,\n  COMPOSE_REPLY,\n  COMPOSE_REPLY_CANCEL,\n  COMPOSE_DIRECT,\n  COMPOSE_MENTION,\n  COMPOSE_SUBMIT_REQUEST,\n  COMPOSE_SUBMIT_SUCCESS,\n  COMPOSE_SUBMIT_FAIL,\n  COMPOSE_UPLOAD_REQUEST,\n  COMPOSE_UPLOAD_SUCCESS,\n  COMPOSE_UPLOAD_FAIL,\n  COMPOSE_UPLOAD_UNDO,\n  COMPOSE_UPLOAD_PROGRESS,\n  COMPOSE_UPLOAD_PROCESSING,\n  THUMBNAIL_UPLOAD_REQUEST,\n  THUMBNAIL_UPLOAD_SUCCESS,\n  THUMBNAIL_UPLOAD_FAIL,\n  THUMBNAIL_UPLOAD_PROGRESS,\n  COMPOSE_SUGGESTIONS_CLEAR,\n  COMPOSE_SUGGESTIONS_READY,\n  COMPOSE_SUGGESTION_SELECT,\n  COMPOSE_SUGGESTION_IGNORE,\n  COMPOSE_SUGGESTION_TAGS_UPDATE,\n  COMPOSE_TAG_HISTORY_UPDATE,\n  COMPOSE_ADVANCED_OPTIONS_CHANGE,\n  COMPOSE_SENSITIVITY_CHANGE,\n  COMPOSE_SPOILERNESS_CHANGE,\n  COMPOSE_SPOILER_TEXT_CHANGE,\n  COMPOSE_VISIBILITY_CHANGE,\n  COMPOSE_LANGUAGE_CHANGE,\n  COMPOSE_CONTENT_TYPE_CHANGE,\n  COMPOSE_EMOJI_INSERT,\n  COMPOSE_UPLOAD_CHANGE_REQUEST,\n  COMPOSE_UPLOAD_CHANGE_SUCCESS,\n  COMPOSE_UPLOAD_CHANGE_FAIL,\n  COMPOSE_DOODLE_SET,\n  COMPOSE_RESET,\n  COMPOSE_POLL_ADD,\n  COMPOSE_POLL_REMOVE,\n  COMPOSE_POLL_OPTION_ADD,\n  COMPOSE_POLL_OPTION_CHANGE,\n  COMPOSE_POLL_OPTION_REMOVE,\n  COMPOSE_POLL_SETTINGS_CHANGE,\n  INIT_MEDIA_EDIT_MODAL,\n  COMPOSE_CHANGE_MEDIA_DESCRIPTION,\n  COMPOSE_CHANGE_MEDIA_FOCUS,\n  COMPOSE_SET_STATUS,\n} from 'flavours/glitch/actions/compose';\nimport { TIMELINE_DELETE } from 'flavours/glitch/actions/timelines';\nimport { STORE_HYDRATE } from 'flavours/glitch/actions/store';\nimport { REDRAFT } from 'flavours/glitch/actions/statuses';\nimport { Map as ImmutableMap, List as ImmutableList, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\nimport uuid from '../uuid';\nimport { privacyPreference } from 'flavours/glitch/utils/privacy_preference';\nimport { me, defaultContentType } from 'flavours/glitch/initial_state';\nimport { overwrite } from 'flavours/glitch/utils/js_helpers';\nimport { unescapeHTML } from 'flavours/glitch/utils/html';\nimport { recoverHashtags } from 'flavours/glitch/utils/hashtag';\n\nconst totalElefriends = 3;\n\n// ~4% chance you'll end up with an unexpected friend\n// glitch-soc/mastodon repo created_at date: 2017-04-20T21:55:28Z\nconst glitchProbability = 1 - 0.0420215528;\n\nconst initialState = ImmutableMap({\n  mounted: 0,\n  advanced_options: ImmutableMap({\n    do_not_federate: false,\n    threaded_mode: false,\n  }),\n  sensitive: false,\n  elefriend: Math.random() < glitchProbability ? Math.floor(Math.random() * totalElefriends) : totalElefriends,\n  spoiler: false,\n  spoiler_text: '',\n  privacy: null,\n  id: null,\n  content_type: defaultContentType || 'text/plain',\n  text: '',\n  focusDate: null,\n  caretPosition: null,\n  preselectDate: null,\n  in_reply_to: null,\n  is_submitting: false,\n  is_uploading: false,\n  is_changing_upload: false,\n  progress: 0,\n  isUploadingThumbnail: false,\n  thumbnailProgress: 0,\n  media_attachments: ImmutableList(),\n  pending_media_attachments: 0,\n  poll: null,\n  suggestion_token: null,\n  suggestions: ImmutableList(),\n  default_advanced_options: ImmutableMap({\n    do_not_federate: false,\n    threaded_mode: null,  //  Do not reset\n  }),\n  default_privacy: 'public',\n  default_sensitive: false,\n  default_language: 'en',\n  resetFileKey: Math.floor((Math.random() * 0x10000)),\n  idempotencyKey: null,\n  tagHistory: ImmutableList(),\n  media_modal: ImmutableMap({\n    id: null,\n    description: '',\n    focusX: 0,\n    focusY: 0,\n    dirty: false,\n  }),\n  doodle: ImmutableMap({\n    fg: 'rgb(  0,    0,    0)',\n    bg: 'rgb(255,  255,  255)',\n    swapped: false,\n    mode: 'draw',\n    size: 'normal',\n    weight: 2,\n    opacity: 1,\n    adaptiveStroke: true,\n    smoothing: false,\n  }),\n});\n\nconst initialPoll = ImmutableMap({\n  options: ImmutableList(['', '']),\n  expires_in: 24 * 3600,\n  multiple: false,\n});\n\nfunction statusToTextMentions(state, status) {\n  let set = ImmutableOrderedSet([]);\n\n  if (status.getIn(['account', 'id']) !== me) {\n    set = set.add(`@${status.getIn(['account', 'acct'])} `);\n  }\n\n  return set.union(status.get('mentions').filterNot(mention => mention.get('id') === me).map(mention => `@${mention.get('acct')} `)).join('');\n}\n\nfunction apiStatusToTextMentions (state, status) {\n  let set = ImmutableOrderedSet([]);\n\n  if (status.account.id !== me) {\n    set = set.add(`@${status.account.acct} `);\n  }\n\n  return set.union(status.mentions.filter(\n    mention => mention.id !== me,\n  ).map(\n    mention => `@${mention.acct} `,\n  )).join('');\n}\n\nfunction apiStatusToTextHashtags (state, status) {\n  const text = unescapeHTML(status.content);\n  return ImmutableOrderedSet([]).union(recoverHashtags(status.tags, text).map(\n    (name) => `#${name} `,\n  )).join('');\n}\n\nfunction clearAll(state) {\n  return state.withMutations(map => {\n    map.set('id', null);\n    map.set('text', '');\n    if (defaultContentType) map.set('content_type', defaultContentType);\n    map.set('spoiler', false);\n    map.set('spoiler_text', '');\n    map.set('is_submitting', false);\n    map.set('is_changing_upload', false);\n    map.set('in_reply_to', null);\n    map.update(\n      'advanced_options',\n      map => map.mergeWith(overwrite, state.get('default_advanced_options')),\n    );\n    map.set('privacy', state.get('default_privacy'));\n    map.set('sensitive', state.get('default_sensitive'));\n    map.set('language', state.get('default_language'));\n    map.update('media_attachments', list => list.clear());\n    map.set('poll', null);\n    map.set('idempotencyKey', uuid());\n  });\n}\n\nfunction continueThread (state, status) {\n  return state.withMutations(function (map) {\n    let text = apiStatusToTextMentions(state, status);\n    text = text + apiStatusToTextHashtags(state, status);\n    map.set('text', text);\n    if (status.spoiler_text) {\n      map.set('spoiler', true);\n      map.set('spoiler_text', status.spoiler_text);\n    } else {\n      map.set('spoiler', false);\n      map.set('spoiler_text', '');\n    }\n    map.set('is_submitting', false);\n    map.set('in_reply_to', status.id);\n    map.update(\n      'advanced_options',\n      map => map.merge(new ImmutableMap({ do_not_federate: status.local_only })),\n    );\n    map.set('privacy', status.visibility);\n    map.set('sensitive', false);\n    map.update('media_attachments', list => list.clear());\n    map.set('poll', null);\n    map.set('idempotencyKey', uuid());\n    map.set('focusDate', new Date());\n    map.set('caretPosition', null);\n    map.set('preselectDate', new Date());\n  });\n}\n\nfunction appendMedia(state, media, file) {\n  const prevSize = state.get('media_attachments').size;\n\n  return state.withMutations(map => {\n    if (media.get('type') === 'image') {\n      media = media.set('file', file);\n    }\n    map.update('media_attachments', list => list.push(media.set('unattached', true)));\n    map.set('is_uploading', false);\n    map.set('is_processing', false);\n    map.set('resetFileKey', Math.floor((Math.random() * 0x10000)));\n    map.set('idempotencyKey', uuid());\n    map.update('pending_media_attachments', n => n - 1);\n\n    if (prevSize === 0 && (state.get('default_sensitive') || state.get('spoiler'))) {\n      map.set('sensitive', true);\n    }\n  });\n}\n\nfunction removeMedia(state, mediaId) {\n  const prevSize = state.get('media_attachments').size;\n\n  return state.withMutations(map => {\n    map.update('media_attachments', list => list.filterNot(item => item.get('id') === mediaId));\n    map.set('idempotencyKey', uuid());\n\n    if (prevSize === 1) {\n      map.set('sensitive', false);\n    }\n  });\n}\n\nconst insertSuggestion = (state, position, token, completion, path) => {\n  return state.withMutations(map => {\n    map.updateIn(path, oldText => `${oldText.slice(0, position)}${completion}${completion[0] === ':' ? '\\u200B' : ' '}${oldText.slice(position + token.length)}`);\n    map.set('suggestion_token', null);\n    map.set('suggestions', ImmutableList());\n    if (path.length === 1 && path[0] === 'text') {\n      map.set('focusDate', new Date());\n      map.set('caretPosition', position + completion.length + 1);\n    }\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst ignoreSuggestion = (state, position, token, completion, path) => {\n  return state.withMutations(map => {\n    map.updateIn(path, oldText => `${oldText.slice(0, position + token.length)} ${oldText.slice(position + token.length)}`);\n    map.set('suggestion_token', null);\n    map.set('suggestions', ImmutableList());\n    map.set('focusDate', new Date());\n    map.set('caretPosition', position + token.length + 1);\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst sortHashtagsByUse = (state, tags) => {\n  const personalHistory = state.get('tagHistory').map(tag => tag.toLowerCase());\n\n  const tagsWithLowercase = tags.map(t => ({ ...t, lowerName: t.name.toLowerCase() }));\n  const sorted = tagsWithLowercase.sort((a, b) => {\n    const usedA = personalHistory.includes(a.lowerName);\n    const usedB = personalHistory.includes(b.lowerName);\n\n    if (usedA === usedB) {\n      return 0;\n    } else if (usedA && !usedB) {\n      return -1;\n    } else {\n      return 1;\n    }\n  });\n  sorted.forEach(tag => delete tag.lowerName);\n  return sorted;\n};\n\nconst insertEmoji = (state, position, emojiData) => {\n  const emoji = emojiData.native;\n\n  return state.withMutations(map => {\n    map.update('text', oldText => `${oldText.slice(0, position)}${emoji}\\u200B${oldText.slice(position)}`);\n    map.set('focusDate', new Date());\n    map.set('caretPosition', position + emoji.length + 1);\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst hydrate = (state, hydratedState) => {\n  state = clearAll(state.merge(hydratedState));\n\n  if (hydratedState.get('text')) {\n    state = state.set('text', hydratedState.get('text')).set('focusDate', new Date());\n  }\n\n  return state;\n};\n\nconst domParser = new DOMParser();\n\nconst expandMentions = status => {\n  const fragment = domParser.parseFromString(status.get('content'), 'text/html').documentElement;\n\n  status.get('mentions').forEach(mention => {\n    fragment.querySelector(`a[href=\"${mention.get('url')}\"]`).textContent = `@${mention.get('acct')}`;\n  });\n\n  return fragment.innerHTML;\n};\n\nconst expiresInFromExpiresAt = expires_at => {\n  if (!expires_at) return 24 * 3600;\n  const delta = (new Date(expires_at).getTime() - Date.now()) / 1000;\n  return [300, 1800, 3600, 21600, 86400, 259200, 604800].find(expires_in => expires_in >= delta) || 24 * 3600;\n};\n\nconst mergeLocalHashtagResults = (suggestions, prefix, tagHistory) => {\n  prefix = prefix.toLowerCase();\n  if (suggestions.length < 4) {\n    const localTags = tagHistory.filter(tag => tag.toLowerCase().startsWith(prefix) && !suggestions.some(suggestion => suggestion.type === 'hashtag' && suggestion.name.toLowerCase() === tag.toLowerCase()));\n    return suggestions.concat(localTags.slice(0, 4 - suggestions.length).toJS().map(tag => ({ type: 'hashtag', name: tag })));\n  } else {\n    return suggestions;\n  }\n};\n\nconst normalizeSuggestions = (state, { accounts, emojis, tags, token }) => {\n  if (accounts) {\n    return accounts.map(item => ({ id: item.id, type: 'account' }));\n  } else if (emojis) {\n    return emojis.map(item => ({ ...item, type: 'emoji' }));\n  } else {\n    return mergeLocalHashtagResults(sortHashtagsByUse(state, tags.map(item => ({ ...item, type: 'hashtag' }))), token.slice(1), state.get('tagHistory'));\n  }\n};\n\nconst updateSuggestionTags = (state, token) => {\n  const prefix = token.slice(1);\n\n  const suggestions = state.get('suggestions').toJS();\n  return state.merge({\n    suggestions: ImmutableList(mergeLocalHashtagResults(suggestions, prefix, state.get('tagHistory'))),\n    suggestion_token: token,\n  });\n};\n\nexport default function compose(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('compose'));\n  case COMPOSE_MOUNT:\n    return state.set('mounted', state.get('mounted') + 1);\n  case COMPOSE_UNMOUNT:\n    return state.set('mounted', Math.max(state.get('mounted') - 1, 0));\n  case COMPOSE_ADVANCED_OPTIONS_CHANGE:\n    return state\n      .set('advanced_options', state.get('advanced_options').set(action.option, !!overwrite(!state.getIn(['advanced_options', action.option]), action.value)))\n      .set('idempotencyKey', uuid());\n  case COMPOSE_SENSITIVITY_CHANGE:\n    return state.withMutations(map => {\n      if (!state.get('spoiler')) {\n        map.set('sensitive', !state.get('sensitive'));\n      }\n\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SPOILERNESS_CHANGE:\n    return state.withMutations(map => {\n      map.set('spoiler', !state.get('spoiler'));\n      map.set('idempotencyKey', uuid());\n\n      if (!state.get('sensitive') && state.get('media_attachments').size >= 1) {\n        map.set('sensitive', true);\n      }\n    });\n  case COMPOSE_SPOILER_TEXT_CHANGE:\n    return state\n      .set('spoiler_text', action.text)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_VISIBILITY_CHANGE:\n    return state\n      .set('privacy', action.value)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_CONTENT_TYPE_CHANGE:\n    return state\n      .set('content_type', action.value)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_CHANGE:\n    return state\n      .set('text', action.text)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_CYCLE_ELEFRIEND:\n    return state\n      .set('elefriend', (state.get('elefriend') + 1) % totalElefriends);\n  case COMPOSE_REPLY:\n    return state.withMutations(map => {\n      map.set('id', null);\n      map.set('in_reply_to', action.status.get('id'));\n      map.set('text', statusToTextMentions(state, action.status));\n      map.set('privacy', privacyPreference(action.status.get('visibility'), state.get('default_privacy')));\n      map.update(\n        'advanced_options',\n        map => map.merge(new ImmutableMap({ do_not_federate: !!action.status.get('local_only') })),\n      );\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('preselectDate', new Date());\n      map.set('idempotencyKey', uuid());\n\n      map.update('media_attachments', list => list.filter(media => media.get('unattached')));\n\n      if (action.status.get('language') && !action.status.has('translation')) {\n        map.set('language', action.status.get('language'));\n      } else {\n        map.set('language', state.get('default_language'));\n      }\n\n      if (action.status.get('spoiler_text').length > 0) {\n        let spoiler_text = action.status.get('spoiler_text');\n        if (action.prependCWRe && !spoiler_text.match(/^re[: ]/i)) {\n          spoiler_text = 're: '.concat(spoiler_text);\n        }\n        map.set('spoiler', true);\n        map.set('spoiler_text', spoiler_text);\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n    });\n  case COMPOSE_REPLY_CANCEL:\n    state = state.setIn(['advanced_options', 'threaded_mode'], false);\n  case COMPOSE_RESET:\n    return state.withMutations(map => {\n      map.set('in_reply_to', null);\n      if (defaultContentType) map.set('content_type', defaultContentType);\n      map.set('text', '');\n      map.set('spoiler', false);\n      map.set('spoiler_text', '');\n      map.set('privacy', state.get('default_privacy'));\n      map.set('id', null);\n      map.set('poll', null);\n      map.update(\n        'advanced_options',\n        map => map.mergeWith(overwrite, state.get('default_advanced_options')),\n      );\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SUBMIT_REQUEST:\n    return state.set('is_submitting', true);\n  case COMPOSE_UPLOAD_CHANGE_REQUEST:\n    return state.set('is_changing_upload', true);\n  case COMPOSE_SUBMIT_SUCCESS:\n    return action.status && state.getIn(['advanced_options', 'threaded_mode']) ? continueThread(state, action.status) : clearAll(state);\n  case COMPOSE_SUBMIT_FAIL:\n    return state.set('is_submitting', false);\n  case COMPOSE_UPLOAD_CHANGE_FAIL:\n    return state.set('is_changing_upload', false);\n  case COMPOSE_UPLOAD_REQUEST:\n    return state.set('is_uploading', true).update('pending_media_attachments', n => n + 1);\n  case COMPOSE_UPLOAD_PROCESSING:\n    return state.set('is_processing', true);\n  case COMPOSE_UPLOAD_SUCCESS:\n    return appendMedia(state, fromJS(action.media), action.file);\n  case COMPOSE_UPLOAD_FAIL:\n    return state.set('is_uploading', false).set('is_processing', false).update('pending_media_attachments', n => n - 1);\n  case COMPOSE_UPLOAD_UNDO:\n    return removeMedia(state, action.media_id);\n  case COMPOSE_UPLOAD_PROGRESS:\n    return state.set('progress', Math.round((action.loaded / action.total) * 100));\n  case THUMBNAIL_UPLOAD_REQUEST:\n    return state.set('isUploadingThumbnail', true);\n  case THUMBNAIL_UPLOAD_PROGRESS:\n    return state.set('thumbnailProgress', Math.round((action.loaded / action.total) * 100));\n  case THUMBNAIL_UPLOAD_FAIL:\n    return state.set('isUploadingThumbnail', false);\n  case THUMBNAIL_UPLOAD_SUCCESS:\n    return state\n      .set('isUploadingThumbnail', false)\n      .update('media_attachments', list => list.map(item => {\n        if (item.get('id') === action.media.id) {\n          return fromJS(action.media);\n        }\n\n        return item;\n      }));\n  case INIT_MEDIA_EDIT_MODAL:\n    const media =  state.get('media_attachments').find(item => item.get('id') === action.id);\n    return state.set('media_modal', ImmutableMap({\n      id: action.id,\n      description: media.get('description') || '',\n      focusX: media.getIn(['meta', 'focus', 'x'], 0),\n      focusY: media.getIn(['meta', 'focus', 'y'], 0),\n      dirty: false,\n    }));\n  case COMPOSE_CHANGE_MEDIA_DESCRIPTION:\n    return state.setIn(['media_modal', 'description'], action.description).setIn(['media_modal', 'dirty'], true);\n  case COMPOSE_CHANGE_MEDIA_FOCUS:\n    return state.setIn(['media_modal', 'focusX'], action.focusX).setIn(['media_modal', 'focusY'], action.focusY).setIn(['media_modal', 'dirty'], true);\n  case COMPOSE_MENTION:\n    return state.withMutations(map => {\n      map.update('text', text => [text.trim(), `@${action.account.get('acct')} `].filter((str) => str.length !== 0).join(' '));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_DIRECT:\n    return state.withMutations(map => {\n      map.update('text', text => [text.trim(), `@${action.account.get('acct')} `].filter((str) => str.length !== 0).join(' '));\n      map.set('privacy', 'direct');\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', ImmutableList(), list => list.clear()).set('suggestion_token', null);\n  case COMPOSE_SUGGESTIONS_READY:\n    return state.set('suggestions', ImmutableList(normalizeSuggestions(state, action))).set('suggestion_token', action.token);\n  case COMPOSE_SUGGESTION_SELECT:\n    return insertSuggestion(state, action.position, action.token, action.completion, action.path);\n  case COMPOSE_SUGGESTION_IGNORE:\n    return ignoreSuggestion(state, action.position, action.token, action.completion, action.path);\n  case COMPOSE_SUGGESTION_TAGS_UPDATE:\n    return updateSuggestionTags(state, action.token);\n  case COMPOSE_TAG_HISTORY_UPDATE:\n    return state.set('tagHistory', fromJS(action.tags));\n  case TIMELINE_DELETE:\n    if (action.id === state.get('in_reply_to')) {\n      return state.set('in_reply_to', null);\n    } else if (action.id === state.get('id')) {\n      return state.set('id', null);\n    } else {\n      return state;\n    }\n  case COMPOSE_EMOJI_INSERT:\n    return insertEmoji(state, action.position, action.emoji);\n  case COMPOSE_UPLOAD_CHANGE_SUCCESS:\n    return state\n      .set('is_changing_upload', false)\n      .setIn(['media_modal', 'dirty'], false)\n      .update('media_attachments', list => list.map(item => {\n        if (item.get('id') === action.media.id) {\n          return fromJS(action.media).set('unattached', !action.attached);\n        }\n\n        return item;\n      }));\n  case COMPOSE_DOODLE_SET:\n    return state.mergeIn(['doodle'], action.options);\n  case REDRAFT:\n    const do_not_federate = !!action.status.get('local_only');\n    let text = action.raw_text || unescapeHTML(expandMentions(action.status));\n    if (do_not_federate) text = text.replace(/ ?\\ufe0f?\\u200b?$/, '');\n    return state.withMutations(map => {\n      map.set('text', text);\n      map.set('content_type', action.content_type || 'text/plain');\n      map.set('in_reply_to', action.status.get('in_reply_to_id'));\n      map.set('privacy', action.status.get('visibility'));\n      map.set('media_attachments', action.status.get('media_attachments').map((media) => media.set('unattached', true)));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n      map.set('sensitive', action.status.get('sensitive'));\n      map.set('language', action.status.get('language'));\n      map.update(\n        'advanced_options',\n        map => map.merge(new ImmutableMap({ do_not_federate })),\n      );\n      map.set('id', null);\n\n      if (action.status.get('spoiler_text').length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.status.get('spoiler_text'));\n\n        if (map.get('media_attachments').size >= 1) {\n          map.set('sensitive', true);\n        }\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n\n      if (action.status.get('poll')) {\n        map.set('poll', ImmutableMap({\n          options: action.status.getIn(['poll', 'options']).map(x => x.get('title')),\n          multiple: action.status.getIn(['poll', 'multiple']),\n          expires_in: expiresInFromExpiresAt(action.status.getIn(['poll', 'expires_at'])),\n        }));\n      }\n    });\n  case COMPOSE_SET_STATUS:\n    return state.withMutations(map => {\n      map.set('id', action.status.get('id'));\n      map.set('text', action.text);\n      map.set('content_type', action.content_type || 'text/plain');\n      map.set('in_reply_to', action.status.get('in_reply_to_id'));\n      map.set('privacy', action.status.get('visibility'));\n      map.set('media_attachments', action.status.get('media_attachments'));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n      map.set('sensitive', action.status.get('sensitive'));\n      map.set('language', action.status.get('language'));\n\n      if (action.spoiler_text.length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.spoiler_text);\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n\n      if (action.status.get('poll')) {\n        map.set('poll', ImmutableMap({\n          options: action.status.getIn(['poll', 'options']).map(x => x.get('title')),\n          multiple: action.status.getIn(['poll', 'multiple']),\n          expires_in: expiresInFromExpiresAt(action.status.getIn(['poll', 'expires_at'])),\n        }));\n      }\n    });\n  case COMPOSE_POLL_ADD:\n    return state.set('poll', initialPoll);\n  case COMPOSE_POLL_REMOVE:\n    return state.set('poll', null);\n  case COMPOSE_POLL_OPTION_ADD:\n    return state.updateIn(['poll', 'options'], options => options.push(action.title));\n  case COMPOSE_POLL_OPTION_CHANGE:\n    return state.setIn(['poll', 'options', action.index], action.title);\n  case COMPOSE_POLL_OPTION_REMOVE:\n    return state.updateIn(['poll', 'options'], options => options.delete(action.index));\n  case COMPOSE_POLL_SETTINGS_CHANGE:\n    return state.update('poll', poll => poll.set('expires_in', action.expiresIn).set('multiple', action.isMultiple));\n  case COMPOSE_LANGUAGE_CHANGE:\n    return state.set('language', action.language);\n  default:\n    return state;\n  }\n}\n","import {\n  SEARCH_CHANGE,\n  SEARCH_CLEAR,\n  SEARCH_FETCH_REQUEST,\n  SEARCH_FETCH_FAIL,\n  SEARCH_FETCH_SUCCESS,\n  SEARCH_SHOW,\n  SEARCH_EXPAND_SUCCESS,\n} from 'flavours/glitch/actions/search';\nimport {\n  COMPOSE_MENTION,\n  COMPOSE_REPLY,\n  COMPOSE_DIRECT,\n} from 'flavours/glitch/actions/compose';\nimport { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap({\n  value: '',\n  submitted: false,\n  hidden: false,\n  results: ImmutableMap(),\n  isLoading: false,\n  searchTerm: '',\n});\n\nexport default function search(state = initialState, action) {\n  switch(action.type) {\n  case SEARCH_CHANGE:\n    return state.set('value', action.value);\n  case SEARCH_CLEAR:\n    return state.withMutations(map => {\n      map.set('value', '');\n      map.set('results', ImmutableMap());\n      map.set('submitted', false);\n      map.set('hidden', false);\n    });\n  case SEARCH_SHOW:\n    return state.set('hidden', false);\n  case COMPOSE_REPLY:\n  case COMPOSE_MENTION:\n  case COMPOSE_DIRECT:\n    return state.set('hidden', true);\n  case SEARCH_FETCH_REQUEST:\n    return state.withMutations(map => {\n      map.set('isLoading', true);\n      map.set('submitted', true);\n    });\n  case SEARCH_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case SEARCH_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('results', ImmutableMap({\n        accounts: ImmutableList(action.results.accounts.map(item => item.id)),\n        statuses: ImmutableList(action.results.statuses.map(item => item.id)),\n        hashtags: fromJS(action.results.hashtags),\n      }));\n\n      map.set('searchTerm', action.searchTerm);\n      map.set('isLoading', false);\n    });\n  case SEARCH_EXPAND_SUCCESS:\n    const results = action.searchType === 'hashtags' ? fromJS(action.results.hashtags) : action.results[action.searchType].map(item => item.id);\n    return state.updateIn(['results', action.searchType], list => list.concat(results));\n  default:\n    return state;\n  }\n}\n","import { STORE_HYDRATE } from 'flavours/glitch/actions/store';\nimport { Map as ImmutableMap } from 'immutable';\n\nconst initialState = ImmutableMap({\n  accept_content_types: [],\n});\n\nexport default function meta(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return state.merge(action.state.get('media_attachments'));\n  default:\n    return state;\n  }\n}\n","import {\n  NOTIFICATIONS_MOUNT,\n  NOTIFICATIONS_UNMOUNT,\n  NOTIFICATIONS_SET_VISIBILITY,\n  NOTIFICATIONS_UPDATE,\n  NOTIFICATIONS_EXPAND_SUCCESS,\n  NOTIFICATIONS_EXPAND_REQUEST,\n  NOTIFICATIONS_EXPAND_FAIL,\n  NOTIFICATIONS_FILTER_SET,\n  NOTIFICATIONS_CLEAR,\n  NOTIFICATIONS_SCROLL_TOP,\n  NOTIFICATIONS_LOAD_PENDING,\n  NOTIFICATIONS_DELETE_MARKED_REQUEST,\n  NOTIFICATIONS_DELETE_MARKED_SUCCESS,\n  NOTIFICATION_MARK_FOR_DELETE,\n  NOTIFICATIONS_DELETE_MARKED_FAIL,\n  NOTIFICATIONS_ENTER_CLEARING_MODE,\n  NOTIFICATIONS_MARK_ALL_FOR_DELETE,\n  NOTIFICATIONS_MARK_AS_READ,\n  NOTIFICATIONS_SET_BROWSER_SUPPORT,\n  NOTIFICATIONS_SET_BROWSER_PERMISSION,\n} from 'flavours/glitch/actions/notifications';\nimport {\n  ACCOUNT_BLOCK_SUCCESS,\n  ACCOUNT_MUTE_SUCCESS,\n  FOLLOW_REQUEST_AUTHORIZE_SUCCESS,\n  FOLLOW_REQUEST_REJECT_SUCCESS,\n} from 'flavours/glitch/actions/accounts';\nimport {\n  MARKERS_FETCH_SUCCESS,\n} from 'flavours/glitch/actions/markers';\nimport { DOMAIN_BLOCK_SUCCESS } from 'flavours/glitch/actions/domain_blocks';\nimport { TIMELINE_DELETE, TIMELINE_DISCONNECT } from 'flavours/glitch/actions/timelines';\nimport { fromJS, Map as ImmutableMap, List as ImmutableList } from 'immutable';\nimport compareId from '../compare_id';\n\nconst initialState = ImmutableMap({\n  pendingItems: ImmutableList(),\n  items: ImmutableList(),\n  hasMore: true,\n  top: false,\n  mounted: 0,\n  unread: 0,\n  lastReadId: '0',\n  readMarkerId: '0',\n  isLoading: 0,\n  cleaningMode: false,\n  isTabVisible: true,\n  browserSupport: false,\n  browserPermission: 'default',\n  // notification removal mark of new notifs loaded whilst cleaningMode is true.\n  markNewForDelete: false,\n});\n\nconst notificationToMap = (notification, markForDelete) => ImmutableMap({\n  id: notification.id,\n  type: notification.type,\n  account: notification.account.id,\n  markedForDelete: markForDelete,\n  status: notification.status ? notification.status.id : null,\n  report: notification.report ? fromJS(notification.report) : null,\n});\n\nconst normalizeNotification = (state, notification, usePendingItems) => {\n  const markNewForDelete = state.get('markNewForDelete');\n  const top = state.get('top');\n\n  // Under currently unknown conditions, the client may receive duplicates from the server\n  if (state.get('pendingItems').some((item) => item?.get('id') === notification.id) || state.get('items').some((item) => item?.get('id') === notification.id)) {\n    return state;\n  }\n\n  if (usePendingItems || !state.get('pendingItems').isEmpty()) {\n    return state.update('pendingItems', list => list.unshift(notificationToMap(notification, markNewForDelete))).update('unread', unread => unread + 1);\n  }\n\n  if (shouldCountUnreadNotifications(state)) {\n    state = state.update('unread', unread => unread + 1);\n  } else {\n    state = state.set('lastReadId', notification.id);\n  }\n\n  return state.update('items', list => {\n    if (top && list.size > 40) {\n      list = list.take(20);\n    }\n\n    return list.unshift(notificationToMap(notification, markNewForDelete));\n  });\n};\n\nconst expandNormalizedNotifications = (state, notifications, next, isLoadingMore, isLoadingRecent, usePendingItems) => {\n  // This method is pretty tricky because:\n  // - existing notifications might be out of order\n  // - the existing notifications may have gaps, most often explicitly noted with a `null` item\n  // - ideally, we don't want it to reorder existing items\n  // - `notifications` may include items that are already included\n  // - this function can be called either to fill in a gap, or load newer items\n\n  const markNewForDelete = state.get('markNewForDelete');\n  const lastReadId = state.get('lastReadId');\n  const newItems = ImmutableList(notifications.map((notification) => notificationToMap(notification, markNewForDelete)));\n\n  return state.withMutations(mutable => {\n    if (!newItems.isEmpty()) {\n      usePendingItems = isLoadingRecent && (usePendingItems || !mutable.get('pendingItems').isEmpty());\n\n      mutable.update(usePendingItems ? 'pendingItems' : 'items', oldItems => {\n        // If called to poll *new* notifications, we just need to add them on top without duplicates\n        if (isLoadingRecent) {\n          const idsToCheck = oldItems.map(item => item?.get('id')).toSet();\n          const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n          return insertedItems.concat(oldItems);\n        }\n\n        // If called to expand more (presumably older than any known to the WebUI), we just have to\n        // add them to the bottom without duplicates\n        if (isLoadingMore) {\n          const idsToCheck = oldItems.map(item => item?.get('id')).toSet();\n          const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n          return oldItems.concat(insertedItems);\n        }\n\n        // Now this gets tricky, as we don't necessarily know for sure where the gap to fill is,\n        // and some items in the timeline may not be properly ordered.\n\n        // However, we know that `newItems.last()` is the oldest item that was requested and that\n        // there is no hole between `newItems.last()` and `newItems.first()`.\n\n        // First, find the furthest (if properly sorted, oldest) item in the notifications that is\n        // newer than the oldest fetched one, as it's most likely that it delimits the gap.\n        // Start the gap *after* that item.\n        const lastIndex = oldItems.findLastIndex(item => item !== null && compareId(item.get('id'), newItems.last().get('id')) >= 0) + 1;\n\n        // Then, try to find the furthest (if properly sorted, oldest) item in the notifications that\n        // is newer than the most recent fetched one, as it delimits a section comprised of only\n        // items older or within `newItems` (or that were deleted from the server, so should be removed\n        // anyway).\n        // Stop the gap *after* that item.\n        const firstIndex = oldItems.take(lastIndex).findLastIndex(item => item !== null && compareId(item.get('id'), newItems.first().get('id')) > 0) + 1;\n\n        // At this point:\n        // - no `oldItems` after `firstIndex` is newer than any of the `newItems`\n        // - all `oldItems` after `lastIndex` are older than every of the `newItems`\n        // - it is possible for items in the replaced slice to be older than every `newItems`\n        // - it is possible for items before `firstIndex` to be in the `newItems` range\n        // Therefore:\n        // - to avoid losing items, items from the replaced slice that are older than `newItems`\n        //   should be added in the back.\n        // - to avoid duplicates, `newItems` should be checked the first `firstIndex` items of\n        //   `oldItems`\n        const idsToCheck = oldItems.take(firstIndex).map(item => item?.get('id')).toSet();\n        const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n        const olderItems = oldItems.slice(firstIndex, lastIndex).filter(item => item !== null && compareId(item.get('id'), newItems.last().get('id')) < 0);\n\n        return oldItems.take(firstIndex).concat(\n          insertedItems,\n          olderItems,\n          oldItems.skip(lastIndex),\n        );\n      });\n    }\n\n    if (!next) {\n      mutable.set('hasMore', false);\n    }\n\n    if (shouldCountUnreadNotifications(state)) {\n      mutable.set('unread', mutable.get('pendingItems').count(item => item !== null) + mutable.get('items').count(item => item && compareId(item.get('id'), lastReadId) > 0));\n    } else {\n      const mostRecent = newItems.find(item => item !== null);\n      if (mostRecent && compareId(lastReadId, mostRecent.get('id')) < 0) {\n        mutable.set('lastReadId', mostRecent.get('id'));\n      }\n    }\n\n    mutable.update('isLoading', (nbLoading) => nbLoading - 1);\n  });\n};\n\nconst filterNotifications = (state, accountIds, type) => {\n  const helper = list => list.filterNot(item => item !== null && accountIds.includes(item.get('account')) && (type === undefined || type === item.get('type')));\n  return state.update('items', helper).update('pendingItems', helper);\n};\n\nconst clearUnread = (state) => {\n  state = state.set('unread', state.get('pendingItems').size);\n  const lastNotification = state.get('items').find(item => item !== null);\n  return state.set('lastReadId', lastNotification ? lastNotification.get('id') : '0');\n};\n\nconst updateTop = (state, top) => {\n  state = state.set('top', top);\n\n  if (!shouldCountUnreadNotifications(state)) {\n    state = clearUnread(state);\n  }\n\n  return state;\n};\n\nconst deleteByStatus = (state, statusId) => {\n  const lastReadId = state.get('lastReadId');\n\n  if (shouldCountUnreadNotifications(state)) {\n    const deletedUnread = state.get('items').filter(item => item !== null && item.get('status') === statusId && compareId(item.get('id'), lastReadId) > 0);\n    state = state.update('unread', unread => unread - deletedUnread.size);\n  }\n\n  const helper = list => list.filterNot(item => item !== null && item.get('status') === statusId);\n  const deletedUnread = state.get('pendingItems').filter(item => item !== null && item.get('status') === statusId && compareId(item.get('id'), lastReadId) > 0);\n  state = state.update('unread', unread => unread - deletedUnread.size);\n  return state.update('items', helper).update('pendingItems', helper);\n};\n\nconst markForDelete = (state, notificationId, yes) => {\n  return state.update('items', list => list.map(item => {\n    if (item === null) {\n      return null;\n    } else if(item.get('id') === notificationId) {\n      return item.set('markedForDelete', yes);\n    } else {\n      return item;\n    }\n  }));\n};\n\nconst markAllForDelete = (state, yes) => {\n  return state.update('items', list => list.map(item => {\n    if (item === null) {\n      return null;\n    } else if(yes !== null) {\n      return item.set('markedForDelete', yes);\n    } else {\n      return item.set('markedForDelete', !item.get('markedForDelete'));\n    }\n  }));\n};\n\nconst unmarkAllForDelete = (state) => {\n  return state.update('items', list => list.map(item => item === null ? item : item.set('markedForDelete', false)));\n};\n\nconst deleteMarkedNotifs = (state) => {\n  return state.update('items', list => list.filterNot(item => item === null ? item : item.get('markedForDelete')));\n};\n\nconst updateMounted = (state) => {\n  state = state.update('mounted', count => count + 1);\n  if (!shouldCountUnreadNotifications(state, state.get('mounted') === 1)) {\n    state = state.set('readMarkerId', state.get('lastReadId'));\n    state = clearUnread(state);\n  }\n  return state;\n};\n\nconst updateVisibility = (state, visibility) => {\n  state = state.set('isTabVisible', visibility);\n  if (!shouldCountUnreadNotifications(state)) {\n    state = state.set('readMarkerId', state.get('lastReadId'));\n    state = clearUnread(state);\n  }\n  return state;\n};\n\nconst shouldCountUnreadNotifications = (state, ignoreScroll = false) => {\n  const isTabVisible   = state.get('isTabVisible');\n  const isOnTop        = state.get('top');\n  const isMounted      = state.get('mounted') > 0;\n  const lastReadId     = state.get('lastReadId');\n  const lastItem       = state.get('items').findLast(item => item !== null);\n  const lastItemReached = !state.get('hasMore') || lastReadId === '0' || (lastItem && compareId(lastItem.get('id'), lastReadId) <= 0);\n\n  return !(isTabVisible && (ignoreScroll || isOnTop) && isMounted && lastItemReached);\n};\n\nconst recountUnread = (state, last_read_id) => {\n  return state.withMutations(mutable => {\n    if (compareId(last_read_id, mutable.get('lastReadId')) > 0) {\n      mutable.set('lastReadId', last_read_id);\n    }\n\n    if (compareId(last_read_id, mutable.get('readMarkerId')) > 0) {\n      mutable.set('readMarkerId', last_read_id);\n    }\n\n    if (state.get('unread') > 0 || shouldCountUnreadNotifications(state)) {\n      mutable.set('unread', mutable.get('pendingItems').count(item => item !== null) + mutable.get('items').count(item => item && compareId(item.get('id'), last_read_id) > 0));\n    }\n  });\n};\n\nexport default function notifications(state = initialState, action) {\n  let st;\n\n  switch(action.type) {\n  case MARKERS_FETCH_SUCCESS:\n    return action.markers.notifications ? recountUnread(state, action.markers.notifications.last_read_id) : state;\n  case NOTIFICATIONS_MOUNT:\n    return updateMounted(state);\n  case NOTIFICATIONS_UNMOUNT:\n    return state.update('mounted', count => count - 1);\n  case NOTIFICATIONS_SET_VISIBILITY:\n    return updateVisibility(state, action.visibility);\n  case NOTIFICATIONS_LOAD_PENDING:\n    return state.update('items', list => state.get('pendingItems').concat(list.take(40))).set('pendingItems', ImmutableList()).set('unread', 0);\n  case NOTIFICATIONS_EXPAND_REQUEST:\n  case NOTIFICATIONS_DELETE_MARKED_REQUEST:\n    return state.update('isLoading', (nbLoading) => nbLoading + 1);\n  case NOTIFICATIONS_DELETE_MARKED_FAIL:\n  case NOTIFICATIONS_EXPAND_FAIL:\n    return state.update('isLoading', (nbLoading) => nbLoading - 1);\n  case NOTIFICATIONS_FILTER_SET:\n    return state.set('items', ImmutableList()).set('hasMore', true);\n  case NOTIFICATIONS_SCROLL_TOP:\n    return updateTop(state, action.top);\n  case NOTIFICATIONS_UPDATE:\n    return normalizeNotification(state, action.notification, action.usePendingItems);\n  case NOTIFICATIONS_EXPAND_SUCCESS:\n    return expandNormalizedNotifications(state, action.notifications, action.next, action.isLoadingMore, action.isLoadingRecent, action.usePendingItems);\n  case ACCOUNT_BLOCK_SUCCESS:\n    return filterNotifications(state, [action.relationship.id]);\n  case ACCOUNT_MUTE_SUCCESS:\n    return action.relationship.muting_notifications ? filterNotifications(state, [action.relationship.id]) : state;\n  case DOMAIN_BLOCK_SUCCESS:\n    return filterNotifications(state, action.accounts);\n  case FOLLOW_REQUEST_AUTHORIZE_SUCCESS:\n  case FOLLOW_REQUEST_REJECT_SUCCESS:\n    return filterNotifications(state, [action.id], 'follow_request');\n  case NOTIFICATIONS_CLEAR:\n    return state.set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('hasMore', false);\n  case TIMELINE_DELETE:\n    return deleteByStatus(state, action.id);\n  case TIMELINE_DISCONNECT:\n    return action.timeline === 'home' ?\n      state.update(action.usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(null) : items) :\n      state;\n  case NOTIFICATIONS_SET_BROWSER_SUPPORT:\n    return state.set('browserSupport', action.value);\n  case NOTIFICATIONS_SET_BROWSER_PERMISSION:\n    return state.set('browserPermission', action.value);\n\n  case NOTIFICATION_MARK_FOR_DELETE:\n    return markForDelete(state, action.id, action.yes);\n\n  case NOTIFICATIONS_DELETE_MARKED_SUCCESS:\n    return deleteMarkedNotifs(state).update('isLoading', (nbLoading) => nbLoading - 1);\n\n  case NOTIFICATIONS_ENTER_CLEARING_MODE:\n    st = state.set('cleaningMode', action.yes);\n    if (!action.yes) {\n      return unmarkAllForDelete(st).set('markNewForDelete', false);\n    } else {\n      return st;\n    }\n\n  case NOTIFICATIONS_MARK_ALL_FOR_DELETE:\n    st = state;\n    if (action.yes === null) {\n      // Toggle - this is a bit confusing, as it toggles the all-none mode\n      //st = st.set('markNewForDelete', !st.get('markNewForDelete'));\n    } else {\n      st = st.set('markNewForDelete', action.yes);\n    }\n    return markAllForDelete(st, action.yes);\n\n  case NOTIFICATIONS_MARK_AS_READ:\n    const lastNotification = state.get('items').find(item => item !== null);\n    return lastNotification ? recountUnread(state, lastNotification.get('id')) : state;\n\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap } from 'immutable';\nimport { HEIGHT_CACHE_SET, HEIGHT_CACHE_CLEAR } from 'flavours/glitch/actions/height_cache';\n\nconst initialState = ImmutableMap();\n\nconst setHeight = (state, key, id, height) => {\n  return state.update(key, ImmutableMap(), map => map.set(id, height));\n};\n\nconst clearHeights = () => {\n  return ImmutableMap();\n};\n\nexport default function statuses(state = initialState, action) {\n  switch(action.type) {\n  case HEIGHT_CACHE_SET:\n    return setHeight(state, action.key, action.id, action.height);\n  case HEIGHT_CACHE_CLEAR:\n    return clearHeights();\n  default:\n    return state;\n  }\n}\n","import { List as ImmutableList, fromJS as ConvertToImmutable } from 'immutable';\nimport { CUSTOM_EMOJIS_FETCH_SUCCESS } from 'flavours/glitch/actions/custom_emojis';\nimport { search as emojiSearch } from 'flavours/glitch/features/emoji/emoji_mart_search_light';\nimport { buildCustomEmojis } from 'flavours/glitch/features/emoji/emoji';\n\nconst initialState = ImmutableList([]);\n\nexport default function custom_emojis(state = initialState, action) {\n  if(action.type === CUSTOM_EMOJIS_FETCH_SUCCESS) {\n    state = ConvertToImmutable(action.custom_emojis);\n    emojiSearch('', { custom: buildCustomEmojis(state) });\n  }\n\n  return state;\n}\n","import {\n  LIST_FETCH_SUCCESS,\n  LIST_FETCH_FAIL,\n  LISTS_FETCH_SUCCESS,\n  LIST_CREATE_SUCCESS,\n  LIST_UPDATE_SUCCESS,\n  LIST_DELETE_SUCCESS,\n} from '../actions/lists';\nimport { Map as ImmutableMap, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap();\n\nconst normalizeList = (state, list) => state.set(list.id, fromJS(list));\n\nconst normalizeLists = (state, lists) => {\n  lists.forEach(list => {\n    state = normalizeList(state, list);\n  });\n\n  return state;\n};\n\nexport default function lists(state = initialState, action) {\n  switch(action.type) {\n  case LIST_FETCH_SUCCESS:\n  case LIST_CREATE_SUCCESS:\n  case LIST_UPDATE_SUCCESS:\n    return normalizeList(state, action.list);\n  case LISTS_FETCH_SUCCESS:\n    return normalizeLists(state, action.lists);\n  case LIST_DELETE_SUCCESS:\n  case LIST_FETCH_FAIL:\n    return state.set(action.id, false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\nimport {\n  LIST_CREATE_REQUEST,\n  LIST_CREATE_FAIL,\n  LIST_CREATE_SUCCESS,\n  LIST_UPDATE_REQUEST,\n  LIST_UPDATE_FAIL,\n  LIST_UPDATE_SUCCESS,\n  LIST_EDITOR_RESET,\n  LIST_EDITOR_SETUP,\n  LIST_EDITOR_TITLE_CHANGE,\n  LIST_ACCOUNTS_FETCH_REQUEST,\n  LIST_ACCOUNTS_FETCH_SUCCESS,\n  LIST_ACCOUNTS_FETCH_FAIL,\n  LIST_EDITOR_SUGGESTIONS_READY,\n  LIST_EDITOR_SUGGESTIONS_CLEAR,\n  LIST_EDITOR_SUGGESTIONS_CHANGE,\n  LIST_EDITOR_ADD_SUCCESS,\n  LIST_EDITOR_REMOVE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap({\n  listId: null,\n  isSubmitting: false,\n  isChanged: false,\n  title: '',\n\n  accounts: ImmutableMap({\n    items: ImmutableList(),\n    loaded: false,\n    isLoading: false,\n  }),\n\n  suggestions: ImmutableMap({\n    value: '',\n    items: ImmutableList(),\n  }),\n});\n\nexport default function listEditorReducer(state = initialState, action) {\n  switch(action.type) {\n  case LIST_EDITOR_RESET:\n    return initialState;\n  case LIST_EDITOR_SETUP:\n    return state.withMutations(map => {\n      map.set('listId', action.list.get('id'));\n      map.set('title', action.list.get('title'));\n      map.set('isSubmitting', false);\n    });\n  case LIST_EDITOR_TITLE_CHANGE:\n    return state.withMutations(map => {\n      map.set('title', action.value);\n      map.set('isChanged', true);\n    });\n  case LIST_CREATE_REQUEST:\n  case LIST_UPDATE_REQUEST:\n    return state.withMutations(map => {\n      map.set('isSubmitting', true);\n      map.set('isChanged', false);\n    });\n  case LIST_CREATE_FAIL:\n  case LIST_UPDATE_FAIL:\n    return state.set('isSubmitting', false);\n  case LIST_CREATE_SUCCESS:\n  case LIST_UPDATE_SUCCESS:\n    return state.withMutations(map => {\n      map.set('isSubmitting', false);\n      map.set('listId', action.list.id);\n    });\n  case LIST_ACCOUNTS_FETCH_REQUEST:\n    return state.setIn(['accounts', 'isLoading'], true);\n  case LIST_ACCOUNTS_FETCH_FAIL:\n    return state.setIn(['accounts', 'isLoading'], false);\n  case LIST_ACCOUNTS_FETCH_SUCCESS:\n    return state.update('accounts', accounts => accounts.withMutations(map => {\n      map.set('isLoading', false);\n      map.set('loaded', true);\n      map.set('items', ImmutableList(action.accounts.map(item => item.id)));\n    }));\n  case LIST_EDITOR_SUGGESTIONS_CHANGE:\n    return state.setIn(['suggestions', 'value'], action.value);\n  case LIST_EDITOR_SUGGESTIONS_READY:\n    return state.setIn(['suggestions', 'items'], ImmutableList(action.accounts.map(item => item.id)));\n  case LIST_EDITOR_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', suggestions => suggestions.withMutations(map => {\n      map.set('items', ImmutableList());\n      map.set('value', '');\n    }));\n  case LIST_EDITOR_ADD_SUCCESS:\n    return state.updateIn(['accounts', 'items'], list => list.unshift(action.accountId));\n  case LIST_EDITOR_REMOVE_SUCCESS:\n    return state.updateIn(['accounts', 'items'], list => list.filterNot(item => item === action.accountId));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\nimport {\n  LIST_ADDER_RESET,\n  LIST_ADDER_SETUP,\n  LIST_ADDER_LISTS_FETCH_REQUEST,\n  LIST_ADDER_LISTS_FETCH_SUCCESS,\n  LIST_ADDER_LISTS_FETCH_FAIL,\n  LIST_EDITOR_ADD_SUCCESS,\n  LIST_EDITOR_REMOVE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap({\n  accountId: null,\n\n  lists: ImmutableMap({\n    items: ImmutableList(),\n    loaded: false,\n    isLoading: false,\n  }),\n});\n\nexport default function listAdderReducer(state = initialState, action) {\n  switch(action.type) {\n  case LIST_ADDER_RESET:\n    return initialState;\n  case LIST_ADDER_SETUP:\n    return state.withMutations(map => {\n      map.set('accountId', action.account.get('id'));\n    });\n  case LIST_ADDER_LISTS_FETCH_REQUEST:\n    return state.setIn(['lists', 'isLoading'], true);\n  case LIST_ADDER_LISTS_FETCH_FAIL:\n    return state.setIn(['lists', 'isLoading'], false);\n  case LIST_ADDER_LISTS_FETCH_SUCCESS:\n    return state.update('lists', lists => lists.withMutations(map => {\n      map.set('isLoading', false);\n      map.set('loaded', true);\n      map.set('items', ImmutableList(action.lists.map(item => item.id)));\n    }));\n  case LIST_EDITOR_ADD_SUCCESS:\n    return state.updateIn(['lists', 'items'], list => list.unshift(action.listId));\n  case LIST_EDITOR_REMOVE_SUCCESS:\n    return state.updateIn(['lists', 'items'], list => list.filterNot(item => item === action.listId));\n  default:\n    return state;\n  }\n}\n","import { FILTERS_IMPORT } from '../actions/importer';\nimport { FILTERS_FETCH_SUCCESS, FILTERS_CREATE_SUCCESS } from '../actions/filters';\nimport { Map as ImmutableMap, is, fromJS } from 'immutable';\n\nconst normalizeFilter = (state, filter) => {\n  const normalizedFilter = fromJS({\n    id: filter.id,\n    title: filter.title,\n    context: filter.context,\n    filter_action: filter.filter_action,\n    keywords: filter.keywords,\n    expires_at: filter.expires_at ? Date.parse(filter.expires_at) : null,\n  });\n\n  if (is(state.get(filter.id), normalizedFilter)) {\n    return state;\n  } else {\n    // Do not overwrite keywords when receiving a partial filter\n    return state.update(filter.id, ImmutableMap(), (old) => (\n      old.mergeWith(((old_value, new_value) => (new_value === undefined ? old_value : new_value)), normalizedFilter)\n    ));\n  }\n};\n\nconst normalizeFilters = (state, filters) => {\n  filters.forEach(filter => {\n    state = normalizeFilter(state, filter);\n  });\n\n  return state;\n};\n\nexport default function filters(state = ImmutableMap(), action) {\n  switch(action.type) {\n  case FILTERS_CREATE_SUCCESS:\n    return normalizeFilter(state, action.filter);\n  case FILTERS_FETCH_SUCCESS:\n    return normalizeFilters(ImmutableMap(), action.filters);\n  case FILTERS_IMPORT:\n    return normalizeFilters(state, action.filters);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\nimport {\n  CONVERSATIONS_MOUNT,\n  CONVERSATIONS_UNMOUNT,\n  CONVERSATIONS_FETCH_REQUEST,\n  CONVERSATIONS_FETCH_SUCCESS,\n  CONVERSATIONS_FETCH_FAIL,\n  CONVERSATIONS_UPDATE,\n  CONVERSATIONS_READ,\n  CONVERSATIONS_DELETE_SUCCESS,\n} from '../actions/conversations';\nimport { ACCOUNT_BLOCK_SUCCESS, ACCOUNT_MUTE_SUCCESS } from 'flavours/glitch/actions/accounts';\nimport { DOMAIN_BLOCK_SUCCESS } from 'flavours/glitch/actions/domain_blocks';\nimport compareId from '../compare_id';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  hasMore: true,\n  mounted: 0,\n});\n\nconst conversationToMap = item => ImmutableMap({\n  id: item.id,\n  unread: item.unread,\n  accounts: ImmutableList(item.accounts.map(a => a.id)),\n  last_status: item.last_status ? item.last_status.id : null,\n});\n\nconst updateConversation = (state, item) => state.update('items', list => {\n  const index   = list.findIndex(x => x.get('id') === item.id);\n  const newItem = conversationToMap(item);\n\n  if (index === -1) {\n    return list.unshift(newItem);\n  } else {\n    return list.set(index, newItem);\n  }\n});\n\nconst expandNormalizedConversations = (state, conversations, next, isLoadingRecent) => {\n  let items = ImmutableList(conversations.map(conversationToMap));\n\n  return state.withMutations(mutable => {\n    if (!items.isEmpty()) {\n      mutable.update('items', list => {\n        list = list.map(oldItem => {\n          const newItemIndex = items.findIndex(x => x.get('id') === oldItem.get('id'));\n\n          if (newItemIndex === -1) {\n            return oldItem;\n          }\n\n          const newItem = items.get(newItemIndex);\n          items = items.delete(newItemIndex);\n\n          return newItem;\n        });\n\n        list = list.concat(items);\n\n        return list.sortBy(x => x.get('last_status'), (a, b) => {\n          if(a === null || b === null) {\n            return -1;\n          }\n\n          return compareId(a, b) * -1;\n        });\n      });\n    }\n\n    if (!next && !isLoadingRecent) {\n      mutable.set('hasMore', false);\n    }\n\n    mutable.set('isLoading', false);\n  });\n};\n\nconst filterConversations = (state, accountIds) => {\n  return state.update('items', list => list.filterNot(item => item.get('accounts').some(accountId => accountIds.includes(accountId))));\n};\n\nexport default function conversations(state = initialState, action) {\n  switch (action.type) {\n  case CONVERSATIONS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case CONVERSATIONS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case CONVERSATIONS_FETCH_SUCCESS:\n    return expandNormalizedConversations(state, action.conversations, action.next, action.isLoadingRecent);\n  case CONVERSATIONS_UPDATE:\n    return updateConversation(state, action.conversation);\n  case CONVERSATIONS_MOUNT:\n    return state.update('mounted', count => count + 1);\n  case CONVERSATIONS_UNMOUNT:\n    return state.update('mounted', count => count - 1);\n  case CONVERSATIONS_READ:\n    return state.update('items', list => list.map(item => {\n      if (item.get('id') === action.id) {\n        return item.set('unread', false);\n      }\n\n      return item;\n    }));\n  case ACCOUNT_BLOCK_SUCCESS:\n  case ACCOUNT_MUTE_SUCCESS:\n    return filterConversations(state, [action.relationship.id]);\n  case DOMAIN_BLOCK_SUCCESS:\n    return filterConversations(state, action.accounts);\n  case CONVERSATIONS_DELETE_SUCCESS:\n    return state.update('items', list => list.filterNot(item => item.get('id') === action.id));\n  default:\n    return state;\n  }\n}\n","import {\n  SUGGESTIONS_FETCH_REQUEST,\n  SUGGESTIONS_FETCH_SUCCESS,\n  SUGGESTIONS_FETCH_FAIL,\n  SUGGESTIONS_DISMISS,\n} from '../actions/suggestions';\nimport { ACCOUNT_BLOCK_SUCCESS, ACCOUNT_MUTE_SUCCESS } from 'flavours/glitch/actions/accounts';\nimport { DOMAIN_BLOCK_SUCCESS } from 'flavours/glitch/actions/domain_blocks';\nimport { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n});\n\nexport default function suggestionsReducer(state = initialState, action) {\n  switch(action.type) {\n  case SUGGESTIONS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case SUGGESTIONS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('items', fromJS(action.suggestions.map(x => ({ ...x, account: x.account.id }))));\n      map.set('isLoading', false);\n    });\n  case SUGGESTIONS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case SUGGESTIONS_DISMISS:\n    return state.update('items', list => list.filterNot(x => x.account === action.id));\n  case ACCOUNT_BLOCK_SUCCESS:\n  case ACCOUNT_MUTE_SUCCESS:\n    return state.update('items', list => list.filterNot(x => x.account === action.relationship.id));\n  case DOMAIN_BLOCK_SUCCESS:\n    return state.update('items', list => list.filterNot(x => action.accounts.includes(x.account)));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\nimport {\n  PINNED_ACCOUNTS_EDITOR_RESET,\n  PINNED_ACCOUNTS_FETCH_REQUEST,\n  PINNED_ACCOUNTS_FETCH_SUCCESS,\n  PINNED_ACCOUNTS_FETCH_FAIL,\n  PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_READY,\n  PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR,\n  PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE,\n  ACCOUNT_PIN_SUCCESS,\n  ACCOUNT_UNPIN_SUCCESS,\n} from '../actions/accounts';\n\nconst initialState = ImmutableMap({\n  accounts: ImmutableMap({\n    items: ImmutableList(),\n    loaded: false,\n    isLoading: false,\n  }),\n\n  suggestions: ImmutableMap({\n    value: '',\n    items: ImmutableList(),\n  }),\n});\n\nexport default function listEditorReducer(state = initialState, action) {\n  switch(action.type) {\n  case PINNED_ACCOUNTS_EDITOR_RESET:\n    return initialState;\n  case PINNED_ACCOUNTS_FETCH_REQUEST:\n    return state.setIn(['accounts', 'isLoading'], true);\n  case PINNED_ACCOUNTS_FETCH_FAIL:\n    return state.setIn(['accounts', 'isLoading'], false);\n  case PINNED_ACCOUNTS_FETCH_SUCCESS:\n    return state.update('accounts', accounts => accounts.withMutations(map => {\n      map.set('isLoading', false);\n      map.set('loaded', true);\n      map.set('items', ImmutableList(action.accounts.map(item => item.id)));\n    }));\n  case PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE:\n    return state.setIn(['suggestions', 'value'], action.value);\n  case PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_READY:\n    return state.setIn(['suggestions', 'items'], ImmutableList(action.accounts.map(item => item.id)));\n  case PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', suggestions => suggestions.withMutations(map => {\n      map.set('items', ImmutableList());\n      map.set('value', '');\n    }));\n  case ACCOUNT_PIN_SUCCESS:\n    return state.updateIn(['accounts', 'items'], list => list.unshift(action.relationship.id));\n  case ACCOUNT_UNPIN_SUCCESS:\n    return state.updateIn(['accounts', 'items'], list => list.filterNot(item => item === action.relationship.id));\n  default:\n    return state;\n  }\n}\n","import { POLLS_IMPORT } from 'flavours/glitch/actions/importer';\nimport { Map as ImmutableMap, fromJS } from 'immutable';\n\nconst importPolls = (state, polls) => state.withMutations(map => polls.forEach(poll => map.set(poll.id, fromJS(poll))));\n\nconst initialState = ImmutableMap();\n\nexport default function polls(state = initialState, action) {\n  switch(action.type) {\n  case POLLS_IMPORT:\n    return importPolls(state, action.polls);\n  default:\n    return state;\n  }\n}\n","import {\n  TRENDS_TAGS_FETCH_REQUEST,\n  TRENDS_TAGS_FETCH_SUCCESS,\n  TRENDS_TAGS_FETCH_FAIL,\n  TRENDS_LINKS_FETCH_REQUEST,\n  TRENDS_LINKS_FETCH_SUCCESS,\n  TRENDS_LINKS_FETCH_FAIL,\n} from 'flavours/glitch/actions/trends';\nimport { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap({\n  tags: ImmutableMap({\n    items: ImmutableList(),\n    isLoading: false,\n  }),\n\n  links: ImmutableMap({\n    items: ImmutableList(),\n    isLoading: false,\n  }),\n});\n\nexport default function trendsReducer(state = initialState, action) {\n  switch(action.type) {\n  case TRENDS_TAGS_FETCH_REQUEST:\n    return state.setIn(['tags', 'isLoading'], true);\n  case TRENDS_TAGS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.setIn(['tags', 'items'], fromJS(action.trends));\n      map.setIn(['tags', 'isLoading'], false);\n    });\n  case TRENDS_TAGS_FETCH_FAIL:\n    return state.setIn(['tags', 'isLoading'], false);\n  case TRENDS_LINKS_FETCH_REQUEST:\n    return state.setIn(['links', 'isLoading'], true);\n  case TRENDS_LINKS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.setIn(['links', 'items'], fromJS(action.trends));\n      map.setIn(['links', 'isLoading'], false);\n    });\n  case TRENDS_LINKS_FETCH_FAIL:\n    return state.setIn(['links', 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import {\n  ANNOUNCEMENTS_FETCH_REQUEST,\n  ANNOUNCEMENTS_FETCH_SUCCESS,\n  ANNOUNCEMENTS_FETCH_FAIL,\n  ANNOUNCEMENTS_UPDATE,\n  ANNOUNCEMENTS_REACTION_UPDATE,\n  ANNOUNCEMENTS_REACTION_ADD_REQUEST,\n  ANNOUNCEMENTS_REACTION_ADD_FAIL,\n  ANNOUNCEMENTS_REACTION_REMOVE_REQUEST,\n  ANNOUNCEMENTS_REACTION_REMOVE_FAIL,\n  ANNOUNCEMENTS_TOGGLE_SHOW,\n  ANNOUNCEMENTS_DELETE,\n  ANNOUNCEMENTS_DISMISS_SUCCESS,\n} from '../actions/announcements';\nimport { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  show: false,\n});\n\nconst updateReaction = (state, id, name, updater) => state.update('items', list => list.map(announcement => {\n  if (announcement.get('id') === id) {\n    return announcement.update('reactions', reactions => {\n      const idx = reactions.findIndex(reaction => reaction.get('name') === name);\n\n      if (idx > -1) {\n        return reactions.update(idx, reaction => updater(reaction));\n      }\n\n      return reactions.push(updater(fromJS({ name, count: 0 })));\n    });\n  }\n\n  return announcement;\n}));\n\nconst updateReactionCount = (state, reaction) => updateReaction(state, reaction.announcement_id, reaction.name, x => x.set('count', reaction.count));\n\nconst addReaction = (state, id, name) => updateReaction(state, id, name, x => x.set('me', true).update('count', y => y + 1));\n\nconst removeReaction = (state, id, name) => updateReaction(state, id, name, x => x.set('me', false).update('count', y => y - 1));\n\nconst sortAnnouncements = list => list.sortBy(x => x.get('starts_at') || x.get('published_at'));\n\nconst updateAnnouncement = (state, announcement) => {\n  const idx = state.get('items').findIndex(x => x.get('id') === announcement.get('id'));\n\n  if (idx > -1) {\n    // Deep merge is used because announcements from the streaming API do not contain\n    // personalized data about which reactions have been selected by the given user,\n    // and that is information we want to preserve\n    return state.update('items', list => sortAnnouncements(list.update(idx, x => x.mergeDeep(announcement))));\n  }\n\n  return state.update('items', list => sortAnnouncements(list.unshift(announcement)));\n};\n\nexport default function announcementsReducer(state = initialState, action) {\n  switch(action.type) {\n  case ANNOUNCEMENTS_TOGGLE_SHOW:\n    return state.withMutations(map => {\n      map.set('show', !map.get('show'));\n    });\n  case ANNOUNCEMENTS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case ANNOUNCEMENTS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      const items = fromJS(action.announcements);\n\n      map.set('items', items);\n      map.set('isLoading', false);\n    });\n  case ANNOUNCEMENTS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case ANNOUNCEMENTS_UPDATE:\n    return updateAnnouncement(state, fromJS(action.announcement));\n  case ANNOUNCEMENTS_REACTION_UPDATE:\n    return updateReactionCount(state, action.reaction);\n  case ANNOUNCEMENTS_REACTION_ADD_REQUEST:\n  case ANNOUNCEMENTS_REACTION_REMOVE_FAIL:\n    return addReaction(state, action.id, action.name);\n  case ANNOUNCEMENTS_REACTION_REMOVE_REQUEST:\n  case ANNOUNCEMENTS_REACTION_ADD_FAIL:\n    return removeReaction(state, action.id, action.name);\n  case ANNOUNCEMENTS_DISMISS_SUCCESS:\n    return updateAnnouncement(state, fromJS({ 'id': action.id, 'read': true }));\n  case ANNOUNCEMENTS_DELETE:\n    return state.update('items', list => {\n      const idx = list.findIndex(x => x.get('id') === action.id);\n\n      if (idx > -1) {\n        return list.delete(idx);\n      }\n\n      return list;\n    });\n  default:\n    return state;\n  }\n}\n","import {\n  MARKERS_SUBMIT_SUCCESS,\n} from '../actions/markers';\n\nconst initialState = ImmutableMap({\n  home: '0',\n  notifications: '0',\n});\n\nimport { Map as ImmutableMap } from 'immutable';\n\nexport default function markers(state = initialState, action) {\n  switch(action.type) {\n  case MARKERS_SUBMIT_SUCCESS:\n    if (action.home) {\n      state = state.set('home', action.home);\n    }\n    if (action.notifications) {\n      state = state.set('notifications', action.notifications);\n    }\n    return state;\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap } from 'immutable';\n\nimport {\n  ACCOUNT_NOTE_INIT_EDIT,\n  ACCOUNT_NOTE_CANCEL,\n  ACCOUNT_NOTE_CHANGE_COMMENT,\n  ACCOUNT_NOTE_SUBMIT_REQUEST,\n  ACCOUNT_NOTE_SUBMIT_FAIL,\n  ACCOUNT_NOTE_SUBMIT_SUCCESS,\n} from '../actions/account_notes';\n\nconst initialState = ImmutableMap({\n  edit: ImmutableMap({\n    isSubmitting: false,\n    account_id: null,\n    comment: null,\n  }),\n});\n\nexport default function account_notes(state = initialState, action) {\n  switch (action.type) {\n  case ACCOUNT_NOTE_INIT_EDIT:\n    return state.withMutations((state) => {\n      state.setIn(['edit', 'isSubmitting'], false);\n      state.setIn(['edit', 'account_id'], action.account.get('id'));\n      state.setIn(['edit', 'comment'], action.comment);\n    });\n  case ACCOUNT_NOTE_CHANGE_COMMENT:\n    return state.setIn(['edit', 'comment'], action.comment);\n  case ACCOUNT_NOTE_SUBMIT_REQUEST:\n    return state.setIn(['edit', 'isSubmitting'], true);\n  case ACCOUNT_NOTE_SUBMIT_FAIL:\n    return state.setIn(['edit', 'isSubmitting'], false);\n  case ACCOUNT_NOTE_SUBMIT_SUCCESS:\n  case ACCOUNT_NOTE_CANCEL:\n    return state.withMutations((state) => {\n      state.setIn(['edit', 'isSubmitting'], false);\n      state.setIn(['edit', 'account_id'], null);\n      state.setIn(['edit', 'comment'], null);\n    });\n  default:\n    return state;\n  }\n}\n","import { PICTURE_IN_PICTURE_DEPLOY, PICTURE_IN_PICTURE_REMOVE } from 'flavours/glitch/actions/picture_in_picture';\nimport { TIMELINE_DELETE } from 'flavours/glitch/actions/timelines';\n\nconst initialState = {\n  statusId: null,\n  accountId: null,\n  type: null,\n  src: null,\n  muted: false,\n  volume: 0,\n  currentTime: 0,\n};\n\nexport default function pictureInPicture(state = initialState, action) {\n  switch(action.type) {\n  case PICTURE_IN_PICTURE_DEPLOY:\n    return { statusId: action.statusId, accountId: action.accountId, type: action.playerType, ...action.props };\n  case PICTURE_IN_PICTURE_REMOVE:\n    return { ...initialState };\n  case TIMELINE_DELETE:\n    return (state.statusId === action.id) ? { ...initialState } : state;\n  default:\n    return state;\n  }\n}\n","import { HISTORY_FETCH_REQUEST, HISTORY_FETCH_SUCCESS, HISTORY_FETCH_FAIL } from 'flavours/glitch/actions/history';\nimport { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nconst initialHistory = ImmutableMap({\n  loading: false,\n  items: ImmutableList(),\n});\n\nconst initialState = ImmutableMap();\n\nexport default function history(state = initialState, action) {\n  switch(action.type) {\n  case HISTORY_FETCH_REQUEST:\n    return state.update(action.statusId, initialHistory, history => history.withMutations(map => {\n      map.set('loading', true);\n      map.set('items', ImmutableList());\n    }));\n  case HISTORY_FETCH_SUCCESS:\n    return state.update(action.statusId, initialHistory, history => history.withMutations(map => {\n      map.set('loading', false);\n      map.set('items', fromJS(action.history.map((x, i) => ({ ...x, account: x.account.id, original: i === 0 })).reverse()));\n    }));\n  case HISTORY_FETCH_FAIL:\n    return state.update(action.statusId, initialHistory, history => history.set('loading', false));\n  default:\n    return state;\n  }\n}\n","import {\n  HASHTAG_FETCH_SUCCESS,\n  HASHTAG_FOLLOW_REQUEST,\n  HASHTAG_FOLLOW_FAIL,\n  HASHTAG_UNFOLLOW_REQUEST,\n  HASHTAG_UNFOLLOW_FAIL,\n} from 'flavours/glitch/actions/tags';\nimport { Map as ImmutableMap, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap();\n\nexport default function tags(state = initialState, action) {\n  switch(action.type) {\n  case HASHTAG_FETCH_SUCCESS:\n    return state.set(action.name, fromJS(action.tag));\n  case HASHTAG_FOLLOW_REQUEST:\n  case HASHTAG_UNFOLLOW_FAIL:\n    return state.setIn([action.name, 'following'], true);\n  case HASHTAG_FOLLOW_FAIL:\n  case HASHTAG_UNFOLLOW_REQUEST:\n    return state.setIn([action.name, 'following'], false);\n  default:\n    return state;\n  }\n}\n","import {\n  FOLLOWED_HASHTAGS_FETCH_REQUEST,\n  FOLLOWED_HASHTAGS_FETCH_SUCCESS,\n  FOLLOWED_HASHTAGS_FETCH_FAIL,\n  FOLLOWED_HASHTAGS_EXPAND_REQUEST,\n  FOLLOWED_HASHTAGS_EXPAND_SUCCESS,\n  FOLLOWED_HASHTAGS_EXPAND_FAIL,\n} from 'flavours/glitch/actions/tags';\nimport { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  next: null,\n});\n\nexport default function followed_tags(state = initialState, action) {\n  switch(action.type) {\n  case FOLLOWED_HASHTAGS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case FOLLOWED_HASHTAGS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('items', fromJS(action.followed_tags));\n      map.set('isLoading', false);\n      map.set('next', action.next);\n    });\n  case FOLLOWED_HASHTAGS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case FOLLOWED_HASHTAGS_EXPAND_REQUEST:\n    return state.set('isLoading', true);\n  case FOLLOWED_HASHTAGS_EXPAND_SUCCESS:\n    return state.withMutations(map => {\n      map.update('items', set => set.concat(fromJS(action.followed_tags)));\n      map.set('isLoading', false);\n      map.set('next', action.next);\n    });\n  case FOLLOWED_HASHTAGS_EXPAND_FAIL:\n    return state.set('isLoading', false);\n  default:\n    return state;\n  }\n}\n","import { combineReducers } from 'redux-immutable';\nimport dropdown_menu from './dropdown_menu';\nimport timelines from './timelines';\nimport meta from './meta';\nimport alerts from './alerts';\nimport { loadingBarReducer } from 'react-redux-loading-bar';\nimport modal from './modal';\nimport user_lists from './user_lists';\nimport domain_lists from './domain_lists';\nimport accounts from './accounts';\nimport accounts_counters from './accounts_counters';\nimport statuses from './statuses';\nimport relationships from './relationships';\nimport settings from './settings';\nimport local_settings from './local_settings';\nimport push_notifications from './push_notifications';\nimport status_lists from './status_lists';\nimport mutes from './mutes';\nimport blocks from './blocks';\nimport server from './server';\nimport boosts from './boosts';\nimport contexts from './contexts';\nimport compose from './compose';\nimport search from './search';\nimport media_attachments from './media_attachments';\nimport notifications from './notifications';\nimport height_cache from './height_cache';\nimport custom_emojis from './custom_emojis';\nimport lists from './lists';\nimport listEditor from './list_editor';\nimport listAdder from './list_adder';\nimport filters from './filters';\nimport conversations from './conversations';\nimport suggestions from './suggestions';\nimport pinnedAccountsEditor from './pinned_accounts_editor';\nimport polls from './polls';\nimport trends from './trends';\nimport announcements from './announcements';\nimport markers from './markers';\nimport account_notes from './account_notes';\nimport picture_in_picture from './picture_in_picture';\nimport accounts_map from './accounts_map';\nimport history from './history';\nimport tags from './tags';\nimport followed_tags from './followed_tags';\n\nconst reducers = {\n  announcements,\n  dropdown_menu,\n  timelines,\n  meta,\n  alerts,\n  loadingBar: loadingBarReducer,\n  modal,\n  user_lists,\n  domain_lists,\n  status_lists,\n  accounts,\n  accounts_counters,\n  accounts_map,\n  statuses,\n  relationships,\n  settings,\n  local_settings,\n  push_notifications,\n  mutes,\n  blocks,\n  server,\n  boosts,\n  contexts,\n  compose,\n  search,\n  media_attachments,\n  notifications,\n  height_cache,\n  custom_emojis,\n  lists,\n  listEditor,\n  listAdder,\n  filters,\n  conversations,\n  suggestions,\n  pinnedAccountsEditor,\n  polls,\n  trends,\n  markers,\n  account_notes,\n  picture_in_picture,\n  history,\n  tags,\n  followed_tags,\n};\n\nexport default combineReducers(reducers);\n","import { showLoading, hideLoading } from 'react-redux-loading-bar';\n\nconst defaultTypeSuffixes = ['PENDING', 'FULFILLED', 'REJECTED'];\n\nexport default function loadingBarMiddleware(config = {}) {\n  const promiseTypeSuffixes = config.promiseTypeSuffixes || defaultTypeSuffixes;\n\n  return ({ dispatch }) => next => (action) => {\n    if (action.type && !action.skipLoading) {\n      const [PENDING, FULFILLED, REJECTED] = promiseTypeSuffixes;\n\n      const isPending = new RegExp(`${PENDING}$`, 'g');\n      const isFulfilled = new RegExp(`${FULFILLED}$`, 'g');\n      const isRejected = new RegExp(`${REJECTED}$`, 'g');\n\n      if (action.type.match(isPending)) {\n        dispatch(showLoading());\n      } else if (action.type.match(isFulfilled) || action.type.match(isRejected)) {\n        dispatch(hideLoading());\n      }\n    }\n\n    return next(action);\n  };\n}\n","const createAudio = sources => {\n  const audio = new Audio();\n  sources.forEach(({ type, src }) => {\n    const source = document.createElement('source');\n    source.type = type;\n    source.src = src;\n    audio.appendChild(source);\n  });\n  return audio;\n};\n\nconst play = audio => {\n  if (!audio.paused) {\n    audio.pause();\n    if (typeof audio.fastSeek === 'function') {\n      audio.fastSeek(0);\n    } else {\n      audio.currentTime = 0;\n    }\n  }\n\n  audio.play();\n};\n\nexport default function soundsMiddleware() {\n  const soundCache = {\n    boop: createAudio([\n      {\n        src: '/sounds/boop.ogg',\n        type: 'audio/ogg',\n      },\n      {\n        src: '/sounds/boop.mp3',\n        type: 'audio/mpeg',\n      },\n    ]),\n  };\n\n  return () => next => action => {\n    if (action.meta && action.meta.sound && soundCache[action.meta.sound]) {\n      play(soundCache[action.meta.sound]);\n    }\n\n    return next(action);\n  };\n}\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport appReducer from '../reducers';\nimport loadingBarMiddleware from '../middleware/loading_bar';\nimport errorsMiddleware from '../middleware/errors';\nimport soundsMiddleware from '../middleware/sounds';\n\nexport default function configureStore() {\n  return createStore(appReducer, compose(applyMiddleware(\n    thunk,\n    loadingBarMiddleware({ promiseTypeSuffixes: ['REQUEST', 'SUCCESS', 'FAIL'] }),\n    errorsMiddleware(),\n    soundsMiddleware(),\n  ), window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__() : f => f));\n}\n","import { showAlertForError } from 'flavours/glitch/actions/alerts';\n\nconst defaultFailSuffix = 'FAIL';\n\nexport default function errorsMiddleware() {\n  return ({ dispatch }) => next => action => {\n    if (action.type && !action.skipAlert) {\n      const isFail = new RegExp(`${defaultFailSuffix}$`, 'g');\n\n      if (action.type.match(isFail)) {\n        dispatch(showAlertForError(action.error, action.skipNotFound));\n      }\n    }\n\n    return next(action);\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport IconButton from 'flavours/glitch/components/icon_button';\n\nconst messages = defineMessages({\n  error: { id: 'bundle_modal_error.message', defaultMessage: 'Something went wrong while loading this component.' },\n  retry: { id: 'bundle_modal_error.retry', defaultMessage: 'Try again' },\n  close: { id: 'bundle_modal_error.close', defaultMessage: 'Close' },\n});\n\nclass BundleModalError extends React.Component {\n\n  static propTypes = {\n    onRetry: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  handleRetry = () => {\n    this.props.onRetry();\n  };\n\n  render () {\n    const { onClose, intl: { formatMessage } } = this.props;\n\n    // Keep the markup in sync with <ModalLoading />\n    // (make sure they have the same dimensions)\n    return (\n      <div className='modal-root__modal error-modal'>\n        <div className='error-modal__body'>\n          <IconButton title={formatMessage(messages.retry)} icon='refresh' onClick={this.handleRetry} size={64} />\n          {formatMessage(messages.error)}\n        </div>\n\n        <div className='error-modal__footer'>\n          <div>\n            <button\n              onClick={onClose}\n              className='error-modal__nav onboarding-modal__skip'\n            >\n              {formatMessage(messages.close)}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(BundleModalError);\n","import React from 'react';\n\nimport LoadingIndicator from 'flavours/glitch/components/loading_indicator';\n\n// Keep the markup in sync with <BundleModalError />\n// (make sure they have the same dimensions)\nconst ModalLoading = () => (\n  <div className='modal-root__modal error-modal'>\n    <div className='error-modal__body'>\n      <LoadingIndicator />\n    </div>\n    <div className='error-modal__footer'>\n      <div>\n        <button className='error-modal__nav onboarding-modal__skip' />\n      </div>\n    </div>\n  </div>\n);\n\nexport default ModalLoading;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport StatusContent from 'flavours/glitch/components/status_content';\nimport Avatar from 'flavours/glitch/components/avatar';\nimport RelativeTimestamp from 'flavours/glitch/components/relative_timestamp';\nimport DisplayName from 'flavours/glitch/components/display_name';\nimport classNames from 'classnames';\nimport IconButton from 'flavours/glitch/components/icon_button';\n\nexport default class ActionsModal extends ImmutablePureComponent {\n\n  static propTypes = {\n    status: ImmutablePropTypes.map,\n    onClick: PropTypes.func,\n    actions: PropTypes.arrayOf(PropTypes.shape({\n      active: PropTypes.bool,\n      href: PropTypes.string,\n      icon: PropTypes.string,\n      meta: PropTypes.string,\n      name: PropTypes.string,\n      text: PropTypes.string,\n    })),\n    renderItemContents: PropTypes.func,\n  };\n\n  renderAction = (action, i) => {\n    if (action === null) {\n      return <li key={`sep-${i}`} className='dropdown-menu__separator' />;\n    }\n\n    const { icon = null, text, meta = null, active = false, href = '#' } = action;\n    let contents = this.props.renderItemContents && this.props.renderItemContents(action, i);\n\n    if (!contents) {\n      contents = (\n        <React.Fragment>\n          {icon && <IconButton title={text} icon={icon} role='presentation' tabIndex='-1' inverted />}\n          <div>\n            <div className={classNames({ 'actions-modal__item-label': !!meta })}>{text}</div>\n            <div>{meta}</div>\n          </div>\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <li key={`${text}-${i}`}>\n        <a href={href} target='_blank' rel='noopener noreferrer' onClick={this.props.onClick} data-index={i} className={classNames('link', { active })}>\n          {contents}\n        </a>\n      </li>\n    );\n  };\n\n  render () {\n    const status = this.props.status && (\n      <div className='status light'>\n        <div className='boost-modal__status-header'>\n          <div className='boost-modal__status-time'>\n            <a href={this.props.status.get('url')} className='status__relative-time' target='_blank' rel='noopener noreferrer'>\n              <RelativeTimestamp timestamp={this.props.status.get('created_at')} />\n            </a>\n          </div>\n\n          <a href={this.props.status.getIn(['account', 'url'])} className='status__display-name' rel='noopener noreferrer'>\n            <div className='status__avatar'>\n              <Avatar account={this.props.status.get('account')} size={48} />\n            </div>\n\n            <DisplayName account={this.props.status.get('account')} />\n          </a>\n        </div>\n\n        <StatusContent status={this.props.status} />\n      </div>\n    );\n\n    return (\n      <div className='modal-root__modal actions-modal'>\n        {status}\n\n        <ul className={classNames({ 'with-status': !!status })}>\n          {this.props.actions.map(this.renderAction)}\n        </ul>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport Video from 'flavours/glitch/features/video';\nimport { connect } from 'react-redux';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport Footer from 'flavours/glitch/features/picture_in_picture/components/footer';\nimport { getAverageFromBlurhash } from 'flavours/glitch/blurhash';\n\nconst mapStateToProps = (state, { statusId }) => ({\n  language: state.getIn(['statuses', statusId, 'language']),\n});\n\nexport default @connect(mapStateToProps, null, null, { forwardRef: true })\nclass VideoModal extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    media: ImmutablePropTypes.map.isRequired,\n    statusId: PropTypes.string,\n    language: PropTypes.string,\n    options: PropTypes.shape({\n      startTime: PropTypes.number,\n      autoPlay: PropTypes.bool,\n      defaultVolume: PropTypes.number,\n    }),\n    onClose: PropTypes.func.isRequired,\n    onChangeBackgroundColor: PropTypes.func.isRequired,\n  };\n\n  componentDidMount () {\n    const { media, onChangeBackgroundColor, onClose } = this.props;\n\n    const backgroundColor = getAverageFromBlurhash(media.get('blurhash'));\n\n    if (backgroundColor) {\n      onChangeBackgroundColor(backgroundColor);\n    }\n  }\n\n  render () {\n    const { media, statusId, language, onClose } = this.props;\n    const options = this.props.options || {};\n\n    return (\n      <div className='modal-root__modal video-modal'>\n        <div className='video-modal__container'>\n          <Video\n            preview={media.get('preview_url')}\n            frameRate={media.getIn(['meta', 'original', 'frame_rate'])}\n            blurhash={media.get('blurhash')}\n            src={media.get('url')}\n            currentTime={options.startTime}\n            autoPlay={options.autoPlay}\n            volume={options.defaultVolume}\n            onCloseVideo={onClose}\n            autoFocus\n            detailed\n            alt={media.get('description')}\n            lang={language}\n          />\n        </div>\n\n        <div className='media-modal__overlay'>\n          {statusId && <Footer statusId={statusId} withOpenButton onClose={onClose} />}\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport Button from 'flavours/glitch/components/button';\nimport StatusContent from 'flavours/glitch/components/status_content';\nimport Avatar from 'flavours/glitch/components/avatar';\nimport RelativeTimestamp from 'flavours/glitch/components/relative_timestamp';\nimport DisplayName from 'flavours/glitch/components/display_name';\nimport AttachmentList from 'flavours/glitch/components/attachment_list';\nimport Icon from 'flavours/glitch/components/icon';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport PrivacyDropdown from 'flavours/glitch/features/compose/components/privacy_dropdown';\nimport classNames from 'classnames';\nimport { changeBoostPrivacy } from 'flavours/glitch/actions/boosts';\nimport VisibilityIcon from 'flavours/glitch/components/status_visibility_icon';\n\nconst messages = defineMessages({\n  cancel_reblog: { id: 'status.cancel_reblog_private', defaultMessage: 'Unboost' },\n  reblog: { id: 'status.reblog', defaultMessage: 'Boost' },\n});\n\nconst mapStateToProps = state => {\n  return {\n    privacy: state.getIn(['boosts', 'new', 'privacy']),\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onChangeBoostPrivacy(value) {\n      dispatch(changeBoostPrivacy(value));\n    },\n  };\n};\n\nexport default @connect(mapStateToProps, mapDispatchToProps)\n@injectIntl\nclass BoostModal extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    status: ImmutablePropTypes.map.isRequired,\n    onReblog: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    missingMediaDescription: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  componentDidMount() {\n    this.button.focus();\n  }\n\n  handleReblog = () => {\n    this.props.onReblog(this.props.status, this.props.privacy);\n    this.props.onClose();\n  };\n\n  handleAccountClick = (e) => {\n    if (e.button === 0) {\n      e.preventDefault();\n      this.props.onClose();\n      let state = { ...this.context.router.history.location.state };\n      state.mastodonBackSteps = (state.mastodonBackSteps || 0) + 1;\n      this.context.router.history.push(`/@${this.props.status.getIn(['account', 'acct'])}`, state);\n    }\n  };\n\n  _findContainer = () => {\n    return document.getElementsByClassName('modal-root__container')[0];\n  };\n\n  setRef = (c) => {\n    this.button = c;\n  };\n\n  render () {\n    const { status, missingMediaDescription, privacy, intl } = this.props;\n    const buttonText = status.get('reblogged') ? messages.cancel_reblog : messages.reblog;\n\n    return (\n      <div className='modal-root__modal boost-modal'>\n        <div className='boost-modal__container'>\n          <div className={classNames('status', `status-${status.get('visibility')}`, 'light')}>\n            <div className='boost-modal__status-header'>\n              <div className='boost-modal__status-time'>\n                <a href={status.get('url')} className='status__relative-time' target='_blank' rel='noopener noreferrer'>\n                  <VisibilityIcon visibility={status.get('visibility')} />\n                  <RelativeTimestamp timestamp={status.get('created_at')} /></a>\n              </div>\n\n              <a onClick={this.handleAccountClick} href={status.getIn(['account', 'url'])} className='status__display-name'>\n                <div className='status__avatar'>\n                  <Avatar account={status.get('account')} size={48} />\n                </div>\n\n                <DisplayName account={status.get('account')} />\n              </a>\n            </div>\n\n            <StatusContent status={status} />\n\n            {status.get('media_attachments').size > 0 && (\n              <AttachmentList\n                compact\n                media={status.get('media_attachments')}\n              />\n            )}\n          </div>\n        </div>\n\n        <div className='boost-modal__action-bar'>\n          <div>\n            { missingMediaDescription ?\n              <FormattedMessage id='boost_modal.missing_description' defaultMessage='This toot contains some media without description' />\n              :\n              <FormattedMessage id='boost_modal.combo' defaultMessage='You can press {combo} to skip this next time' values={{ combo: <span>Shift + <Icon id='retweet' /></span> }} />\n            }\n          </div>\n\n          {status.get('visibility') !== 'private' && !status.get('reblogged') && (\n            <PrivacyDropdown\n              noDirect\n              value={privacy}\n              container={this._findContainer}\n              onChange={this.props.onChangeBoostPrivacy}\n            />\n          )}\n          <Button text={intl.formatMessage(buttonText)} onClick={this.handleReblog} ref={this.setRef} />\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport Button from 'flavours/glitch/components/button';\nimport StatusContent from 'flavours/glitch/components/status_content';\nimport Avatar from 'flavours/glitch/components/avatar';\nimport RelativeTimestamp from 'flavours/glitch/components/relative_timestamp';\nimport DisplayName from 'flavours/glitch/components/display_name';\nimport AttachmentList from 'flavours/glitch/components/attachment_list';\nimport Icon from 'flavours/glitch/components/icon';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport classNames from 'classnames';\nimport VisibilityIcon from 'flavours/glitch/components/status_visibility_icon';\n\nconst messages = defineMessages({\n  favourite: { id: 'status.favourite', defaultMessage: 'Favourite' },\n});\n\nexport default @injectIntl\nclass FavouriteModal extends ImmutablePureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  static propTypes = {\n    status: ImmutablePropTypes.map.isRequired,\n    onFavourite: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  componentDidMount() {\n    this.button.focus();\n  }\n\n  handleFavourite = () => {\n    this.props.onFavourite(this.props.status);\n    this.props.onClose();\n  };\n\n  handleAccountClick = (e) => {\n    if (e.button === 0) {\n      e.preventDefault();\n      this.props.onClose();\n      let state = { ...this.context.router.history.location.state };\n      state.mastodonBackSteps = (state.mastodonBackSteps || 0) + 1;\n      this.context.router.history.push(`/@${this.props.status.getIn(['account', 'acct'])}`, state);\n    }\n  };\n\n  setRef = (c) => {\n    this.button = c;\n  };\n\n  render () {\n    const { status, intl } = this.props;\n\n    return (\n      <div className='modal-root__modal boost-modal'>\n        <div className='boost-modal__container'>\n          <div className={classNames('status', `status-${status.get('visibility')}`, 'light')}>\n            <div className='boost-modal__status-header'>\n              <div className='boost-modal__status-time'>\n                <a href={status.get('url')} className='status__relative-time' target='_blank' rel='noopener noreferrer'>\n                  <VisibilityIcon visibility={status.get('visibility')} />\n                  <RelativeTimestamp timestamp={status.get('created_at')} />\n                </a>\n              </div>\n\n              <a onClick={this.handleAccountClick} href={status.getIn(['account', 'url'])} className='status__display-name'>\n                <div className='status__avatar'>\n                  <Avatar account={status.get('account')} size={48} />\n                </div>\n\n                <DisplayName account={status.get('account')} />\n\n              </a>\n            </div>\n\n            <StatusContent status={status} />\n\n            {status.get('media_attachments').size > 0 && (\n              <AttachmentList\n                compact\n                media={status.get('media_attachments')}\n              />\n            )}\n          </div>\n        </div>\n\n        <div className='boost-modal__action-bar'>\n          <div><FormattedMessage id='favourite_modal.combo' defaultMessage='You can press {combo} to skip this next time' values={{ combo: <span>Shift + <Icon id='star' /></span> }} /></div>\n          <Button text={intl.formatMessage(messages.favourite)} onClick={this.handleFavourite} ref={this.setRef} />\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport Audio from 'flavours/glitch/features/audio';\nimport { connect } from 'react-redux';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport Footer from 'flavours/glitch/features/picture_in_picture/components/footer';\n\nconst mapStateToProps = (state, { statusId }) => ({\n  language: state.getIn(['statuses', statusId, 'language']),\n  accountStaticAvatar: state.getIn(['accounts', state.getIn(['statuses', statusId, 'account']), 'avatar_static']),\n});\n\nexport default @connect(mapStateToProps, null, null, { forwardRef: true })\nclass AudioModal extends ImmutablePureComponent {\n\n  static propTypes = {\n    media: ImmutablePropTypes.map.isRequired,\n    statusId: PropTypes.string.isRequired,\n    language: PropTypes.string,\n    accountStaticAvatar: PropTypes.string.isRequired,\n    options: PropTypes.shape({\n      autoPlay: PropTypes.bool,\n    }),\n    onClose: PropTypes.func.isRequired,\n    onChangeBackgroundColor: PropTypes.func.isRequired,\n  };\n\n  static contextTypes = {\n    router: PropTypes.object,\n  };\n\n  render () {\n    const { media, language, accountStaticAvatar, statusId, onClose } = this.props;\n    const options = this.props.options || {};\n\n    return (\n      <div className='modal-root__modal audio-modal'>\n        <div className='audio-modal__container'>\n          <Audio\n            src={media.get('url')}\n            alt={media.get('description')}\n            lang={language}\n            duration={media.getIn(['meta', 'original', 'duration'], 0)}\n            height={150}\n            poster={media.get('preview_url') || accountStaticAvatar}\n            backgroundColor={media.getIn(['meta', 'colors', 'background'])}\n            foregroundColor={media.getIn(['meta', 'colors', 'foreground'])}\n            accentColor={media.getIn(['meta', 'colors', 'accent'])}\n            autoPlay={options.autoPlay}\n          />\n        </div>\n\n        <div className='media-modal__overlay'>\n          {statusId && <Footer statusId={statusId} withOpenButton onClose={onClose} />}\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'flavours/glitch/components/button';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport Atrament from 'atrament'; // the doodling library\nimport { connect } from 'react-redux';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { doodleSet, uploadCompose } from 'flavours/glitch/actions/compose';\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport { debounce, mapValues } from 'lodash';\nimport classNames from 'classnames';\n\n// palette nicked from MyPaint, CC0\nconst palette = [\n  ['rgb(  0,    0,    0)', 'Black'],\n  ['rgb( 38,   38,   38)', 'Gray 15'],\n  ['rgb( 77,   77,   77)', 'Grey 30'],\n  ['rgb(128,  128,  128)', 'Grey 50'],\n  ['rgb(171,  171,  171)', 'Grey 67'],\n  ['rgb(217,  217,  217)', 'Grey 85'],\n  ['rgb(255,  255,  255)', 'White'],\n  ['rgb(128,    0,    0)', 'Maroon'],\n  ['rgb(209,    0,    0)', 'English-red'],\n  ['rgb(255,   54,   34)', 'Tomato'],\n  ['rgb(252,   60,    3)', 'Orange-red'],\n  ['rgb(255,  140,  105)', 'Salmon'],\n  ['rgb(252,  232,   32)', 'Cadium-yellow'],\n  ['rgb(243,  253,   37)', 'Lemon yellow'],\n  ['rgb(121,    5,   35)', 'Dark crimson'],\n  ['rgb(169,   32,   62)', 'Deep carmine'],\n  ['rgb(255,  140,    0)', 'Orange'],\n  ['rgb(255,  168,   18)', 'Dark tangerine'],\n  ['rgb(217,  144,   88)', 'Persian orange'],\n  ['rgb(194,  178,  128)', 'Sand'],\n  ['rgb(255,  229,  180)', 'Peach'],\n  ['rgb(100,   54,   46)', 'Bole'],\n  ['rgb(108,   41,   52)', 'Dark cordovan'],\n  ['rgb(163,   65,   44)', 'Chestnut'],\n  ['rgb(228,  136,  100)', 'Dark salmon'],\n  ['rgb(255,  195,  143)', 'Apricot'],\n  ['rgb(255,  219,  188)', 'Unbleached silk'],\n  ['rgb(242,  227,  198)', 'Straw'],\n  ['rgb( 53,   19,   13)', 'Bistre'],\n  ['rgb( 84,   42,   14)', 'Dark chocolate'],\n  ['rgb(102,   51,   43)', 'Burnt sienna'],\n  ['rgb(184,   66,    0)', 'Sienna'],\n  ['rgb(216,  153,   12)', 'Yellow ochre'],\n  ['rgb(210,  180,  140)', 'Tan'],\n  ['rgb(232,  204,  144)', 'Dark wheat'],\n  ['rgb(  0,   49,   83)', 'Prussian blue'],\n  ['rgb( 48,   69,  119)', 'Dark grey blue'],\n  ['rgb(  0,   71,  171)', 'Cobalt blue'],\n  ['rgb( 31,  117,  254)', 'Blue'],\n  ['rgb(120,  180,  255)', 'Bright french blue'],\n  ['rgb(171,  200,  255)', 'Bright steel blue'],\n  ['rgb(208,  231,  255)', 'Ice blue'],\n  ['rgb( 30,   51,   58)', 'Medium jungle green'],\n  ['rgb( 47,   79,   79)', 'Dark slate grey'],\n  ['rgb( 74,  104,   93)', 'Dark grullo green'],\n  ['rgb(  0,  128,  128)', 'Teal'],\n  ['rgb( 67,  170,  176)', 'Turquoise'],\n  ['rgb(109,  174,  199)', 'Cerulean frost'],\n  ['rgb(173,  217,  186)', 'Tiffany green'],\n  ['rgb( 22,   34,   29)', 'Gray-asparagus'],\n  ['rgb( 36,   48,   45)', 'Medium dark teal'],\n  ['rgb( 74,  104,   93)', 'Xanadu'],\n  ['rgb(119,  198,  121)', 'Mint'],\n  ['rgb(175,  205,  182)', 'Timberwolf'],\n  ['rgb(185,  245,  246)', 'Celeste'],\n  ['rgb(193,  255,  234)', 'Aquamarine'],\n  ['rgb( 29,   52,   35)', 'Cal Poly Pomona'],\n  ['rgb(  1,   68,   33)', 'Forest green'],\n  ['rgb( 42,  128,    0)', 'Napier green'],\n  ['rgb(128,  128,    0)', 'Olive'],\n  ['rgb( 65,  156,  105)', 'Sea green'],\n  ['rgb(189,  246,   29)', 'Green-yellow'],\n  ['rgb(231,  244,  134)', 'Bright chartreuse'],\n  ['rgb(138,   23,  137)', 'Purple'],\n  ['rgb( 78,   39,  138)', 'Violet'],\n  ['rgb(193,   75,  110)', 'Dark thulian pink'],\n  ['rgb(222,   49,   99)', 'Cerise'],\n  ['rgb(255,   20,  147)', 'Deep pink'],\n  ['rgb(255,  102,  204)', 'Rose pink'],\n  ['rgb(255,  203,  219)', 'Pink'],\n  ['rgb(255,  255,  255)', 'White'],\n  ['rgb(229,   17,    1)', 'RGB Red'],\n  ['rgb(  0,  255,    0)', 'RGB Green'],\n  ['rgb(  0,    0,  255)', 'RGB Blue'],\n  ['rgb(  0,  255,  255)', 'CMYK Cyan'],\n  ['rgb(255,    0,  255)', 'CMYK Magenta'],\n  ['rgb(255,  255,    0)', 'CMYK Yellow'],\n];\n\n// re-arrange to the right order for display\nlet palReordered = [];\nfor (let row = 0; row < 7; row++) {\n  for (let col = 0; col < 11; col++) {\n    palReordered.push(palette[col * 7 + row]);\n  }\n  palReordered.push(null); // null indicates a <br />\n}\n\n// Utility for converting base64 image to binary for upload\n// https://stackoverflow.com/questions/35940290/how-to-convert-base64-string-to-javascript-file-object-like-as-from-file-input-f\nfunction dataURLtoFile(dataurl, filename) {\n  let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n    bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n  while(n--){\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new File([u8arr], filename, { type: mime });\n}\n/** Doodle canvas size options */\nconst DOODLE_SIZES = {\n  normal: [500, 500, 'Square 500'],\n  tootbanner: [702, 330, 'Tootbanner'],\n  s640x480: [640, 480, '640480 - 480p'],\n  s800x600: [800, 600, '800600 - SVGA'],\n  s720x480: [720, 405, '720x405 - 16:9'],\n};\n\n\nconst mapStateToProps = state => ({\n  options: state.getIn(['compose', 'doodle']),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  /** Set options in the redux store */\n  setOpt: (opts) => dispatch(doodleSet(opts)),\n  /** Submit doodle for upload */\n  submit: (file) => dispatch(uploadCompose([file])),\n});\n\n/**\n * Doodling dialog with drawing canvas\n *\n * Keyboard shortcuts:\n * - Delete: Clear screen, fill with background color\n * - Backspace, Ctrl+Z: Undo one step\n * - Ctrl held while drawing: Use background color\n * - Shift held while clicking screen: Use fill tool\n *\n * Palette:\n * - Left mouse button: pick foreground\n * - Ctrl + left mouse button: pick background\n * - Right mouse button: pick background\n */\nexport default @connect(mapStateToProps, mapDispatchToProps)\nclass DoodleModal extends ImmutablePureComponent {\n\n  static propTypes = {\n    options: ImmutablePropTypes.map,\n    onClose: PropTypes.func.isRequired,\n    setOpt: PropTypes.func.isRequired,\n    submit: PropTypes.func.isRequired,\n  };\n\n  //region Option getters/setters\n\n  /** Foreground color */\n  get fg () {\n    return this.props.options.get('fg');\n  }\n  set fg (value) {\n    this.props.setOpt({ fg: value });\n  }\n\n  /** Background color */\n  get bg () {\n    return this.props.options.get('bg');\n  }\n  set bg (value) {\n    this.props.setOpt({ bg: value });\n  }\n\n  /** Swap Fg and Bg for drawing */\n  get swapped () {\n    return this.props.options.get('swapped');\n  }\n  set swapped (value) {\n    this.props.setOpt({ swapped: value });\n  }\n\n  /** Mode - 'draw' or 'fill' */\n  get mode () {\n    return this.props.options.get('mode');\n  }\n  set mode (value) {\n    this.props.setOpt({ mode: value });\n  }\n\n  /** Base line weight */\n  get weight () {\n    return this.props.options.get('weight');\n  }\n  set weight (value) {\n    this.props.setOpt({ weight: value });\n  }\n\n  /** Drawing opacity */\n  get opacity () {\n    return this.props.options.get('opacity');\n  }\n  set opacity (value) {\n    this.props.setOpt({ opacity: value });\n  }\n\n  /** Adaptive stroke - change width with speed */\n  get adaptiveStroke () {\n    return this.props.options.get('adaptiveStroke');\n  }\n  set adaptiveStroke (value) {\n    this.props.setOpt({ adaptiveStroke: value });\n  }\n\n  /** Smoothing (for mouse drawing) */\n  get smoothing () {\n    return this.props.options.get('smoothing');\n  }\n  set smoothing (value) {\n    this.props.setOpt({ smoothing: value });\n  }\n\n  /** Size preset */\n  get size () {\n    return this.props.options.get('size');\n  }\n  set size (value) {\n    this.props.setOpt({ size: value });\n  }\n\n  //endregion\n\n  /** Key up handler */\n  handleKeyUp = (e) => {\n    if (e.target.nodeName === 'INPUT') return;\n\n    if (e.key === 'Delete') {\n      e.preventDefault();\n      this.handleClearBtn();\n      return;\n    }\n\n    if (e.key === 'Backspace' || (e.key === 'z' && (e.ctrlKey || e.metaKey))) {\n      e.preventDefault();\n      this.undo();\n    }\n\n    if (e.key === 'Control' || e.key === 'Meta') {\n      this.controlHeld = false;\n      this.swapped = false;\n    }\n\n    if (e.key === 'Shift') {\n      this.shiftHeld = false;\n      this.mode = 'draw';\n    }\n  };\n\n  /** Key down handler */\n  handleKeyDown = (e) => {\n    if (e.key === 'Control' || e.key === 'Meta') {\n      this.controlHeld = true;\n      this.swapped = true;\n    }\n\n    if (e.key === 'Shift') {\n      this.shiftHeld = true;\n      this.mode = 'fill';\n    }\n  };\n\n  /**\n   * Component installed in the DOM, do some initial set-up\n   */\n  componentDidMount () {\n    this.controlHeld = false;\n    this.shiftHeld = false;\n    this.swapped = false;\n    window.addEventListener('keyup', this.handleKeyUp, false);\n    window.addEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  /**\n   * Tear component down\n   */\n  componentWillUnmount () {\n    window.removeEventListener('keyup', this.handleKeyUp, false);\n    window.removeEventListener('keydown', this.handleKeyDown, false);\n    if (this.sketcher) this.sketcher.destroy();\n  }\n\n  /**\n   * Set reference to the canvas element.\n   * This is called during component init\n   *\n   * @param elem - canvas element\n   */\n  setCanvasRef = (elem) => {\n    this.canvas = elem;\n    if (elem) {\n      elem.addEventListener('dirty', () => {\n        this.saveUndo();\n        this.sketcher._dirty = false;\n      });\n\n      elem.addEventListener('click', () => {\n        // sketcher bug - does not fire dirty on fill\n        if (this.mode === 'fill') {\n          this.saveUndo();\n        }\n      });\n\n      // prevent context menu\n      elem.addEventListener('contextmenu', (e) => {\n        e.preventDefault();\n      });\n\n      elem.addEventListener('mousedown', (e) => {\n        if (e.button === 2) {\n          this.swapped = true;\n        }\n      });\n\n      elem.addEventListener('mouseup', (e) => {\n        if (e.button === 2) {\n          this.swapped = this.controlHeld;\n        }\n      });\n\n      this.initSketcher(elem);\n      this.mode = 'draw'; // Reset mode - it's confusing if left at 'fill'\n    }\n  };\n\n  /**\n   * Set up the sketcher instance\n   *\n   * @param canvas - canvas element. Null if we're just resizing\n   */\n  initSketcher (canvas = null) {\n    const sizepreset = DOODLE_SIZES[this.size];\n\n    if (this.sketcher) this.sketcher.destroy();\n    this.sketcher = new Atrament(canvas || this.canvas, sizepreset[0], sizepreset[1]);\n\n    if (canvas) {\n      this.ctx = this.sketcher.context;\n      this.updateSketcherSettings();\n    }\n\n    this.clearScreen();\n  }\n\n  /**\n   * Done button handler\n   */\n  onDoneButton = () => {\n    const dataUrl = this.sketcher.toImage();\n    const file = dataURLtoFile(dataUrl, 'doodle.png');\n    this.props.submit(file);\n    this.props.onClose(); // close dialog\n  };\n\n  /**\n   * Cancel button handler\n   */\n  onCancelButton = () => {\n    if (this.undos.length > 1 && !confirm('Discard doodle? All changes will be lost!')) {\n      return;\n    }\n\n    this.props.onClose(); // close dialog\n  };\n\n  /**\n   * Update sketcher options based on state\n   */\n  updateSketcherSettings () {\n    if (!this.sketcher) return;\n\n    if (this.oldSize !== this.size) this.initSketcher();\n\n    this.sketcher.color = (this.swapped ? this.bg : this.fg);\n    this.sketcher.opacity = this.opacity;\n    this.sketcher.weight = this.weight;\n    this.sketcher.mode = this.mode;\n    this.sketcher.smoothing = this.smoothing;\n    this.sketcher.adaptiveStroke = this.adaptiveStroke;\n\n    this.oldSize = this.size;\n  }\n\n  /**\n   * Fill screen with background color\n   */\n  clearScreen = () => {\n    this.ctx.fillStyle = this.bg;\n    this.ctx.fillRect(-1, -1, this.canvas.width+2, this.canvas.height+2);\n    this.undos = [];\n\n    this.doSaveUndo();\n  };\n\n  /**\n   * Undo one step\n   */\n  undo = () => {\n    if (this.undos.length > 1) {\n      this.undos.pop();\n      const buf = this.undos.pop();\n\n      this.sketcher.clear();\n      this.ctx.putImageData(buf, 0, 0);\n      this.doSaveUndo();\n    }\n  };\n\n  /**\n   * Save canvas content into the undo buffer immediately\n   */\n  doSaveUndo = () => {\n    this.undos.push(this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height));\n  };\n\n  /**\n   * Called on each canvas change.\n   * Saves canvas content to the undo buffer after some period of inactivity.\n   */\n  saveUndo = debounce(() => {\n    this.doSaveUndo();\n  }, 100);\n\n  /**\n   * Palette left click.\n   * Selects Fg color (or Bg, if Control/Meta is held)\n   *\n   * @param e - event\n   */\n  onPaletteClick = (e) => {\n    const c = e.target.dataset.color;\n\n    if (this.controlHeld) {\n      this.bg = c;\n    } else {\n      this.fg = c;\n    }\n\n    e.target.blur();\n    e.preventDefault();\n  };\n\n  /**\n   * Palette right click.\n   * Selects Bg color\n   *\n   * @param e - event\n   */\n  onPaletteRClick = (e) => {\n    this.bg = e.target.dataset.color;\n    e.target.blur();\n    e.preventDefault();\n  };\n\n  /**\n   * Handle click on the Draw mode button\n   *\n   * @param e - event\n   */\n  setModeDraw = (e) => {\n    this.mode = 'draw';\n    e.target.blur();\n  };\n\n  /**\n   * Handle click on the Fill mode button\n   *\n   * @param e - event\n   */\n  setModeFill = (e) => {\n    this.mode = 'fill';\n    e.target.blur();\n  };\n\n  /**\n   * Handle click on Smooth checkbox\n   *\n   * @param e - event\n   */\n  tglSmooth = (e) => {\n    this.smoothing = !this.smoothing;\n    e.target.blur();\n  };\n\n  /**\n   * Handle click on Adaptive checkbox\n   *\n   * @param e - event\n   */\n  tglAdaptive = (e) => {\n    this.adaptiveStroke = !this.adaptiveStroke;\n    e.target.blur();\n  };\n\n  /**\n   * Handle change of the Weight input field\n   *\n   * @param e - event\n   */\n  setWeight = (e) => {\n    this.weight = +e.target.value || 1;\n  };\n\n  /**\n   * Set size - clalback from the select box\n   *\n   * @param e - event\n   */\n  changeSize = (e) => {\n    let newSize = e.target.value;\n    if (newSize === this.oldSize) return;\n\n    if (this.undos.length > 1 && !confirm('Change canvas size? This will erase your current drawing!')) {\n      return;\n    }\n\n    this.size = newSize;\n  };\n\n  handleClearBtn = () => {\n    if (this.undos.length > 1 && !confirm('Clear canvas? This will erase your current drawing!')) {\n      return;\n    }\n\n    this.clearScreen();\n  };\n\n  /**\n   * Render the component\n   */\n  render () {\n    this.updateSketcherSettings();\n\n    return (\n      <div className='modal-root__modal doodle-modal'>\n        <div className='doodle-modal__container'>\n          <canvas ref={this.setCanvasRef} />\n        </div>\n\n        <div className='doodle-modal__action-bar'>\n          <div className='doodle-toolbar'>\n            <Button text='Done' onClick={this.onDoneButton} />\n            <Button text='Cancel' onClick={this.onCancelButton} />\n          </div>\n          <div className='filler' />\n          <div className='doodle-toolbar with-inputs'>\n            <div>\n              <label htmlFor='dd_smoothing'>Smoothing</label>\n              <span className='val'>\n                <input type='checkbox' id='dd_smoothing' onChange={this.tglSmooth} checked={this.smoothing} />\n              </span>\n            </div>\n            <div>\n              <label htmlFor='dd_adaptive'>Adaptive</label>\n              <span className='val'>\n                <input type='checkbox' id='dd_adaptive' onChange={this.tglAdaptive} checked={this.adaptiveStroke} />\n              </span>\n            </div>\n            <div>\n              <label htmlFor='dd_weight'>Weight</label>\n              <span className='val'>\n                <input type='number' min={1} id='dd_weight' value={this.weight} onChange={this.setWeight} />\n              </span>\n            </div>\n            <div>\n              <select aria-label='Canvas size' onInput={this.changeSize} defaultValue={this.size}>\n                { Object.values(mapValues(DOODLE_SIZES, (val, k) =>\n                  <option key={k} value={k}>{val[2]}</option>,\n                )) }\n              </select>\n            </div>\n          </div>\n          <div className='doodle-toolbar'>\n            <IconButton icon='pencil' title='Draw' label='Draw' onClick={this.setModeDraw} size={18} active={this.mode === 'draw'} inverted />\n            <IconButton icon='bath' title='Fill' label='Fill' onClick={this.setModeFill} size={18} active={this.mode === 'fill'} inverted />\n            <IconButton icon='undo' title='Undo' label='Undo' onClick={this.undo} size={18} inverted />\n            <IconButton icon='trash' title='Clear' label='Clear' onClick={this.handleClearBtn} size={18} inverted />\n          </div>\n          <div className='doodle-palette'>\n            {\n              palReordered.map((c, i) =>\n                c === null ?\n                  <br key={i} /> :\n                  <button\n                    key={i}\n                    style={{ backgroundColor: c[0] }}\n                    onClick={this.onPaletteClick}\n                    onContextMenu={this.onPaletteRClick}\n                    data-color={c[0]}\n                    title={c[1]}\n                    className={classNames({\n                      'foreground': this.fg === c[0],\n                      'background': this.bg === c[0],\n                    })}\n                  />,\n              )\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, FormattedMessage } from 'react-intl';\nimport Button from 'flavours/glitch/components/button';\n\nexport default @injectIntl\nclass ConfirmationModal extends React.PureComponent {\n\n  static propTypes = {\n    message: PropTypes.node.isRequired,\n    confirm: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n    secondary: PropTypes.string,\n    onSecondary: PropTypes.func,\n    closeWhenConfirm: PropTypes.bool,\n    onDoNotAsk: PropTypes.func,\n    intl: PropTypes.object.isRequired,\n  };\n\n  static defaultProps = {\n    closeWhenConfirm: true,\n  };\n\n  componentDidMount() {\n    this.button.focus();\n  }\n\n  handleClick = () => {\n    if (this.props.closeWhenConfirm) {\n      this.props.onClose();\n    }\n    this.props.onConfirm();\n    if (this.props.onDoNotAsk && this.doNotAskCheckbox.checked) {\n      this.props.onDoNotAsk();\n    }\n  };\n\n  handleSecondary = () => {\n    this.props.onClose();\n    this.props.onSecondary();\n  };\n\n  handleCancel = () => {\n    this.props.onClose();\n  };\n\n  setRef = (c) => {\n    this.button = c;\n  };\n\n  setDoNotAskRef = (c) => {\n    this.doNotAskCheckbox = c;\n  };\n\n  render () {\n    const { message, confirm, secondary, onDoNotAsk } = this.props;\n\n    return (\n      <div className='modal-root__modal confirmation-modal'>\n        <div className='confirmation-modal__container'>\n          {message}\n        </div>\n\n        <div>\n          { onDoNotAsk && (\n            <div className='confirmation-modal__do_not_ask_again'>\n              <input type='checkbox' id='confirmation-modal__do_not_ask_again-checkbox' ref={this.setDoNotAskRef} />\n              <label for='confirmation-modal__do_not_ask_again-checkbox'>\n                <FormattedMessage id='confirmation_modal.do_not_ask_again' defaultMessage='Do not ask for confirmation again' />\n              </label>\n            </div>\n          )}\n          <div className='confirmation-modal__action-bar'>\n            <Button onClick={this.handleCancel} className='confirmation-modal__cancel-button'>\n              <FormattedMessage id='confirmation_modal.cancel' defaultMessage='Cancel' />\n            </Button>\n            {secondary !== undefined && (\n              <Button text={secondary} onClick={this.handleSecondary} className='confirmation-modal__secondary-button' />\n            )}\n            <Button text={confirm} onClick={this.handleClick} ref={this.setRef} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport PropTypes from 'prop-types';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport { changeUploadCompose, uploadThumbnail, onChangeMediaDescription, onChangeMediaFocus } from 'flavours/glitch/actions/compose';\nimport Video, { getPointerPosition } from 'flavours/glitch/features/video';\nimport { FormattedMessage, defineMessages, injectIntl } from 'react-intl';\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport Button from 'flavours/glitch/components/button';\nimport Audio from 'flavours/glitch/features/audio';\nimport Textarea from 'react-textarea-autosize';\nimport UploadProgress from 'flavours/glitch/features/compose/components/upload_progress';\nimport CharacterCounter from 'flavours/glitch/features/compose/components/character_counter';\nimport { length } from 'stringz';\nimport { Tesseract as fetchTesseract } from 'flavours/glitch/features/ui/util/async-components';\nimport GIFV from 'flavours/glitch/components/gifv';\nimport { me } from 'flavours/glitch/initial_state';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport tesseractCorePath from 'tesseract.js-core/tesseract-core.wasm.js';\n// eslint-disable-next-line import/extensions\nimport tesseractWorkerPath from 'tesseract.js/dist/worker.min.js';\nimport { assetHost } from 'flavours/glitch/utils/config';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n  apply: { id: 'upload_modal.apply', defaultMessage: 'Apply' },\n  applying: { id: 'upload_modal.applying', defaultMessage: 'Applying' },\n  placeholder: { id: 'upload_modal.description_placeholder', defaultMessage: 'A quick brown fox jumps over the lazy dog' },\n  chooseImage: { id: 'upload_modal.choose_image', defaultMessage: 'Choose image' },\n  discardMessage: { id: 'confirmations.discard_edit_media.message', defaultMessage: 'You have unsaved changes to the media description or preview, discard them anyway?' },\n  discardConfirm: { id: 'confirmations.discard_edit_media.confirm', defaultMessage: 'Discard' },\n});\n\nconst mapStateToProps = (state, { id }) => ({\n  media: state.getIn(['compose', 'media_attachments']).find(item => item.get('id') === id),\n  account: state.getIn(['accounts', me]),\n  isUploadingThumbnail: state.getIn(['compose', 'isUploadingThumbnail']),\n  description: state.getIn(['compose', 'media_modal', 'description']),\n  lang: state.getIn(['compose', 'language']),\n  focusX: state.getIn(['compose', 'media_modal', 'focusX']),\n  focusY: state.getIn(['compose', 'media_modal', 'focusY']),\n  dirty: state.getIn(['compose', 'media_modal', 'dirty']),\n  is_changing_upload: state.getIn(['compose', 'is_changing_upload']),\n});\n\nconst mapDispatchToProps = (dispatch, { id }) => ({\n\n  onSave: (description, x, y) => {\n    dispatch(changeUploadCompose(id, { description, focus: `${x.toFixed(2)},${y.toFixed(2)}` }));\n  },\n\n  onChangeDescription: (description) => {\n    dispatch(onChangeMediaDescription(description));\n  },\n\n  onChangeFocus: (focusX, focusY) => {\n    dispatch(onChangeMediaFocus(focusX, focusY));\n  },\n\n  onSelectThumbnail: files => {\n    dispatch(uploadThumbnail(id, files[0]));\n  },\n\n});\n\nconst removeExtraLineBreaks = str => str.replace(/\\n\\n/g, '******')\n  .replace(/\\n/g, ' ')\n  .replace(/\\*\\*\\*\\*\\*\\*/g, '\\n\\n');\n\nclass ImageLoader extends React.PureComponent {\n\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    width: PropTypes.number,\n    height: PropTypes.number,\n  };\n\n  state = {\n    loading: true,\n  };\n\n  componentDidMount() {\n    const image = new Image();\n    image.addEventListener('load', () => this.setState({ loading: false }));\n    image.src = this.props.src;\n  }\n\n  render () {\n    const { loading } = this.state;\n\n    if (loading) {\n      return <canvas width={this.props.width} height={this.props.height} />;\n    } else {\n      return <img {...this.props} alt='' />;\n    }\n  }\n\n}\n\nexport default @connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })\n@(component => injectIntl(component, { withRef: true }))\nclass FocalPointModal extends ImmutablePureComponent {\n\n  static propTypes = {\n    media: ImmutablePropTypes.map.isRequired,\n    account: ImmutablePropTypes.map.isRequired,\n    isUploadingThumbnail: PropTypes.bool,\n    onSave: PropTypes.func.isRequired,\n    onChangeDescription: PropTypes.func.isRequired,\n    onChangeFocus: PropTypes.func.isRequired,\n    onSelectThumbnail: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  state = {\n    dragging: false,\n    dirty: false,\n    progress: 0,\n    loading: true,\n    ocrStatus: '',\n  };\n\n  componentWillUnmount () {\n    document.removeEventListener('mousemove', this.handleMouseMove);\n    document.removeEventListener('mouseup', this.handleMouseUp);\n  }\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove);\n    document.addEventListener('mouseup', this.handleMouseUp);\n\n    this.updatePosition(e);\n    this.setState({ dragging: true });\n  };\n\n  handleTouchStart = e => {\n    document.addEventListener('touchmove', this.handleMouseMove);\n    document.addEventListener('touchend', this.handleTouchEnd);\n\n    this.updatePosition(e);\n    this.setState({ dragging: true });\n  };\n\n  handleMouseMove = e => {\n    this.updatePosition(e);\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove);\n    document.removeEventListener('mouseup', this.handleMouseUp);\n\n    this.setState({ dragging: false });\n  };\n\n  handleTouchEnd = () => {\n    document.removeEventListener('touchmove', this.handleMouseMove);\n    document.removeEventListener('touchend', this.handleTouchEnd);\n\n    this.setState({ dragging: false });\n  };\n\n  updatePosition = e => {\n    const { x, y } = getPointerPosition(this.node, e);\n    const focusX   = (x - .5) *  2;\n    const focusY   = (y - .5) * -2;\n\n    this.props.onChangeFocus(focusX, focusY);\n  };\n\n  handleChange = e => {\n    this.props.onChangeDescription(e.target.value);\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13 && (e.ctrlKey || e.metaKey)) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.props.onChangeDescription(e.target.value);\n      this.handleSubmit();\n    }\n  };\n\n  handleSubmit = () => {\n    this.props.onSave(this.props.description, this.props.focusX, this.props.focusY);\n  };\n\n  getCloseConfirmationMessage = () => {\n    const { intl, dirty } = this.props;\n\n    if (dirty) {\n      return {\n        message: intl.formatMessage(messages.discardMessage),\n        confirm: intl.formatMessage(messages.discardConfirm),\n      };\n    } else {\n      return null;\n    }\n  };\n\n  setRef = c => {\n    this.node = c;\n  };\n\n  handleTextDetection = () => {\n    this._detectText();\n  };\n\n  _detectText = (refreshCache = false) => {\n    const { media } = this.props;\n\n    this.setState({ detecting: true });\n\n    fetchTesseract().then(({ createWorker }) => {\n      const worker = createWorker({\n        workerPath: tesseractWorkerPath,\n        corePath: tesseractCorePath,\n        langPath: `${assetHost}/ocr/lang-data/`,\n        logger: ({ status, progress }) => {\n          if (status === 'recognizing text') {\n            this.setState({ ocrStatus: 'detecting', progress });\n          } else {\n            this.setState({ ocrStatus: 'preparing', progress });\n          }\n        },\n        cacheMethod: refreshCache ? 'refresh' : 'write',\n      });\n\n      let media_url = media.get('url');\n\n      if (window.URL && URL.createObjectURL) {\n        try {\n          media_url = URL.createObjectURL(media.get('file'));\n        } catch (error) {\n          console.error(error);\n        }\n      }\n\n      return (async () => {\n        await worker.load();\n        await worker.loadLanguage('eng');\n        await worker.initialize('eng');\n        const { data: { text } } = await worker.recognize(media_url);\n        this.setState({ detecting: false });\n        this.props.onChangeDescription(removeExtraLineBreaks(text));\n        await worker.terminate();\n      })().catch((e) => {\n        if (refreshCache) {\n          throw e;\n        } else {\n          this._detectText(true);\n        }\n      });\n    }).catch((e) => {\n      console.error(e);\n      this.setState({ detecting: false });\n    });\n  };\n\n  handleThumbnailChange = e => {\n    if (e.target.files.length > 0) {\n      this.props.onSelectThumbnail(e.target.files);\n    }\n  };\n\n  setFileInputRef = c => {\n    this.fileInput = c;\n  };\n\n  handleFileInputClick = () => {\n    this.fileInput.click();\n  };\n\n  render () {\n    const { media, intl, account, onClose, isUploadingThumbnail, description, lang, focusX, focusY, dirty, is_changing_upload } = this.props;\n    const { dragging, detecting, progress, ocrStatus } = this.state;\n    const x = (focusX /  2) + .5;\n    const y = (focusY / -2) + .5;\n\n    const width  = media.getIn(['meta', 'original', 'width']) || null;\n    const height = media.getIn(['meta', 'original', 'height']) || null;\n    const focals = ['image', 'gifv'].includes(media.get('type'));\n    const thumbnailable = ['audio', 'video'].includes(media.get('type'));\n\n    const previewRatio  = 16/9;\n    const previewWidth  = 200;\n    const previewHeight = previewWidth / previewRatio;\n\n    let descriptionLabel = null;\n\n    if (media.get('type') === 'audio') {\n      descriptionLabel = <FormattedMessage id='upload_form.audio_description' defaultMessage='Describe for people who are hard of hearing' />;\n    } else if (media.get('type') === 'video') {\n      descriptionLabel = <FormattedMessage id='upload_form.video_description' defaultMessage='Describe for people who are deaf, hard of hearing, blind or have low vision' />;\n    } else {\n      descriptionLabel = <FormattedMessage id='upload_form.description' defaultMessage='Describe for people who are blind or have low vision' />;\n    }\n\n    let ocrMessage = '';\n    if (ocrStatus === 'detecting') {\n      ocrMessage = <FormattedMessage id='upload_modal.analyzing_picture' defaultMessage='Analyzing picture' />;\n    } else {\n      ocrMessage = <FormattedMessage id='upload_modal.preparing_ocr' defaultMessage='Preparing OCR' />;\n    }\n\n    return (\n      <div className='modal-root__modal report-modal' style={{ maxWidth: 960 }}>\n        <div className='report-modal__target'>\n          <IconButton className='report-modal__close' title={intl.formatMessage(messages.close)} icon='times' onClick={onClose} size={20} />\n          <FormattedMessage id='upload_modal.edit_media' defaultMessage='Edit media' />\n        </div>\n\n        <div className='report-modal__container'>\n          <div className='report-modal__comment'>\n            {focals && <p><FormattedMessage id='upload_modal.hint' defaultMessage='Click or drag the circle on the preview to choose the focal point which will always be in view on all thumbnails.' /></p>}\n\n            {thumbnailable && (\n              <React.Fragment>\n                <label className='setting-text-label' htmlFor='upload-modal__thumbnail'><FormattedMessage id='upload_form.thumbnail' defaultMessage='Change thumbnail' /></label>\n\n                <Button disabled={isUploadingThumbnail || !media.get('unattached')} text={intl.formatMessage(messages.chooseImage)} onClick={this.handleFileInputClick} />\n\n                <label>\n                  <span style={{ display: 'none' }}>{intl.formatMessage(messages.chooseImage)}</span>\n\n                  <input\n                    id='upload-modal__thumbnail'\n                    ref={this.setFileInputRef}\n                    type='file'\n                    accept='image/png,image/jpeg'\n                    onChange={this.handleThumbnailChange}\n                    style={{ display: 'none' }}\n                    disabled={isUploadingThumbnail || is_changing_upload}\n                  />\n                </label>\n\n                <hr className='setting-divider' />\n              </React.Fragment>\n            )}\n\n            <label className='setting-text-label' htmlFor='upload-modal__description'>\n              {descriptionLabel}\n            </label>\n\n            <div className='setting-text__wrapper'>\n              <Textarea\n                id='upload-modal__description'\n                className='setting-text light'\n                value={detecting ? '' : description}\n                lang={lang}\n                onChange={this.handleChange}\n                onKeyDown={this.handleKeyDown}\n                disabled={detecting || is_changing_upload}\n                autoFocus\n              />\n\n              <div className='setting-text__modifiers'>\n                <UploadProgress progress={progress * 100} active={detecting} icon='file-text-o' message={ocrMessage} />\n              </div>\n            </div>\n\n            <div className='setting-text__toolbar'>\n              <button disabled={detecting || media.get('type') !== 'image' || is_changing_upload} className='link-button' onClick={this.handleTextDetection}><FormattedMessage id='upload_modal.detect_text' defaultMessage='Detect text from picture' /></button>\n              <CharacterCounter max={1500} text={detecting ? '' : description} />\n            </div>\n\n            <Button disabled={!dirty || detecting || isUploadingThumbnail || length(description) > 1500 || is_changing_upload} text={intl.formatMessage(is_changing_upload ? messages.applying : messages.apply)} onClick={this.handleSubmit} />\n          </div>\n\n          <div className='focal-point-modal__content'>\n            {focals && (\n              <div className={classNames('focal-point', { dragging })} ref={this.setRef} onMouseDown={this.handleMouseDown} onTouchStart={this.handleTouchStart}>\n                {media.get('type') === 'image' && <ImageLoader src={media.get('url')} width={width} height={height} alt='' />}\n                {media.get('type') === 'gifv' && <GIFV src={media.get('url')} width={width} height={height} />}\n\n                <div className='focal-point__preview'>\n                  <strong><FormattedMessage id='upload_modal.preview_label' defaultMessage='Preview ({ratio})' values={{ ratio: '16:9' }} /></strong>\n                  <div style={{ width: previewWidth, height: previewHeight, backgroundImage: `url(${media.get('preview_url')})`, backgroundSize: 'cover', backgroundPosition: `${x * 100}% ${y * 100}%` }} />\n                </div>\n\n                <div className='focal-point__reticle' style={{ top: `${y * 100}%`, left: `${x * 100}%` }} />\n                <div className='focal-point__overlay' />\n              </div>\n            )}\n\n            {media.get('type') === 'video' && (\n              <Video\n                preview={media.get('preview_url')}\n                frameRate={media.getIn(['meta', 'original', 'frame_rate'])}\n                blurhash={media.get('blurhash')}\n                src={media.get('url')}\n                detailed\n                inline\n                editable\n              />\n            )}\n\n            {media.get('type') === 'audio' && (\n              <Audio\n                src={media.get('url')}\n                duration={media.getIn(['meta', 'original', 'duration'], 0)}\n                height={150}\n                poster={media.get('preview_url') || account.get('avatar_static')}\n                backgroundColor={media.getIn(['meta', 'colors', 'background'])}\n                foregroundColor={media.getIn(['meta', 'colors', 'foreground'])}\n                accentColor={media.getIn(['meta', 'colors', 'accent'])}\n                editable\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport { preferenceLink } from 'flavours/glitch/utils/backend_links';\nimport Button from 'flavours/glitch/components/button';\nimport Icon from 'flavours/glitch/components/icon';\nimport illustration from 'flavours/glitch/images/logo_warn_glitch.svg';\n\nconst messages = defineMessages({\n  discardChanges: { id: 'confirmations.deprecated_settings.confirm', defaultMessage: 'Use Mastodon preferences' },\n  user_setting_expand_spoilers: { id: 'settings.enable_content_warnings_auto_unfold', defaultMessage: 'Automatically unfold content-warnings' },\n  user_setting_disable_swiping: { id: 'settings.swipe_to_change_columns', defaultMessage: 'Allow swiping to change columns (Mobile only)' },\n});\n\nexport default @injectIntl\nclass DeprecatedSettingsModal extends React.PureComponent {\n\n  static propTypes = {\n    settings: ImmutablePropTypes.list.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  componentDidMount() {\n    this.button.focus();\n  }\n\n  handleClick = () => {\n    this.props.onConfirm();\n    this.props.onClose();\n  };\n\n  setRef = (c) => {\n    this.button = c;\n  };\n\n  render () {\n    const { settings, intl } = this.props;\n\n    return (\n      <div className='modal-root__modal confirmation-modal'>\n        <div className='confirmation-modal__container'>\n\n          <img src={illustration} className='modal-warning' alt='' />\n\n          <FormattedMessage\n            id='confirmations.deprecated_settings.message'\n            defaultMessage='Some of the glitch-soc device-specific {app_settings} you are using have been replaced by Mastodon {preferences} and will be overriden:'\n            values={{\n              app_settings: (\n                <strong className='deprecated-settings-label'>\n                  <Icon id='cogs' /> <FormattedMessage id='navigation_bar.app_settings' defaultMessage='App settings' />\n                </strong>\n              ),\n              preferences: (\n                <strong className='deprecated-settings-label'>\n                  <Icon id='cog' /> <FormattedMessage id='navigation_bar.preferences' defaultMessage='Preferences' />\n                </strong>\n              ),\n            }}\n          />\n\n          <div className='deprecated-settings-info'>\n            <ul>\n              { settings.map((setting_name) => (\n                <li>\n                  <a href={preferenceLink(setting_name)}><FormattedMessage {...messages[setting_name]} /></a>\n                </li>\n              )) }\n            </ul>\n          </div>\n        </div>\n\n        <div>\n          <div className='confirmation-modal__action-bar'>\n            <div />\n            <Button text={intl.formatMessage(messages.discardChanges)} onClick={this.handleClick} ref={this.setRef} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport ImageLoader from './image_loader';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n});\n\nexport default @injectIntl\nclass ImageModal extends React.PureComponent {\n\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  state = {\n    navigationHidden: false,\n  };\n\n  toggleNavigation = () => {\n    this.setState(prevState => ({\n      navigationHidden: !prevState.navigationHidden,\n    }));\n  };\n\n  render () {\n    const { intl, src, alt, onClose } = this.props;\n    const { navigationHidden } = this.state;\n\n    const navigationClassName = classNames('media-modal__navigation', {\n      'media-modal__navigation--hidden': navigationHidden,\n    });\n\n    return (\n      <div className='modal-root__modal media-modal'>\n        <div className='media-modal__closer' role='presentation' onClick={onClose} >\n          <ImageLoader\n            src={src}\n            width={400}\n            height={400}\n            alt={alt}\n            onClick={this.toggleNavigation}\n          />\n        </div>\n\n        <div className={navigationClassName}>\n          <IconButton className='media-modal__close' title={intl.formatMessage(messages.close)} icon='times' onClick={onClose} size={40} />\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getScrollbarWidth } from 'flavours/glitch/utils/scrollbar';\nimport Base from 'flavours/glitch/components/modal_root';\nimport BundleContainer from '../containers/bundle_container';\nimport BundleModalError from './bundle_modal_error';\nimport ModalLoading from './modal_loading';\nimport ActionsModal from './actions_modal';\nimport MediaModal from './media_modal';\nimport VideoModal from './video_modal';\nimport BoostModal from './boost_modal';\nimport FavouriteModal from './favourite_modal';\nimport AudioModal from './audio_modal';\nimport DoodleModal from './doodle_modal';\nimport ConfirmationModal from './confirmation_modal';\nimport FocalPointModal from './focal_point_modal';\nimport DeprecatedSettingsModal from './deprecated_settings_modal';\nimport ImageModal from './image_modal';\nimport {\n  OnboardingModal,\n  MuteModal,\n  BlockModal,\n  ReportModal,\n  SettingsModal,\n  EmbedModal,\n  ListEditor,\n  ListAdder,\n  PinnedAccountsEditor,\n  CompareHistoryModal,\n  FilterModal,\n  InteractionModal,\n  SubscribedLanguagesModal,\n  ClosedRegistrationsModal,\n} from 'flavours/glitch/features/ui/util/async-components';\nimport { Helmet } from 'react-helmet';\n\nconst MODAL_COMPONENTS = {\n  'MEDIA': () => Promise.resolve({ default: MediaModal }),\n  'ONBOARDING': OnboardingModal,\n  'VIDEO': () => Promise.resolve({ default: VideoModal }),\n  'AUDIO': () => Promise.resolve({ default: AudioModal }),\n  'IMAGE': () => Promise.resolve({ default: ImageModal }),\n  'BOOST': () => Promise.resolve({ default: BoostModal }),\n  'FAVOURITE': () => Promise.resolve({ default: FavouriteModal }),\n  'DOODLE': () => Promise.resolve({ default: DoodleModal }),\n  'CONFIRM': () => Promise.resolve({ default: ConfirmationModal }),\n  'MUTE': MuteModal,\n  'BLOCK': BlockModal,\n  'REPORT': ReportModal,\n  'SETTINGS': SettingsModal,\n  'DEPRECATED_SETTINGS': () => Promise.resolve({ default: DeprecatedSettingsModal }),\n  'ACTIONS': () => Promise.resolve({ default: ActionsModal }),\n  'EMBED': EmbedModal,\n  'LIST_EDITOR': ListEditor,\n  'FOCAL_POINT': () => Promise.resolve({ default: FocalPointModal }),\n  'LIST_ADDER': ListAdder,\n  'PINNED_ACCOUNTS_EDITOR': PinnedAccountsEditor,\n  'COMPARE_HISTORY': CompareHistoryModal,\n  'FILTER': FilterModal,\n  'SUBSCRIBED_LANGUAGES': SubscribedLanguagesModal,\n  'INTERACTION': InteractionModal,\n  'CLOSED_REGISTRATIONS': ClosedRegistrationsModal,\n};\n\nexport default class ModalRoot extends React.PureComponent {\n\n  static propTypes = {\n    type: PropTypes.string,\n    props: PropTypes.object,\n    onClose: PropTypes.func.isRequired,\n    ignoreFocus: PropTypes.bool,\n  };\n\n  state = {\n    backgroundColor: null,\n  };\n\n  componentDidUpdate () {\n    if (this.props.type) {\n      document.body.classList.add('with-modals--active');\n      document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n    } else {\n      document.body.classList.remove('with-modals--active');\n      document.documentElement.style.marginRight = 0;\n    }\n  }\n\n  setBackgroundColor = color => {\n    this.setState({ backgroundColor: color });\n  };\n\n  renderLoading = modalId => () => {\n    return ['MEDIA', 'VIDEO', 'BOOST', 'FAVOURITE', 'DOODLE', 'CONFIRM', 'ACTIONS'].indexOf(modalId) === -1 ? <ModalLoading /> : null;\n  };\n\n  renderError = (props) => {\n    const { onClose } = this.props;\n\n    return <BundleModalError {...props} onClose={onClose} />;\n  };\n\n  handleClose = (ignoreFocus = false) => {\n    const { onClose } = this.props;\n    let message = null;\n    try {\n      message = this._modal?.getWrappedInstance?.().getCloseConfirmationMessage?.();\n    } catch (_) {\n      // injectIntl defines `getWrappedInstance` but errors out if `withRef`\n      // isn't set.\n      // This would be much smoother with react-intl 3+ and `forwardRef`.\n    }\n    onClose(message, ignoreFocus);\n  };\n\n  setModalRef = (c) => {\n    this._modal = c;\n  };\n\n  // prevent closing of modal when clicking the overlay\n  noop = () => {};\n\n  render () {\n    const { type, props, ignoreFocus } = this.props;\n    const { backgroundColor } = this.state;\n    const visible = !!type;\n\n    return (\n      <Base backgroundColor={backgroundColor} onClose={props && props.noClose ? this.noop : this.handleClose} noEsc={props ? props.noEsc : false} ignoreFocus={ignoreFocus}>\n        {visible && (\n          <>\n            <BundleContainer fetchComponent={MODAL_COMPONENTS[type]} loading={this.renderLoading(type)} error={this.renderError} renderDelay={200}>\n              {(SpecificComponent) => <SpecificComponent {...props} onChangeBackgroundColor={this.setBackgroundColor} onClose={this.handleClose} ref={this.setModalRef} />}\n            </BundleContainer>\n\n            <Helmet>\n              <meta name='robots' content='noindex' />\n            </Helmet>\n          </>\n        )}\n      </Base>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport { openModal, closeModal } from 'flavours/glitch/actions/modal';\nimport ModalRoot from '../components/modal_root';\n\nconst mapStateToProps = state => ({\n  ignoreFocus: state.getIn(['modal', 'ignoreFocus']),\n  type: state.getIn(['modal', 'stack', 0, 'modalType'], null),\n  props: state.getIn(['modal', 'stack', 0, 'modalProps'], {}),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  onClose (confirmationMessage, ignoreFocus = false) {\n    if (confirmationMessage) {\n      dispatch(\n        openModal('CONFIRM', {\n          message: confirmationMessage.message,\n          confirm: confirmationMessage.confirm,\n          onConfirm: () => dispatch(closeModal(undefined, { ignoreFocus })),\n        }),\n      );\n    } else {\n      dispatch(closeModal(undefined, { ignoreFocus }));\n    }\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalRoot);\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\nmodule.exports = baseAssignValue;","var getNative = require('./_getNative');\nvar defineProperty = function () {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}();\nmodule.exports = defineProperty;","var baseFor = require('./_baseFor'),\n  keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\nmodule.exports = baseForOwn;","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\nmodule.exports = baseFor;","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function (object, iteratee, keysFunc) {\n    var index = -1,\n      iterable = Object(object),\n      props = keysFunc(object),\n      length = props.length;\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\nmodule.exports = createBaseFor;","var baseMatches = require('./_baseMatches'),\n  baseMatchesProperty = require('./_baseMatchesProperty'),\n  identity = require('./identity'),\n  isArray = require('./isArray'),\n  property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);\n  }\n  return property(value);\n}\nmodule.exports = baseIteratee;","var baseIsMatch = require('./_baseIsMatch'),\n  getMatchData = require('./_getMatchData'),\n  matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function (object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\nmodule.exports = baseMatches;","var Stack = require('./_Stack'),\n  baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n  COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n    length = index,\n    noCustomizer = !customizer;\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n      objValue = object[key],\n      srcValue = data[1];\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack();\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) : result)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\nmodule.exports = baseIsMatch;","var isStrictComparable = require('./_isStrictComparable'),\n  keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n    length = result.length;\n  while (length--) {\n    var key = result[length],\n      value = object[key];\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\nmodule.exports = getMatchData;","var baseIsEqual = require('./_baseIsEqual'),\n  get = require('./get'),\n  hasIn = require('./hasIn'),\n  isKey = require('./_isKey'),\n  isStrictComparable = require('./_isStrictComparable'),\n  matchesStrictComparable = require('./_matchesStrictComparable'),\n  toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n  COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function (object) {\n    var objValue = get(object, path);\n    return objValue === undefined && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\nmodule.exports = baseMatchesProperty;","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\nmodule.exports = get;","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function (string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function (match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : number || match);\n  });\n  return result;\n});\nmodule.exports = stringToPath;","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function (key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n  var cache = result.cache;\n  return result;\n}\nmodule.exports = memoizeCapped;","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || resolver != null && typeof resolver != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function () {\n    var args = arguments,\n      key = resolver ? resolver.apply(this, args) : args[0],\n      cache = memoized.cache;\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache)();\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\nmodule.exports = memoize;","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\nmodule.exports = toString;","var Symbol = require('./_Symbol'),\n  arrayMap = require('./_arrayMap'),\n  isArray = require('./isArray'),\n  isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n  symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result;\n}\nmodule.exports = baseToString;","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n    length = array == null ? 0 : array.length,\n    result = Array(length);\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\nmodule.exports = arrayMap;","var baseHasIn = require('./_baseHasIn'),\n  hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\nmodule.exports = hasIn;","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\nmodule.exports = baseHasIn;","var castPath = require('./_castPath'),\n  isArguments = require('./isArguments'),\n  isArray = require('./isArray'),\n  isIndex = require('./_isIndex'),\n  isLength = require('./isLength'),\n  toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n  var index = -1,\n    length = path.length,\n    result = false;\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) && (isArray(object) || isArguments(object));\n}\nmodule.exports = hasPath;","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\nmodule.exports = identity;","var baseProperty = require('./_baseProperty'),\n  basePropertyDeep = require('./_basePropertyDeep'),\n  isKey = require('./_isKey'),\n  toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\nmodule.exports = property;","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function (object) {\n    return object == null ? undefined : object[key];\n  };\n}\nmodule.exports = baseProperty;","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function (object) {\n    return baseGet(object, path);\n  };\n}\nmodule.exports = basePropertyDeep;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\n// make a class for Point\nvar Point = function () {\n  function Point(x, y) {\n    _classCallCheck(this, Point);\n    this._x = x;\n    this._y = y;\n  }\n  _createClass(Point, [{\n    key: \"set\",\n    value: function set(x, y) {\n      this._x = x;\n      this._y = y;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this._x;\n    },\n    set: function set(x) {\n      this._x = x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(y) {\n      this._y = y;\n    }\n  }]);\n  return Point;\n}();\n\n// make a class for the mouse data\n\nvar Mouse = function (_Point) {\n  _inherits(Mouse, _Point);\n  function Mouse() {\n    _classCallCheck(this, Mouse);\n    var _this = _possibleConstructorReturn(this, (Mouse.__proto__ || Object.getPrototypeOf(Mouse)).call(this, 0, 0));\n    _this._down = false;\n    _this._px = 0;\n    _this._py = 0;\n    return _this;\n  }\n  _createClass(Mouse, [{\n    key: \"down\",\n    get: function get() {\n      return this._down;\n    },\n    set: function set(d) {\n      this._down = d;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this._x;\n    },\n    set: function set(x) {\n      this._x = x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(y) {\n      this._y = y;\n    }\n  }, {\n    key: \"px\",\n    get: function get() {\n      return this._px;\n    },\n    set: function set(px) {\n      this._px = px;\n    }\n  }, {\n    key: \"py\",\n    get: function get() {\n      return this._py;\n    },\n    set: function set(py) {\n      this._py = py;\n    }\n  }]);\n  return Mouse;\n}(Point);\nexports.default = Mouse;"],"sourceRoot":""}