{"version":3,"sources":["webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/follow_requests/components/account_authorize.jsx","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/follow_requests/containers/account_authorize_container.js","webpack:///app/javascript/home/mastodon/live/app/javascript/flavours/glitch/features/follow_requests/index.jsx"],"names":["messages","defineMessages","authorize","reject","AccountAuthorize","injectIntl","_class2","ImmutablePureComponent","render","intl","account","onAuthorize","onReject","this","props","content","__html","get","_jsx","className","Permalink","href","to","Avatar","size","DisplayName","dangerouslySetInnerHTML","IconButton","title","formatMessage","icon","onClick","propTypes","ImmutablePropTypes","map","isRequired","PropTypes","func","object","_class","connect","makeMapStateToProps","getAccount","makeGetAccount","mapStateToProps","state","id","mapDispatchToProps","dispatch","_ref","authorizeFollowRequest","rejectFollowRequest","heading","FollowRequests","accountIds","getIn","isLoading","hasMore","locked","me","domain","_dec","constructor","arguments","handleLoadMore","_debounce","expandFollowRequests","leading","componentWillMount","fetchFollowRequests","multiColumn","emptyMessage","FormattedMessage","defaultMessage","unlockedPrependMessage","values","Column","bindToDocument","name","ColumnBackButtonSlim","ScrollableList","scrollKey","onLoadMore","showLoading","prepend","AccountAuthorizeContainer","Helmet","params","bool","list","string"],"mappings":"0SAUA,MAAMA,EAAWC,YAAe,CAC9BC,UAAU,CAAD,0DACTC,OAAO,CAAD,sDACL,IAGGC,EADUC,cAAUC,EAAX,cACgBC,IAS7BC,SACE,MAAM,KAAEC,EAAI,QAAEC,EAAO,YAAEC,EAAW,SAAEC,GAAaC,KAAKC,MAChDC,EAAU,CAAEC,OAAQN,EAAQO,IAAI,mBAEtC,OACEC,YAAA,OAAKC,UAAU,mCAA4B,EACzCD,YAAA,OAAKC,UAAU,0BAAmB,EAChCD,YAACE,IAAS,CAACC,KAAMX,EAAQO,IAAI,OAAQK,GAAK,KAAIZ,EAAQO,IAAI,UAAWE,UAAU,sCAA+B,EAC5GD,YAAA,OAAKC,UAAU,kCAA2B,EAACD,YAACK,IAAM,CAACb,QAASA,EAASc,KAAM,MAC3EN,YAACO,IAAW,CAACf,QAASA,KAGxBQ,YAAA,OAAKC,UAAU,qCAAqCO,wBAAyBX,KAG/EG,YAAA,OAAKC,UAAU,uBAAgB,EAC7BD,YAAA,OAAKC,UAAU,+BAAwB,EAACD,YAACS,IAAU,CAACC,MAAOnB,EAAKoB,cAAc7B,EAASE,WAAY4B,KAAK,QAAQC,QAASpB,KACzHO,YAAA,OAAKC,UAAU,+BAAwB,EAACD,YAACS,IAAU,CAACC,MAAOnB,EAAKoB,cAAc7B,EAASG,QAAS2B,KAAK,QAAQC,QAASnB,UAxBvHoB,UAAY,CACjBtB,QAASuB,IAAmBC,IAAIC,WAChCxB,YAAayB,IAAUC,KAAKF,WAC5BvB,SAAUwB,IAAUC,KAAKF,WACzB1B,KAAM2B,IAAUE,OAAOH,YAPDI,EAQvBjC,KAAAiC,E,YCEYC,I,IAAAA,qBApBaC,KAC1B,MAAMC,EAAaC,cAMnB,MAJwBC,CAACC,EAAO/B,KAAK,CACnCJ,QAASgC,EAAWG,EAAO/B,EAAMgC,SAMVC,CAACC,EAAQC,KAAA,IAAE,GAAEH,GAAIG,EAAA,MAAM,CAChDtC,cACEqC,EAASE,YAAuBJ,KAGlClC,WACEoC,EAASG,aAAoBL,QAIlBN,CAAiDpC,G,2BCVhE,MAAMJ,EAAWC,YAAe,CAC9BmD,QAAQ,CAAD,gEASN,IAIGC,EAFUb,mBARQK,IAAK,CAC3BS,WAAYT,EAAMU,MAAM,CAAC,aAAc,kBAAmB,UAC1DC,UAAWX,EAAMU,MAAM,CAAC,aAAc,kBAAmB,cAAc,GACvEE,UAAWZ,EAAMU,MAAM,CAAC,aAAc,kBAAmB,SACzDG,SAAUb,EAAMU,MAAM,CAAC,WAAYI,IAAI,WACvCC,OAAQf,EAAMU,MAAM,CAAC,OAAQ,cAGSM,CAAAtB,EACvClC,aAAUC,EADI,cAEcC,IAAuBuD,cAAA,SAAAC,WAAA,KAkBlDC,eAAiBC,KAAS,KACxBpD,KAAKC,MAAMkC,SAASkB,iBACnB,IAAK,CAAEC,SAAS,IANnBC,qBACEvD,KAAKC,MAAMkC,SAASqB,eAOtB7D,SACE,MAAM,KAAEC,EAAI,WAAE6C,EAAU,QAAEG,EAAO,YAAEa,EAAW,OAAEZ,EAAM,OAAEE,EAAM,UAAEJ,GAAc3C,KAAKC,MAE7EyD,EAAerD,YAACsD,IAAgB,CAAC1B,GAAG,+BAA+B2B,eAAe,wFAClFC,GAA0BhB,GAAUJ,EAAW9B,KAAO,GAC1DN,YAAA,OAAKC,UAAU,6CAAsC,EACnDD,YAACsD,IAAgB,CACf1B,GAAG,uCACH2B,eAAe,4IACfE,OAAQ,CAAEf,OAAQA,MAKxB,OACE1C,YAAC0D,IAAM,CAACC,gBAAiBP,EAAaQ,KAAK,kBAAkBhD,KAAK,YAAYsB,QAAS3C,EAAKoB,cAAc7B,EAASoD,eAAS,EAC1HlC,YAAC6D,IAAoB,IAErB7D,YAAC8D,IAAc,CACbC,UAAU,kBACVC,WAAYrE,KAAKmD,eACjBP,QAASA,EACTD,UAAWA,EACX2B,YAAa3B,GAAiC,IAApBF,EAAW9B,KACrC+C,aAAcA,EACdM,gBAAiBP,EACjBc,QAASV,QAAuB,EAE/BpB,EAAWpB,KAAIY,GACd5B,YAACmE,EAAyB,CAAUvC,GAAIA,GAARA,MAIpC5B,YAACoE,IAAM,UACLpE,YAAA,QAAM4D,KAAK,SAAS/D,QAAQ,gBAMrCT,EA5DQ0B,UAAY,CACjBuD,OAAQnD,IAAUE,OAAOH,WACzBa,SAAUZ,IAAUC,KAAKF,WACzBsB,QAASrB,IAAUoD,KACnBhC,UAAWpB,IAAUoD,KACrBlC,WAAYrB,IAAmBwD,KAC/B/B,OAAQtB,IAAUoD,KAClB5B,OAAQxB,IAAUsD,OAClBjF,KAAM2B,IAAUE,OAAOH,WACvBmC,YAAalC,IAAUoD,MAZhBjD,EAaRjC,KAAAiC","file":"js/flavours/glitch/async/follow_requests-5c73c9e7c38b525cabe0.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport Permalink from 'flavours/glitch/components/permalink';\nimport Avatar from 'flavours/glitch/components/avatar';\nimport DisplayName from 'flavours/glitch/components/display_name';\nimport IconButton from 'flavours/glitch/components/icon_button';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nconst messages = defineMessages({\n  authorize: { id: 'follow_request.authorize', defaultMessage: 'Authorize' },\n  reject: { id: 'follow_request.reject', defaultMessage: 'Reject' },\n});\n\nexport default @injectIntl\nclass AccountAuthorize extends ImmutablePureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.map.isRequired,\n    onAuthorize: PropTypes.func.isRequired,\n    onReject: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { intl, account, onAuthorize, onReject } = this.props;\n    const content = { __html: account.get('note_emojified') };\n\n    return (\n      <div className='account-authorize__wrapper'>\n        <div className='account-authorize'>\n          <Permalink href={account.get('url')} to={`/@${account.get('acct')}`} className='detailed-status__display-name'>\n            <div className='account-authorize__avatar'><Avatar account={account} size={48} /></div>\n            <DisplayName account={account} />\n          </Permalink>\n\n          <div className='account__header__content translate' dangerouslySetInnerHTML={content} />\n        </div>\n\n        <div className='account--panel'>\n          <div className='account--panel__button'><IconButton title={intl.formatMessage(messages.authorize)} icon='check' onClick={onAuthorize} /></div>\n          <div className='account--panel__button'><IconButton title={intl.formatMessage(messages.reject)} icon='times' onClick={onReject} /></div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import { connect } from 'react-redux';\nimport { makeGetAccount } from 'flavours/glitch/selectors';\nimport AccountAuthorize from '../components/account_authorize';\nimport { authorizeFollowRequest, rejectFollowRequest } from 'flavours/glitch/actions/accounts';\n\nconst makeMapStateToProps = () => {\n  const getAccount = makeGetAccount();\n\n  const mapStateToProps = (state, props) => ({\n    account: getAccount(state, props.id),\n  });\n\n  return mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch, { id }) => ({\n  onAuthorize () {\n    dispatch(authorizeFollowRequest(id));\n  },\n\n  onReject () {\n    dispatch(rejectFollowRequest(id));\n  },\n});\n\nexport default connect(makeMapStateToProps, mapDispatchToProps)(AccountAuthorize);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { debounce } from 'lodash';\nimport Column from 'flavours/glitch/features/ui/components/column';\nimport ColumnBackButtonSlim from 'flavours/glitch/components/column_back_button_slim';\nimport AccountAuthorizeContainer from './containers/account_authorize_container';\nimport { fetchFollowRequests, expandFollowRequests } from 'flavours/glitch/actions/accounts';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport ScrollableList from 'flavours/glitch/components/scrollable_list';\nimport { me } from 'flavours/glitch/initial_state';\nimport { Helmet } from 'react-helmet';\n\nconst messages = defineMessages({\n  heading: { id: 'column.follow_requests', defaultMessage: 'Follow requests' },\n});\n\nconst mapStateToProps = state => ({\n  accountIds: state.getIn(['user_lists', 'follow_requests', 'items']),\n  isLoading: state.getIn(['user_lists', 'follow_requests', 'isLoading'], true),\n  hasMore: !!state.getIn(['user_lists', 'follow_requests', 'next']),\n  locked: !!state.getIn(['accounts', me, 'locked']),\n  domain: state.getIn(['meta', 'domain']),\n});\n\nexport default @connect(mapStateToProps)\n@injectIntl\nclass FollowRequests extends ImmutablePureComponent {\n\n  static propTypes = {\n    params: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    hasMore: PropTypes.bool,\n    isLoading: PropTypes.bool,\n    accountIds: ImmutablePropTypes.list,\n    locked: PropTypes.bool,\n    domain: PropTypes.string,\n    intl: PropTypes.object.isRequired,\n    multiColumn: PropTypes.bool,\n  };\n\n  componentWillMount () {\n    this.props.dispatch(fetchFollowRequests());\n  }\n\n  handleLoadMore = debounce(() => {\n    this.props.dispatch(expandFollowRequests());\n  }, 300, { leading: true });\n\n  render () {\n    const { intl, accountIds, hasMore, multiColumn, locked, domain, isLoading } = this.props;\n\n    const emptyMessage = <FormattedMessage id='empty_column.follow_requests' defaultMessage=\"You don't have any follow requests yet. When you receive one, it will show up here.\" />;\n    const unlockedPrependMessage = !locked && accountIds.size > 0 && (\n      <div className='follow_requests-unlocked_explanation'>\n        <FormattedMessage\n          id='follow_requests.unlocked_explanation'\n          defaultMessage='Even though your account is not locked, the {domain} staff thought you might want to review follow requests from these accounts manually.'\n          values={{ domain: domain }}\n        />\n      </div>\n    );\n\n    return (\n      <Column bindToDocument={!multiColumn} name='follow-requests' icon='user-plus' heading={intl.formatMessage(messages.heading)}>\n        <ColumnBackButtonSlim />\n\n        <ScrollableList\n          scrollKey='follow_requests'\n          onLoadMore={this.handleLoadMore}\n          hasMore={hasMore}\n          isLoading={isLoading}\n          showLoading={isLoading && accountIds.size === 0}\n          emptyMessage={emptyMessage}\n          bindToDocument={!multiColumn}\n          prepend={unlockedPrependMessage}\n        >\n          {accountIds.map(id =>\n            <AccountAuthorizeContainer key={id} id={id} />,\n          )}\n        </ScrollableList>\n\n        <Helmet>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n"],"sourceRoot":""}